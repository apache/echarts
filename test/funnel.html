<html>
    <head>
        <meta charset="utf-8">
        <script src="esl.js"></script>
        <script src="config.js"></script>
        <script src="lib/dat.gui.min.js"></script>
    </head>
    <body>
        <style>
            html, body, #main {
                width: 100%;
                height: 100%;
                margin: 0;
            }
        </style>
        <div id="main"></div>
        <script>

            require([
                'echarts',
                'echarts/chart/funnel',
                'echarts/component/legend',
                'echarts/component/grid',
                'echarts/component/tooltip',
                'echarts/component/title'
            ], function (echarts) {

                var chart = echarts.init(document.getElementById('main'), null, {
                    renderer: 'canvas'
                });

                var itemStyle = {
                    normal: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowOffsetY: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.4)',
                        borderWidth: 0
                    },
                    emphasis: {
                        shadowBlur: 40,
                        shadowOffsetX: 0,
                        shadowOffsetY: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.4)',
                        borderWidth: 2
                    }
                };

                chart.setOption({
                    title : {
                        text: '漏斗图',
                        subtext: '纯属虚构'
                    },
                    tooltip : {
                        trigger: 'item',
                        formatter: '{a} <br/>{b} : {c}%'
                    },
                    legend: {
                        data : ['展现','点击','访问','咨询','订单']
                    },
                    series: [
                        {
                            name:'漏斗图',
                            type:'funnel',
                            gap: 3,
                            itemStyle: itemStyle,
                            width: '50%',
                            sort: 'ascending',
                            data:[
                                {value:60, name:'访问'},
                                {value:40, name:'咨询'},
                                {value:20, name:'订单'},
                                {value:80, name:'点击'},
                                {value:100, name:'展现'}
                            ]
                        }
                    ]
                });

                var config = {
                    sort: 'ascending'
                };

                var gui = new dat.GUI();
                gui.add(config, 'sort', ['descending', 'ascending'])
                    .onChange(function (value) {
                        chart.setOption({
                            series: [{
                                name: 'Les Miserables',
                                sort: value
                            }]
                        });
                    });
            });

        </script>
    </body>
</html>