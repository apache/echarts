{"version":3,"sources":["unknown"],"names":["global","factory","exports","module","define","amd","self","echarts","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__spreadArrays","s","i","il","arguments","length","r","k","a","j","jl","Browser","firefox","ie","edge","weChat","Env","browser","node","wxa","worker","canvasSupported","svgSupported","touchEventsSupported","pointerEventsSupported","domSupported","env","wx","getSystemInfoSync","document","navigator","detect","userAgent","ua","match","test","version","createElement","getContext","SVGRect","window","BUILTIN_OBJECT","TYPED_ARRAY","objToString","toString","arrayProto","nativeForEach","forEach","nativeFilter","filter","nativeSlice","slice","nativeMap","map","ctorFunction","protoFunction","methods","$override","name","fn","idStart","guid","logError","args","_i","console","error","apply","clone","source","result","typeStr","call","isPrimitive","len","Ctor","from","isDom","key","merge","target","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","mergeAll","targetAndSources","extend","assign","defaults","overlay","keysArr","keys","createCanvas","indexOf","array","value","inherits","clazz","baseClazz","clazzPrototype","F","prop","superClass","mixin","override","getOwnPropertyNames","keyList","isArrayLike","data","each","arr","cb","context","push","reduce","memo","find","obj","bindPolyfill","func","concat","bind","isFunction","curry","isString","isStringSafe","isNumber","type","isTypedArray","nodeType","ownerDocument","isGradientObject","colorStops","isPatternObject","image","isRegExp","eqNaN","retrieve","retrieve2","value0","value1","retrieve3","value2","normalizeCssArray","val","assert","condition","message","Error","trim","str","replace","primitiveKey","setAsPrimitive","HashMap","isArr","thisMap","visit","set","get","removeKey","createHashMap","concatArray","newArray","offset","createObject","proto","properties","StyleCtor","hasOwn","own","noop","zrUtil","freeze","x","y","copy","out","v","clone$1","add","v1","v2","scaleAndAdd","sub","Math","sqrt","lenSquare","lengthSquare","mul","div","dot","scale","normalize","distance","dist","distanceSquare","distSquare","negate","lerp","t","applyTransform","m","min","max","vector","Param","e","topTarget","Draggable","handler","on","_dragStart","_drag","_dragEnd","draggingTarget","draggable","parent","_draggingTarget","dragging","_x","offsetX","_y","offsetY","dispatchToElement","event","dx","dy","drift","dropTarget","findHover","lastDropTarget","_dropTarget","Eventful","eventProcessors","_$eventProcessor","query","_$handlers","_h","eventProcessor","normalizeQuery","h","wrap","ctx","callAtLast","zrEventfulCallAtLast","lastIndex","lastWrap","splice","isSilent","eventName","off","eventType","newList","l","trigger","argLen","hItem","afterTrigger","triggerWithContext","LN2","log","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","round","subRowMask","subRowStart","sum","colLocalIdx","colTag","buildTransformer","src","dest","mA","det","vh","srcPointX","srcPointY","pk","EVENT_SAVED_PROP","_calcOut","transformLocalCoord","elFrom","elTarget","inX","inY","transformCoordWithViewport","el","inverse","getBoundingClientRect","isCanvasEl","saved","markers","prepareCoordMarkers","transformer","preparePointerTransformer","propLR","propTB","marker","stl","style","idxLR","idxTB","cssText","join","appendChild","transformerName","oldSrcCoords","srcCoords","destCoords","oldCoordTheSame","rect","ii","left","top","offsetLeft","offsetTop","nodeName","toUpperCase","isDomLevel2","addEventListener","MOUSE_EVENT_REG","_calcOut$1","clientToLocal","calculate","calculateZrXY","layerX","zrX","zrY","layerY","ex","clientX","ey","clientY","box","getNativeEvent","normalizeEvent","isTouch","wheelDelta","getWheelDeltaMayPolyfill","zrDelta","detail","touch","targetTouches","changedTouches","button","which","undefined","rawWheelDelta","deltaX","deltaY","delta","abs","sign","opt","attachEvent","removeEventListener","detachEvent","stop","preventDefault","stopPropagation","cancelBubble","returnValue","isMiddleOrRightButtonOnMouseUpDown","GestureMgr","_track","recognize","root","_doTrack","_recognize","clear","touches","trackItem","points","pos","recognizers","gestureInfo","dist$1","pointPair","center","pinch","tracks","trackLen","pinchEnd","pinchPre","pinchScale","isFinite","pinchCenter","pinchX","pinchY","SILENT","makeEventPacket","eveType","targetInfo","gestureEvent","zrByTouch","stopEvent","EmptyProxy","_super","_this","dispose","setCursor","HoveredResult","handlerNames","Handler","storage","painter","proxy","painterRoot","_hovered","setHandlerProxy","_draggingMgr","mousemove","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","__zr","hovered","hoveredTarget","cursor","mouseout","eventControl","zrEventControl","zrIsToLocalDOM","resize","dispatch","eventArgs","setCursorStyle","cursorStyle","silent","eventKey","eventPacket","__hostTarget","eachOtherLayer","layer","exclude","list","getDisplayList","hoverCheckResult","ignore","isHover","processGesture","stage","_gestureMgr","gestureMgr","dom","res","_downEl","_downPoint","_upEl","displayable","rectHover","clipPath","getClipPath","contain","hostEl","handlerInstance","getWidth","getHeight","DEFAULT_MIN_MERGE","DEFAULT_MIN_GALLOPING","minRunLength","n","makeAscendingRun","lo","hi","compare","runHi","reverseRun","binaryInsertionSort","start","pivot","right","mid","gallopLeft","hint","lastOffset","maxOffset","tmp","gallopRight","TimSort","minGallop","runStart","runLength","stackSize","pushRun","_runStart","_runLength","mergeRuns","mergeAt","forceMergeRuns","start1","length1","start2","length2","mergeLow","mergeHigh","cursor1","cursor2","_minGallop","count1","count2","exit","customCursor","customDest","sort","remaining","ts","minRun","force","invalidZErrorLogged","logInvalidZError","warn","shapeCompareFunc","zlevel","z","z2","Storage","_roots","_displayList","_displayListLen","displayableSortFunc","traverse","update","includeIgnore","displayList","updateDisplayList","roots","_updateAndAddDisplayable","clipPaths","beforeUpdate","__dirty","afterUpdate","userSetClipPath","currentClipPath","parentClipPath","updateTransform","childrenRef","children","child","markRedraw","disp","__clipPaths","isNaN","textGuide","getTextGuideLine","textEl","getTextContent","addRoot","delRoot","idx","delAllRoots","getRoots","requestAnimationFrame","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","setTimeout","requestAnimationFrame$1","easing","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","cos","PI","sinusoidalOut","sin","sinusoidalInOut","exponentialIn","pow","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","elasticIn","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","Clip","opts","_initialized","_startTime","_pausedTime","_paused","_life","life","_delay","delay","loop","gap","onframe","ondestroy","onrestart","step","globalTime","deltaTime","percent","easing$1","easingFunc","schedule","_restart","remainder","pause","resume","Entry","LinkedList","_len","insert","entry","insertEntry","head","tail","next","prev","remove","LRU","maxSize","_list","_maxSize","_map","put","removed","_lastRemovedEntry","leastUsedEntry","kCSSColorTable","clampCssByte","clampCssAngle","clampCssFloat","f","parseCssInt","charAt","parseFloat","parseInt","parseCssFloat","cssHueToRgb","m1","m2","lerpNumber","setRgba","g","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","parse","cached","toLowerCase","iv","substr","op","ep","fname","params","split","alpha","pop","hsla2rgba","hsla","rgba","rgba2hsla","R","G","B","vMin","vMax","L","H","S","deltaR","deltaG","deltaB","lift","color","level","colorArr","stringify","toHex","fastLerp","normalizedValue","colors","leftIndex","floor","rightIndex","ceil","leftColor","rightColor","dv","fastMapToColor","lerp$1","fullOutput","mapToColor","modifyHSL","modifyAlpha","arrColor","lum","backgroundLum","random","arraySlice","interpolateNumber","p0","p1","interpolate1DArray","interpolate2DArray","len2","add1DArray","add2DArray","fillArray","val0","val1","arrDim","arr0","arr1","arr0Len","arr1Len","isPreviousLarger","is1DArraySame","catmullRomInterpolate","p2","p3","t2","t3","v0","catmullRomInterpolate1DArray","catmullRomInterpolate2DArray","cloneValue","ret","rgba2String","guessArrayDim","tmpRgba","Track","propName","keyframes","maxTime","interpolable","_needsSort","_isAllValueEqual","_lastFrame","_lastFramePercent","isFinished","_finished","setFinished","needsAnimate","getAdditiveTrack","_additiveTrack","addKeyframe","time","arrayDim","lastFrame","colorArray","isValueColor","kf","prepare","additiveTrack","kfs","kfsLen","lastKf","startValue","additiveValue","isAdditive","valueKey","kfsNum","frameIdx","nextFrame","frame","range","w","targetArr","_additiveValue","useSpline","_addToTarget","Animator","additiveTo","_tracks","_trackKeys","_maxTime","_started","_doneList","_onframeList","_clip","_target","_loop","_additiveAnimators","getTarget","changeTarget","when","props","whenWithKeys","propNames","track","initialValue","_getAdditiveTrack","lastFinalKf","during","callback","isPaused","_doneCallback","doneList","trackName","additiveAnimators","getTrack","forceAnimate","clip","stillHasAdditiveAnimator","animation","addClip","forwardToLast","removeClip","done","getClip","stopTracks","tracksKeys","allAborted","saveFinalToTarget","trackKeys","__changeFinalValue","finalProps","Animation","_running","_time","_pauseStart","_clipsHead","_clipsTail","addAnimator","animator","removeAnimator","Date","getTime","nextClip","finished","_startLoop","animate","options","TOUCH_CLICK_DELAY","globalEventSupported","localNativeListenerNames","mouseHandlerNames","touchHandlerNames","pointerEventNameMap","pointerdown","pointerup","pointermove","pointerout","pointerHandlerNames","nm","mouse","pointer","globalNativeListenerNames","wheelEventSupported","isPointerFromTouch","pointerType","setTouchTimer","scope","touching","touchTimer","clearTimeout","markTouch","normalizeGlobalEvent","instance","FakeGlobalEvent","isLocalEl","elTmp","isLocal","domBelongToZr","parentNode","stopImmediatePropagation","currentTarget","localDOMHandlers","mousedown","__mayPointerCapture","downPoint","__togglePointerCapture","mouseup","__pointerCapturing","element","toElement","relatedTarget","wheel","mousewheel","touchstart","__lastTouchMoment","touchmove","touchend","click","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","nativeEventName","mountSingleDOMEventListener","mountGlobalDOMEventListeners","mount","nativeEventListener","capture","listener","mounted","listenerOpts","domTarget","unmountDOMEventListeners","DOMHandlerScope","HandlerDomProxy","_localHandlerScope","_globalHandlerScope","isPointerCapturing","globalHandlerScope","create$1","identity","copy$1","mul$1","out0","out1","out2","out3","out4","out5","translate","rotate","rad","aa","ac","atx","ab","ad","aty","st","ct","scale$1","vx","vy","invert","clone$2","matrix","mIdentity","EPSILON","isNotAroundZero","scaleTmp","tmpTransform","originTransform","Transformable","setPosition","setScale","scaleX","scaleY","setOrigin","originX","originY","needLocalTransform","rotation","parentHasTransform","transform","getLocalTransform","_resolveGlobalScaleRatio","globalScaleRatio","getGlobalScale","relX","relY","sx","sy","invTransform","getComputedTransform","transformNode","ancestors","setLocalTransform","atan2","decomposeTransform","ox","oy","transformCoordToLocal","transformCoordToGlobal","getLineScale","initDefaultProps","Point","other","equal","scalar","toArray","fromArray","input","onet","mathMin","mathMax","lt","rb","lb","rt","minTv","maxTv","BoundingRect","width","height","union","calculateTransform","intersect","mtv","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","overlap","dMin","Infinity","dMax","d0","d1","d2","d3","plain","tx","ty","maxX","maxY","textWidthCache","DEFAULT_FONT","_ctx","_cachedFont","defaultMeasureText","text","font","measureText","methods$1","cacheOfFont","innerGetBoundingRect","textAlign","textBaseline","getLineHeight","adjustTextX","adjustTextY","getBoundingRect","textLines","uniondRect","verticalAlign","parsePercent","maxValue","lastIndexOf","calculateTextPosition","textPosition","position","halfHeight","textVerticalAlign","align","dpr","devicePixelRatio","screen","deviceXDPI","logicalXDPI","DARK_MODE_THRESHOLD","DARK_LABEL_COLOR","LIGHT_LABEL_COLOR","LIGHTER_LABEL_COLOR","PRESERVED_NORMAL_STATE","PRIMARY_STATES_KEYS","DEFAULT_ANIMATABLE_MAP","tmpTextPosCalcRes","tmpBoundingRect","Element","id","animators","currentStates","states","_init","attr","updateInnerText","forceUpdate","_textContent","textConfig","local","attachedTransform","textStyleChanged","innerOrigin","layoutRect","textOrigin","origin","relOriginX","relOriginY","textOffset","isInside","inside","innerTextDefaultStyle","_innerTextDefaultStyle","textFill","textStroke","autoStroke","canBeInsideText","insideFill","insideStroke","getInsideTextFill","getInsideTextStroke","outsideFill","outsideStroke","getOutsideFill","getOutsideStroke","fill","stroke","setDefaultTextStyle","dirtyStyle","isDarkMode","backgroundColor","getBackgroundColor","attrKV","setTextConfig","setTextContent","setClipPath","extra","hide","show","keyOrObj","saveCurrentToNormalState","toState","_innerSaveToNormal","normalState","_normalState","fromStateTransition","__fromStateTransition","targetName","_savePrimaryToNormal","primaryKeys","hasState","getState","ensureState","clearStates","useState","stateName","keepCurrentStates","toNormalState","hasStates","animationCfg","stateTransition","state","stateProxy","useHoverLayer","hoverLayer","_toggleHoverLayerFlag","_applyStateObj","__inHover","duration","_textGuide","_updateAnimationTargets","REDARAW_BIT","useStates","stateObjects","notChange","stateObj","mergedState","_mergeStates","removeState","replaceState","oldState","newState","forceAdd","newStateExists","toggleState","enable","mergedTextConfig","transition","needsRestoreToNormal","transitionTarget","hasTransition","propNeedsTransition","_transitionState","_attachComponent","componentEl","zr","addSelfToZr","_detachComponent","removeSelfFromZr","_clipPath","removeClipPath","previousTextContent","removeTextContent","cfg","setTextGuideLine","guideLine","removeTextGuideLine","refreshHover","refresh","dirty","inHover","textContent","updateDuringAnimation","wakeUp","stopAnimation","leftAnimators","animateTo","animationProps","animateFrom","elProto","isGroup","logs","logDeprecatedError","xKey","yKey","createLegacyProperty","privateKey","defineProperty","enhanceArray","animatable","reverse","animateToShallow","count","copyArrShallow","is2DArray","copyValue","sourceArr","len0","len1","topKey","animatableKeys","changedKeys","targetKeys","additive","setToFinal","animateAll","innerKey","keyLen","existsAnimators","existsAnimatorsOnSameTarget","revertedSource","reversedTarget","sourceClone","STYLE_MAGIC_KEY","DEFAULT_COMMON_STYLE","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","opacity","blend","DEFAULT_COMMON_ANIMATION_PROPS","PRIMARY_STATES_KEYS$1","Displayable","useStyle","beforeBrush","afterBrush","innerBeforeBrush","innerAfterBrush","rectContain","coord","animateStyle","targetKey","setStyle","STYLE_CHANGED_BIT","_rect","styleChanged","styleUpdated","createStyle","__hoverStyle","isStyleObject","_mergeStyle","targetStyle","sourceStyle","_getAnimationStyleProps","mergedStyle","dispProto","invisible","culling","incremental","mathPow","mathSqrt","EPSILON$1","EPSILON_NUMERIC","THREE_SQRT","ONE_THIRD","_v0","_v1","_v2","isAroundZero","isNotAroundZero$1","cubicAt","cubicDerivativeAt","cubicRootAt","c","A","C","t1","disc","K","discSqrt","Y1","Y2","T","theta","acos","ASqrt","cubicExtrema","extrema","cubicSubdivide","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","x0","y0","x1","y1","x2","y2","x3","y3","interval","_t","cubicLength","iteration","px","py","quadraticAt","quadraticDerivativeAt","quadraticRootAt","quadraticExtremum","divider","quadraticSubdivide","quadraticProjectPoint","quadraticLength","mathMin$1","mathMax$1","mathSin","mathCos","PI2","end","extremity","fromPoints","bottom","fromLine","xDim","yDim","fromCubic","cubicExtrema$1","cubicAt$1","fromQuadratic","quadraticExtremum$1","quadraticAt$1","fromArc","rx","ry","startAngle","endAngle","anticlockwise","min$1","max$1","vec2Min","vec2Max","diff","angle","CMD","M","Q","Z","tmpOutX","tmpOutY","min2","max2","mathMin$2","mathMax$2","mathCos$1","mathSin$1","mathSqrt$1","mathAbs","PI2$1","hasTypedArray","Float32Array","PathProxy","notSaveData","_xi","_yi","_x0","_y0","_saveData","segmentIgnoreThreshold","_ux","_uy","setDPR","setContext","beginPath","reset","_lineDash","_dashOffset","_pathSegLen","_pathLen","moveTo","addData","lineTo","exceedUnit","_needsDash","_dashedLineTo","bezierCurveTo","_dashedBezierTo","quadraticCurveTo","_dashedQuadraticTo","arc","cx","cy","arcTo","radius","closePath","toStatic","setLineDash","lineDash","_dashIdx","lineDashSum","_dashSum","setLineDashOffset","setData","appendPath","path","appendSize","appendPathData","cmd","_expandData","newData","dashSum","nDash","dash","bezierLen","tmpLen","Number","MAX_VALUE","xi","yi","_calculateLength","ux","uy","pathSegLen","pathTotalLen","segCount","rebuildPath","drawPart","accumLength","displayedLength","psi","isEllipse","breakBuild","d_1","containStroke","lineWidth","_l","_a","_b","_s","containStroke$1","containStroke$2","PI2$2","normalizeRadian","PI2$3","containStroke$3","windingLine","dir","x_","CMD$1","PI2$4","EPSILON$2","isAroundEqual","swapExtrema","windingCubic","nRoots","nExtrema","y0_","y1_","unit","windingQuadratic","y_","windingArc","dTheta","tmp_1","containPath","isStroke","pathData","containStroke$4","DEFAULT_PATH_STYLE","strokePercent","fillOpacity","strokeOpacity","lineDashOffset","lineCap","miterLimit","strokeNoScale","strokeFirst","DEFAULT_PATH_ANIMATION_PROPS","Path","shape","getDefaultShape","defaultStyle","getDefaultStyle","hasFill","pathFill","fillLum","isDarkLabel","buildPath","shapeCfg","inBundle","pathUpdated","SHAPE_CHANGED_BIT","createPathProxy","hasStroke","needsUpdateRect","firstInvoke","rectWithStroke","_rectWithStroke","lineScale","strokeContainThreshold","localPos","dirtyShape","animateShape","setShape","shapeChanged","targetShape","targetShapePrimaryProps","shapeKeys","mergedShape","isZeroArea","defaultProps","Sub","init","pathProto","subPixelOptimize","autoBatch","CMD$2","mathSqrt$2","mathAtan2","transformPath","nPoint","p_1","mathSqrt$3","mathSin$2","mathCos$2","PI$1","vMag","vRatio","u","vAngle","processArc","fa","fs","psiDeg","xp","yp","lambda","cxp","cyp","commandReg","numberReg","createPathProxyFromString","cpx","cpy","subpathX","subpathY","prevCmd","cmdList","cmdText","cmdStr","pLen","ctlPtx","ctlPty","SVGPath","isPathProxy","createPathOptions","pathProxy","innerOpts","createFromString","extendFromString","defaultOpts","mergePath","pathEls","pathList","pathEl","pathBundle","Group","_children","childAt","childOfName","childCount","_doAdd","addBefore","nextSibling","replaceAt","index","old","removeAll","eachChild","stopped","includeChildren","tmpRect","tmpMat","childRect","DEFAULT_IMAGE_STYLE","DEFAULT_IMAGE_ANIMATION_PROPS","sWidth","sHeight","ZRImage","CircleShape","Circle","r1","r2","r3","r4","total","subPixelOptimizeLine","outputShape","inputShape","subPixelOptimizeRect","originWidth","originHeight","positiveOrNegative","doubledPosition","RectShape","subPixelOptimizeOutputShape","Rect","optimizedShape","EllipseShape","Ellipse","subPixelOptimizeOutputShape$1","LineShape","Line","pointAt","interpolate","smoothSpline","isLoop","distance$1","segs","w2","w3","smoothBezier","smooth","constraint","cps","prevPoint","nextPoint","point","cp0","cp1","shift","buildPath$1","controlPoints","smoothConstraint","cp2","PolygonShape","Polygon","PolylineShape","Polyline","Gradient","addColorStop","LinearGradient","globalCoord","DEFAULT_TSPAN_STYLE","TSpan","setBoundingRect","parseXML","svg","parser","DOMParser","parseFromString","svgNode","firstChild","CompoundPath","_updatePathDirty","paths","dirtyPath","IncrementalDisplayble","notClear","_displayables","_temporaryDisplayables","_cursor","getCursor","clearDisplaybles","clearTemporalDisplayables","addDisplayable","notPersistent","addDisplayables","displayables","getDisplayables","getTemporalDisplayables","eachPendingDisplayable","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","createOrUpdateImage","cbPayload","__zrImageSrc","pendingWrap","isImageReady","pending","Image","onload","onerror","imageOnLoad","__cachedImgObj","STYLE_REG","truncateText","containerWidth","ellipsis","prepareTruncateOptions","truncateSingleLine","preparedOpts","maxIterations","minChar","cnCharWidth","ascCharWidth","placeholder","contentWidth","ellipsisWidth","textLine","subLength","estimateLength","charCode","charCodeAt","parsePlainText","overflow","padding","truncate","calculatedLineHeight","lineHeight","truncateLineOverflow","lineOverflow","lines","wrapText","contentHeight","lineCount","outerHeight","outerWidth","truncateMinChar","maxWidth","RichTextToken","RichTextLine","tokens","RichTextContentBlock","parseRichText","contentBlock","topWidth","topHeight","wrapInfo","accumWidth","breakAll","exec","matchedIndex","pushTokens","substring","pendingList","calculatedHeight","calculatedWidth","stlPadding","truncateLine","outer","line","token","tokenStyle","styleName","rich","textPadding","paddingH","tokenHeight","styleTokenWidth","tokenWidthNotSpecified","percentWidth","textBackgroundColor","bgImg","remainTruncWidth","block","isEmptyStr","newLine","strLines","linesWidths","tokenPadding","tokenPaddingH","outerWidth_1","parsePercent$1","isLineHolder","tokensLen","isLatin","ch","code","breakCharMap","isWordBreakChar","isBreakAll","lastAccumWidth","currentWord","currentWordWidth","chWidth","inWord","DEFAULT_RICH_TEXT_COLOR","DEFAULT_STROKE_LINE_WIDTH","DEFAULT_TEXT_ANIMATION_PROPS","fontSize","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","borderColor","borderWidth","borderRadius","ZRText","_defaultStyle","_updateSubTexts","_childCursor","normalizeTextStyle","_updateRichTexts","_updatePlainTexts","defaultTextStyle","sourceRich","targetRich","_mergeRich","richNames","richName","_getOrCreateChild","textFont","getStyleText","needDrawBg","needDrawBackground","bgColorDrawn","baseX","baseY","textX","textY","boxX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","getFill","getStroke","hasShadow","fixedBoundingRect","subElStyle","xLeft","lineTop","xRight","tokenCount","remainedWidth","lineXLeft","lineXRight","_placeToken","parentBgColorDrawn","textWidth","textHeight","textBorderWidth","textBorderColor","isPlainBg","textBorderRadius","rectEl","imgEl","rectShape","rectStyle","imgStyle","borderDash","borderDashOffset","shadowStyle","makeFont","fontFamily","fontWeight","fontStyle","VALID_TEXT_ALIGN","VALID_TEXT_VERTICAL_ALIGN","middle","normalizeStyle","ArcShape","clockwise","Arc","unitX","unitY","BezierCurveShape","cpx1","cpy1","someVectorAt","isTangent","cpx2","cpy2","BezierCurve","tangentAt","DropletShape","Droplet","HeartShape","Heart","PI$2","IsogonShape","Isogon","dStep","deg","RingShape","r0","Ring","sin$1","cos$1","radian","RoseShape","Rose","SectorShape","Sector","PI$3","cos$2","sin$2","StarShape","Star","xStart","yStart","ri","cos$3","sin$3","TrochoidShape","location","Trochoid","num","RadialGradient","extent","extent2","minTv$1","maxTv$1","OrientedBoundingRect","_corners","_axes","_origin","fromBoundingRect","corners","axes","overlapped","noMtv","_intersectCheckOneSide","axis","_getProjMinMaxOnAxis","dist0","dist1","dim","proj","proj_1","useVML","painterCtors","instances","delInstance","totalLum","ZRender","_stillFrameAccum","_needsRefresh","_needsRefreshHover","_darkMode","rendererType","renderer","vml","handerProxy","getViewportRoot","_flush","configLayer","zLevel","config","setBackgroundColor","_backgroundColor","setDarkMode","darkMode","refreshImmediately","fromInside","flush","triggerRendered","refreshHoverImmediately","addHover","removeHover","clearHover","clearAnimation","pathToImage","eventHandler","disposeAll","getInstance","registerPainter","zrender","RADIAN_EPSILON","_trim","linearMap","domain","clamp","subDomain","subRange","parsePercent$2","all","NaN","round$1","precision","returnStr","toFixed","asc","getPrecision","getPrecisionSafe","eIndex","dotIndex","getPixelPrecision","dataExtent","pixelExtent","LN10","dataQuantity","sizeQuantity","getPercentWithPrecision","valueList","acc","digits","votesPerQuota","targetSeats","seats","votes","currentSum","NEGATIVE_INFINITY","maxId","MAX_SAFE_INTEGER","remRadian","pi2","isRadianAroundZero","TIME_REG","parseDate","hour","UTC","quantity","quantityExponent","exp","nice","exponent","exp10","nf","quantile","ascArr","reformIntervals","littleThan","curr","currClose","close_1","close","lg","numericToNumber","valFloat","isNumeric","number","DUMMY_COMPONENT_NAME_PREFIX","INTERNAL_COMPONENT_ID_PREFIX","normalizeToArray","defaultEmphasis","subOpts","emphasis","subOptName","TEXT_STYLE_OPTIONS","getDataItemValue","dataItem","isDataItemOption","mappingToExists","existings","newCmptOptions","mode","isNormalMergeMode","isReplaceMergeMode","isReplaceAllMode","existingIdIdxMap","cmptOption","validateIdOrName","prepareResult","mappingById","mappingByName","mappingByIndex","mappingInReplaceAllMode","makeIdAndName","existing","isComponentIdInternal","newOption","keyInfo","brandNew","optionId","makeComparableKey","existingIdx","resultItem","keyExistAndEqual","nextIdx","mapResult","idMap","item","idNum","obj1","obj2","key1","key2","idOrName","isValidIdOrName","isNameSpecified","componentModel","makeInternalComponentId","idSuffix","setComponentTypeToKeyInfo","mappingResult","mainType","componentModelCtor","subType","determineSubType","newCmptOption","existComponent","queryDataIndex","payload","dataIndexInside","dataIndex","indexOfRawIndex","indexOfName","makeInner","innerUniqueIndex","hostObj","parseFinder","ecModel","finderInput","finder","defaultMainType","queryOptionMap","parsedKey","queryType","includeMainTypes","queryOption","queryResult","queryReferringComponents","useDefault","enableAll","enableNone","models","SINGLE_REFERRING","MULTIPLE_REFERRING","userOption","indexOption","idOption","nameOption","specified","firstCmpt","getComponent","queryComponents","setAttribute","getAttribute","getTooltipRenderMode","renderModeOption","TYPE_DELIMITER","IS_CONTAINER","IS_EXTENDED_CLASS","parseClassType","componentType","main","typeArr","checkClassType","isExtendedClass","clz","enableClassExtend","rootClz","mandatoryMethods","$constructor","method","ExtendedClass","isESClass","ins","superCall","superApply","Function","mountExtend","SubClz","SupperClz","classBase","enableClassCheck","classAttr","isInstance","methodName","enableClassManagement","registerClass","componentFullType","componentTypeInfo","container","makeContainer","getClass","throwWhenNotFound","getClassesByMainType","o","hasClass","getAllClassMainTypes","types","hasSubTypes","registerWhenExtend","originalExtend_1","makeStyleMapper","ignoreParent","model","excludes","includes","getShallow","AREA_STYLE_KEY_MAP","getAreaStyle","AreaStyleMixin","getECData","_highlightNextDigit","_highlightKeyMap","getSavedStates","HOVER_STATE_NORMAL","HOVER_STATE_BLUR","HOVER_STATE_EMPHASIS","SPECIAL_STATES","DISPLAY_STATES","Z2_EMPHASIS_LIFT","Z2_SELECT_LIFT","HIGHLIGHT_ACTION_TYPE","DOWNPLAY_ACTION_TYPE","SELECT_ACTION_TYPE","UNSELECT_ACTION_TYPE","TOGGLE_SELECT_ACTION_TYPE","hasFillOrStroke","fillOrStroke","liftedColorCache","liftColor","color$1","liftedColor","doChangeHoverState","hoverStateEnum","onHoverStateChange","hoverState","singleEnterEmphasis","singleLeaveEmphasis","singleEnterBlur","singleLeaveBlur","singleEnterSelect","selected","singleLeaveSelect","updateElementState","updater","commonParam","traverseUpdateState","setStatesFlag","getFromStateStyle","toStateName","defaultValue","fromState","createEmphasisDefaultState","targetStates","hasSelect","cloned","store","fromFill","selectFill","normalFill","fromStroke","selectStroke","normalStroke","emphasisStyle","z2EmphasisLift","createSelectDefaultState","z2SelectLift","createBlurDefaultState","hasBlur","currentOpacity","blurStyle","elementStateProxy","setDefaultStateProxy","enterEmphasisWhenMouseOver","shouldSilent","__highByOuter","leaveEmphasisWhenMouseOut","enterEmphasis","highlightDigit","leaveEmphasis","enterBlur","leaveBlur","enterSelect","leaveSelect","__highDownSilentOnTouch","allLeaveBlur","ecIns","getModel","eachComponent","view","getViewOfSeriesModel","getViewOfComponentModel","group","toggleSeriesBlurState","targetSeriesIndex","focus","blurScope","isBlur","leaveBlurOfIndices","dataIndices","itemEl","getItemGraphicEl","targetSeriesModel","getSeriesByIndex","targetCoordSys","coordinateSystem","master","blurredSeries","eachSeries","seriesModel","sameSeries","coordSys","sameCoordSys","getData","dataTypes","blurSeries","toggleSeriesBlurStateFromPayload","isHighDownPayload","isHighlight","seriesIndex","dataType","current","ecData","focus_1","toggleSelectionFromPayload","isSelectChangePayload","updateSeriesElementSelection","allData","getAllData","eachItemGraphicEl","isSelected","getAllSelectedIndices","getSelectedDataIndices","enableHoverEmphasis","setAsHighDownDispatcher","enableHoverFocus","OTHER_STATES","styleGetterMap","itemStyle","lineStyle","areaStyle","setStatesStylesFromModel","itemModel","styleType","getterType","asDispatcher","disable","extendedEl","highDownSilentOnTouch","__highDownDispatcher","isHighDownDispatcher","getHighlightDigit","highlightKey","payloadType","savePathStates","selectState","select","ECHARTS_PREFIX","storedLogs","hasConsole","deprecateLog","deprecateReplaceLog","oldOpt","newOpt","consoleLog","makePrintable","hintInfo","msg","arg","JSON","toISOString","err","EMPTY_OBJ","getLabelText","stateModels","overrideValue","labelFetcher","labelDataIndex","labelDimIndex","normalModel","normal","baseText","getFormattedLabel","defaultText","statesText","stateModel","setLabelStyle","targetEl","labelStatesModels","stateSpecified","isSetOnText","needsCreateText","labelStatesTexts","showNormal","normalStyle","createTextStyle","createTextConfig","targetElEmphasisState","getLabelStatesModels","labelName","statesModels","textStyleModel","specifiedTextStyle","isNotNormal","isAttached","textStyle","setTextStyleCommon","labelPosition","labelRotate","labelDistance","labelOffset","defaultOutsidePosition","inheritColor","globalTextStyle","option","richItemNames","getRichItemNames","richResult","name_1","richTextStyle","setTokenTextStyle","margin","richItemNameMap","richKeys","richKey","parentModel","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","isBlock","fillColor","strokeColor","baseline","disableBox","getFont","gTextStyleModel","PATH_COLOR","tmpRichText","TextStyleMixin","getTextColor","isEmphasis","getTextRect","LINE_STYLE_KEY_MAP","getLineStyle","LineStyleMixin","getLineDash","lineType","dotSize","dashSize","ITEM_STYLE_KEY_MAP","getItemStyle","ItemStyleMixin","getBorderLineDash","Model","rest","mergeOption","_doGet","parsePath","hasPath","pathFinal","resolveParentPath","isEmpty","restoreData","isAnimationEnabled","pathArr","base","getUID","enableSubTypeDefaulter","subTypeDefaulters","registerSubTypeDefaulter","defaulter","componentTypeMain","enableTopologicalTravel","entity","dependencyGetter","topologicalTravel","targetNameList","fullNameList","makeDepndencyGraph","graph","stack","noEntryList","targetNameSet","currComponentType","currVertex","isInTargetNameSet","originalDeps","successor","removeEdgeAndAdd","removeEdge","succComponentType","entryCount","thisItem","createDependencyGraphItem","availableDeps","getAvailableDependencies","dependentName","predecessor","thatItem","dep","inheritDefaultOption","superOption","subOption","langEN","month","monthAbbr","dayOfWeek","dayOfWeekAbbr","legend","selector","toolbox","brush","title","polygon","lineX","lineY","keep","dataView","lang","dataZoom","zoom","back","magicType","bar","tiled","restore","saveAsImage","series","typeNames","pie","scatter","effectScatter","radar","tree","treemap","boxplot","candlestick","heatmap","parallel","sankey","funnel","gauge","pictorialBar","themeRiver","sunburst","aria","general","withTitle","withoutTitle","single","prefix","withName","withoutName","multiple","separator","partialData","langZH","LOCALE_ZH","LOCALE_EN","DEFAULT_LOCALE","localeStorage","localeModels","SYSTEM_LANG","langStr","documentElement","language","browserLanguage","registerLocale","locale","localeObj","createLocaleObject","getLocaleModel","getDefaultLocaleModel","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","defaultLeveledFormatter","year","day","minute","second","millisecond","none","fullDayFormatter","fullLeveledFormatter","primaryTimeUnits","timeUnits","pad","getPrimaryTimeUnit","timeUnit","isPrimaryTimeUnit","getDefaultFormatPrecisionOfInterval","format","template","isUTC","date","fullYearGetterName","monthGetterName","q","dateGetterName","hoursGetterName","minutesGetterName","secondsGetterName","millisecondsGetterName","localeModel","timeModel","leveledFormat","tick","formatter","defaults$1","mergedFormatter","inherit","getUnitFromValue","targetId","levelId","isSecond","isMinute","isHour","isDay","isMonth","isYear","getUnitValue","fullYearSetterName","monthSetterName","dateSetterName","hoursSetterName","minutesSetterName","secondsSetterName","millisecondsSetterName","mathMax$3","mathMin$3","_customShapeMap","innerLabel","extendShape","extendPathFromString","extendPath","registerShape","ShapeClass","getShapeClass","makePath","layout","centerGraphic","resizePath","makeImage","imageUrl","zrImg","img","boundingRect","aspect","mergePath$1","pathRect","subPixelOptimizeLine$1","param","subPixelOptimizeRect$1","subPixelOptimize$1","animateOrSetProps","animationType","animatableModel","isFrom","isUpdate","isRemove","animationPayload","updatePayload","getUpdatePayload","animationEnabled","animationEasing","animationDelay","getAnimationDelayParams","updateProps","initProps","removeElement","fadeOutDisplayable","removeElementWithFadeOut","doRemove","isElementRemoved","animateOrSetLabel","labelModel","defaultTextGetter","valueAnimationEnabled","precisionOption","precision_1","interpolateValues_1","rawValues_1","getRawValue","isRawValueNumber_1","info","getDimensionInfo","host_1","nextValue","interpolated","startValues","labelText","updateLabel","initLabel","getTransform","ancestor","mat","applyTransform$1","invert$1","transformDirection","direction","hBase","vBase","vertex","isNotGroup","isPath","groupTransition","g1","g2","getElMap","elMap","anid","getAnimatableProps","elMap1","oldEl","newProp","clipPointsByRect","clipRectByRect","targetRect","createIcon","iconStr","linePolygonIntersect","a1x","a1y","a2x","a2y","lineLineIntersect","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","crossProduct2d","nearZero","b1a1x","b1a1y","graphic","Text","IncrementalDisplayable","addCommas","parts","toCamelCase","upperCaseFirst","group1","normalizeCssArray$1","replaceReg","replaceMap","encodeHTML","concatTooltipHtml","html","dontEncodeHtml","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","formatTpl","tpl","paramsList","encode","seriesLen","isTimeAxis","axisType","axisValue","axisIndex","$vars","alias","formatTplSimple","getTooltipMarker","inOpt","extraCssText","renderMode","markerId","content","formatTime","utc","capitalFirst","windowOpen","link","blank","open","opener","href","format$1","each$1","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","maxHeight","currentLineMaxSize","nextChild","nextChildRect","nextX","nextY","moveX","newline","moveY","vbox","hbox","getLayoutRect","positionInfo","containerRect","containerHeight","verticalMargin","horizontalMargin","positionElement","hv","boundingMode","fetchLayoutMode","layoutMode","mergeLayoutParam","targetOption","ignoreSize","hResult","vResult","names","hvIdx","newParams","newValueCount","merged","mergedValueCount","enoughParamNumber","hasProp","hasValue","getLayoutParams","copyLayoutParams","inner","ComponentModel","uid","mergeDefaultAndTheme","inputPositionParams","themeModel","getTheme","getDefaultOption","optionUpdated","newCptOption","isInit","ctor","defaultOption","fields","optList","getReferringComponents","indexKey","idKey","getBoxLayoutParams","boxLayoutModel","protoInitialize","componentIndex","getDependencies","deps","dependencies","unshift","platform","globalDefault","gradientColor","blendMode","stateAnimation","animationDuration","animationDurationUpdate","animationEasingUpdate","animationThreshold","progressiveThreshold","progressive","hoverLayerThreshold","useUTC","inner$1","getNearestColorPalette","requestColorNum","paletteNum","ColorPaletteMixin","clearColorPalette","colorIdx","colorNameMap","getColorFromPalette","scopeFields","defaultColorPalette","layeredColorPalette","colorPalette","VISUAL_DIMENSIONS","SOURCE_FORMAT_ORIGINAL","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","SOURCE_FORMAT_TYPED_ARRAY","SOURCE_FORMAT_UNKNOWN","SERIES_LAYOUT_BY_COLUMN","SERIES_LAYOUT_BY_ROW","Source","sourceFormat","seriesLayoutBy","startIndex","dimensionsDefine","dimensionsDetectCount","encodeDefine","metaRawOption","seriesDataToSource","BE_ORDINAL","Must","Might","Not","innerGlobalModel","detectSourceFormat","resetSourceDefaulter","datasetMap","createSource","sourceData","thisMetaRawOption","dimInfo","determineSourceDimensions","sourceHeader","dimensions","makeEncodeDefine","inheritSourceMetaRawOption","thisNew","cloneSourceShallow","normalizeDimensionsOption","dataArrayRows","arrayRowsTravelFirst","objectRowsCollectDimensions","colArr","nameMap","displayName","exist","maxLoop","firstIndex","dimensions_1","makeSeriesEncodeForAxisCoordSys","coordDimensions","datasetModel","querySeriesUpstreamDatasetModel","encodeItemName","encodeSeriesName","baseCategoryDimIndex","categoryWayValueDimStart","coordDimInfoLoose","coordDimIdx","coordDimInfo","getDataDimCountOnCoordDim","datasetRecord","categoryWayDim","valueWayDim","coordDimName","pushDim","dimIdxArr","idxFrom","idxCount","dimsDef","itemName","seriesName","makeSeriesEncodeForNameBased","dimCount","potentialNameDimIndex","idxResult","idxRes0","idxRes1","guessRecords","guessResult","doGuessOrdinal","isPureNumber","fulfilled","nameDimIndex","thisData","queryDatasetUpstreamDatasetModels","guessOrdinal","dimIndex","dimName","dimType","dimDefItem","sample","detectValue","row","dataObjectRows","dataKeyedColumns","dataOriginal","beStr","internalOptionCreatorMap","registerInternalOptionCreator","creator","concatInternalOptions","newCmptOptionList","internalOptionCreator","internalOptions","reCreateSeriesIndices","assertSeriesInitialized","initBase","OPTION_INNER_KEY","GlobalModel","theme","optionManager","_theme","_locale","_optionManager","setOption","optionPreprocessorFuncs","innerOpt","normalizeReplaceMergeInput","_resetOption","resetOption","optionChanged","baseOption","mountOption","_mergeOption","timelineOption","getTimelineOption","mediaOptions","getMediaOption","mediaOption","componentsMap","_componentsMap","componentsCount","_componentsCount","newCmptTypes","newCmptTypeMap","replaceMergeMainTypeMap","componentOption","mainTypeInReplaceMerge","visitComponent","oldCmptList","mergeMode","optionsByMainType","cmptsByMainType","cmptsCountByMainType","ComponentModelClass","extraOpt","__requireNewView","_seriesIndices","getOption","optInMainType","realLen","metNonInner","getLocale","localePosition","setUpdatePayload","_payload","cmpt","cmpts","queryByIdOrName","filterBySubType","findComponents","queryCond","getQueryCond","doFilter","indexAttr","idAttr","nameAttr","ctxForAll_1","cbForAll_1","getSeriesByName","oneSeries","getSeriesByType","getSeries","getSeriesCount","rawSeriesIndex","eachRawSeries","eachSeriesByType","eachRawSeriesByType","isSeriesFiltered","_seriesIndicesMap","getCurrentSeriesIndices","filterSeries","newSeriesIndices","seriesRawIdx","componentTypes","components","component","isNotTargetSeries","internalField","seriesIndices","mergeTheme","seriesId","notMergeColorLayer","colorLayer","themeItem","keyMap_1","idOrNameItem","replaceMerge","availableMethods","ExtensionAPI","ecInstance","coordinateSystemCreators","CoordinateSystemManager","_coordinateSystems","api","coordinateSystems","creater","getCoordinateSystems","register","QUERY_REG","OptionManager","_timelineOptions","_mediaList","_currentMediaIndices","_api","rawOption","dataset","optionBackup","_optionBackup","newParsedOption","parseRawOption","_newBaseOption","timelineOptions","mediaList","mediaDefault","isRecreate","_mediaDefault","timelineModel","getCurrentIndex","ecWidth","ecHeight","indices","applyMediaQuery","indicesEquals","isNew","timelineOpt","timeline","media","singleMedia","preProcess","realMap","aspectratio","applicatable","matched","operator","realAttr","real","expect","indices1","indices2","each$2","isObject$1","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","normalItemStyleOpt","emphasisItemStyleOpt","convertNormalEmphasis","optType","useExtend","normalOpt","emphasisOpt","removeEC3NormalStatus","compatTextStyle","labelOptSingle","textPropName","compatEC3CommonStyles","processSeries","seriesOpt","markPoint","markLine","markArea","nodes","edgeData","links","edges","categories","mpData","mlData","breadcrumb","levels","leaves","toArr","toObj","compatStyle","isTheme","axisName","axisOpt","axisPointer","parallelOpt","parallelAxisDefault","calendar","calendarOpt","radarOpt","nameGap","axisNameGap","geo","geoOpt","regions","regionObj","toolboxOpt","feature","featureOpt","tooltip","set$1","compatLayoutProperties","LAYOUT_PROPERTIES","COMPATITABLE_COMPONENTS","BAR_ITEM_STYLE_MAP","compatBarItemStyle","oldName","newName","compatPieLabel","alignTo","edgeDistance","compatSunburstState","downplay","blur","compatGraphFocus","focusNodeAdjacency","traverseTree","backwardCompat","seriesType","clipOverflow","clockWise","label","hoverOffset","scaleSize","pointerColor","backgroundStyle","highlightPolicy","mapType","mapLocation","hoverAnimation","dataRange","visualMap","componentName","dataStack","stackInfoMap","stackInfoList","stackInfo","stackResultDimension","getCalculationInfo","stackedOverDimension","stackedDimension","stackedByDimension","isStackedByIndex","setCalculationInfo","calculateStack","targetStackInfo","idxInStack","resultVal","resultNaN","dims","targetData","byValue","stackedDataRawIndex","getRawIndex","stackedOver","rawIndexOf","getByRawIndex","hostModel","_c","providerMethods","mountMethods","DefaultDataProvider","sourceParam","dimSize","_source","_data","_offset","_dimSize","getSource","getItem","appendData","clean","pure","persistent","provider","getMethodMapKey","getItemForTypedArray","countForTypedArray","rawItemGetter","getRawSourceItemGetter","rawCounter","getRawSourceDataCounter","appendDataSimply","newCol","oldCol","getItemSimply","rawData","rawSourceItemGetterMap","col","countSimply","rawSourceDataCounterMap","getRawValueSimply","rawSourceValueGetterMap","getRawSourceValueGetter","retrieveRawValue","getRawDataItem","getProvider","DIMENSION_LABEL_REG","DataFormatMixin","getDataParams","rawValue","rawDataIndex","getName","itemOpt","getItemVisual","isSeries","userOutput","componentSubType","dimensionNames","status","extendParams","getItemModel","dimensionIndex","formatTooltip","multipleSeries","order","createTask","Task","_reset","_plan","plan","_count","_onDirty","onDirty","_dirty","perform","performArgs","upTask","_upstream","skip","outputData","__pipeline","currentTask","planResult","lastModBy","normalizeModBy","_modBy","lastModDataCount","_modDataCount","modBy","modDataCount","forceFirstProgress","_doReset","_outputDueEnd","_dueEnd","_progress","_dueIndex","progress","_doProgress","outputDueEnd","_settedOutputEnd","unfinished","iterator","_callingProgress","downstream","_downstream","pipe","downTask","_disposed","getUpstream","getDownstream","setOutputEnd","winCount","it","sStep","sCount","modNext","sequentialNext","parseDataValue","ordinalMeta","parseAndCollect","valueParserMap","ExternalSource","getDimensionInfoAll","getRawHeaderItem","retrieveItemValue","rawItem","convertDataValue","rawVal","createExternalSource","sourceHeaderCount","extSource","dimsByName","dimDef","dimDefExt","rawValueGetter","externalTransformMap","registerExternalTransform","externalTransform","typeParsed","applyDataTransform","rawTransOption","sourceList","infoForPrint","pipedTransOption","transOption","isFinal","applySingleDataTransform","upSourceList","transType","resultList","print","printStrArr","datasetIndex","resultMetaRawOption","SourceManager","sourceHost","_sourceList","_upstreamSignList","_versionSignBase","_sourceHost","_setLocalSource","upstreamSignList","_getVersionSign","prepareSource","_isDirty","_createSource","upSourceMgrList","_getUpstreamSourceManagers","hasUpstream","resultSourceList","upSource","upSourceMgr","_createSourceMetaRawOption","_applyTransform","upMgrList","transformOption","fromTransformResult","upSourceList_1","upMgr","errMsg","doThrow","upSrcMgr","sourceIndex","getSourceManager","disableTransformOptionMerge","inner$2","getSelectionKey","getId","SeriesModel","_selectedDataIndicesMap","dataTask","dataTaskCount","dataTaskReset","sourceManager","getInitialData","wrapData","dataBeforeProcessed","autoSeriesName","_initSelectedMapFromData","themeSubType","fillDataTextStyle","newSeriesOption","getRawData","task","getCurrentTask","getLinkedData","mainData","getLinkedDataAll","getBaseAxis","isRichText","formatArrayValue","vertially","dimItem","tooltipDims","setEachItem","otherDims","markName","dimHead","dimHeadStr","valStr","formatSingleValue","mapDimensionsAll","tooltipDimLen","isValueArr","visualDrawType","formattedValue","colorEl","coordDimToDataDim","coordDim","getProgressive","getProgressiveThreshold","innerDataIndices","_innerSelect","unselect","selectedMap","nameOrId","toggleSelect","tmpArr","selectedDataIndicesMap","nameOrIds","selectedMode","lastDataIndex","hasItemOption","useColorPaletteOnData","ignoreStyleOnData","hasSymbolVisual","defaultSymbol","visualStyleAccessPath","getSeriesAutoName","dataDims","nameArr","dataDim","cloneShallow","dataTaskProgress","CHANGABLE_METHODS","wrapMethod","onDataSelfChange","scheduler","pipeline","getPipeline","agentStubMap","ComponentView","render","updateView","updateLayout","updateVisual","seriesModels","createRenderPlanner","pipelineContext","originalLarge","large","originalProgressive","progressiveRender","inner$3","renderPlanner","ChartView","renderTask","renderTaskPlan","renderTaskReset","highlight","toggleHighlight","markUpdateMethod","updateMethod","elSetState","dataIdx","progressMethodMap","incrementalPrepareRender","incrementalRender","ORIGIN_METHOD","RATE","THROTTLE_TYPE","throttle","debounce","currCall","lastCall","lastExec","timer","debounceNextCall","cbArgs","thisDelay","thisDebounce","debounceDelay","createOrUpdate","fnAttr","rate","throttleType","originFn","lastThrottleType","lastRate","inner$4","defaultStyleMappers","defaultColorKey","getStyleMapper","stylePath","styleMapper","visualStyleMapper","getDefaultColorKey","colorKey","seriesStyleTask","createOnAllSeries","performRawSeries","styleModel","getStyle","globalStyle","colorCallback","setVisual","dataEach","dataParams","setItemVisual","sharedModel","dataStyleTask","getVisual","existsStyle","ensureUniqueItemVisual","dataColorPaletteTask","overallReset","paletteScopeGroupByType","colorScope","dataAll","idxMap","rawIdx","fromPalette","ariaModel","seriesCnt","maxDataCnt","maxSeriesCnt","displaySeriesCnt","ariaLabel","getTitle","getConfig","seriesLabels_1","seriesCount","seriesLabel","seriesTpl","getSeriesTypeName","displayCnt","dataLabels","keyValues","RegExp","userConfig","PI$4","loadingDefault","textColor","maskColor","showSpinner","spinnerRadius","mask","labelRect","Scheduler","dataProcessorHandlers","visualHandlers","_stageTaskMap","_dataProcessorHandlers","_visualHandlers","_allHandlers","taskRecord","overallTask","getPerformArgs","_pipelineMap","pCtx","progressiveEnabled","__idxInPipeline","blockIndex","pipelineId","updateStreamModes","dataLen","threshold","restorePipelines","pipelineMap","preventIncremental","_pipe","prepareStageTasks","stageTaskMap","record","_createSeriesStageTask","_createOverallStageTask","prepareView","__block","performDataProcessorTasks","_performStageTasks","performVisualTasks","stageHandlers","stageHandler","visualType","stageHandlerRecord","seriesTaskMap","overallNeedDirty_1","stub","needSetDirty","performArgs_1","setDirty","dirtyMap","performSeriesTasks","getTargetSeries","seriesTaskPlan","seriesTaskReset","seriesTaskCount","useClearVisual","isVisual","isLayout","overallTaskReset","overallProgress","createStub","stubReset","stubOnDirty","agent","wrapStageHandler","detectSeriseType","stubProgress","clearAllVisual","resetDefines","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","resetDefine","legacyFunc","ecModelMock","apiMock","mockMethods","cond","Clz","colorAll","lightTheme","contrastColor","axisCommon","axisLine","splitLine","splitArea","minorSplitLine","crossStyle","subtextStyle","iconStyle","brushStyle","handleStyle","moveHandleStyle","fillerColor","dataBackground","selectedDataBackground","controlStyle","dayLabel","monthLabel","yearLabel","timeAxis","logAxis","valueAxis","categoryAxis","symbol","color0","borderColor0","DatasetModel","_sourceManager","DatasetView","mapDataStorage","registerMap","mapName","rawDef","rawSpecialAreas","records","specialAreas","geoSource","geoJson","geoJSON","features","parsers","retrieveMap","svgXML","ECEventProcessor","cptQuery","dataQuery","otherQuery","condCptType","suffixes_1","dataKeys_1","reserved","propSuffix","suffixPos","eventInfo","packedEvent","check","filterForExposedEvent","host","propOnHost","seriesSymbolTask","legendSymbol","symbolType","symbolSize","keepAspect","symbolRotate","hasSymbolTypeCallback","hasSymbolSizeCallback","hasSymbolRotateCallback","hasCallback","seriesSymbol","seriesSymbolSize","seriesSymbolRotate","symbolKeepAspect","dataSymbolTask","itemSymbolType","itemSymbolSize","itemSymbolRotate","itemSymbolKeepAspect","getItemVisualFromData","getVisualFromData","PI2$5","CMD$3","DEFAULT_SEARCH_SPACE","getCandidateAnchor","outPt","outDir","projectPointToArc","projectPointToLine","limitToEnds","dx1","dy1","lineLen","projectedLen","projectPointToRect","tmpPt","nearestPointOnRect","pt","nearestPointOnPath","minDist","pt0","pt1","pt2","dir2","updateLabelLinePoints","labelLineModel","labelLine","labelGuideConfig","textGuideLineConfig","searchSpace","candidates","anchorPoint","anchor","targetTransform","targetInversedTransform","candidate","limitTurnAngle","tmpProjPoint","linePoints","minTurnAngle","angleCos","minTurnAngleCos","tan","limitSurfaceAngle","surfaceNormal","maxSurfaceAngle","maxSurfaceAngleCos","HALF_PI","angle2","newAngle","setLabelLineState","isNormal","styleObj","buildLabelLinePath","moveLen","midPoint0","midPoint2","midPoint1","setLabelLineStyle","labelIgnoreNormal","stateShow","isLabelIgnored","getLabelLineStatesModels","labelLineName","prepareLayoutList","defaultAttr","localRect","isAxisAligned","minMargin","globalRect","obb","priority","layoutOption","computedLayoutOption","axisAligned","shiftLayout","xyDim","sizeDim","minBound","maxBound","balanceShift","lastPos","adjusted","totalShifts","shiftList","first","last","minGap","maxGap","updateMinMaxGap","squeezeGaps","takeBoundsGap","squeezeWhenBailout","gapThisBound","gapOtherBound","moveDir","moveFromMaxGap","remained","maxSqeezePercent","gaps","totalGaps","prevItemRect","squeezePercent","movement","moveForEachLabel","shiftLayoutOnX","leftBound","rightBound","shiftLayoutOnY","topBound","bottomBound","hideOverlap","labelList","displayedLabels","labelItem","existsTextCfg","labelGuideIgnore","cloneArr","newPoints","prepareLayoutCallbackParams","labelAttr","hostRect","labelLinePoints","LABEL_OPTION_TO_STYLE_KEYS","dummyTransformable","labelLayoutInnerStore","labelLineAnimationStore","extendWithKeys","LABEL_LAYOUT_PROPS","LabelManager","_labelList","_chartViewList","clearLabels","_addLabel","labelStyle","labelTransform","labelGuide","attachedPos","attachedRot","addLabelsOfSeries","chartView","__model","disableLabelLayout","updateLayoutConfig","createDragHandler","defaultLabelAttr","degreeToRadian","needsUpdateLabelLine","labelLayoutStore","labelsNeedsAdjustOnX","moveOverlap","labelsNeedsAdjustOnY","labelsNeedsHideOverlap","processLabelsOverall","ignoreLabelLineUpdate","_updateLabelLine","_animateLabels","visualStyle","disableLabelAnimation","layoutStore","oldLayout","newProps","oldOpacity","prevStates","oldLayoutSelect","oldLayoutEmphasis","layoutSelect","layoutEmphasis","newLayout","createLegacyDataSelectAction","ecRegisterAction","getSeriesIndices","eventsMap","dispatchAction","handleSeriesLegacySelectEvents","eventPostfix","legacyEventName","fromActionPayload","handleLegacySelectEvents","messageCenter","isFromClick","fromAction","createLinearGradient","canvasGradient","createRadialGradient","getCanvasGradient","pathProxyForDraw","styleHasStroke","styleHasFill","doFillPath","originalGlobalAlpha","globalAlpha","doStrokePath","createCanvasPattern","pattern","__image","createPattern","repeat","brushPath","inBatch","strokePart","firstDraw","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","__canvasFillGradient","__canvasStrokeGradient","__canvasFillPattern","__canvasStrokePattern","fillStyle","strokeStyle","ctxLineDash","lineScale_1","needsRebuild","brushImage","drawImage","brushText","lineScale_2","strokeText","fillText","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","flushPathDrawn","globalCompositeOperation","bindPathAndTextCommonStyle","prevEl","newLineWidth","bindImageStyle","setContextTransform","setTransform","viewRect","isDisplayableCulled","isClipPathChanged","prevClipPaths","updateClipStatus","allClipped","isTransformChanged","m0","DRAW_TYPE_PATH","DRAW_TYPE_IMAGE","DRAW_TYPE_TEXT","DRAW_TYPE_INCREMENTAL","canPathBatch","batchFill","batchStroke","isLast","viewWidth","viewHeight","prevElClipPaths","forceSetTransform","forceSetStyle","save","canBatchPath","lastDrawType","brushIncremental","temporalDisplayables","innerScope","i_1","len_1","returnFalse","createDom","newDom","newDomStyle","Layer","motionBlur","lastFrameAlpha","virtual","__used","__drawIndex","__startIndex","__endIndex","domStyle","onselectstart","webkitUserSelect","userSelect","webkitTapHighlightColor","domBack","ctxBack","getElementCount","initContext","createBackBuffer","clearAll","clearColor","haveMotionBLur","clearRect","clearColorGradientOrPattern","__canvasGradient","__painter","fillRect","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","parseInt10","isLayerValid","__builtin__","createRoot","domRoot","CanvasPainter","_zlevelList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","_opts","_singleCanvas","rootStyle","innerHTML","zlevelList","layers","_width","_getSize","_height","_domRoot","rootCanvas","mainLayer","getType","isSingleCanvas","getViewportRootOffset","viewportRoot","paintAll","_redrawId","_paintList","_paintHoverList","_hoverlayer","getLayer","getHoverLayer","redrawId","_updateLayerStatus","_doPaintList","needsRefreshHover","_compositeManually","self_1","eachBuiltinLayer","layerList","zi","useTimer","now","startTime","firstEl","dTime","draw","insertLayer","layersMap","prevLayer","prevDom","insertBefore","eachLayer","getLayers","updatePrevLayer","incrementalLayerCount","prevZlevel","_clearLayer","layerConfig","_zlevel","delLayer","removeChild","display","clearLayer","getRenderedCanvas","imageLayer","pixelRatio","width_1","height_1","ctx_1","renderToCanvas","whIdx","wh","cwh","plt","prb","defaultView","getComputedStyle","canvas","shadowBlurSize","leftMargin","rightMargin","topMargin","bottomMargin","pathTransform","imgShape","assert$1","each$3","isFunction$1","isObject$2","version$1","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_DEFAULT","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY_VISUAL_BRUSH","PRIORITY","PROCESSOR","FILTER","SERIES_FILTER","STATISTIC","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","GLOBAL","CHART","POST_CHART_LAYOUT","COMPONENT","BRUSH","CHART_ITEM","IN_MAIN_PROCESS_KEY","OPTION_UPDATED_KEY","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","CONNECT_STATUS_PENDING","CONNECT_STATUS_UPDATING","CONNECT_STATUS_UPDATED","createRegisterEventWithLowercaseECharts","isDisposed","disposedWarning","toLowercaseNameAndCallEventful","createRegisterEventWithLowercaseMessageCenter","MessageCenter","messageCenterProto","updateDirectly","updateMethods","doConvertPixel","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","renderComponents","renderSeries","performPostUpdateFuncs","createExtensionAPI","enableConnect","markStatusToUpdate","applyChangedStates","ECharts","_chartsViews","_chartsMap","_componentsViews","_pendingActions","themeStorage","_dom","defaultRenderer","__ECHARTS__DEFAULT__RENDERER__","_zr","_throttledZrFlush","_coordSysMgr","prioritySortFunc","__prio","visualFuncs","dataProcessorFuncs","_scheduler","_messageCenter","_labelManager","_initEvents","_onframe","remainTime","_model","getDom","getZr","notMerge","lazyUpdate","setTheme","getDevicePixelRatio","getSvgDataURL","toDataURL","getDataURL","excludeComponents","excludesComponentViews","__viewId","url","getConnectedDataURL","isSvg","groupId","MAX_NUMBER","connectedGroups","left_1","top_1","right_1","bottom_1","canvasList_1","dpr_1","instances$1","chart","getSvgDom","targetCanvas","zr_1","content_1","getSvgRoot","connectedBackgroundColor","convertToPixel","convertFromPixel","containPixel","findResult","containPoint","parsedFinder","MOUSE_EVENT_NAMES","eveName","isGlobalOut","dataModel","eventData","eventActionMap","actionType","DOM_ATTRIBUTE_KEY","_loadingFX","showLoading","hideLoading","loadingEffects","makeActionFromEvent","eventObj","actions","updateLabelLayout","labelManager","isComponent","viewList","viewMap","__alive","doPrepare","requireNewView","viewId","classType","Clazz","__id","__ecComponentInfo","callView","excludeSeriesId","excludeSeriesIdMap","notBlur","prepareAndUpdate","coordSysMgr","componentDirtyList","componentView","seriesDirtyMap","coordSysList","chartsMap","escapeConnect","actionWrap","actionInfo","cptTypeTmp","cptType","payloads","batched","batch","eventObjBatch","isSelectChange","isStatusChange","batchItem","action","statusChanged","newObj","pendingActions","getDispatcher","dispatcher","dirtyList","updateZ","updateStates","updateBlend","updateHoverLayerStatus","postUpdateFuncs","applyElementStates","newStates","oldStates","elCount","preventUsingHoverLayer","preventAutoZ","stateAnimationModel","enableAnimation","class_1","getComponentByElement","modelInfo","updateConnectedChartsStatus","charts","otherChart","action_1","otherCharts_1","echartsProto","one","wrapped","args2","idBase","groupIdBase","init$1","existInstance","getInstanceByDom","clientWidth","clientHeight","connect","disConnect","disconnect","dispose$1","getInstanceById","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","processor","normalizeRegister","registerPostUpdate","postUpdateFunc","registerAction","registerCoordinateSystem","coordSysCreator","getCoordinateSystemDimensions","getDimensionsInfo","registerLayout","layoutTask","registerVisual","visualTask","targetList","defaultPriority","__raw","registerLoading","loadingFx","extendComponentModel","extendComponentView","extendSeriesModel","extendChartView","setCanvasCreator","getMap","registerTransform","dataTool","defaultKeyGetter","DataDiffer","oldArr","newArr","oldKeyGetter","newKeyGetter","_old","_new","_oldKeyGetter","_newKeyGetter","_add","_update","_remove","execute","oldDataIndexMap","newDataIndexMap","oldDataKeyArr","newDataKeyArr","_initIndexMap","keyArr","keyGetterName","existence","summarizeDimensions","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","coordDimIndex","getOrCreateEncodeArr","isExtraCoord","mayLabelDimType","defaultTooltip","otherDim","encodeArr","dataDimsOnCoord","encodeFirstDimNotExtra","dimArr","encodeLabel","encodeTooltip","getDimensionTypeByAxis","DataDimensionInfo","isObject$3","UNDEFINED","INDEX_NOT_FOUND","ID_PREFIX","dataCtors","Float64Array","Int32Array","CtorUint32Array","Uint32Array","CtorInt32Array","CtorUint16Array","Uint16Array","TRANSFERABLE_PROPERTIES","CLONE_PROPERTIES","defaultDimValueGetters","prepareInvertedIndex","getRawValueFromStore","getIndicesCtor","prepareChunks","getRawIndexWithoutIndices","getRawIndexWithIndices","normalizeDimensions","validateDimensions","cloneListForMapAndSample","cloneDimStore","getInitialExtent","setItemDataAndSeriesIndex","transferProperties","List","_rawCount","_storage","_nameList","_idList","_visual","_layout","_itemVisuals","_itemLayouts","_graphicEls","_chunkSize","_chunkCount","_rawExtent","_extent","_approximateExtent","_calculationInfo","TRANSFERABLE_METHODS","dimensionInfos","invertedIndicesMap","dimInfoInput","dimensionInfo","dimensionName","createInvertedIndices","_dimensionInfos","_dimensionsSummary","_invertedIndicesMap","getDimension","getDimensionsOnCoord","mapDimension","dimensionsSummary","initData","nameList","dimValueGetter","notProvider","_rawData","_indices","_nameRepeatCount","defaultDimValueGetter","_dimValueGetter","_dimValueGetterArrayRows","arrayRows","_initDataFromProvider","appendValues","values","chunkSize","dimLen","rawExtent","originalChunkCount","emptyDataItem","sourceIdx","chunkIndex","chunkOffset","dimRawExtent","dimensionInfoMap","idList","nameRepeatCount","nameDimIdx","_nameDimIdx","itemId","_idDimIdx","dimStorage","nameDim","nameDimChunk","getIndices","newIndices","thisCount","buffer","chunkStore","dimStore","_getFast","getValues","getDataExtent","dimData","initialExtent","currEnd","useRaw","dimExtent","getApproximateExtent","setApproximateExtent","getSum","getMedian","dimDataArray","sortedDimDataArray","invertedIndices","rawIndex","indicesOfNearest","maxDistance","nearestIndices","minDiff","nearestIndicesLen","ctxCompat","fCtx","dimNames","filterSelf","dim0","selectRange","originalCount","quickFinished","chunkStorage","dimStorage2","chunkStorage2","val2","dimk","mapArray","tmpRetValue","dataCount","retValue","rawExtentOnDim","downSample","dimension","sampleValue","sampleIndex","targetStorage","frameValues","frameSize","originalChunkIndex","originalChunkOffset","sampleFrameIdx","sampleChunkIndex","sampleChunkOffset","otherList","thisList","visual","kvObj","itemVisual","itemVisuals","setLayout","name_2","getLayout","getItemLayout","setItemLayout","clearItemLayouts","setItemGraphicEl","dimensionInfoList","injectFunction","originalMethod","__wrappedMethods","getDimValueSimply","objectRows","keyedColumns","original","typedArray","chunk","chunkCount","DataCtor","lastChunkIndex","resizeChunkArray","newStore","excludeDimensions","allDimensions","originalStorage","originalDimStore","newDimStore","cloneChunk","originalChunk","childECData","thisECData","completeDimensions","sysDims","dataDimNameMap","coordDimNameMap","getDimCount","dimDefItemRaw","userDimName","encodeDef","encodeDefaulter","encodeDefMap","dataDimsRaw","validDataDims","resultDimIdxOrName","resultDimIdx","applyDim","availDimIdx","sysDimItemRaw","sysDimItemDimsDef","sysDimItemOtherDims","sysDimItem","sysDimItemDimsDefItem","generateCoord","generateCoordCount","fromZero","genName","optDimCount","createDimensions","dimensionsCount","CoordSysInfo","coordSysName","coordSysDims","axisMap","categoryAxisMap","getCoordSysInfoBySeries","fetch","fetchers","cartesian2d","xAxisModel","yAxisModel","isCategory","firstCategoryDimIndex","singleAxis","singleAxisModel","polar","polarModel","radiusAxisModel","findAxisModel","angleAxisModel","parallelModel","parallelAxisIndex","axisModel","axisDim","enableDataStack","byIndex","stackedCoordDimension","mayStack","stackedByDimInfo","stackedDimInfo","stackedDimCoordDim_1","stackedDimType","stackedDimCoordIndex_1","isCalculationCoord","isDimensionStacked","stackedDim","getStackedDimension","targetDim","createListFromArray","registeredCoordSys","coordSysInfo","coordSysDimDefs","useEncodeDefaulter","dimInfoList","hasNameEncode","categoryAxisModel","getOrdinalMeta","stackCalculationInfo","isNeedCompleteOrdinalData","sampleItem","firstDataNotNull","Scale","setting","_setting","getSetting","unionExtent","unionExtentFromData","getExtent","setExtent","thisExtent","isInExtentRange","isBlank","_isBlank","setBlank","OrdinalMeta","_needCollect","needCollect","_deduplication","deduplication","createByAxisModel","dedplication","getOrdinal","category","_getOrCreateMap","roundNumber","intervalScaleNiceTicks","splitNumber","minInterval","maxInterval","span","intervalPrecision","getIntervalPrecision","niceTickExtent","fixExtent","contain$1","normalize$1","scale$2","OrdinalScale","_ordinalMeta","_categorySortInfo","getCategoryIndex","getTicks","ticks","getMinorTicks","setCategorySortInfo","getCategorySortInfo","beforeSortIndex","displayIndex","ordinalNumber","getLabel","cateogry","niceTicks","niceExtent","roundNumber$1","IntervalScale","_interval","_intervalPrecision","getInterval","setInterval","_niceExtent","expandToNicedExtent","safeLimit","lastNiceTick","minorTicks","nextTick","prevTick","minorTicksGroup","minorInterval","minorTick","dataNum","expandSize","fixMax","fixMin","STACK_PREFIX","LARGE_BAR_MIN_WIDTH","LargeArr","getSeriesStackId","getAxisKey","prepareLayoutBarSeries","isOnCartesian","isInLargeMode","getValueAxesMinGaps","barSeries","axisValues","cartesian","baseAxis","cnt","axisMinGaps","valuesInAxis","makeColumnLayout","seriesInfoList","axisExtent","bandWidth","getBandWidth","extentSpan","scaleSpan","barWidth","barMaxWidth","barMinWidth","barGap","barCategoryGap","axisKey","stackId","doCalBarWidthAndOffset","columnsMap","seriesInfo","columnsOnAxis","autoWidthCount","categoryGap","stacks","minWidth","categoryGapPercent","columnCount","barGapPercent","autoWidth","column","finalWidth","widthSum","lastColumn","retrieveColumnLayout","barWidthAndOffset","lastStackCoords","columnLayoutInfo","columnOffset","columnWidth","getOtherAxis","barMinHeight","size","valueDim","baseDim","stacked","isValueAxisH","isHorizontal","valueAxisStart","getValueAxisStart","baseValue","baseCoord","dataToPoint","largeLayout","coordLayout","getRect","valueAxisHorizontal","valueDimIdx","largePoints","largeBackgroundPoints","largeDataIndices","valuePair","pointsOffset","idxOffset","backgroundStart","toGlobalCoord","dataToCoord","bisect","TimeScale","_minLevelUnit","labelFormatter","innerTicks","getIntervalTicks","_approxInterval","getFullYear","getMonth","getDate","approxTickNum","scaleIntervalsLen","scaleIntervals","isUnitValueSame","valueA","valueB","dateA","dateB","isSame","isSameYear","isSameMonth","isSameDay","isSameHour","isSameMinute","isSameSecond","isSameMilliSecond","getDateInterval","approxInterval","daysInMonth","getMonthInterval","APPROX_ONE_MONTH","getHourInterval","getMinutesAndSecondsInterval","isMinutes","getMillisecondsInterval","getFirstTimestampOfUnit","unitName","outDate","bottomUnitName","unitNames","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","setMethodName","isDate","dateTime","notAdd","addLevelTicks","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","startTick","endTick","getterName","setterName","levelsTicks","currentLevelTicks","tickCount","lastLevelTickCount","primaryTimeUnit","nextPrimaryTimeUnit","levelTicksRemoveDuplicated","tickValue","targetTickNum","levelsTicksInExtent","maxLevel","scaleProto","intervalScaleProto","getPrecisionSafe$1","roundingErrorFix","mathFloor","mathCeil","mathPow$1","mathLog","LogScale","_originalScale","originalScale","originalExtent","powVal","_fixMin","fixRoundingError","_fixMax","originalVal","ScaleRawExtentInfo","_prepareParams","_dataMin","_dataMax","isOrdinal","_isOrdinal","_needCrossZero","getNeedCrossZero","modelMinRaw","_modelMinRaw","_modelMinNum","parseAxisModelMinMax","modelMaxRaw","_modelMaxRaw","_modelMaxNum","_axisDataLen","getCategories","boundaryGap","boundaryGapArr","_boundaryGapInner","dataMin","dataMax","axisDataLen","boundaryGapInner","minFixed","maxFixed","determinedMin","_determinedMin","determinedMax","_determinedMax","modifyDataMinMax","minMaxName","frozen","DATA_MIN_MAX_ATTR","setDeterminedMinMax","DETERMINED_MIN_MAX_ATTR","ensureScaleRawExtentInfo","rawExtentInfo","minMax","getScaleExtent","scaleType","rawExtentResult","barSeriesModels","isBaseAxisAndHasBarSeries_1","adjustedScale","adjustScaleForOverflow","axisLength","barsOnCurrentAxis","minOverflow","maxOverflow","totalOverFlow","oldRange","oldRangePercentOfNew","overflowBuffer","niceScaleExtent","extentInfo","createScaleByModel","ifAxisCrossZero","makeLabelFormatter","getLabelModel","categoryTickStart","getAxisRawValue","estimateLabelUnionRect","realNumberScaleTicks","categoryScaleExtent","axisLabelModel","unrotatedSingleRect","singleRect","rotateTextRect","textRect","rotateRadians","beforeWidth","beforeHeight","afterWidth","afterHeight","rotatedRect","getOptionCategoryInterval","shouldShowAllLabels","getDataDimensionsOnAxis","dataDimMap","unionAxisExtentFromData","seriesExtent","AxisModelCommonMixin","getCoordSysModel","Triangle","Diamond","Pin","tanX","tanY","cpLen","cpLen2","Arrow","symbolCtors","roundRect","square","circle","diamond","pin","arrow","triangle","symbolShapeMakers","thickness","symbolBuildProxies","SymbolClz","proxySymbol","symbolPathSetColor","innerColor","symbolStyle","__isEmptyBrush","createSymbol","symbolPath","setColor","createList","dataStack$1","createScale","mixinAxisModelCommonMethods","helper","EPSILON$3","isAroundEqual$1","contain$2","Region","geometries","cp","exterior","loopGeo","interiors","transformTo","newRegion","decode","json","UTF8Encoding","jsonCompressed","encodeScale","UTF8Scale","geometry","coordinates","decodePolygon","encodeOffsets","coordinate","c2","prevX","prevY","parseGeoJSON","nameProperty","featureObj","region","inner$5","createAxisLabels","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","tickModel","makeCategoryTicks","makeCategoryLabelsActually","labels","labelCategoryInterval","labelsCache","getListCache","optionLabelInterval","listCacheGet","numericLabelInterval","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","listCacheSet","ticksCache","optionTickInterval","tickCategoryInterval","labelsResult","formattedLabel","rawLabel","cache","autoInterval","calculateCategoryInterval","fetchAutoCategoryIntervalCalculationParams","axisRotate","ordinalScale","ordinalExtent","unitSpan","unitW","unitH","maxW","maxH","dw","dh","lastAutoInterval","lastTickCount","axisExtent0","axisExtent1","getRotate","categoryInterval","onlyTick","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","NORMALIZED_EXTENT","Axis","onBand","containData","fixExtentWithBands","coordToData","pointToData","getTicksCoords","getTickModel","ticksCoords","tickVal","alignWithLabel","fixOnBandTicksCoords","getMinorTicksCoords","minorTickModel","minorTicksCoords","getViewLabels","nTick","ticksLen","diffSize","crossLen","shift_1","ticksItem","parseGeoJson","ecUtil","GRAPHIC_KEYS","graphic$1","LineSeriesModel","legendHoverLink","smoothMonotone","showSymbol","showAllSymbol","connectNulls","sampling","getDefaultLabel","interpolatedValues","labelDims","vals","Symbol","seriesScope","updateData","_createSymbol","driftSymbol","_symbolType","stopSymbolAnimation","toLastFrame","getSymbolPath","setZ","setDraggable","getSymbolSize","_updateCommon","_sizeX","_sizeY","_seriesModel","emphasisItemStyle","blurItemStyle","selectItemStyle","symbolOffset","hoverScale","emphasisModel","visualColor","pathStyle","symbolInnerColor","liftZ","z2Origin","_z2","useNameLabel","getLabelDefaultText","setSymbolScale","emphasisState","fadeOut","keepLabel","symbolNeedsDraw","isIgnore","clipShape","normalizeUpdateOpt","makeSeriesScope","SymbolDraw","SymbolCtor","_SymbolCtor","oldData","newIdx","symbolEl","oldIdx","isPersistent","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","prepareDataCoordInfo","valueOrigin","valueStart","getValueStart","baseAxisDim","valueAxisDim","baseDataOffset","stackResultDim","dataDimsForPoint","getStackedOnPoint","dataCoordInfo","stackedData","diffData","diffResult","idx1","lineAnimationDiff","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldDataNewCoordInfo","diffItem","pointAdded","currentPt","nextPt","idxAdd","idxMinus","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","stackedOnCurrent","stackedOnNext","scaleAndAdd$1","v2Copy","isPointNull","drawSegment","segLen","allLen","smoothMin","smoothMax","drawNonMono","drawMono","prevIdx","prevP","ctrlLen","nextP","ratioNextSeg","lenPrevSeg","lenNextSeg","getBoundingBox","ptMin","ptMax","ECPolylineShape","ECPolyline","ECPolygonShape","ECPolygon","stackedOnPoints","bbox","stackedOnBBox","stackedOnSmooth","createGridClipPath","hasAnimation","getArea","createPolarClipPath","sectorArea","createClipPath","isPointsSame","points1","points2","getBoundingDiff","min1","max1","getSmooth","getStackedOnPoints","turnPointsIntoStep","stepTurnAt","baseIndex","stepPoints","stepPt","stepPt2","getVisualGradient","visualMetaList","visualMeta","getAxis","stops","stopLen","outerColors","tinyExtent","minCoord","maxCoord","coordSpan","gradient","getIsIgnoreFunc","isAuto","getAxesByScale","canShowAllSymbolForCategory","categoryDataDim","labelMap","availSize","createLineClipPath","LineView","lineGroup","symbolDraw","_symbolDraw","_lineGroup","lineStyleModel","areaStyleModel","isCoordSysPolar","prevCoordSys","_coordSys","polyline","_polyline","_polygon","isAreaChart","isIgnoreFunc","__temp","clipShapeForSymbol","_clipShapeForSymbol","_step","_newPolyline","_newPolygon","_stackedOnPoints","_points","_updateAnimation","lineJoin","shouldBolderOnEmphasis","emphasisLineStyle","stackedOnSeries","changePolyState","_changePolyState","_valueOrigin","__points","updatedDataInfo","diffStatus","ptIdx","layoutPoints","isLargeRender","tmpIn","tmpOut","samplers","average","nearest","indexSampler","dataSample","sampler","nameLocation","nameRotate","nameTruncate","nameTextStyle","triggerEvent","onZero","onZeroAxisIndex","axisTick","axisLabel","showMinLabel","showMaxLabel","primary","logBase","axisDefault","AXIS_TYPES","axisModelCreator","BaseAxisModelClass","extraDefaultOption","AxisModel","getAxisType","thisOption","__ordinalMeta","CartesianAxisModel","extraOption","categorySortInfo","PI$5","AxisBuilder","nameDirection","tickDirection","labelDirection","handleAutoShown","transformGroup","_transformGroup","hasBuilder","builders","getGroup","innerTextLayout","axisRotation","textRotation","rotationDiff","makeAxisEventDataBase","isLabelSilent","tooltipOpt","shown","arrows","arrowSize","arrowOffset","symbolWidth_1","symbolHeight_1","axisTickLabel","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","gapSignal","isNameLocationCenter","labelLayout","nameRotation","axisNameAvailableWidth","endTextLayout","truncateOpt","nameTruncateMaxWidth","formatterParams","__fullText","targetType","textRotate","onLeft","tickEls","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","lastTick","ignoreEl","isTwoLabelOverlapped","firstRect","nextRect","mRotationBack","createTicks","tickTransform","tickEndCoord","tickLineStyle","anidPrefix","tickCoord","tickEl","minorTickLineStyle","minorTicksEls","axisLabelShow","labelMargin","labelRotation","rawCategoryData","itemLabelModel","rawCategoryItem","collect","axesInfo","seriesInvolved","coordSysAxesInfo","coordSysMap","collectAxesInfo","collectSeriesInfo","globalTooltipModel","globalAxisPointerModel","linksOption","linkGroups","axisPointerEnabled","coordSysKey","makeKey","axesInfoInCoordSys","coordSysModel","baseTooltipModel","getAxes","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","triggerTooltip","axisPointerModel","axisPointerShow","isHandleTrigger","makeAxisPointerModel","snap","involveSeries","axisInfo","useHandle","linkGroup","groupIndex","getLinkGroupIndex","mapper","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","seriesTooltipTrigger","seriesTooltipShow","seriesDataCount","linkOption","checkPropInLink","linkPropValue","axisPropValue","fixValue","getAxisInfo","getAxisPointerModel","axisPointerClazz","AxisView","axisPointerClass","_doUpdateAxisPointerClass","updateAxisPointer","_axisPointer","_disposeAxisPointer","forceRender","getAxisPointerClass","registerAxisPointerClass","layout$1","gridModel","grid","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","axisPosition","rectBound","axisOffset","posBound","onZeroCoord","dirMap","labelInside","isCartesian2DSeries","findAxisModels","axisModelMap","inner$6","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaColors","gridRect","areaColorsLen","lastSplitAreaColors","splitAreaColors","newSplitAreaColors","colorIndex","cIndex","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","axisBuilder","elementType","cartesians","getCartesians","otherAxisType","axisElementBuilders","splitLineModel","lineColors","minorSplitLineModel","CartesianXAxisView","CartesianYAxisView","seriesModelMap","seriesRecords","axisRecordMap","prepareDataExtentOnAxis","calculateFilteredExtent","shrinkAxisExtent","axesModelMap","xAxis","yAxis","xRawExtentInfo","yRawExtentInfo","prepareAxisRecord","condExtent","seriesRecord","xAxisRecord","yAxisRecord","condDimMap","tarDimMap","condAxis","tarAxisRecord","addCondition","axisRecord","addTarget","condDims","tarDims","tarDimExtents","initExtent","condDimsLen","tarDimsLen","singleCondDim","singleTarDim","condVal","tarDimExtent","tarAxisExtent","tarExtent","GridModel","containLabel","GridView","Cartesian","_dimList","addAxis","cartesian2DDimensions","Cartesian2D","axisX","axisY","toLocalCoord","clampData","xScale","yScale","xAxisExtent","yAxisExtent","xExtent","getGlobalExtent","yExtent","Axis2D","coordExtent","Grid","_coordsMap","_coordsList","_axesMap","_axesList","_initCartesian","axesMap","_updateScale","onZeroRecords","fixAxisOnZero","ignoreContainLabel","axesList","adjustAxes","labelUnionRect","updateAxisTransform","axesMapOnDim","getCartesian","xAxisIndex","yAxisIndex","coordList","_findConvertTarget","coordsList","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","otherAxis","grids","otherAxisDim","canOnZeroToAxis","getOnZeroRecordKey","coordBase","axisExtentSum","BaseBarSeriesModel","getMarkerPosition","offsetIndex","barMinAngle","largeThreshold","progressiveChunkMode","BarSeriesModel","brushSelector","selectors","roundCap","showBackground","borderType","realtimeSort","SausageShape","SausagePath","dr","rCenter","unitStartX","unitStartY","unitEndX","unitEndY","lessThanCircle","isCoordinateSystemType","BAR_BORDER_WIDTH_QUERY","BAR_BORDER_RADIUS_QUERY","_eventPos","mathMax$4","mathMin$4","getClipArea","coordSysClipArea","expandWidth","BarView","_isFirstFrame","removeOnRenderedListener","_updateDrawMode","coordinateSystemType","isReorder","_isLargeDraw","_renderLarge","_renderNormal","_clear","_updateLargeClip","_incrementalRenderLarge","isLargeDraw","isHorizontalOrRadial","animationModel","axis2DModel","_initSort","_onRendered","orderMap","_updateSort","needsClip","drawBackground","backgroundModel","barBorderRadius","bgEls","oldBgEls","_backgroundEls","bgLayout","bgEl","createBackgroundEl","isClipped","elementCreator","updateStyle","updateRealtimeAnimation","newIndex","oldIndex","createBackgroundShape","bgGroup","_backgroundGroup","createLarge","_removeBackground","_dataSort","mappedValue","_isDataOrderChanged","oldOrder","oldCount","lastValue","isOrderChanged","newOrder","axisId","sortInfo","coordSysBoundingRect","signWidth","signHeight","clipped","__dataIndex","animateProperty","isRadial","sector","sectorShape","animateTarget","seriesTarget","axisTarget","fixedLineWidth","getLineWidth","signX","signY","isZeroOnPolar","isPolar","labelPositionOutside","rawLayout","LagePathShape","LargePath","startPoint","__startPoint","baseDimIdx","__baseDimIdx","backgroundStartPoint","__largeDataIndices","__barWidth","setLargeBackgroundStyle","setLargeStyle","largePathUpdateDataIndex","largePath","largePathFindDataIndex","barWidthHalf","startValueVal","pointerBaseVal","pointerValueVal","baseLowerBound","baseUpperBound","barBaseVal","barValueVal","ElementClz","createListSimply","dimensionsInfo","LegendVisualProvider","getDataWithEncodedVisual","_getDataWithEncodedVisual","_getRawData","getAllNames","containName","dataWithEncodedVisual","PieSeriesModel","legendVisualProvider","_defaultLabelLine","labelLineNormalOpt","labelLineEmphasisOpt","minAngle","minShowLabelAngle","selectedOffset","percentPrecision","stillShowZeroSum","bleedMargin","distanceToLabelLine","avoidLabelOverlap","animationTypeUpdate","RADIAN","adjustSingleSide","viewLeft","viewTop","farthestX","recalculateXOnSemiToAlignOnEllipseCurve","semi","rB","rB2","rA","rA2","recalculateX","items","topSemi","bottomSemi","labelAlignTo","avoidOverlap","labelLayoutList","leftList","rightList","leftmostX","rightmostX","isPositionCenter","isAlignToEdge","realTextWidth","targetTextWidth","hasLabelRotate","minShowLabelRadian","setNotShow","labelLineLen","labelLineLen2","midAngle","isLabelInside","notShowLabel","PiePiece","firstCreate","_updateLabel","labelTextEmphasisState","labelHoverModel","PieView","sectorGroup","_sectorGroup","piePiece","itemLayout","PI2$6","RADIAN$1","getViewRect","pieLayout","validDataCount","unitRadian","roseType","restAngle","valueSumLargerThanMinAngle","currentAngle","angle_1","layout_1","layout_2","dataFilter","legendModels","ScatterSeriesModel","BOOST_SIZE_THRESHOLD","LargeSymbolPathShape","LargeSymbolPath","symbolProxy","symbolProxyShape","canBoost","softClipShape","findDataIndex","LargeSymbolDraw","_incremental","_setCommon","endIndex","byteOffset","_clearIncremental","isIncremental","extrudeShadow","ecData_1","ScatterView","_updateSymbolDraw","_getClipShape","clipArea","_nonShapeGraphicElements","compoundPath","graphicOption","elements","GraphicModel","parentId","_elOptionsToUpdate","existList","flattenedList","_flatten","elOptionsToUpdate","newElOption","setKeyInfoToNewElOption","mergeNewElOptionToExist","setLayoutInfoToExist","$action","optionList","parentOption","useElOptionsToUpdate","els","_elMap","_lastGraphicModel","graphicModel","_updateElements","_relocate","rootGroup","elOption","existEl","targetElParent","elOptionStyle","elOptionCleaned","getCleanedElOption","createEl","removeEl","__ecGraphicWidthOption","__ecGraphicHeightOption","setEventData","elOptions","apiWidth","apiHeight","parentEl","isParentRoot","__ecGraphicWidth","__ecGraphicHeight","containerInfo","bounding","graphicType","__ecGraphicId","existElParent","isSetLoc","isSet","existElOption","newElParentOption","newElOptCopy","newType","existItem","findPointFromSeries","getTooltipPosition","isStacked","inner$7","axisTrigger","currTrigger","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","updaters","showPointer","showTooltip","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","noSnap","outputFinder","payloadInfo","buildPayloadsBySeries","payloadBatch","snapToValue","seriesNestestValue","getAxisTooltipData","nestestValue","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","dataByAxis","valueLabelOpt","seriesDataIndices","outputAxesInfo","valItem","tooltipOption","highDownKey","lastHighlights","newHighlights","toHighlight","toDownplay","inner$8","each$4","initGlobalListeners","initialized","useHandler","doEnter","onLeave","dis","makeDispatchAction","dispatchTooltipFinally","pendings","showLen","showTip","hideLen","hideTip","actuallyPayload","unregister","AxisPointerView","triggerOn","inner$9","clone$3","bind$1","BaseAxisPointer","_dragging","_axisModel","_axisPointerModel","_lastValue","_lastStatus","_group","handle","_handle","makeElOption","graphicKey","_lastGraphicKey","moveAnimation","_moveAnimation","determineAnimation","createPointerEl","createLabelEl","doUpdateProps","updateProps$1","updatePointerEl","updateLabelEl","updateMandatoryProps","_renderHandle","isCategoryAxis","useSnap","pointerOption","pointerEl","labelEl","updateLabelShowHide","updateHandleTransform","handleModel","onmousemove","onmousedown","_onHandleDragMove","ondragend","_onHandleDragEnd","handleSize","_moveHandleToValue","getHandleTransProps","getHandleTransform","trans","_payloadInfo","lastProp","_doDispatchAxisPointer","cursorPoint","doClear","buildLabel","xy","xDimIndex","propsEqual","lastProps","equals_1","buildElStyle","axisPointerType","buildLabelElOption","labelPos","getValueLabel","paddings","confineInContainer","bgColor","params_1","axisDimension","seriesData","idxItem","getTransformedPosition","layoutInfo","buildCartesianSingleLabelElOption","textLayout","makeLineShape","makeRectShape","CartesianAxisPointer","otherExtent","pixelValue","elStyle","pointerShapeBuilder","currPosition","cursorOtherValue","tooltipOptions","getAxisDimIndex","shadow","AxisPointerModel","icon","TooltipModel","showContent","alwaysShowContent","displayMode","confine","showDelay","hideDelay","transitionDuration","enterable","each$5","toCamelCase$1","vendors","gCssText","mirrowPos","getFinalColor","finalNearPointColor","assembleArrow","arrowPosition","arrowPos","centerPos","styleCss","assembleTransition","transitionCurve","transitionText","vendorPrefix","assembleFont","assembleCssText","tooltipModel","isFirstShow","boxShadow","borderName","camelCase","makeStyleCoord","appendToBody","zrPainter","zrViewportRoot","body","viewportRootOffset","TooltipHTMLContent","_show","_styleCoord","_enterable","_firstShow","_appendToBody","_container","onmouseenter","_hideTimeout","_inContent","onmouseleave","hideLater","_hideDelay","currentStyle","nearPointColor","styleCoord","offsetHeight","pointerEvents","setContent","setEnterable","getSize","isShow","getOuterSize","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","TooltipRichContent","markerRich","suffix","startId","endId","bind$2","each$6","parsePercent$3","proxyRect","TooltipView","_renderMode","tooltipContent","_newLine","_tooltipContent","_tooltipModel","_ecModel","_lastDataByCoordSys","_alwaysShowContent","_initGlobalListener","_keepShow","_tryShow","_hide","_lastX","_lastY","_refreshUpdateTimeout","manuallyShowTip","makeDispatchAction$1","_ticket","_manuallyAxisShowTip","pointInfo","manuallyHideTip","tooltipCascadedModel","buildTooltipModel","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","_showTimout","singleDefaultHTML","singleParamsList","singleTooltipModel","itemCoordSys","seriesDefaultHTML","valueLabel","axisValueLabel","seriesTooltip","newMarkers","firstLine","singleDefaultHTMLStr","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","tooltipTrigger","tooltipOrder","defaultHtml","asyncTicket","subTooltipModel","nearPoint","_getNearestPoint","cbTicket","tooltipDataParams","contentSize","vAlign","viewSize","boxLayoutPosition","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","lastIndices","lastIdxItem","newIdxItem","modelCascade","resultModel","gapH","gapV","domWidth","domHeight","rectWidth","rectHeight","getDefaultSelectorOptions","LegendModel","_updateSelector","_updateData","legendData","hasSelected","potentialData","availableNames","isPotential","_availableNames","unSelect","toggleSelected","allSelect","inverseSelect","getOrient","itemGap","itemWidth","itemHeight","inactiveColor","inactiveBorderColor","selectorLabel","selectorPosition","selectorItemGap","selectorButtonGap","legendSelectActionHandler","isToggleSelect","legendModel","isItemSelected","layout$2","boxLayoutParams","viewportSize","makeBackground","curry$1","each$7","Group$1","LegendView","newlineDisabled","_contentGroup","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","isFirstRender","resetInner","itemAlign","renderInner","mainRect","layoutInner","_backgroundEl","contentGroup","legendDrawnMap","selectMode","legendSymbolType","itemGroup","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","_createSelector","selectorGroup","createSelectorButton","selectorItem","onclick","emphasisLabelModel","legendModelItemStyle","itemIcon","legendGlobalTooltipModel","setSymbolStyle","legendSymbolCenter","hitRect","legendIndex","__legendDataIndex","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","dataName","isUseHoverLayer","legendFilter","ScrollableLegendModel","setScrollDataIndex","scrollDataIndex","mergeAndNormalizeLayoutParams","pageButtonItemGap","pageButtonGap","pageButtonPosition","pageFormatter","pageIcons","horizontal","vertical","pageIconColor","pageIconInactiveColor","pageIconSize","pageTextStyle","raw","Group$2","WH","XY","ScrollableLegendView","_currentIndex","_containerGroup","_controllerGroup","__rectSize","controllerGroup","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","_pageGo","processMaxSize","_layoutContentAndController","containerGroup","controllerRect","showController","_showController","containerPos","controllerPos","pageInfo","_getPageInfo","pageIndex","contentPosition","_updatePageInfoView","to","legendId","canJump","pageText","pageCount","containerRectSize","targetItemIndex","_findTargetItemIndex","targetItem","itemCount","pCount","pagePrevDataIndex","pageNextDataIndex","targetItemInfo","getItemInfo","winStartItemInfo","winEndItemInfo","currItemInfo","itemRect","itemInfo","winStart","targetDataIndex","defaultIndex","legendDataIdx","TitleModel","subtext","subtarget","TitleView","titleModel","subtextStyleModel","subText","subTextEl","sublink","groupRect","alignStyle","fillLabel","inner$a","MarkerModel","createdBySelf","hostSeries","__hostSeries","markerOpt","markerModel","createMarkerModelFromSeries","getMarkerModelFromSeries","MarkPointModel","masterMarkerModel","hasXOrY","hasXAndY","markerTypeCalculatorWithExtent","markerType","otherDataDim","targetDataDim","otherCoordIndex","targetCoordIndex","coordArr","calcDataDim","numCalculate","coordArrValue","markerTypeCalculator","median","dataTransform","getAxisInfo$1","coordInfo","baseDataDim","valueDataDim","radiusAxis","angleAxis","valueIndex","dataDimToCoordDim","dataFilter$1","sum_1","count_1","inner$b","MarkerView","markerGroupMap","markKeep","drawGroup","seriesModelList","updateMarkerLayout","xPx","yPx","MarkPointView","markPointModel","mpModel","symbolDrawMap","createList$1","coordDimsInfos","dataOpt","MarkLineModel","straightLineProto","bezierCurveProto","StraightLineShape","CurveShape","isStraightLine","ECLinePath","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","createSymbol$1","lineData","symbolSizeArr","createLine","setLinePoints","Line$1","_createLine","_updateCommonStl","getLinePath","blurLineStyle","selectLineStyle","lineState","lineStateStyle","stateStyle","labelNormalModel","__align","__verticalAlign","__position","__labelDistance","linePath","symbolFrom","symbolTo","invScale","fromPos","toPos","tangent","distanceX","distanceY","halfPercent","LineDraw","LineCtor","_LineCtor","lineDraw","oldLineData","_lineData","makeSeriesScope$1","_doUpdate","isEffectObject","lineNeedsDraw","newLineData","isPointNaN","pts","inner$c","markLineTransform","mlModel","itemArray","mlType","mlFrom","mlTo","normalizedItem","isInifinity","ifMarkLineHasOnlyDim","fromCoord","toCoord","otherDimIndex","markLineFilter","updateSingleMarkerEndLayout","MarkLineView","markLineModel","mlData_1","fromData_1","toData_1","lineDrawMap","createList$2","fromData","toData","updateDataVisualAndLayout","fromSymbolSize","fromSymbol","toSymbolSize","toSymbol","optData","dimValueGetter$1","MarkAreaModel","inner$d","markAreaTransform","maModel","ltCoord","rbCoord","isInifinity$1","ifMarkAreaHasOnlyDim","markAreaFilter","getSingleMarkerEndPoint","dimPermutations","MarkAreaView","markAreaModel","areaData_1","areaGroupMap","polygonGroup","areaData","createList$3","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","coordType","getAxisMainType","findEffectedDataZooms","axisRecords","effectedModels","effectedModelMap","dataZoomModel","addToEffected","foundNewLink","processSingle","isLinked","markAxisControlled","isLink","eachTargetAxis","axisIdxArr","collectReferCoordSysModelInfo","coordSysInfoWrap","infoList","infoMap","coordSysUid","axisModels","DataZoomAxisInfo","indexList","indexMap","axisCmptIdx","DataZoomModel","_autoThrottle","_noTarget","_rangePropMode","inputRawOption","retrieveRawOption","settledOption","_doInit","realtime","_setDefaultThrottle","_updateRangeUse","_resetTarget","optionOrient","targetAxisIndexMap","_targetAxisInfoMap","hasAxisSpecified","_fillSpecifiedTargetAxis","_orient","_makeAutoOrientByTargetAxis","_fillAutoTargetAxisByOrient","refering","needAuto","setParallelAxis","gridModel_1","axModel","globalOption","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","noTarget","getFirstTargetAxisModel","firstAxisModel","getAxisProxy","getAxisModel","__dzAxisProxy","setRawRange","setCalculatedRange","getPercentRange","axisProxy","findRepresentativeAxisProxy","getDataPercentWindow","getValueRange","getDataValueWindow","firstProxy","axisDimList","hostedBy","getRangePropMode","filterMode","DataZoomView","SliderZoomModel","handleIcon","moveHandleSize","moveHandleIcon","showDetail","showDataShadow","zoomLock","brushSelect","sliderMove","handleEnds","handleIndex","minSpan","maxSpan","restrict","handleSpan","originalDistSign","getSpanSign","extentMinSpan","realExtent","currDistSign","Rect$1","DEFAULT_LOCATION_EDGE_GAP","DEFAULT_FRAME_BORDER_WIDTH","DEFAULT_FILLER_SIZE","DEFAULT_MOVE_HANDLE_SIZE","HORIZONTAL","VERTICAL","LABEL_GAP","SHOW_DATA_SHADOW_SERIES_TYPE","REALTIME_ANIMATION_CONFIG","SliderZoomView","_onBrush","_onBrushEnd","_buildView","_updateView","thisGroup","_brushing","_resetLocation","_resetInterval","barGroup","sliderGroup","_renderDataShadow","_positionGroup","showMoveHandle","coordRect","_findCoordRect","ecSize","layoutParams","_location","_size","targetAxisModel","otherAxisInverse","_dataShadowInfo","_getViewExtent","clickPanel","_onClickPanel","_onBrushStart","_prepareDataShadowInfo","dataShadowSegs","getShadowDim","otherDataExtent","otherOffset","otherShadowExtent","thisShadowExtent","areaPoints","thisCoord","stride","lastIsEmpty","otherCoord","createDataShadowGroup","isSelectedArea","getTargetSeriesModels","thisAxis","getOtherDim","thisDim","handles","handleLabels","filler","_onDragMove","_onDragEnd","onmouseover","_showDataInfo","onmouseout","bRect","_handleHeight","_handleWidth","handleColor","actualMoveZone","moveHandleHeight","moveHandle_1","moveHandle","iconSize","moveZoneExpandSize","moveZone","ondragstart","_range","viewExtent","_handleEnds","_updateInterval","viewExtend","minMaxSpan","getMinMaxSpan","percentExtent","lastRange","nonRealtime","displaybles","handleInterval","handleHeight","segIntervals","segGroup","_updateDataInfo","labelTexts","dataInterval","calculateDataWindow","valueWindow","_formatLabel","orderedHandleEnds","setLabel","barTransform","textPoint","labelPrecision","valueStr","showOrHide","changed","_dispatchZoomAction","localPoint","_brushStart","_brushStartTime","brushRect","brushShape","brushEndTime","_updateBrushRect","mouseX","mouseY","brushStart","endPoint","dataZoomId","coordSysInfoList","each$8","asc$1","AxisProxy","_dimName","_axisIndex","_dataZoomModel","_valueWindow","_percentWindow","axisMainType","_minMaxSpan","_dataExtent","percentWindow","hasPropModeValue","boundPercent","boundValue","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","targetSeries","calculateDataExtent","_updateMinMaxSpan","dataWindow","_setAxisModel","filterData","leftOut","rightOut","thisHasValue","thisLeftOut","thisRightOut","isInWindow","percentSpan","valueSpan","eachAxisModel","proxyList","percentRange","valueRange","endValue","InsideZoomModel","disabled","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","ATTR","take","resourceKey","userKey","getStore","release","uKey","isTaken","RoamController","mousedownHandler","_mousedownHandler","mousemoveHandler","_mousemoveHandler","mouseupHandler","_mouseupHandler","mousewheelHandler","_mousewheelHandler","pinchHandler","_pinchHandler","controlType","_opt","isDragging","isPinching","_pinching","setPointerChecker","pointerChecker","isAvailableBehavior","oldX","oldY","newX","newY","shouldZoom","shouldMove","absWheelDeltaDelta","factor","checkPointerAndTrigger","absDelta","scrollDelta","controller","behaviorToCheck","contollerEvent","settings","inner$e","apiInner","coordSysRecordMap","coordSysRecord","dataZoomInfoMap","dzReferCoordSysWrap","dzCoordSysInfo","createCoordSysRecord","dzReferCoordSysInfo","getRange","firstDzInfo","firstDzKey","disposeCoordSysRecord","controllerParams","mergeControllerParams","containsPoint","setViewInfoToCoordSysRecord","dzInfo","disposeCoordSysRecordIfNeeded","coordSysKeyArr","dzUid","typePriority","dataZoomInfo","oneType","InsideZoomView","pan","getRangeHandlers","scrollMove","directionInfo","getDirectionInfo","percentPoint","signal","pixelStart","pixelLength","pixel","makeMover","getPercentDelta","percentDelta","oldPoint","newPoint","radiusExtent","getRadiusAxis","angleExtent","getAngleAxis","pointToCoord","ToolboxFeature","registerFeature","getFeature","ToolboxModel","featureName","Feature","itemSize","showTitle","ToolboxView","toolboxModel","featureOpts","_features","featureNames","_featureNames","processFeature","featureModel","newTitle","isUserFeatureName","unusable","createIconPaths","setIconStatus","iconName","iconPaths","iconStatus","iconStyleModel","iconStyleEmphasisModel","icons","getIcons","titles","iconsMap","titlesMap","pathEmphasisState","__title","hoverStyle","defaultTextPosition","titleText","emphasisTextConfig","emphasisTextState","emphasisTextStyle","needPutOnTop","topOffset","SaveAsImage","MouseEvent","$a","download","evt","bubbles","cancelable","dispatchEvent","msSaveOrOpenBlob","bstr","atob","u8arr","Uint8Array","blob","Blob","tab","write","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","seriesOptGenreator","generateNewSeriesTypes","newSeriesOpt","radio","seriesOptions","tiledLang","titleLang","isStack","currentType","BLOCK_SPLITER","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","assembleSeriesWithCategoryAxis","groups","tables","headers","columns","assembleOtherSeries","getContentFromModel","trim$1","isTSVFormat","itemSplitRegex","parseTSVContents","tsv","tsvLines","header","parseListContents","hasName","parseContents","blockMetaList","blocks","blockMeta","DataView","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","originalData","newVal","newSeriesOptList","BRUSH_PANEL_GLOBAL","mathMin$5","mathMax$5","mathPow$2","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","CURSOR_MAP","ne","sw","nw","se","DEFAULT_BRUSH_OPT","transformable","brushMode","removeOnClick","baseUID","BrushController","_covers","_handlers","_uid","pointerHandlers","enableBrush","brushOption","_mounted","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","_brushOption","setPanels","panelOpts","panels_1","_panels","panelId","enableGlobalPan","_transform","updateCovers","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","creatingCover","_creatingCover","oldGetKey","getKey","addOrUpdate","cover","__brushOption","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","coverRenderers","coverRenderer","getCoverRenderer","updateCoverShape","updateCommon","getPanelByPoint","localCursorPoint","panels","panel","pn","isTargetByCursor","getPanelByCover","covers","originalLength","trigger$1","areas","isEnd","shouldShowCover","getTrackEnds","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","driftRect","nameSequence","updateBaseRect","localRange","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","mainEl","globalDir","getGlobalDirection1","getGlobalDirection2","pointsToRect","clipByPanel","formatRectRange","getTransform$1","localDirName","inverseMap","localDirNameSeq","dirNameSequence","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","localD","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","rawE","mainShapeContain","updateCoverByMouse","_creatingPanel","thisBrushOption","eventParams","determineBrushType","coverBrushOption","getCreatingRange","defaultBrushType","handleDragEnd","getLineRenderer","returnInput","localTrack","ends","xyIndex","getLinearBrushOtherExtent","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","makeRectPanelClipPath","normalizeRect","localPoints","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","makeRectIsTargetByCursor","targetModel","COORD_CONVERTS","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","_targetInfoList","foundCpts","parseFinder$1","targetInfoBuilders","builder","include","setOutputRanges","matchOutputRanges","area","coordRange","coordRanges","coordConvert","__rangeOffset","diffProcessor","xyMinMax","findTargetInfo","coordSyses","setInputRanges","rangeOffset","getScales","makePanelOpts","getDefaultBrushType","getPanelRect","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","panelRectBuilders","xAxisDeclared","yAxisDeclared","geoModels","geoModel","axisConvert","rangeOrCoordRange","xminymin","xmaxymax","axisNameIndex","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","sizeOrigin","each$9","inner$f","newSnapshot","storedSnapshots","getStoreSnapshots","snapshot","clear$1","snapshots","SelectDataZoomModel","SelectDataZoomView","each$a","DATA_ZOOM_ID_BASE","DataZoomFeature","brushController","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","findDataZoom","minValueSpan","maxValueSpan","found","dzModel","has","nextActive","isZoomActive","dataZoomSelectActive","dzFeatureModel","xAxisId","yAxisId","zoomActive","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","$fromToolbox","RestoreOption","createElementNS","CMD$4","NONE","mathRound","mathSin$3","mathCos$3","PI$6","PI2$7","degree","EPSILON$4","round4","isAroundZero$1","pathHasFill","pathHasStroke","reduceNumberString","toPrecision","svgEl","attrXLink","setAttributeNS","bindStyle","strokeWidth","strokeScale_1","pathDataToString","dataLength","nData","dThetaPositive","isCircle","unifiedTheta","wrapSVGBuildPath","__svgBuildPath","oldBuildPath_1","__svgPathStr","svgPath","__svgEl","svgImage","HTMLImageElement","__imageSrc","TEXT_ALIGN_TO_ANCHOR","adjustTextY$1","svgText","textSvgEl","textSvgElStyle","equals","newLen","oldLen","editLength","maxEditLength","bestPath","newPos","oldPos","extractCommon","added","execEditLength","diagonalPath","basePath","addPath","removePath","canAdd","canRemove","clonePath","pushComponent","buildValues","commonCount","componentPos","componentLen","arrayDiff","MARK_UNUSED","MARK_USED","Definable","zrId","svgRoot","tagNames","markLabel","domName","nextId","_domName","_zrId","_svgRoot","_tagNames","_markLabel","getDefs","isForceCreating","defs","getElementsByTagName","defs_1","contains","doUpdate","onUpdate","addDom","removeDom","getDoms","doms","tagName","tags","markAllUnused","that","markDomUsed","removeUnused","getSvgProxy","getSvgElement","isLinearGradient","isRadialGradient","GradientManager","addWithoutUpdate","svgElement","that_1","__dom","markUsed","updateDom","stop_1","hex","ClippathManager","isText","clipPathEl","domKey","svgProxy","cloneNode","_textDom","ShadowManager","_shadowDom","_shadowDomId","domChildArr","domChild","stdDx","stdDy","stdDeviation","parseInt10$1","checkParentAvailable","insertAfter","prevSibling","prepend","SVGPainter","createMethodNotSupport","svgDom","bgRoot","_gradientManager","_clipPathManager","_shadowManager","viewport","_svgDom","_backgroundRoot","_viewport","_visibleList","_backgroundNode","bgNode","visibleList","listLen","newVisibleList","prevSvgElement","_getDefs","viewportStyle","encodeURIComponent","outerHTML","util"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = global || self, factory(global.echarts = {}));\n}(this, (function (exports) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    function __spreadArrays() {\r\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n                r[k] = a[j];\r\n        return r;\r\n    }\n\n    var Browser = (function () {\r\n        function Browser() {\r\n            this.firefox = false;\r\n            this.ie = false;\r\n            this.edge = false;\r\n            this.weChat = false;\r\n        }\r\n        return Browser;\r\n    }());\r\n    var Env = (function () {\r\n        function Env() {\r\n            this.browser = new Browser();\r\n            this.node = false;\r\n            this.wxa = false;\r\n            this.worker = false;\r\n            this.canvasSupported = false;\r\n            this.svgSupported = false;\r\n            this.touchEventsSupported = false;\r\n            this.pointerEventsSupported = false;\r\n            this.domSupported = false;\r\n        }\r\n        return Env;\r\n    }());\r\n    var env = new Env();\r\n    if (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\r\n        env.wxa = true;\r\n        env.canvasSupported = true;\r\n        env.touchEventsSupported = true;\r\n    }\r\n    else if (typeof document === 'undefined' && typeof self !== 'undefined') {\r\n        env.worker = true;\r\n        env.canvasSupported = true;\r\n    }\r\n    else if (typeof navigator === 'undefined') {\r\n        env.node = true;\r\n        env.canvasSupported = true;\r\n        env.svgSupported = true;\r\n    }\r\n    else {\r\n        detect(navigator.userAgent, env);\r\n    }\r\n    function detect(ua, env) {\r\n        var browser = env.browser;\r\n        var firefox = ua.match(/Firefox\\/([\\d.]+)/);\r\n        var ie = ua.match(/MSIE\\s([\\d.]+)/)\r\n            || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\r\n        var edge = ua.match(/Edge\\/([\\d.]+)/);\r\n        var weChat = (/micromessenger/i).test(ua);\r\n        if (firefox) {\r\n            browser.firefox = true;\r\n            browser.version = firefox[1];\r\n        }\r\n        if (ie) {\r\n            browser.ie = true;\r\n            browser.version = ie[1];\r\n        }\r\n        if (edge) {\r\n            browser.edge = true;\r\n            browser.version = edge[1];\r\n        }\r\n        if (weChat) {\r\n            browser.weChat = true;\r\n        }\r\n        env.canvasSupported = !!document.createElement('canvas').getContext;\r\n        env.svgSupported = typeof SVGRect !== 'undefined';\r\n        env.touchEventsSupported = 'ontouchstart' in window && !browser.ie && !browser.edge;\r\n        env.pointerEventsSupported = 'onpointerdown' in window\r\n            && (browser.edge || (browser.ie && +browser.version >= 11));\r\n        env.domSupported = typeof document !== 'undefined';\r\n    }\n\n    var BUILTIN_OBJECT = {\r\n        '[object Function]': true,\r\n        '[object RegExp]': true,\r\n        '[object Date]': true,\r\n        '[object Error]': true,\r\n        '[object CanvasGradient]': true,\r\n        '[object CanvasPattern]': true,\r\n        '[object Image]': true,\r\n        '[object Canvas]': true\r\n    };\r\n    var TYPED_ARRAY = {\r\n        '[object Int8Array]': true,\r\n        '[object Uint8Array]': true,\r\n        '[object Uint8ClampedArray]': true,\r\n        '[object Int16Array]': true,\r\n        '[object Uint16Array]': true,\r\n        '[object Int32Array]': true,\r\n        '[object Uint32Array]': true,\r\n        '[object Float32Array]': true,\r\n        '[object Float64Array]': true\r\n    };\r\n    var objToString = Object.prototype.toString;\r\n    var arrayProto = Array.prototype;\r\n    var nativeForEach = arrayProto.forEach;\r\n    var nativeFilter = arrayProto.filter;\r\n    var nativeSlice = arrayProto.slice;\r\n    var nativeMap = arrayProto.map;\r\n    var ctorFunction = (function () { }).constructor;\r\n    var protoFunction = ctorFunction ? ctorFunction.prototype : null;\r\n    var methods = {};\r\n    function $override(name, fn) {\r\n        methods[name] = fn;\r\n    }\r\n    var idStart = 0x0907;\r\n    function guid() {\r\n        return idStart++;\r\n    }\r\n    function logError() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (typeof console !== 'undefined') {\r\n            console.error.apply(args);\r\n        }\r\n    }\r\n    function clone(source) {\r\n        if (source == null || typeof source !== 'object') {\r\n            return source;\r\n        }\r\n        var result = source;\r\n        var typeStr = objToString.call(source);\r\n        if (typeStr === '[object Array]') {\r\n            if (!isPrimitive(source)) {\r\n                result = [];\r\n                for (var i = 0, len = source.length; i < len; i++) {\r\n                    result[i] = clone(source[i]);\r\n                }\r\n            }\r\n        }\r\n        else if (TYPED_ARRAY[typeStr]) {\r\n            if (!isPrimitive(source)) {\r\n                var Ctor = source.constructor;\r\n                if (Ctor.from) {\r\n                    result = Ctor.from(source);\r\n                }\r\n                else {\r\n                    result = new Ctor(source.length);\r\n                    for (var i = 0, len = source.length; i < len; i++) {\r\n                        result[i] = clone(source[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\r\n            result = {};\r\n            for (var key in source) {\r\n                if (source.hasOwnProperty(key)) {\r\n                    result[key] = clone(source[key]);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function merge(target, source, overwrite) {\r\n        if (!isObject(source) || !isObject(target)) {\r\n            return overwrite ? clone(source) : target;\r\n        }\r\n        for (var key in source) {\r\n            if (source.hasOwnProperty(key)) {\r\n                var targetProp = target[key];\r\n                var sourceProp = source[key];\r\n                if (isObject(sourceProp)\r\n                    && isObject(targetProp)\r\n                    && !isArray(sourceProp)\r\n                    && !isArray(targetProp)\r\n                    && !isDom(sourceProp)\r\n                    && !isDom(targetProp)\r\n                    && !isBuiltInObject(sourceProp)\r\n                    && !isBuiltInObject(targetProp)\r\n                    && !isPrimitive(sourceProp)\r\n                    && !isPrimitive(targetProp)) {\r\n                    merge(targetProp, sourceProp, overwrite);\r\n                }\r\n                else if (overwrite || !(key in target)) {\r\n                    target[key] = clone(source[key]);\r\n                }\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n    function mergeAll(targetAndSources, overwrite) {\r\n        var result = targetAndSources[0];\r\n        for (var i = 1, len = targetAndSources.length; i < len; i++) {\r\n            result = merge(result, targetAndSources[i], overwrite);\r\n        }\r\n        return result;\r\n    }\r\n    function extend(target, source) {\r\n        if (Object.assign) {\r\n            Object.assign(target, source);\r\n        }\r\n        else {\r\n            for (var key in source) {\r\n                if (source.hasOwnProperty(key)) {\r\n                    target[key] = source[key];\r\n                }\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n    function defaults(target, source, overlay) {\r\n        var keysArr = keys(source);\r\n        for (var i = 0; i < keysArr.length; i++) {\r\n            var key = keysArr[i];\r\n            if ((overlay ? source[key] != null : target[key] == null)) {\r\n                target[key] = source[key];\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n    var createCanvas = function () {\r\n        return methods.createCanvas();\r\n    };\r\n    methods.createCanvas = function () {\r\n        return document.createElement('canvas');\r\n    };\r\n    function indexOf(array, value) {\r\n        if (array) {\r\n            if (array.indexOf) {\r\n                return array.indexOf(value);\r\n            }\r\n            for (var i = 0, len = array.length; i < len; i++) {\r\n                if (array[i] === value) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    function inherits(clazz, baseClazz) {\r\n        var clazzPrototype = clazz.prototype;\r\n        function F() { }\r\n        F.prototype = baseClazz.prototype;\r\n        clazz.prototype = new F();\r\n        for (var prop in clazzPrototype) {\r\n            if (clazzPrototype.hasOwnProperty(prop)) {\r\n                clazz.prototype[prop] = clazzPrototype[prop];\r\n            }\r\n        }\r\n        clazz.prototype.constructor = clazz;\r\n        clazz.superClass = baseClazz;\r\n    }\r\n    function mixin(target, source, override) {\r\n        target = 'prototype' in target ? target.prototype : target;\r\n        source = 'prototype' in source ? source.prototype : source;\r\n        if (Object.getOwnPropertyNames) {\r\n            var keyList = Object.getOwnPropertyNames(source);\r\n            for (var i = 0; i < keyList.length; i++) {\r\n                var key = keyList[i];\r\n                if (key !== 'constructor') {\r\n                    if ((override ? source[key] != null : target[key] == null)) {\r\n                        target[key] = source[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            defaults(target, source, override);\r\n        }\r\n    }\r\n    function isArrayLike(data) {\r\n        if (!data) {\r\n            return false;\r\n        }\r\n        if (typeof data === 'string') {\r\n            return false;\r\n        }\r\n        return typeof data.length === 'number';\r\n    }\r\n    function each(arr, cb, context) {\r\n        if (!(arr && cb)) {\r\n            return;\r\n        }\r\n        if (arr.forEach && arr.forEach === nativeForEach) {\r\n            arr.forEach(cb, context);\r\n        }\r\n        else if (arr.length === +arr.length) {\r\n            for (var i = 0, len = arr.length; i < len; i++) {\r\n                cb.call(context, arr[i], i, arr);\r\n            }\r\n        }\r\n        else {\r\n            for (var key in arr) {\r\n                if (arr.hasOwnProperty(key)) {\r\n                    cb.call(context, arr[key], key, arr);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function map(arr, cb, context) {\r\n        if (!arr) {\r\n            return [];\r\n        }\r\n        if (!cb) {\r\n            return slice(arr);\r\n        }\r\n        if (arr.map && arr.map === nativeMap) {\r\n            return arr.map(cb, context);\r\n        }\r\n        else {\r\n            var result = [];\r\n            for (var i = 0, len = arr.length; i < len; i++) {\r\n                result.push(cb.call(context, arr[i], i, arr));\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    function reduce(arr, cb, memo, context) {\r\n        if (!(arr && cb)) {\r\n            return;\r\n        }\r\n        for (var i = 0, len = arr.length; i < len; i++) {\r\n            memo = cb.call(context, memo, arr[i], i, arr);\r\n        }\r\n        return memo;\r\n    }\r\n    function filter(arr, cb, context) {\r\n        if (!arr) {\r\n            return [];\r\n        }\r\n        if (!cb) {\r\n            return slice(arr);\r\n        }\r\n        if (arr.filter && arr.filter === nativeFilter) {\r\n            return arr.filter(cb, context);\r\n        }\r\n        else {\r\n            var result = [];\r\n            for (var i = 0, len = arr.length; i < len; i++) {\r\n                if (cb.call(context, arr[i], i, arr)) {\r\n                    result.push(arr[i]);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    function find(arr, cb, context) {\r\n        if (!(arr && cb)) {\r\n            return;\r\n        }\r\n        for (var i = 0, len = arr.length; i < len; i++) {\r\n            if (cb.call(context, arr[i], i, arr)) {\r\n                return arr[i];\r\n            }\r\n        }\r\n    }\r\n    function keys(obj) {\r\n        if (!obj) {\r\n            return [];\r\n        }\r\n        if (Object.keys) {\r\n            return Object.keys(obj);\r\n        }\r\n        var keyList = [];\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                keyList.push(key);\r\n            }\r\n        }\r\n        return keyList;\r\n    }\r\n    function bindPolyfill(func, context) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        return function () {\r\n            return func.apply(context, args.concat(nativeSlice.call(arguments)));\r\n        };\r\n    }\r\n    var bind = (protoFunction && isFunction(protoFunction.bind))\r\n        ? protoFunction.call.bind(protoFunction.bind)\r\n        : bindPolyfill;\r\n    function curry(func) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        return function () {\r\n            return func.apply(this, args.concat(nativeSlice.call(arguments)));\r\n        };\r\n    }\r\n    function isArray(value) {\r\n        if (Array.isArray) {\r\n            return Array.isArray(value);\r\n        }\r\n        return objToString.call(value) === '[object Array]';\r\n    }\r\n    function isFunction(value) {\r\n        return typeof value === 'function';\r\n    }\r\n    function isString(value) {\r\n        return typeof value === 'string';\r\n    }\r\n    function isStringSafe(value) {\r\n        return objToString.call(value) === '[object String]';\r\n    }\r\n    function isNumber(value) {\r\n        return typeof value === 'number';\r\n    }\r\n    function isObject(value) {\r\n        var type = typeof value;\r\n        return type === 'function' || (!!value && type === 'object');\r\n    }\r\n    function isBuiltInObject(value) {\r\n        return !!BUILTIN_OBJECT[objToString.call(value)];\r\n    }\r\n    function isTypedArray(value) {\r\n        return !!TYPED_ARRAY[objToString.call(value)];\r\n    }\r\n    function isDom(value) {\r\n        return typeof value === 'object'\r\n            && typeof value.nodeType === 'number'\r\n            && typeof value.ownerDocument === 'object';\r\n    }\r\n    function isGradientObject(value) {\r\n        return value.colorStops != null;\r\n    }\r\n    function isPatternObject(value) {\r\n        return value.image != null;\r\n    }\r\n    function isRegExp(value) {\r\n        return objToString.call(value) === '[object RegExp]';\r\n    }\r\n    function eqNaN(value) {\r\n        return value !== value;\r\n    }\r\n    function retrieve() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        for (var i = 0, len = args.length; i < len; i++) {\r\n            if (args[i] != null) {\r\n                return args[i];\r\n            }\r\n        }\r\n    }\r\n    function retrieve2(value0, value1) {\r\n        return value0 != null\r\n            ? value0\r\n            : value1;\r\n    }\r\n    function retrieve3(value0, value1, value2) {\r\n        return value0 != null\r\n            ? value0\r\n            : value1 != null\r\n                ? value1\r\n                : value2;\r\n    }\r\n    function slice(arr) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        return nativeSlice.apply(arr, args);\r\n    }\r\n    function normalizeCssArray(val) {\r\n        if (typeof (val) === 'number') {\r\n            return [val, val, val, val];\r\n        }\r\n        var len = val.length;\r\n        if (len === 2) {\r\n            return [val[0], val[1], val[0], val[1]];\r\n        }\r\n        else if (len === 3) {\r\n            return [val[0], val[1], val[2], val[1]];\r\n        }\r\n        return val;\r\n    }\r\n    function assert(condition, message) {\r\n        if (!condition) {\r\n            throw new Error(message);\r\n        }\r\n    }\r\n    function trim(str) {\r\n        if (str == null) {\r\n            return null;\r\n        }\r\n        else if (typeof str.trim === 'function') {\r\n            return str.trim();\r\n        }\r\n        else {\r\n            return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\r\n        }\r\n    }\r\n    var primitiveKey = '__ec_primitive__';\r\n    function setAsPrimitive(obj) {\r\n        obj[primitiveKey] = true;\r\n    }\r\n    function isPrimitive(obj) {\r\n        return obj[primitiveKey];\r\n    }\r\n    var HashMap = (function () {\r\n        function HashMap(obj) {\r\n            this.data = {};\r\n            var isArr = isArray(obj);\r\n            this.data = {};\r\n            var thisMap = this;\r\n            (obj instanceof HashMap)\r\n                ? obj.each(visit)\r\n                : (obj && each(obj, visit));\r\n            function visit(value, key) {\r\n                isArr ? thisMap.set(value, key) : thisMap.set(key, value);\r\n            }\r\n        }\r\n        HashMap.prototype.get = function (key) {\r\n            return this.data.hasOwnProperty(key) ? this.data[key] : null;\r\n        };\r\n        HashMap.prototype.set = function (key, value) {\r\n            return (this.data[key] = value);\r\n        };\r\n        HashMap.prototype.each = function (cb, context) {\r\n            for (var key in this.data) {\r\n                if (this.data.hasOwnProperty(key)) {\r\n                    cb.call(context, this.data[key], key);\r\n                }\r\n            }\r\n        };\r\n        HashMap.prototype.keys = function () {\r\n            return keys(this.data);\r\n        };\r\n        HashMap.prototype.removeKey = function (key) {\r\n            delete this.data[key];\r\n        };\r\n        return HashMap;\r\n    }());\r\n    function createHashMap(obj) {\r\n        return new HashMap(obj);\r\n    }\r\n    function concatArray(a, b) {\r\n        var newArray = new a.constructor(a.length + b.length);\r\n        for (var i = 0; i < a.length; i++) {\r\n            newArray[i] = a[i];\r\n        }\r\n        var offset = a.length;\r\n        for (var i = 0; i < b.length; i++) {\r\n            newArray[i + offset] = b[i];\r\n        }\r\n        return newArray;\r\n    }\r\n    function createObject(proto, properties) {\r\n        var obj;\r\n        if (Object.create) {\r\n            obj = Object.create(proto);\r\n        }\r\n        else {\r\n            var StyleCtor = function () { };\r\n            StyleCtor.prototype = proto;\r\n            obj = new StyleCtor();\r\n        }\r\n        if (properties) {\r\n            extend(obj, properties);\r\n        }\r\n        return obj;\r\n    }\r\n    function hasOwn(own, prop) {\r\n        return own.hasOwnProperty(prop);\r\n    }\r\n    function noop() { }\n\n    var zrUtil = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        $override: $override,\n        guid: guid,\n        logError: logError,\n        clone: clone,\n        merge: merge,\n        mergeAll: mergeAll,\n        extend: extend,\n        defaults: defaults,\n        createCanvas: createCanvas,\n        indexOf: indexOf,\n        inherits: inherits,\n        mixin: mixin,\n        isArrayLike: isArrayLike,\n        each: each,\n        map: map,\n        reduce: reduce,\n        filter: filter,\n        find: find,\n        keys: keys,\n        bind: bind,\n        curry: curry,\n        isArray: isArray,\n        isFunction: isFunction,\n        isString: isString,\n        isStringSafe: isStringSafe,\n        isNumber: isNumber,\n        isObject: isObject,\n        isBuiltInObject: isBuiltInObject,\n        isTypedArray: isTypedArray,\n        isDom: isDom,\n        isGradientObject: isGradientObject,\n        isPatternObject: isPatternObject,\n        isRegExp: isRegExp,\n        eqNaN: eqNaN,\n        retrieve: retrieve,\n        retrieve2: retrieve2,\n        retrieve3: retrieve3,\n        slice: slice,\n        normalizeCssArray: normalizeCssArray,\n        assert: assert,\n        trim: trim,\n        setAsPrimitive: setAsPrimitive,\n        isPrimitive: isPrimitive,\n        HashMap: HashMap,\n        createHashMap: createHashMap,\n        concatArray: concatArray,\n        createObject: createObject,\n        hasOwn: hasOwn,\n        noop: noop\n    });\n\n    function create(x, y) {\r\n        if (x == null) {\r\n            x = 0;\r\n        }\r\n        if (y == null) {\r\n            y = 0;\r\n        }\r\n        return [x, y];\r\n    }\r\n    function copy(out, v) {\r\n        out[0] = v[0];\r\n        out[1] = v[1];\r\n        return out;\r\n    }\r\n    function clone$1(v) {\r\n        return [v[0], v[1]];\r\n    }\r\n    function set(out, a, b) {\r\n        out[0] = a;\r\n        out[1] = b;\r\n        return out;\r\n    }\r\n    function add(out, v1, v2) {\r\n        out[0] = v1[0] + v2[0];\r\n        out[1] = v1[1] + v2[1];\r\n        return out;\r\n    }\r\n    function scaleAndAdd(out, v1, v2, a) {\r\n        out[0] = v1[0] + v2[0] * a;\r\n        out[1] = v1[1] + v2[1] * a;\r\n        return out;\r\n    }\r\n    function sub(out, v1, v2) {\r\n        out[0] = v1[0] - v2[0];\r\n        out[1] = v1[1] - v2[1];\r\n        return out;\r\n    }\r\n    function len(v) {\r\n        return Math.sqrt(lenSquare(v));\r\n    }\r\n    var length = len;\r\n    function lenSquare(v) {\r\n        return v[0] * v[0] + v[1] * v[1];\r\n    }\r\n    var lengthSquare = lenSquare;\r\n    function mul(out, v1, v2) {\r\n        out[0] = v1[0] * v2[0];\r\n        out[1] = v1[1] * v2[1];\r\n        return out;\r\n    }\r\n    function div(out, v1, v2) {\r\n        out[0] = v1[0] / v2[0];\r\n        out[1] = v1[1] / v2[1];\r\n        return out;\r\n    }\r\n    function dot(v1, v2) {\r\n        return v1[0] * v2[0] + v1[1] * v2[1];\r\n    }\r\n    function scale(out, v, s) {\r\n        out[0] = v[0] * s;\r\n        out[1] = v[1] * s;\r\n        return out;\r\n    }\r\n    function normalize(out, v) {\r\n        var d = len(v);\r\n        if (d === 0) {\r\n            out[0] = 0;\r\n            out[1] = 0;\r\n        }\r\n        else {\r\n            out[0] = v[0] / d;\r\n            out[1] = v[1] / d;\r\n        }\r\n        return out;\r\n    }\r\n    function distance(v1, v2) {\r\n        return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0])\r\n            + (v1[1] - v2[1]) * (v1[1] - v2[1]));\r\n    }\r\n    var dist = distance;\r\n    function distanceSquare(v1, v2) {\r\n        return (v1[0] - v2[0]) * (v1[0] - v2[0])\r\n            + (v1[1] - v2[1]) * (v1[1] - v2[1]);\r\n    }\r\n    var distSquare = distanceSquare;\r\n    function negate(out, v) {\r\n        out[0] = -v[0];\r\n        out[1] = -v[1];\r\n        return out;\r\n    }\r\n    function lerp(out, v1, v2, t) {\r\n        out[0] = v1[0] + t * (v2[0] - v1[0]);\r\n        out[1] = v1[1] + t * (v2[1] - v1[1]);\r\n        return out;\r\n    }\r\n    function applyTransform(out, v, m) {\r\n        var x = v[0];\r\n        var y = v[1];\r\n        out[0] = m[0] * x + m[2] * y + m[4];\r\n        out[1] = m[1] * x + m[3] * y + m[5];\r\n        return out;\r\n    }\r\n    function min(out, v1, v2) {\r\n        out[0] = Math.min(v1[0], v2[0]);\r\n        out[1] = Math.min(v1[1], v2[1]);\r\n        return out;\r\n    }\r\n    function max(out, v1, v2) {\r\n        out[0] = Math.max(v1[0], v2[0]);\r\n        out[1] = Math.max(v1[1], v2[1]);\r\n        return out;\r\n    }\n\n    var vector = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        create: create,\n        copy: copy,\n        clone: clone$1,\n        set: set,\n        add: add,\n        scaleAndAdd: scaleAndAdd,\n        sub: sub,\n        len: len,\n        length: length,\n        lenSquare: lenSquare,\n        lengthSquare: lengthSquare,\n        mul: mul,\n        div: div,\n        dot: dot,\n        scale: scale,\n        normalize: normalize,\n        distance: distance,\n        dist: dist,\n        distanceSquare: distanceSquare,\n        distSquare: distSquare,\n        negate: negate,\n        lerp: lerp,\n        applyTransform: applyTransform,\n        min: min,\n        max: max\n    });\n\n    var Param = (function () {\r\n        function Param(target, e) {\r\n            this.target = target;\r\n            this.topTarget = e && e.topTarget;\r\n        }\r\n        return Param;\r\n    }());\r\n    var Draggable = (function () {\r\n        function Draggable(handler) {\r\n            this.handler = handler;\r\n            handler.on('mousedown', this._dragStart, this);\r\n            handler.on('mousemove', this._drag, this);\r\n            handler.on('mouseup', this._dragEnd, this);\r\n        }\r\n        Draggable.prototype._dragStart = function (e) {\r\n            var draggingTarget = e.target;\r\n            while (draggingTarget && !draggingTarget.draggable) {\r\n                draggingTarget = draggingTarget.parent;\r\n            }\r\n            if (draggingTarget) {\r\n                this._draggingTarget = draggingTarget;\r\n                draggingTarget.dragging = true;\r\n                this._x = e.offsetX;\r\n                this._y = e.offsetY;\r\n                this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\r\n            }\r\n        };\r\n        Draggable.prototype._drag = function (e) {\r\n            var draggingTarget = this._draggingTarget;\r\n            if (draggingTarget) {\r\n                var x = e.offsetX;\r\n                var y = e.offsetY;\r\n                var dx = x - this._x;\r\n                var dy = y - this._y;\r\n                this._x = x;\r\n                this._y = y;\r\n                draggingTarget.drift(dx, dy, e);\r\n                this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\r\n                var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\r\n                var lastDropTarget = this._dropTarget;\r\n                this._dropTarget = dropTarget;\r\n                if (draggingTarget !== dropTarget) {\r\n                    if (lastDropTarget && dropTarget !== lastDropTarget) {\r\n                        this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\r\n                    }\r\n                    if (dropTarget && dropTarget !== lastDropTarget) {\r\n                        this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        Draggable.prototype._dragEnd = function (e) {\r\n            var draggingTarget = this._draggingTarget;\r\n            if (draggingTarget) {\r\n                draggingTarget.dragging = false;\r\n            }\r\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\r\n            if (this._dropTarget) {\r\n                this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\r\n            }\r\n            this._draggingTarget = null;\r\n            this._dropTarget = null;\r\n        };\r\n        return Draggable;\r\n    }());\n\n    var Eventful = (function () {\r\n        function Eventful(eventProcessors) {\r\n            if (eventProcessors) {\r\n                this._$eventProcessor = eventProcessors;\r\n            }\r\n        }\r\n        Eventful.prototype.on = function (event, query, handler, context) {\r\n            if (!this._$handlers) {\r\n                this._$handlers = {};\r\n            }\r\n            var _h = this._$handlers;\r\n            if (typeof query === 'function') {\r\n                context = handler;\r\n                handler = query;\r\n                query = null;\r\n            }\r\n            if (!handler || !event) {\r\n                return this;\r\n            }\r\n            var eventProcessor = this._$eventProcessor;\r\n            if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\r\n                query = eventProcessor.normalizeQuery(query);\r\n            }\r\n            if (!_h[event]) {\r\n                _h[event] = [];\r\n            }\r\n            for (var i = 0; i < _h[event].length; i++) {\r\n                if (_h[event][i].h === handler) {\r\n                    return this;\r\n                }\r\n            }\r\n            var wrap = {\r\n                h: handler,\r\n                query: query,\r\n                ctx: (context || this),\r\n                callAtLast: handler.zrEventfulCallAtLast\r\n            };\r\n            var lastIndex = _h[event].length - 1;\r\n            var lastWrap = _h[event][lastIndex];\r\n            (lastWrap && lastWrap.callAtLast)\r\n                ? _h[event].splice(lastIndex, 0, wrap)\r\n                : _h[event].push(wrap);\r\n            return this;\r\n        };\r\n        Eventful.prototype.isSilent = function (eventName) {\r\n            var _h = this._$handlers;\r\n            return !_h || !_h[eventName] || !_h[eventName].length;\r\n        };\r\n        Eventful.prototype.off = function (eventType, handler) {\r\n            var _h = this._$handlers;\r\n            if (!_h) {\r\n                return this;\r\n            }\r\n            if (!eventType) {\r\n                this._$handlers = {};\r\n                return this;\r\n            }\r\n            if (handler) {\r\n                if (_h[eventType]) {\r\n                    var newList = [];\r\n                    for (var i = 0, l = _h[eventType].length; i < l; i++) {\r\n                        if (_h[eventType][i].h !== handler) {\r\n                            newList.push(_h[eventType][i]);\r\n                        }\r\n                    }\r\n                    _h[eventType] = newList;\r\n                }\r\n                if (_h[eventType] && _h[eventType].length === 0) {\r\n                    delete _h[eventType];\r\n                }\r\n            }\r\n            else {\r\n                delete _h[eventType];\r\n            }\r\n            return this;\r\n        };\r\n        Eventful.prototype.trigger = function (eventType) {\r\n            var args = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                args[_i - 1] = arguments[_i];\r\n            }\r\n            if (!this._$handlers) {\r\n                return this;\r\n            }\r\n            var _h = this._$handlers[eventType];\r\n            var eventProcessor = this._$eventProcessor;\r\n            if (_h) {\r\n                var argLen = args.length;\r\n                var len = _h.length;\r\n                for (var i = 0; i < len; i++) {\r\n                    var hItem = _h[i];\r\n                    if (eventProcessor\r\n                        && eventProcessor.filter\r\n                        && hItem.query != null\r\n                        && !eventProcessor.filter(eventType, hItem.query)) {\r\n                        i++;\r\n                        continue;\r\n                    }\r\n                    switch (argLen) {\r\n                        case 0:\r\n                            hItem.h.call(hItem.ctx);\r\n                            break;\r\n                        case 1:\r\n                            hItem.h.call(hItem.ctx, args[0]);\r\n                            break;\r\n                        case 2:\r\n                            hItem.h.call(hItem.ctx, args[0], args[1]);\r\n                            break;\r\n                        default:\r\n                            hItem.h.apply(hItem.ctx, args);\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            eventProcessor && eventProcessor.afterTrigger\r\n                && eventProcessor.afterTrigger(eventType);\r\n            return this;\r\n        };\r\n        Eventful.prototype.triggerWithContext = function (type) {\r\n            if (!this._$handlers) {\r\n                return this;\r\n            }\r\n            var _h = this._$handlers[type];\r\n            var eventProcessor = this._$eventProcessor;\r\n            if (_h) {\r\n                var args = arguments;\r\n                var argLen = args.length;\r\n                var ctx = args[argLen - 1];\r\n                var len = _h.length;\r\n                for (var i = 0; i < len;) {\r\n                    var hItem = _h[i];\r\n                    if (eventProcessor\r\n                        && eventProcessor.filter\r\n                        && hItem.query != null\r\n                        && !eventProcessor.filter(type, hItem.query)) {\r\n                        i++;\r\n                        continue;\r\n                    }\r\n                    switch (argLen) {\r\n                        case 0:\r\n                            hItem.h.call(ctx);\r\n                            break;\r\n                        case 1:\r\n                            hItem.h.call(ctx, args[0]);\r\n                            break;\r\n                        case 2:\r\n                            hItem.h.call(ctx, args[0], args[1]);\r\n                            break;\r\n                        default:\r\n                            hItem.h.apply(ctx, args.slice(1, argLen - 1));\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            eventProcessor && eventProcessor.afterTrigger\r\n                && eventProcessor.afterTrigger(type);\r\n            return this;\r\n        };\r\n        return Eventful;\r\n    }());\n\n    var LN2 = Math.log(2);\r\n    function determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\r\n        var cacheKey = rowMask + '-' + colMask;\r\n        var fullRank = rows.length;\r\n        if (detCache.hasOwnProperty(cacheKey)) {\r\n            return detCache[cacheKey];\r\n        }\r\n        if (rank === 1) {\r\n            var colStart = Math.round(Math.log(((1 << fullRank) - 1) & ~colMask) / LN2);\r\n            return rows[rowStart][colStart];\r\n        }\r\n        var subRowMask = rowMask | (1 << rowStart);\r\n        var subRowStart = rowStart + 1;\r\n        while (rowMask & (1 << subRowStart)) {\r\n            subRowStart++;\r\n        }\r\n        var sum = 0;\r\n        for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\r\n            var colTag = 1 << j;\r\n            if (!(colTag & colMask)) {\r\n                sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j]\r\n                    * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\r\n                colLocalIdx++;\r\n            }\r\n        }\r\n        detCache[cacheKey] = sum;\r\n        return sum;\r\n    }\r\n    function buildTransformer(src, dest) {\r\n        var mA = [\r\n            [src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]],\r\n            [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]],\r\n            [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]],\r\n            [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]],\r\n            [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]],\r\n            [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]],\r\n            [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]],\r\n            [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]\r\n        ];\r\n        var detCache = {};\r\n        var det = determinant(mA, 8, 0, 0, 0, detCache);\r\n        if (det === 0) {\r\n            return;\r\n        }\r\n        var vh = [];\r\n        for (var i = 0; i < 8; i++) {\r\n            for (var j = 0; j < 8; j++) {\r\n                vh[j] == null && (vh[j] = 0);\r\n                vh[j] += ((i + j) % 2 ? -1 : 1)\r\n                    * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache)\r\n                    / det * dest[i];\r\n            }\r\n        }\r\n        return function (out, srcPointX, srcPointY) {\r\n            var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\r\n            out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\r\n            out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\r\n        };\r\n    }\n\n    var EVENT_SAVED_PROP = '___zrEVENTSAVED';\r\n    var _calcOut = [];\r\n    function transformLocalCoord(out, elFrom, elTarget, inX, inY) {\r\n        return transformCoordWithViewport(_calcOut, elFrom, inX, inY, true)\r\n            && transformCoordWithViewport(out, elTarget, _calcOut[0], _calcOut[1]);\r\n    }\r\n    function transformCoordWithViewport(out, el, inX, inY, inverse) {\r\n        if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\r\n            var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\r\n            var markers = prepareCoordMarkers(el, saved);\r\n            var transformer = preparePointerTransformer(markers, saved, inverse);\r\n            if (transformer) {\r\n                transformer(out, inX, inY);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function prepareCoordMarkers(el, saved) {\r\n        var markers = saved.markers;\r\n        if (markers) {\r\n            return markers;\r\n        }\r\n        markers = saved.markers = [];\r\n        var propLR = ['left', 'right'];\r\n        var propTB = ['top', 'bottom'];\r\n        for (var i = 0; i < 4; i++) {\r\n            var marker = document.createElement('div');\r\n            var stl = marker.style;\r\n            var idxLR = i % 2;\r\n            var idxTB = (i >> 1) % 2;\r\n            stl.cssText = [\r\n                'position: absolute',\r\n                'visibility: hidden',\r\n                'padding: 0',\r\n                'margin: 0',\r\n                'border-width: 0',\r\n                'user-select: none',\r\n                'width:0',\r\n                'height:0',\r\n                propLR[idxLR] + ':0',\r\n                propTB[idxTB] + ':0',\r\n                propLR[1 - idxLR] + ':auto',\r\n                propTB[1 - idxTB] + ':auto',\r\n                ''\r\n            ].join('!important;');\r\n            el.appendChild(marker);\r\n            markers.push(marker);\r\n        }\r\n        return markers;\r\n    }\r\n    function preparePointerTransformer(markers, saved, inverse) {\r\n        var transformerName = inverse ? 'invTrans' : 'trans';\r\n        var transformer = saved[transformerName];\r\n        var oldSrcCoords = saved.srcCoords;\r\n        var srcCoords = [];\r\n        var destCoords = [];\r\n        var oldCoordTheSame = true;\r\n        for (var i = 0; i < 4; i++) {\r\n            var rect = markers[i].getBoundingClientRect();\r\n            var ii = 2 * i;\r\n            var x = rect.left;\r\n            var y = rect.top;\r\n            srcCoords.push(x, y);\r\n            oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\r\n            destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\r\n        }\r\n        return (oldCoordTheSame && transformer)\r\n            ? transformer\r\n            : (saved.srcCoords = srcCoords,\r\n                saved[transformerName] = inverse\r\n                    ? buildTransformer(destCoords, srcCoords)\r\n                    : buildTransformer(srcCoords, destCoords));\r\n    }\r\n    function isCanvasEl(el) {\r\n        return el.nodeName.toUpperCase() === 'CANVAS';\r\n    }\n\n    var isDomLevel2 = (typeof window !== 'undefined') && !!window.addEventListener;\r\n    var MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\r\n    var _calcOut$1 = [];\r\n    function clientToLocal(el, e, out, calculate) {\r\n        out = out || {};\r\n        if (calculate || !env.canvasSupported) {\r\n            calculateZrXY(el, e, out);\r\n        }\r\n        else if (env.browser.firefox\r\n            && e.layerX != null\r\n            && e.layerX !== e.offsetX) {\r\n            out.zrX = e.layerX;\r\n            out.zrY = e.layerY;\r\n        }\r\n        else if (e.offsetX != null) {\r\n            out.zrX = e.offsetX;\r\n            out.zrY = e.offsetY;\r\n        }\r\n        else {\r\n            calculateZrXY(el, e, out);\r\n        }\r\n        return out;\r\n    }\r\n    function calculateZrXY(el, e, out) {\r\n        if (env.domSupported && el.getBoundingClientRect) {\r\n            var ex = e.clientX;\r\n            var ey = e.clientY;\r\n            if (isCanvasEl(el)) {\r\n                var box = el.getBoundingClientRect();\r\n                out.zrX = ex - box.left;\r\n                out.zrY = ey - box.top;\r\n                return;\r\n            }\r\n            else {\r\n                if (transformCoordWithViewport(_calcOut$1, el, ex, ey)) {\r\n                    out.zrX = _calcOut$1[0];\r\n                    out.zrY = _calcOut$1[1];\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        out.zrX = out.zrY = 0;\r\n    }\r\n    function getNativeEvent(e) {\r\n        return e\r\n            || window.event;\r\n    }\r\n    function normalizeEvent(el, e, calculate) {\r\n        e = getNativeEvent(e);\r\n        if (e.zrX != null) {\r\n            return e;\r\n        }\r\n        var eventType = e.type;\r\n        var isTouch = eventType && eventType.indexOf('touch') >= 0;\r\n        if (!isTouch) {\r\n            clientToLocal(el, e, e, calculate);\r\n            var wheelDelta = getWheelDeltaMayPolyfill(e);\r\n            e.zrDelta = wheelDelta ? wheelDelta / 120 : -(e.detail || 0) / 3;\r\n        }\r\n        else {\r\n            var touch = eventType !== 'touchend'\r\n                ? e.targetTouches[0]\r\n                : e.changedTouches[0];\r\n            touch && clientToLocal(el, touch, e, calculate);\r\n        }\r\n        var button = e.button;\r\n        if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\r\n            e.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)));\r\n        }\r\n        return e;\r\n    }\r\n    function getWheelDeltaMayPolyfill(e) {\r\n        var rawWheelDelta = e.wheelDelta;\r\n        if (rawWheelDelta) {\r\n            return rawWheelDelta;\r\n        }\r\n        var deltaX = e.deltaX;\r\n        var deltaY = e.deltaY;\r\n        if (deltaX == null || deltaY == null) {\r\n            return rawWheelDelta;\r\n        }\r\n        var delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);\r\n        var sign = deltaY > 0 ? -1\r\n            : deltaY < 0 ? 1\r\n                : deltaX > 0 ? -1\r\n                    : 1;\r\n        return 3 * delta * sign;\r\n    }\r\n    function addEventListener(el, name, handler, opt) {\r\n        if (isDomLevel2) {\r\n            el.addEventListener(name, handler, opt);\r\n        }\r\n        else {\r\n            el.attachEvent('on' + name, handler);\r\n        }\r\n    }\r\n    function removeEventListener(el, name, handler, opt) {\r\n        if (isDomLevel2) {\r\n            el.removeEventListener(name, handler, opt);\r\n        }\r\n        else {\r\n            el.detachEvent('on' + name, handler);\r\n        }\r\n    }\r\n    var stop = isDomLevel2\r\n        ? function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            e.cancelBubble = true;\r\n        }\r\n        : function (e) {\r\n            e.returnValue = false;\r\n            e.cancelBubble = true;\r\n        };\r\n    function isMiddleOrRightButtonOnMouseUpDown(e) {\r\n        return e.which === 2 || e.which === 3;\r\n    }\n\n    var GestureMgr = (function () {\r\n        function GestureMgr() {\r\n            this._track = [];\r\n        }\r\n        GestureMgr.prototype.recognize = function (event, target, root) {\r\n            this._doTrack(event, target, root);\r\n            return this._recognize(event);\r\n        };\r\n        GestureMgr.prototype.clear = function () {\r\n            this._track.length = 0;\r\n            return this;\r\n        };\r\n        GestureMgr.prototype._doTrack = function (event, target, root) {\r\n            var touches = event.touches;\r\n            if (!touches) {\r\n                return;\r\n            }\r\n            var trackItem = {\r\n                points: [],\r\n                touches: [],\r\n                target: target,\r\n                event: event\r\n            };\r\n            for (var i = 0, len = touches.length; i < len; i++) {\r\n                var touch = touches[i];\r\n                var pos = clientToLocal(root, touch, {});\r\n                trackItem.points.push([pos.zrX, pos.zrY]);\r\n                trackItem.touches.push(touch);\r\n            }\r\n            this._track.push(trackItem);\r\n        };\r\n        GestureMgr.prototype._recognize = function (event) {\r\n            for (var eventName in recognizers) {\r\n                if (recognizers.hasOwnProperty(eventName)) {\r\n                    var gestureInfo = recognizers[eventName](this._track, event);\r\n                    if (gestureInfo) {\r\n                        return gestureInfo;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        return GestureMgr;\r\n    }());\r\n    function dist$1(pointPair) {\r\n        var dx = pointPair[1][0] - pointPair[0][0];\r\n        var dy = pointPair[1][1] - pointPair[0][1];\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    }\r\n    function center(pointPair) {\r\n        return [\r\n            (pointPair[0][0] + pointPair[1][0]) / 2,\r\n            (pointPair[0][1] + pointPair[1][1]) / 2\r\n        ];\r\n    }\r\n    var recognizers = {\r\n        pinch: function (tracks, event) {\r\n            var trackLen = tracks.length;\r\n            if (!trackLen) {\r\n                return;\r\n            }\r\n            var pinchEnd = (tracks[trackLen - 1] || {}).points;\r\n            var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\r\n            if (pinchPre\r\n                && pinchPre.length > 1\r\n                && pinchEnd\r\n                && pinchEnd.length > 1) {\r\n                var pinchScale = dist$1(pinchEnd) / dist$1(pinchPre);\r\n                !isFinite(pinchScale) && (pinchScale = 1);\r\n                event.pinchScale = pinchScale;\r\n                var pinchCenter = center(pinchEnd);\r\n                event.pinchX = pinchCenter[0];\r\n                event.pinchY = pinchCenter[1];\r\n                return {\r\n                    type: 'pinch',\r\n                    target: tracks[0].target,\r\n                    event: event\r\n                };\r\n            }\r\n        }\r\n    };\n\n    var SILENT = 'silent';\r\n    function makeEventPacket(eveType, targetInfo, event) {\r\n        return {\r\n            type: eveType,\r\n            event: event,\r\n            target: targetInfo.target,\r\n            topTarget: targetInfo.topTarget,\r\n            cancelBubble: false,\r\n            offsetX: event.zrX,\r\n            offsetY: event.zrY,\r\n            gestureEvent: event.gestureEvent,\r\n            pinchX: event.pinchX,\r\n            pinchY: event.pinchY,\r\n            pinchScale: event.pinchScale,\r\n            wheelDelta: event.zrDelta,\r\n            zrByTouch: event.zrByTouch,\r\n            which: event.which,\r\n            stop: stopEvent\r\n        };\r\n    }\r\n    function stopEvent() {\r\n        stop(this.event);\r\n    }\r\n    var EmptyProxy = (function (_super) {\r\n        __extends(EmptyProxy, _super);\r\n        function EmptyProxy() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.handler = null;\r\n            return _this;\r\n        }\r\n        EmptyProxy.prototype.dispose = function () { };\r\n        EmptyProxy.prototype.setCursor = function () { };\r\n        return EmptyProxy;\r\n    }(Eventful));\r\n    var HoveredResult = (function () {\r\n        function HoveredResult(x, y) {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n        return HoveredResult;\r\n    }());\r\n    var handlerNames = [\r\n        'click', 'dblclick', 'mousewheel', 'mouseout',\r\n        'mouseup', 'mousedown', 'mousemove', 'contextmenu'\r\n    ];\r\n    var Handler = (function (_super) {\r\n        __extends(Handler, _super);\r\n        function Handler(storage, painter, proxy, painterRoot) {\r\n            var _this = _super.call(this) || this;\r\n            _this._hovered = new HoveredResult(0, 0);\r\n            _this.storage = storage;\r\n            _this.painter = painter;\r\n            _this.painterRoot = painterRoot;\r\n            proxy = proxy || new EmptyProxy();\r\n            _this.proxy = null;\r\n            _this.setHandlerProxy(proxy);\r\n            _this._draggingMgr = new Draggable(_this);\r\n            return _this;\r\n        }\r\n        Handler.prototype.setHandlerProxy = function (proxy) {\r\n            if (this.proxy) {\r\n                this.proxy.dispose();\r\n            }\r\n            if (proxy) {\r\n                each(handlerNames, function (name) {\r\n                    proxy.on && proxy.on(name, this[name], this);\r\n                }, this);\r\n                proxy.handler = this;\r\n            }\r\n            this.proxy = proxy;\r\n        };\r\n        Handler.prototype.mousemove = function (event) {\r\n            var x = event.zrX;\r\n            var y = event.zrY;\r\n            var isOutside = isOutsideBoundary(this, x, y);\r\n            var lastHovered = this._hovered;\r\n            var lastHoveredTarget = lastHovered.target;\r\n            if (lastHoveredTarget && !lastHoveredTarget.__zr) {\r\n                lastHovered = this.findHover(lastHovered.x, lastHovered.y);\r\n                lastHoveredTarget = lastHovered.target;\r\n            }\r\n            var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\r\n            var hoveredTarget = hovered.target;\r\n            var proxy = this.proxy;\r\n            proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\r\n            if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\r\n                this.dispatchToElement(lastHovered, 'mouseout', event);\r\n            }\r\n            this.dispatchToElement(hovered, 'mousemove', event);\r\n            if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\r\n                this.dispatchToElement(hovered, 'mouseover', event);\r\n            }\r\n        };\r\n        Handler.prototype.mouseout = function (event) {\r\n            var eventControl = event.zrEventControl;\r\n            var zrIsToLocalDOM = event.zrIsToLocalDOM;\r\n            if (eventControl !== 'only_globalout') {\r\n                this.dispatchToElement(this._hovered, 'mouseout', event);\r\n            }\r\n            if (eventControl !== 'no_globalout') {\r\n                !zrIsToLocalDOM && this.trigger('globalout', { type: 'globalout', event: event });\r\n            }\r\n        };\r\n        Handler.prototype.resize = function () {\r\n            this._hovered = new HoveredResult(0, 0);\r\n        };\r\n        Handler.prototype.dispatch = function (eventName, eventArgs) {\r\n            var handler = this[eventName];\r\n            handler && handler.call(this, eventArgs);\r\n        };\r\n        Handler.prototype.dispose = function () {\r\n            this.proxy.dispose();\r\n            this.storage = null;\r\n            this.proxy = null;\r\n            this.painter = null;\r\n        };\r\n        Handler.prototype.setCursorStyle = function (cursorStyle) {\r\n            var proxy = this.proxy;\r\n            proxy.setCursor && proxy.setCursor(cursorStyle);\r\n        };\r\n        Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\r\n            targetInfo = targetInfo || {};\r\n            var el = targetInfo.target;\r\n            if (el && el.silent) {\r\n                return;\r\n            }\r\n            var eventKey = ('on' + eventName);\r\n            var eventPacket = makeEventPacket(eventName, targetInfo, event);\r\n            while (el) {\r\n                el[eventKey]\r\n                    && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\r\n                el.trigger(eventName, eventPacket);\r\n                el = el.__hostTarget ? el.__hostTarget : el.parent;\r\n                if (eventPacket.cancelBubble) {\r\n                    break;\r\n                }\r\n            }\r\n            if (!eventPacket.cancelBubble) {\r\n                this.trigger(eventName, eventPacket);\r\n                if (this.painter && this.painter.eachOtherLayer) {\r\n                    this.painter.eachOtherLayer(function (layer) {\r\n                        if (typeof (layer[eventKey]) === 'function') {\r\n                            layer[eventKey].call(layer, eventPacket);\r\n                        }\r\n                        if (layer.trigger) {\r\n                            layer.trigger(eventName, eventPacket);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        Handler.prototype.findHover = function (x, y, exclude) {\r\n            var list = this.storage.getDisplayList();\r\n            var out = new HoveredResult(x, y);\r\n            for (var i = list.length - 1; i >= 0; i--) {\r\n                var hoverCheckResult = void 0;\r\n                if (list[i] !== exclude\r\n                    && !list[i].ignore\r\n                    && (hoverCheckResult = isHover(list[i], x, y))) {\r\n                    !out.topTarget && (out.topTarget = list[i]);\r\n                    if (hoverCheckResult !== SILENT) {\r\n                        out.target = list[i];\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return out;\r\n        };\r\n        Handler.prototype.processGesture = function (event, stage) {\r\n            if (!this._gestureMgr) {\r\n                this._gestureMgr = new GestureMgr();\r\n            }\r\n            var gestureMgr = this._gestureMgr;\r\n            stage === 'start' && gestureMgr.clear();\r\n            var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\r\n            stage === 'end' && gestureMgr.clear();\r\n            if (gestureInfo) {\r\n                var type = gestureInfo.type;\r\n                event.gestureEvent = type;\r\n                var res = new HoveredResult();\r\n                res.target = gestureInfo.target;\r\n                this.dispatchToElement(res, type, gestureInfo.event);\r\n            }\r\n        };\r\n        return Handler;\r\n    }(Eventful));\r\n    each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\r\n        Handler.prototype[name] = function (event) {\r\n            var x = event.zrX;\r\n            var y = event.zrY;\r\n            var isOutside = isOutsideBoundary(this, x, y);\r\n            var hovered;\r\n            var hoveredTarget;\r\n            if (name !== 'mouseup' || !isOutside) {\r\n                hovered = this.findHover(x, y);\r\n                hoveredTarget = hovered.target;\r\n            }\r\n            if (name === 'mousedown') {\r\n                this._downEl = hoveredTarget;\r\n                this._downPoint = [event.zrX, event.zrY];\r\n                this._upEl = hoveredTarget;\r\n            }\r\n            else if (name === 'mouseup') {\r\n                this._upEl = hoveredTarget;\r\n            }\r\n            else if (name === 'click') {\r\n                if (this._downEl !== this._upEl\r\n                    || !this._downPoint\r\n                    || dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\r\n                    return;\r\n                }\r\n                this._downPoint = null;\r\n            }\r\n            this.dispatchToElement(hovered, name, event);\r\n        };\r\n    });\r\n    function isHover(displayable, x, y) {\r\n        if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\r\n            var el = displayable;\r\n            var isSilent = void 0;\r\n            while (el) {\r\n                var clipPath = el.getClipPath();\r\n                if (clipPath && !clipPath.contain(x, y)) {\r\n                    return false;\r\n                }\r\n                if (el.silent) {\r\n                    isSilent = true;\r\n                }\r\n                var hostEl = el.__hostTarget;\r\n                el = hostEl ? hostEl : el.parent;\r\n            }\r\n            return isSilent ? SILENT : true;\r\n        }\r\n        return false;\r\n    }\r\n    function isOutsideBoundary(handlerInstance, x, y) {\r\n        var painter = handlerInstance.painter;\r\n        return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\r\n    }\n\n    var DEFAULT_MIN_MERGE = 32;\r\n    var DEFAULT_MIN_GALLOPING = 7;\r\n    function minRunLength(n) {\r\n        var r = 0;\r\n        while (n >= DEFAULT_MIN_MERGE) {\r\n            r |= n & 1;\r\n            n >>= 1;\r\n        }\r\n        return n + r;\r\n    }\r\n    function makeAscendingRun(array, lo, hi, compare) {\r\n        var runHi = lo + 1;\r\n        if (runHi === hi) {\r\n            return 1;\r\n        }\r\n        if (compare(array[runHi++], array[lo]) < 0) {\r\n            while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\r\n                runHi++;\r\n            }\r\n            reverseRun(array, lo, runHi);\r\n        }\r\n        else {\r\n            while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\r\n                runHi++;\r\n            }\r\n        }\r\n        return runHi - lo;\r\n    }\r\n    function reverseRun(array, lo, hi) {\r\n        hi--;\r\n        while (lo < hi) {\r\n            var t = array[lo];\r\n            array[lo++] = array[hi];\r\n            array[hi--] = t;\r\n        }\r\n    }\r\n    function binaryInsertionSort(array, lo, hi, start, compare) {\r\n        if (start === lo) {\r\n            start++;\r\n        }\r\n        for (; start < hi; start++) {\r\n            var pivot = array[start];\r\n            var left = lo;\r\n            var right = start;\r\n            var mid;\r\n            while (left < right) {\r\n                mid = left + right >>> 1;\r\n                if (compare(pivot, array[mid]) < 0) {\r\n                    right = mid;\r\n                }\r\n                else {\r\n                    left = mid + 1;\r\n                }\r\n            }\r\n            var n = start - left;\r\n            switch (n) {\r\n                case 3:\r\n                    array[left + 3] = array[left + 2];\r\n                case 2:\r\n                    array[left + 2] = array[left + 1];\r\n                case 1:\r\n                    array[left + 1] = array[left];\r\n                    break;\r\n                default:\r\n                    while (n > 0) {\r\n                        array[left + n] = array[left + n - 1];\r\n                        n--;\r\n                    }\r\n            }\r\n            array[left] = pivot;\r\n        }\r\n    }\r\n    function gallopLeft(value, array, start, length, hint, compare) {\r\n        var lastOffset = 0;\r\n        var maxOffset = 0;\r\n        var offset = 1;\r\n        if (compare(value, array[start + hint]) > 0) {\r\n            maxOffset = length - hint;\r\n            while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\r\n                lastOffset = offset;\r\n                offset = (offset << 1) + 1;\r\n                if (offset <= 0) {\r\n                    offset = maxOffset;\r\n                }\r\n            }\r\n            if (offset > maxOffset) {\r\n                offset = maxOffset;\r\n            }\r\n            lastOffset += hint;\r\n            offset += hint;\r\n        }\r\n        else {\r\n            maxOffset = hint + 1;\r\n            while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\r\n                lastOffset = offset;\r\n                offset = (offset << 1) + 1;\r\n                if (offset <= 0) {\r\n                    offset = maxOffset;\r\n                }\r\n            }\r\n            if (offset > maxOffset) {\r\n                offset = maxOffset;\r\n            }\r\n            var tmp = lastOffset;\r\n            lastOffset = hint - offset;\r\n            offset = hint - tmp;\r\n        }\r\n        lastOffset++;\r\n        while (lastOffset < offset) {\r\n            var m = lastOffset + (offset - lastOffset >>> 1);\r\n            if (compare(value, array[start + m]) > 0) {\r\n                lastOffset = m + 1;\r\n            }\r\n            else {\r\n                offset = m;\r\n            }\r\n        }\r\n        return offset;\r\n    }\r\n    function gallopRight(value, array, start, length, hint, compare) {\r\n        var lastOffset = 0;\r\n        var maxOffset = 0;\r\n        var offset = 1;\r\n        if (compare(value, array[start + hint]) < 0) {\r\n            maxOffset = hint + 1;\r\n            while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\r\n                lastOffset = offset;\r\n                offset = (offset << 1) + 1;\r\n                if (offset <= 0) {\r\n                    offset = maxOffset;\r\n                }\r\n            }\r\n            if (offset > maxOffset) {\r\n                offset = maxOffset;\r\n            }\r\n            var tmp = lastOffset;\r\n            lastOffset = hint - offset;\r\n            offset = hint - tmp;\r\n        }\r\n        else {\r\n            maxOffset = length - hint;\r\n            while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\r\n                lastOffset = offset;\r\n                offset = (offset << 1) + 1;\r\n                if (offset <= 0) {\r\n                    offset = maxOffset;\r\n                }\r\n            }\r\n            if (offset > maxOffset) {\r\n                offset = maxOffset;\r\n            }\r\n            lastOffset += hint;\r\n            offset += hint;\r\n        }\r\n        lastOffset++;\r\n        while (lastOffset < offset) {\r\n            var m = lastOffset + (offset - lastOffset >>> 1);\r\n            if (compare(value, array[start + m]) < 0) {\r\n                offset = m;\r\n            }\r\n            else {\r\n                lastOffset = m + 1;\r\n            }\r\n        }\r\n        return offset;\r\n    }\r\n    function TimSort(array, compare) {\r\n        var minGallop = DEFAULT_MIN_GALLOPING;\r\n        var length = 0;\r\n        var runStart;\r\n        var runLength;\r\n        var stackSize = 0;\r\n        length = array.length;\r\n        var tmp = [];\r\n        runStart = [];\r\n        runLength = [];\r\n        function pushRun(_runStart, _runLength) {\r\n            runStart[stackSize] = _runStart;\r\n            runLength[stackSize] = _runLength;\r\n            stackSize += 1;\r\n        }\r\n        function mergeRuns() {\r\n            while (stackSize > 1) {\r\n                var n = stackSize - 2;\r\n                if ((n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1])\r\n                    || (n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1])) {\r\n                    if (runLength[n - 1] < runLength[n + 1]) {\r\n                        n--;\r\n                    }\r\n                }\r\n                else if (runLength[n] > runLength[n + 1]) {\r\n                    break;\r\n                }\r\n                mergeAt(n);\r\n            }\r\n        }\r\n        function forceMergeRuns() {\r\n            while (stackSize > 1) {\r\n                var n = stackSize - 2;\r\n                if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\r\n                    n--;\r\n                }\r\n                mergeAt(n);\r\n            }\r\n        }\r\n        function mergeAt(i) {\r\n            var start1 = runStart[i];\r\n            var length1 = runLength[i];\r\n            var start2 = runStart[i + 1];\r\n            var length2 = runLength[i + 1];\r\n            runLength[i] = length1 + length2;\r\n            if (i === stackSize - 3) {\r\n                runStart[i + 1] = runStart[i + 2];\r\n                runLength[i + 1] = runLength[i + 2];\r\n            }\r\n            stackSize--;\r\n            var k = gallopRight(array[start2], array, start1, length1, 0, compare);\r\n            start1 += k;\r\n            length1 -= k;\r\n            if (length1 === 0) {\r\n                return;\r\n            }\r\n            length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\r\n            if (length2 === 0) {\r\n                return;\r\n            }\r\n            if (length1 <= length2) {\r\n                mergeLow(start1, length1, start2, length2);\r\n            }\r\n            else {\r\n                mergeHigh(start1, length1, start2, length2);\r\n            }\r\n        }\r\n        function mergeLow(start1, length1, start2, length2) {\r\n            var i = 0;\r\n            for (i = 0; i < length1; i++) {\r\n                tmp[i] = array[start1 + i];\r\n            }\r\n            var cursor1 = 0;\r\n            var cursor2 = start2;\r\n            var dest = start1;\r\n            array[dest++] = array[cursor2++];\r\n            if (--length2 === 0) {\r\n                for (i = 0; i < length1; i++) {\r\n                    array[dest + i] = tmp[cursor1 + i];\r\n                }\r\n                return;\r\n            }\r\n            if (length1 === 1) {\r\n                for (i = 0; i < length2; i++) {\r\n                    array[dest + i] = array[cursor2 + i];\r\n                }\r\n                array[dest + length2] = tmp[cursor1];\r\n                return;\r\n            }\r\n            var _minGallop = minGallop;\r\n            var count1;\r\n            var count2;\r\n            var exit;\r\n            while (1) {\r\n                count1 = 0;\r\n                count2 = 0;\r\n                exit = false;\r\n                do {\r\n                    if (compare(array[cursor2], tmp[cursor1]) < 0) {\r\n                        array[dest++] = array[cursor2++];\r\n                        count2++;\r\n                        count1 = 0;\r\n                        if (--length2 === 0) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    else {\r\n                        array[dest++] = tmp[cursor1++];\r\n                        count1++;\r\n                        count2 = 0;\r\n                        if (--length1 === 1) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                } while ((count1 | count2) < _minGallop);\r\n                if (exit) {\r\n                    break;\r\n                }\r\n                do {\r\n                    count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\r\n                    if (count1 !== 0) {\r\n                        for (i = 0; i < count1; i++) {\r\n                            array[dest + i] = tmp[cursor1 + i];\r\n                        }\r\n                        dest += count1;\r\n                        cursor1 += count1;\r\n                        length1 -= count1;\r\n                        if (length1 <= 1) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    array[dest++] = array[cursor2++];\r\n                    if (--length2 === 0) {\r\n                        exit = true;\r\n                        break;\r\n                    }\r\n                    count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\r\n                    if (count2 !== 0) {\r\n                        for (i = 0; i < count2; i++) {\r\n                            array[dest + i] = array[cursor2 + i];\r\n                        }\r\n                        dest += count2;\r\n                        cursor2 += count2;\r\n                        length2 -= count2;\r\n                        if (length2 === 0) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    array[dest++] = tmp[cursor1++];\r\n                    if (--length1 === 1) {\r\n                        exit = true;\r\n                        break;\r\n                    }\r\n                    _minGallop--;\r\n                } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\r\n                if (exit) {\r\n                    break;\r\n                }\r\n                if (_minGallop < 0) {\r\n                    _minGallop = 0;\r\n                }\r\n                _minGallop += 2;\r\n            }\r\n            minGallop = _minGallop;\r\n            minGallop < 1 && (minGallop = 1);\r\n            if (length1 === 1) {\r\n                for (i = 0; i < length2; i++) {\r\n                    array[dest + i] = array[cursor2 + i];\r\n                }\r\n                array[dest + length2] = tmp[cursor1];\r\n            }\r\n            else if (length1 === 0) {\r\n                throw new Error();\r\n            }\r\n            else {\r\n                for (i = 0; i < length1; i++) {\r\n                    array[dest + i] = tmp[cursor1 + i];\r\n                }\r\n            }\r\n        }\r\n        function mergeHigh(start1, length1, start2, length2) {\r\n            var i = 0;\r\n            for (i = 0; i < length2; i++) {\r\n                tmp[i] = array[start2 + i];\r\n            }\r\n            var cursor1 = start1 + length1 - 1;\r\n            var cursor2 = length2 - 1;\r\n            var dest = start2 + length2 - 1;\r\n            var customCursor = 0;\r\n            var customDest = 0;\r\n            array[dest--] = array[cursor1--];\r\n            if (--length1 === 0) {\r\n                customCursor = dest - (length2 - 1);\r\n                for (i = 0; i < length2; i++) {\r\n                    array[customCursor + i] = tmp[i];\r\n                }\r\n                return;\r\n            }\r\n            if (length2 === 1) {\r\n                dest -= length1;\r\n                cursor1 -= length1;\r\n                customDest = dest + 1;\r\n                customCursor = cursor1 + 1;\r\n                for (i = length1 - 1; i >= 0; i--) {\r\n                    array[customDest + i] = array[customCursor + i];\r\n                }\r\n                array[dest] = tmp[cursor2];\r\n                return;\r\n            }\r\n            var _minGallop = minGallop;\r\n            while (true) {\r\n                var count1 = 0;\r\n                var count2 = 0;\r\n                var exit = false;\r\n                do {\r\n                    if (compare(tmp[cursor2], array[cursor1]) < 0) {\r\n                        array[dest--] = array[cursor1--];\r\n                        count1++;\r\n                        count2 = 0;\r\n                        if (--length1 === 0) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    else {\r\n                        array[dest--] = tmp[cursor2--];\r\n                        count2++;\r\n                        count1 = 0;\r\n                        if (--length2 === 1) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                } while ((count1 | count2) < _minGallop);\r\n                if (exit) {\r\n                    break;\r\n                }\r\n                do {\r\n                    count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\r\n                    if (count1 !== 0) {\r\n                        dest -= count1;\r\n                        cursor1 -= count1;\r\n                        length1 -= count1;\r\n                        customDest = dest + 1;\r\n                        customCursor = cursor1 + 1;\r\n                        for (i = count1 - 1; i >= 0; i--) {\r\n                            array[customDest + i] = array[customCursor + i];\r\n                        }\r\n                        if (length1 === 0) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    array[dest--] = tmp[cursor2--];\r\n                    if (--length2 === 1) {\r\n                        exit = true;\r\n                        break;\r\n                    }\r\n                    count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\r\n                    if (count2 !== 0) {\r\n                        dest -= count2;\r\n                        cursor2 -= count2;\r\n                        length2 -= count2;\r\n                        customDest = dest + 1;\r\n                        customCursor = cursor2 + 1;\r\n                        for (i = 0; i < count2; i++) {\r\n                            array[customDest + i] = tmp[customCursor + i];\r\n                        }\r\n                        if (length2 <= 1) {\r\n                            exit = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    array[dest--] = array[cursor1--];\r\n                    if (--length1 === 0) {\r\n                        exit = true;\r\n                        break;\r\n                    }\r\n                    _minGallop--;\r\n                } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\r\n                if (exit) {\r\n                    break;\r\n                }\r\n                if (_minGallop < 0) {\r\n                    _minGallop = 0;\r\n                }\r\n                _minGallop += 2;\r\n            }\r\n            minGallop = _minGallop;\r\n            if (minGallop < 1) {\r\n                minGallop = 1;\r\n            }\r\n            if (length2 === 1) {\r\n                dest -= length1;\r\n                cursor1 -= length1;\r\n                customDest = dest + 1;\r\n                customCursor = cursor1 + 1;\r\n                for (i = length1 - 1; i >= 0; i--) {\r\n                    array[customDest + i] = array[customCursor + i];\r\n                }\r\n                array[dest] = tmp[cursor2];\r\n            }\r\n            else if (length2 === 0) {\r\n                throw new Error();\r\n            }\r\n            else {\r\n                customCursor = dest - (length2 - 1);\r\n                for (i = 0; i < length2; i++) {\r\n                    array[customCursor + i] = tmp[i];\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            mergeRuns: mergeRuns,\r\n            forceMergeRuns: forceMergeRuns,\r\n            pushRun: pushRun\r\n        };\r\n    }\r\n    function sort(array, compare, lo, hi) {\r\n        if (!lo) {\r\n            lo = 0;\r\n        }\r\n        if (!hi) {\r\n            hi = array.length;\r\n        }\r\n        var remaining = hi - lo;\r\n        if (remaining < 2) {\r\n            return;\r\n        }\r\n        var runLength = 0;\r\n        if (remaining < DEFAULT_MIN_MERGE) {\r\n            runLength = makeAscendingRun(array, lo, hi, compare);\r\n            binaryInsertionSort(array, lo, hi, lo + runLength, compare);\r\n            return;\r\n        }\r\n        var ts = TimSort(array, compare);\r\n        var minRun = minRunLength(remaining);\r\n        do {\r\n            runLength = makeAscendingRun(array, lo, hi, compare);\r\n            if (runLength < minRun) {\r\n                var force = remaining;\r\n                if (force > minRun) {\r\n                    force = minRun;\r\n                }\r\n                binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\r\n                runLength = force;\r\n            }\r\n            ts.pushRun(lo, runLength);\r\n            ts.mergeRuns();\r\n            remaining -= runLength;\r\n            lo += runLength;\r\n        } while (remaining !== 0);\r\n        ts.forceMergeRuns();\r\n    }\n\n    var invalidZErrorLogged = false;\r\n    function logInvalidZError() {\r\n        if (invalidZErrorLogged) {\r\n            return;\r\n        }\r\n        invalidZErrorLogged = true;\r\n        console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\r\n    }\r\n    function shapeCompareFunc(a, b) {\r\n        if (a.zlevel === b.zlevel) {\r\n            if (a.z === b.z) {\r\n                return a.z2 - b.z2;\r\n            }\r\n            return a.z - b.z;\r\n        }\r\n        return a.zlevel - b.zlevel;\r\n    }\r\n    var Storage = (function () {\r\n        function Storage() {\r\n            this._roots = [];\r\n            this._displayList = [];\r\n            this._displayListLen = 0;\r\n            this.displayableSortFunc = shapeCompareFunc;\r\n        }\r\n        Storage.prototype.traverse = function (cb, context) {\r\n            for (var i = 0; i < this._roots.length; i++) {\r\n                this._roots[i].traverse(cb, context);\r\n            }\r\n        };\r\n        Storage.prototype.getDisplayList = function (update, includeIgnore) {\r\n            includeIgnore = includeIgnore || false;\r\n            var displayList = this._displayList;\r\n            if (update || !displayList.length) {\r\n                this.updateDisplayList(includeIgnore);\r\n            }\r\n            return displayList;\r\n        };\r\n        Storage.prototype.updateDisplayList = function (includeIgnore) {\r\n            this._displayListLen = 0;\r\n            var roots = this._roots;\r\n            var displayList = this._displayList;\r\n            for (var i = 0, len = roots.length; i < len; i++) {\r\n                this._updateAndAddDisplayable(roots[i], null, includeIgnore);\r\n            }\r\n            displayList.length = this._displayListLen;\r\n            env.canvasSupported && sort(displayList, shapeCompareFunc);\r\n        };\r\n        Storage.prototype._updateAndAddDisplayable = function (el, clipPaths, includeIgnore) {\r\n            if (el.ignore && !includeIgnore) {\r\n                return;\r\n            }\r\n            el.beforeUpdate();\r\n            if (el.__dirty) {\r\n                el.update();\r\n            }\r\n            el.afterUpdate();\r\n            var userSetClipPath = el.getClipPath();\r\n            if (userSetClipPath) {\r\n                if (clipPaths) {\r\n                    clipPaths = clipPaths.slice();\r\n                }\r\n                else {\r\n                    clipPaths = [];\r\n                }\r\n                var currentClipPath = userSetClipPath;\r\n                var parentClipPath = el;\r\n                while (currentClipPath) {\r\n                    currentClipPath.parent = parentClipPath;\r\n                    currentClipPath.updateTransform();\r\n                    clipPaths.push(currentClipPath);\r\n                    parentClipPath = currentClipPath;\r\n                    currentClipPath = currentClipPath.getClipPath();\r\n                }\r\n            }\r\n            if (el.childrenRef) {\r\n                var children = el.childrenRef();\r\n                for (var i = 0; i < children.length; i++) {\r\n                    var child = children[i];\r\n                    if (el.__dirty) {\r\n                        child.markRedraw();\r\n                    }\r\n                    this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\r\n                }\r\n                el.__dirty = 0;\r\n            }\r\n            else {\r\n                var disp = el;\r\n                if (clipPaths && clipPaths.length) {\r\n                    disp.__clipPaths = clipPaths;\r\n                }\r\n                else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\r\n                    disp.__clipPaths = [];\r\n                }\r\n                if (isNaN(disp.z)) {\r\n                    logInvalidZError();\r\n                    disp.z = 0;\r\n                }\r\n                if (isNaN(disp.z2)) {\r\n                    logInvalidZError();\r\n                    disp.z2 = 0;\r\n                }\r\n                if (isNaN(disp.zlevel)) {\r\n                    logInvalidZError();\r\n                    disp.zlevel = 0;\r\n                }\r\n                this._displayList[this._displayListLen++] = disp;\r\n            }\r\n            var textGuide = el.getTextGuideLine();\r\n            if (textGuide) {\r\n                this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\r\n            }\r\n            var textEl = el.getTextContent();\r\n            if (textEl) {\r\n                this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\r\n            }\r\n        };\r\n        Storage.prototype.addRoot = function (el) {\r\n            if (el.__zr && el.__zr.storage === this) {\r\n                return;\r\n            }\r\n            this._roots.push(el);\r\n        };\r\n        Storage.prototype.delRoot = function (el) {\r\n            if (el instanceof Array) {\r\n                for (var i = 0, l = el.length; i < l; i++) {\r\n                    this.delRoot(el[i]);\r\n                }\r\n                return;\r\n            }\r\n            var idx = indexOf(this._roots, el);\r\n            if (idx >= 0) {\r\n                this._roots.splice(idx, 1);\r\n            }\r\n        };\r\n        Storage.prototype.delAllRoots = function () {\r\n            this._roots = [];\r\n            this._displayList = [];\r\n            this._displayListLen = 0;\r\n            return;\r\n        };\r\n        Storage.prototype.getRoots = function () {\r\n            return this._roots;\r\n        };\r\n        Storage.prototype.dispose = function () {\r\n            this._displayList = null;\r\n            this._roots = null;\r\n        };\r\n        return Storage;\r\n    }());\n\n    var requestAnimationFrame;\r\n    requestAnimationFrame = (typeof window !== 'undefined'\r\n        && (window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\r\n        || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\r\n        || window.mozRequestAnimationFrame\r\n        || window.webkitRequestAnimationFrame) || function (func) {\r\n        return setTimeout(func, 16);\r\n    };\r\n    var requestAnimationFrame$1 = requestAnimationFrame;\n\n    var easing = {\r\n        linear: function (k) {\r\n            return k;\r\n        },\r\n        quadraticIn: function (k) {\r\n            return k * k;\r\n        },\r\n        quadraticOut: function (k) {\r\n            return k * (2 - k);\r\n        },\r\n        quadraticInOut: function (k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k;\r\n            }\r\n            return -0.5 * (--k * (k - 2) - 1);\r\n        },\r\n        cubicIn: function (k) {\r\n            return k * k * k;\r\n        },\r\n        cubicOut: function (k) {\r\n            return --k * k * k + 1;\r\n        },\r\n        cubicInOut: function (k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k;\r\n            }\r\n            return 0.5 * ((k -= 2) * k * k + 2);\r\n        },\r\n        quarticIn: function (k) {\r\n            return k * k * k * k;\r\n        },\r\n        quarticOut: function (k) {\r\n            return 1 - (--k * k * k * k);\r\n        },\r\n        quarticInOut: function (k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k * k;\r\n            }\r\n            return -0.5 * ((k -= 2) * k * k * k - 2);\r\n        },\r\n        quinticIn: function (k) {\r\n            return k * k * k * k * k;\r\n        },\r\n        quinticOut: function (k) {\r\n            return --k * k * k * k * k + 1;\r\n        },\r\n        quinticInOut: function (k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k * k * k;\r\n            }\r\n            return 0.5 * ((k -= 2) * k * k * k * k + 2);\r\n        },\r\n        sinusoidalIn: function (k) {\r\n            return 1 - Math.cos(k * Math.PI / 2);\r\n        },\r\n        sinusoidalOut: function (k) {\r\n            return Math.sin(k * Math.PI / 2);\r\n        },\r\n        sinusoidalInOut: function (k) {\r\n            return 0.5 * (1 - Math.cos(Math.PI * k));\r\n        },\r\n        exponentialIn: function (k) {\r\n            return k === 0 ? 0 : Math.pow(1024, k - 1);\r\n        },\r\n        exponentialOut: function (k) {\r\n            return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\r\n        },\r\n        exponentialInOut: function (k) {\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * Math.pow(1024, k - 1);\r\n            }\r\n            return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\r\n        },\r\n        circularIn: function (k) {\r\n            return 1 - Math.sqrt(1 - k * k);\r\n        },\r\n        circularOut: function (k) {\r\n            return Math.sqrt(1 - (--k * k));\r\n        },\r\n        circularInOut: function (k) {\r\n            if ((k *= 2) < 1) {\r\n                return -0.5 * (Math.sqrt(1 - k * k) - 1);\r\n            }\r\n            return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\r\n        },\r\n        elasticIn: function (k) {\r\n            var s;\r\n            var a = 0.1;\r\n            var p = 0.4;\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            if (!a || a < 1) {\r\n                a = 1;\r\n                s = p / 4;\r\n            }\r\n            else {\r\n                s = p * Math.asin(1 / a) / (2 * Math.PI);\r\n            }\r\n            return -(a * Math.pow(2, 10 * (k -= 1))\r\n                * Math.sin((k - s) * (2 * Math.PI) / p));\r\n        },\r\n        elasticOut: function (k) {\r\n            var s;\r\n            var a = 0.1;\r\n            var p = 0.4;\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            if (!a || a < 1) {\r\n                a = 1;\r\n                s = p / 4;\r\n            }\r\n            else {\r\n                s = p * Math.asin(1 / a) / (2 * Math.PI);\r\n            }\r\n            return (a * Math.pow(2, -10 * k)\r\n                * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\r\n        },\r\n        elasticInOut: function (k) {\r\n            var s;\r\n            var a = 0.1;\r\n            var p = 0.4;\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n            if (!a || a < 1) {\r\n                a = 1;\r\n                s = p / 4;\r\n            }\r\n            else {\r\n                s = p * Math.asin(1 / a) / (2 * Math.PI);\r\n            }\r\n            if ((k *= 2) < 1) {\r\n                return -0.5 * (a * Math.pow(2, 10 * (k -= 1))\r\n                    * Math.sin((k - s) * (2 * Math.PI) / p));\r\n            }\r\n            return a * Math.pow(2, -10 * (k -= 1))\r\n                * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\r\n        },\r\n        backIn: function (k) {\r\n            var s = 1.70158;\r\n            return k * k * ((s + 1) * k - s);\r\n        },\r\n        backOut: function (k) {\r\n            var s = 1.70158;\r\n            return --k * k * ((s + 1) * k + s) + 1;\r\n        },\r\n        backInOut: function (k) {\r\n            var s = 1.70158 * 1.525;\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * (k * k * ((s + 1) * k - s));\r\n            }\r\n            return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\r\n        },\r\n        bounceIn: function (k) {\r\n            return 1 - easing.bounceOut(1 - k);\r\n        },\r\n        bounceOut: function (k) {\r\n            if (k < (1 / 2.75)) {\r\n                return 7.5625 * k * k;\r\n            }\r\n            else if (k < (2 / 2.75)) {\r\n                return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\r\n            }\r\n            else if (k < (2.5 / 2.75)) {\r\n                return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\r\n            }\r\n            else {\r\n                return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\r\n            }\r\n        },\r\n        bounceInOut: function (k) {\r\n            if (k < 0.5) {\r\n                return easing.bounceIn(k * 2) * 0.5;\r\n            }\r\n            return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5;\r\n        }\r\n    };\n\n    var Clip = (function () {\r\n        function Clip(opts) {\r\n            this._initialized = false;\r\n            this._startTime = 0;\r\n            this._pausedTime = 0;\r\n            this._paused = false;\r\n            this._life = opts.life || 1000;\r\n            this._delay = opts.delay || 0;\r\n            this.loop = opts.loop == null ? false : opts.loop;\r\n            this.gap = opts.gap || 0;\r\n            this.easing = opts.easing || 'linear';\r\n            this.onframe = opts.onframe;\r\n            this.ondestroy = opts.ondestroy;\r\n            this.onrestart = opts.onrestart;\r\n        }\r\n        Clip.prototype.step = function (globalTime, deltaTime) {\r\n            if (!this._initialized) {\r\n                this._startTime = globalTime + this._delay;\r\n                this._initialized = true;\r\n            }\r\n            if (this._paused) {\r\n                this._pausedTime += deltaTime;\r\n                return;\r\n            }\r\n            var percent = (globalTime - this._startTime - this._pausedTime) / this._life;\r\n            if (percent < 0) {\r\n                percent = 0;\r\n            }\r\n            percent = Math.min(percent, 1);\r\n            var easing$1 = this.easing;\r\n            var easingFunc = typeof easing$1 === 'string'\r\n                ? easing[easing$1] : easing$1;\r\n            var schedule = typeof easingFunc === 'function'\r\n                ? easingFunc(percent)\r\n                : percent;\r\n            this.onframe && this.onframe(schedule);\r\n            if (percent === 1) {\r\n                if (this.loop) {\r\n                    this._restart(globalTime);\r\n                    this.onrestart && this.onrestart();\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        Clip.prototype._restart = function (globalTime) {\r\n            var remainder = (globalTime - this._startTime - this._pausedTime) % this._life;\r\n            this._startTime = globalTime - remainder + this.gap;\r\n            this._pausedTime = 0;\r\n        };\r\n        Clip.prototype.pause = function () {\r\n            this._paused = true;\r\n        };\r\n        Clip.prototype.resume = function () {\r\n            this._paused = false;\r\n        };\r\n        return Clip;\r\n    }());\n\n    var Entry = (function () {\r\n        function Entry(val) {\r\n            this.value = val;\r\n        }\r\n        return Entry;\r\n    }());\r\n    var LinkedList = (function () {\r\n        function LinkedList() {\r\n            this._len = 0;\r\n        }\r\n        LinkedList.prototype.insert = function (val) {\r\n            var entry = new Entry(val);\r\n            this.insertEntry(entry);\r\n            return entry;\r\n        };\r\n        LinkedList.prototype.insertEntry = function (entry) {\r\n            if (!this.head) {\r\n                this.head = this.tail = entry;\r\n            }\r\n            else {\r\n                this.tail.next = entry;\r\n                entry.prev = this.tail;\r\n                entry.next = null;\r\n                this.tail = entry;\r\n            }\r\n            this._len++;\r\n        };\r\n        LinkedList.prototype.remove = function (entry) {\r\n            var prev = entry.prev;\r\n            var next = entry.next;\r\n            if (prev) {\r\n                prev.next = next;\r\n            }\r\n            else {\r\n                this.head = next;\r\n            }\r\n            if (next) {\r\n                next.prev = prev;\r\n            }\r\n            else {\r\n                this.tail = prev;\r\n            }\r\n            entry.next = entry.prev = null;\r\n            this._len--;\r\n        };\r\n        LinkedList.prototype.len = function () {\r\n            return this._len;\r\n        };\r\n        LinkedList.prototype.clear = function () {\r\n            this.head = this.tail = null;\r\n            this._len = 0;\r\n        };\r\n        return LinkedList;\r\n    }());\r\n    var LRU = (function () {\r\n        function LRU(maxSize) {\r\n            this._list = new LinkedList();\r\n            this._maxSize = 10;\r\n            this._map = {};\r\n            this._maxSize = maxSize;\r\n        }\r\n        LRU.prototype.put = function (key, value) {\r\n            var list = this._list;\r\n            var map = this._map;\r\n            var removed = null;\r\n            if (map[key] == null) {\r\n                var len = list.len();\r\n                var entry = this._lastRemovedEntry;\r\n                if (len >= this._maxSize && len > 0) {\r\n                    var leastUsedEntry = list.head;\r\n                    list.remove(leastUsedEntry);\r\n                    delete map[leastUsedEntry.key];\r\n                    removed = leastUsedEntry.value;\r\n                    this._lastRemovedEntry = leastUsedEntry;\r\n                }\r\n                if (entry) {\r\n                    entry.value = value;\r\n                }\r\n                else {\r\n                    entry = new Entry(value);\r\n                }\r\n                entry.key = key;\r\n                list.insertEntry(entry);\r\n                map[key] = entry;\r\n            }\r\n            return removed;\r\n        };\r\n        LRU.prototype.get = function (key) {\r\n            var entry = this._map[key];\r\n            var list = this._list;\r\n            if (entry != null) {\r\n                if (entry !== list.tail) {\r\n                    list.remove(entry);\r\n                    list.insertEntry(entry);\r\n                }\r\n                return entry.value;\r\n            }\r\n        };\r\n        LRU.prototype.clear = function () {\r\n            this._list.clear();\r\n            this._map = {};\r\n        };\r\n        LRU.prototype.len = function () {\r\n            return this._list.len();\r\n        };\r\n        return LRU;\r\n    }());\n\n    var kCSSColorTable = {\r\n        'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\r\n        'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\r\n        'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\r\n        'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\r\n        'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\r\n        'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\r\n        'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\r\n        'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\r\n        'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\r\n        'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\r\n        'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\r\n        'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\r\n        'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\r\n        'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\r\n        'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\r\n        'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\r\n        'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\r\n        'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\r\n        'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\r\n        'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\r\n        'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\r\n        'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\r\n        'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\r\n        'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\r\n        'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\r\n        'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\r\n        'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\r\n        'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\r\n        'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\r\n        'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\r\n        'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\r\n        'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\r\n        'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\r\n        'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\r\n        'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\r\n        'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\r\n        'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\r\n        'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\r\n        'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\r\n        'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\r\n        'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\r\n        'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\r\n        'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\r\n        'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\r\n        'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\r\n        'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\r\n        'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\r\n        'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\r\n        'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\r\n        'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\r\n        'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\r\n        'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\r\n        'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\r\n        'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\r\n        'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\r\n        'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\r\n        'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\r\n        'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\r\n        'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\r\n        'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\r\n        'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\r\n        'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\r\n        'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\r\n        'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\r\n        'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\r\n        'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\r\n        'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\r\n        'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\r\n        'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\r\n        'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\r\n        'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\r\n        'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\r\n        'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\r\n        'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\r\n    };\r\n    function clampCssByte(i) {\r\n        i = Math.round(i);\r\n        return i < 0 ? 0 : i > 255 ? 255 : i;\r\n    }\r\n    function clampCssAngle(i) {\r\n        i = Math.round(i);\r\n        return i < 0 ? 0 : i > 360 ? 360 : i;\r\n    }\r\n    function clampCssFloat(f) {\r\n        return f < 0 ? 0 : f > 1 ? 1 : f;\r\n    }\r\n    function parseCssInt(val) {\r\n        var str = val;\r\n        if (str.length && str.charAt(str.length - 1) === '%') {\r\n            return clampCssByte(parseFloat(str) / 100 * 255);\r\n        }\r\n        return clampCssByte(parseInt(str, 10));\r\n    }\r\n    function parseCssFloat(val) {\r\n        var str = val;\r\n        if (str.length && str.charAt(str.length - 1) === '%') {\r\n            return clampCssFloat(parseFloat(str) / 100);\r\n        }\r\n        return clampCssFloat(parseFloat(str));\r\n    }\r\n    function cssHueToRgb(m1, m2, h) {\r\n        if (h < 0) {\r\n            h += 1;\r\n        }\r\n        else if (h > 1) {\r\n            h -= 1;\r\n        }\r\n        if (h * 6 < 1) {\r\n            return m1 + (m2 - m1) * h * 6;\r\n        }\r\n        if (h * 2 < 1) {\r\n            return m2;\r\n        }\r\n        if (h * 3 < 2) {\r\n            return m1 + (m2 - m1) * (2 / 3 - h) * 6;\r\n        }\r\n        return m1;\r\n    }\r\n    function lerpNumber(a, b, p) {\r\n        return a + (b - a) * p;\r\n    }\r\n    function setRgba(out, r, g, b, a) {\r\n        out[0] = r;\r\n        out[1] = g;\r\n        out[2] = b;\r\n        out[3] = a;\r\n        return out;\r\n    }\r\n    function copyRgba(out, a) {\r\n        out[0] = a[0];\r\n        out[1] = a[1];\r\n        out[2] = a[2];\r\n        out[3] = a[3];\r\n        return out;\r\n    }\r\n    var colorCache = new LRU(20);\r\n    var lastRemovedArr = null;\r\n    function putToCache(colorStr, rgbaArr) {\r\n        if (lastRemovedArr) {\r\n            copyRgba(lastRemovedArr, rgbaArr);\r\n        }\r\n        lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\r\n    }\r\n    function parse(colorStr, rgbaArr) {\r\n        if (!colorStr) {\r\n            return;\r\n        }\r\n        rgbaArr = rgbaArr || [];\r\n        var cached = colorCache.get(colorStr);\r\n        if (cached) {\r\n            return copyRgba(rgbaArr, cached);\r\n        }\r\n        colorStr = colorStr + '';\r\n        var str = colorStr.replace(/ /g, '').toLowerCase();\r\n        if (str in kCSSColorTable) {\r\n            copyRgba(rgbaArr, kCSSColorTable[str]);\r\n            putToCache(colorStr, rgbaArr);\r\n            return rgbaArr;\r\n        }\r\n        if (str.charAt(0) === '#') {\r\n            if (str.length === 4) {\r\n                var iv = parseInt(str.substr(1), 16);\r\n                if (!(iv >= 0 && iv <= 0xfff)) {\r\n                    setRgba(rgbaArr, 0, 0, 0, 1);\r\n                    return;\r\n                }\r\n                setRgba(rgbaArr, ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8), (iv & 0xf0) | ((iv & 0xf0) >> 4), (iv & 0xf) | ((iv & 0xf) << 4), 1);\r\n                putToCache(colorStr, rgbaArr);\r\n                return rgbaArr;\r\n            }\r\n            else if (str.length === 7) {\r\n                var iv = parseInt(str.substr(1), 16);\r\n                if (!(iv >= 0 && iv <= 0xffffff)) {\r\n                    setRgba(rgbaArr, 0, 0, 0, 1);\r\n                    return;\r\n                }\r\n                setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, 1);\r\n                putToCache(colorStr, rgbaArr);\r\n                return rgbaArr;\r\n            }\r\n            return;\r\n        }\r\n        var op = str.indexOf('(');\r\n        var ep = str.indexOf(')');\r\n        if (op !== -1 && ep + 1 === str.length) {\r\n            var fname = str.substr(0, op);\r\n            var params = str.substr(op + 1, ep - (op + 1)).split(',');\r\n            var alpha = 1;\r\n            switch (fname) {\r\n                case 'rgba':\r\n                    if (params.length !== 4) {\r\n                        setRgba(rgbaArr, 0, 0, 0, 1);\r\n                        return;\r\n                    }\r\n                    alpha = parseCssFloat(params.pop());\r\n                case 'rgb':\r\n                    if (params.length !== 3) {\r\n                        setRgba(rgbaArr, 0, 0, 0, 1);\r\n                        return;\r\n                    }\r\n                    setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), alpha);\r\n                    putToCache(colorStr, rgbaArr);\r\n                    return rgbaArr;\r\n                case 'hsla':\r\n                    if (params.length !== 4) {\r\n                        setRgba(rgbaArr, 0, 0, 0, 1);\r\n                        return;\r\n                    }\r\n                    params[3] = parseCssFloat(params[3]);\r\n                    hsla2rgba(params, rgbaArr);\r\n                    putToCache(colorStr, rgbaArr);\r\n                    return rgbaArr;\r\n                case 'hsl':\r\n                    if (params.length !== 3) {\r\n                        setRgba(rgbaArr, 0, 0, 0, 1);\r\n                        return;\r\n                    }\r\n                    hsla2rgba(params, rgbaArr);\r\n                    putToCache(colorStr, rgbaArr);\r\n                    return rgbaArr;\r\n                default:\r\n                    return;\r\n            }\r\n        }\r\n        setRgba(rgbaArr, 0, 0, 0, 1);\r\n        return;\r\n    }\r\n    function hsla2rgba(hsla, rgba) {\r\n        var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;\r\n        var s = parseCssFloat(hsla[1]);\r\n        var l = parseCssFloat(hsla[2]);\r\n        var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\r\n        var m1 = l * 2 - m2;\r\n        rgba = rgba || [];\r\n        setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\r\n        if (hsla.length === 4) {\r\n            rgba[3] = hsla[3];\r\n        }\r\n        return rgba;\r\n    }\r\n    function rgba2hsla(rgba) {\r\n        if (!rgba) {\r\n            return;\r\n        }\r\n        var R = rgba[0] / 255;\r\n        var G = rgba[1] / 255;\r\n        var B = rgba[2] / 255;\r\n        var vMin = Math.min(R, G, B);\r\n        var vMax = Math.max(R, G, B);\r\n        var delta = vMax - vMin;\r\n        var L = (vMax + vMin) / 2;\r\n        var H;\r\n        var S;\r\n        if (delta === 0) {\r\n            H = 0;\r\n            S = 0;\r\n        }\r\n        else {\r\n            if (L < 0.5) {\r\n                S = delta / (vMax + vMin);\r\n            }\r\n            else {\r\n                S = delta / (2 - vMax - vMin);\r\n            }\r\n            var deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\r\n            var deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\r\n            var deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\r\n            if (R === vMax) {\r\n                H = deltaB - deltaG;\r\n            }\r\n            else if (G === vMax) {\r\n                H = (1 / 3) + deltaR - deltaB;\r\n            }\r\n            else if (B === vMax) {\r\n                H = (2 / 3) + deltaG - deltaR;\r\n            }\r\n            if (H < 0) {\r\n                H += 1;\r\n            }\r\n            if (H > 1) {\r\n                H -= 1;\r\n            }\r\n        }\r\n        var hsla = [H * 360, S, L];\r\n        if (rgba[3] != null) {\r\n            hsla.push(rgba[3]);\r\n        }\r\n        return hsla;\r\n    }\r\n    function lift(color, level) {\r\n        var colorArr = parse(color);\r\n        if (colorArr) {\r\n            for (var i = 0; i < 3; i++) {\r\n                if (level < 0) {\r\n                    colorArr[i] = colorArr[i] * (1 - level) | 0;\r\n                }\r\n                else {\r\n                    colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\r\n                }\r\n                if (colorArr[i] > 255) {\r\n                    colorArr[i] = 255;\r\n                }\r\n                else if (colorArr[i] < 0) {\r\n                    colorArr[i] = 0;\r\n                }\r\n            }\r\n            return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\r\n        }\r\n    }\r\n    function toHex(color) {\r\n        var colorArr = parse(color);\r\n        if (colorArr) {\r\n            return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\r\n        }\r\n    }\r\n    function fastLerp(normalizedValue, colors, out) {\r\n        if (!(colors && colors.length)\r\n            || !(normalizedValue >= 0 && normalizedValue <= 1)) {\r\n            return;\r\n        }\r\n        out = out || [];\r\n        var value = normalizedValue * (colors.length - 1);\r\n        var leftIndex = Math.floor(value);\r\n        var rightIndex = Math.ceil(value);\r\n        var leftColor = colors[leftIndex];\r\n        var rightColor = colors[rightIndex];\r\n        var dv = value - leftIndex;\r\n        out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\r\n        out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\r\n        out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\r\n        out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\r\n        return out;\r\n    }\r\n    var fastMapToColor = fastLerp;\r\n    function lerp$1(normalizedValue, colors, fullOutput) {\r\n        if (!(colors && colors.length)\r\n            || !(normalizedValue >= 0 && normalizedValue <= 1)) {\r\n            return;\r\n        }\r\n        var value = normalizedValue * (colors.length - 1);\r\n        var leftIndex = Math.floor(value);\r\n        var rightIndex = Math.ceil(value);\r\n        var leftColor = parse(colors[leftIndex]);\r\n        var rightColor = parse(colors[rightIndex]);\r\n        var dv = value - leftIndex;\r\n        var color = stringify([\r\n            clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\r\n            clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\r\n            clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\r\n            clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\r\n        ], 'rgba');\r\n        return fullOutput\r\n            ? {\r\n                color: color,\r\n                leftIndex: leftIndex,\r\n                rightIndex: rightIndex,\r\n                value: value\r\n            }\r\n            : color;\r\n    }\r\n    var mapToColor = lerp$1;\r\n    function modifyHSL(color, h, s, l) {\r\n        var colorArr = parse(color);\r\n        if (color) {\r\n            colorArr = rgba2hsla(colorArr);\r\n            h != null && (colorArr[0] = clampCssAngle(h));\r\n            s != null && (colorArr[1] = parseCssFloat(s));\r\n            l != null && (colorArr[2] = parseCssFloat(l));\r\n            return stringify(hsla2rgba(colorArr), 'rgba');\r\n        }\r\n    }\r\n    function modifyAlpha(color, alpha) {\r\n        var colorArr = parse(color);\r\n        if (colorArr && alpha != null) {\r\n            colorArr[3] = clampCssFloat(alpha);\r\n            return stringify(colorArr, 'rgba');\r\n        }\r\n    }\r\n    function stringify(arrColor, type) {\r\n        if (!arrColor || !arrColor.length) {\r\n            return;\r\n        }\r\n        var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\r\n        if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\r\n            colorStr += ',' + arrColor[3];\r\n        }\r\n        return type + '(' + colorStr + ')';\r\n    }\r\n    function lum(color, backgroundLum) {\r\n        var arr = parse(color);\r\n        return arr\r\n            ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255\r\n                + (1 - arr[3]) * backgroundLum\r\n            : 0;\r\n    }\r\n    function random() {\r\n        var r = Math.round(Math.random() * 255);\r\n        var g = Math.round(Math.random() * 255);\r\n        var b = Math.round(Math.random() * 255);\r\n        return 'rgb(' + r + ',' + g + ',' + b + ')';\r\n    }\n\n    var color = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        parse: parse,\n        lift: lift,\n        toHex: toHex,\n        fastLerp: fastLerp,\n        fastMapToColor: fastMapToColor,\n        lerp: lerp$1,\n        mapToColor: mapToColor,\n        modifyHSL: modifyHSL,\n        modifyAlpha: modifyAlpha,\n        stringify: stringify,\n        lum: lum,\n        random: random\n    });\n\n    var arraySlice = Array.prototype.slice;\r\n    function interpolateNumber(p0, p1, percent) {\r\n        return (p1 - p0) * percent + p0;\r\n    }\r\n    function step(p0, p1, percent) {\r\n        return percent > 0.5 ? p1 : p0;\r\n    }\r\n    function interpolate1DArray(out, p0, p1, percent) {\r\n        var len = p0.length;\r\n        for (var i = 0; i < len; i++) {\r\n            out[i] = interpolateNumber(p0[i], p1[i], percent);\r\n        }\r\n    }\r\n    function interpolate2DArray(out, p0, p1, percent) {\r\n        var len = p0.length;\r\n        var len2 = len && p0[0].length;\r\n        for (var i = 0; i < len; i++) {\r\n            if (!out[i]) {\r\n                out[i] = [];\r\n            }\r\n            for (var j = 0; j < len2; j++) {\r\n                out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\r\n            }\r\n        }\r\n    }\r\n    function add1DArray(out, p0, p1, sign) {\r\n        var len = p0.length;\r\n        for (var i = 0; i < len; i++) {\r\n            out[i] = p0[i] + p1[i] * sign;\r\n        }\r\n        return out;\r\n    }\r\n    function add2DArray(out, p0, p1, sign) {\r\n        var len = p0.length;\r\n        var len2 = len && p0[0].length;\r\n        for (var i = 0; i < len; i++) {\r\n            if (!out[i]) {\r\n                out[i] = [];\r\n            }\r\n            for (var j = 0; j < len2; j++) {\r\n                out[i][j] = p0[i][j] + p1[i][j] * sign;\r\n            }\r\n        }\r\n        return out;\r\n    }\r\n    function fillArray(val0, val1, arrDim) {\r\n        var arr0 = val0;\r\n        var arr1 = val1;\r\n        if (!arr0.push || !arr1.push) {\r\n            return;\r\n        }\r\n        var arr0Len = arr0.length;\r\n        var arr1Len = arr1.length;\r\n        if (arr0Len !== arr1Len) {\r\n            var isPreviousLarger = arr0Len > arr1Len;\r\n            if (isPreviousLarger) {\r\n                arr0.length = arr1Len;\r\n            }\r\n            else {\r\n                for (var i = arr0Len; i < arr1Len; i++) {\r\n                    arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\r\n                }\r\n            }\r\n        }\r\n        var len2 = arr0[0] && arr0[0].length;\r\n        for (var i = 0; i < arr0.length; i++) {\r\n            if (arrDim === 1) {\r\n                if (isNaN(arr0[i])) {\r\n                    arr0[i] = arr1[i];\r\n                }\r\n            }\r\n            else {\r\n                for (var j = 0; j < len2; j++) {\r\n                    if (isNaN(arr0[i][j])) {\r\n                        arr0[i][j] = arr1[i][j];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function is1DArraySame(arr0, arr1) {\r\n        var len = arr0.length;\r\n        if (len !== arr1.length) {\r\n            return false;\r\n        }\r\n        for (var i = 0; i < len; i++) {\r\n            if (arr0[i] !== arr1[i]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    function catmullRomInterpolate(p0, p1, p2, p3, t, t2, t3) {\r\n        var v0 = (p2 - p0) * 0.5;\r\n        var v1 = (p3 - p1) * 0.5;\r\n        return (2 * (p1 - p2) + v0 + v1) * t3\r\n            + (-3 * (p1 - p2) - 2 * v0 - v1) * t2\r\n            + v0 * t + p1;\r\n    }\r\n    function catmullRomInterpolate1DArray(out, p0, p1, p2, p3, t, t2, t3) {\r\n        var len = p0.length;\r\n        for (var i = 0; i < len; i++) {\r\n            out[i] = catmullRomInterpolate(p0[i], p1[i], p2[i], p3[i], t, t2, t3);\r\n        }\r\n    }\r\n    function catmullRomInterpolate2DArray(out, p0, p1, p2, p3, t, t2, t3) {\r\n        var len = p0.length;\r\n        var len2 = p0[0].length;\r\n        for (var i = 0; i < len; i++) {\r\n            if (!out[i]) {\r\n                out[1] = [];\r\n            }\r\n            for (var j = 0; j < len2; j++) {\r\n                out[i][j] = catmullRomInterpolate(p0[i][j], p1[i][j], p2[i][j], p3[i][j], t, t2, t3);\r\n            }\r\n        }\r\n    }\r\n    function cloneValue(value) {\r\n        if (isArrayLike(value)) {\r\n            var len = value.length;\r\n            if (isArrayLike(value[0])) {\r\n                var ret = [];\r\n                for (var i = 0; i < len; i++) {\r\n                    ret.push(arraySlice.call(value[i]));\r\n                }\r\n                return ret;\r\n            }\r\n            return arraySlice.call(value);\r\n        }\r\n        return value;\r\n    }\r\n    function rgba2String(rgba) {\r\n        rgba[0] = Math.floor(rgba[0]);\r\n        rgba[1] = Math.floor(rgba[1]);\r\n        rgba[2] = Math.floor(rgba[2]);\r\n        return 'rgba(' + rgba.join(',') + ')';\r\n    }\r\n    function guessArrayDim(value) {\r\n        return isArrayLike(value && value[0]) ? 2 : 1;\r\n    }\r\n    var tmpRgba = [0, 0, 0, 0];\r\n    var Track = (function () {\r\n        function Track(propName) {\r\n            this.keyframes = [];\r\n            this.maxTime = 0;\r\n            this.arrDim = 0;\r\n            this.interpolable = true;\r\n            this._needsSort = false;\r\n            this._isAllValueEqual = true;\r\n            this._lastFrame = 0;\r\n            this._lastFramePercent = 0;\r\n            this.propName = propName;\r\n        }\r\n        Track.prototype.isFinished = function () {\r\n            return this._finished;\r\n        };\r\n        Track.prototype.setFinished = function () {\r\n            this._finished = true;\r\n        };\r\n        Track.prototype.needsAnimate = function () {\r\n            return !this._isAllValueEqual && this.keyframes.length >= 2 && this.interpolable;\r\n        };\r\n        Track.prototype.getAdditiveTrack = function () {\r\n            return this._additiveTrack;\r\n        };\r\n        Track.prototype.addKeyframe = function (time, value) {\r\n            if (time >= this.maxTime) {\r\n                this.maxTime = time;\r\n            }\r\n            else {\r\n                this._needsSort = true;\r\n            }\r\n            var keyframes = this.keyframes;\r\n            var len = keyframes.length;\r\n            if (this.interpolable) {\r\n                if (isArrayLike(value)) {\r\n                    var arrayDim = guessArrayDim(value);\r\n                    if (len > 0 && this.arrDim !== arrayDim) {\r\n                        this.interpolable = false;\r\n                        return;\r\n                    }\r\n                    if (arrayDim === 1 && typeof value[0] !== 'number'\r\n                        || arrayDim === 2 && typeof value[0][0] !== 'number') {\r\n                        this.interpolable = false;\r\n                        return;\r\n                    }\r\n                    if (len > 0) {\r\n                        var lastFrame = keyframes[len - 1];\r\n                        if (this._isAllValueEqual) {\r\n                            if (arrayDim === 1) {\r\n                                if (!is1DArraySame(value, lastFrame.value)) {\r\n                                    this._isAllValueEqual = false;\r\n                                }\r\n                            }\r\n                            else {\r\n                                this._isAllValueEqual = false;\r\n                            }\r\n                        }\r\n                    }\r\n                    this.arrDim = arrayDim;\r\n                }\r\n                else {\r\n                    if (this.arrDim > 0) {\r\n                        this.interpolable = false;\r\n                        return;\r\n                    }\r\n                    if (typeof value === 'string') {\r\n                        var colorArray = parse(value);\r\n                        if (colorArray) {\r\n                            value = colorArray;\r\n                            this.isValueColor = true;\r\n                        }\r\n                        else {\r\n                            this.interpolable = false;\r\n                        }\r\n                    }\r\n                    else if (typeof value !== 'number') {\r\n                        this.interpolable = false;\r\n                        return;\r\n                    }\r\n                    if (this._isAllValueEqual && len > 0) {\r\n                        var lastFrame = keyframes[len - 1];\r\n                        if (this.isValueColor && !is1DArraySame(lastFrame.value, value)) {\r\n                            this._isAllValueEqual = false;\r\n                        }\r\n                        else if (lastFrame.value !== value) {\r\n                            this._isAllValueEqual = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            var kf = {\r\n                time: time,\r\n                value: value,\r\n                percent: 0\r\n            };\r\n            this.keyframes.push(kf);\r\n            return kf;\r\n        };\r\n        Track.prototype.prepare = function (additiveTrack) {\r\n            var kfs = this.keyframes;\r\n            if (this._needsSort) {\r\n                kfs.sort(function (a, b) {\r\n                    return a.time - b.time;\r\n                });\r\n            }\r\n            var arrDim = this.arrDim;\r\n            var kfsLen = kfs.length;\r\n            var lastKf = kfs[kfsLen - 1];\r\n            for (var i = 0; i < kfsLen; i++) {\r\n                kfs[i].percent = kfs[i].time / this.maxTime;\r\n                if (arrDim > 0 && i !== kfsLen - 1) {\r\n                    fillArray(kfs[i].value, lastKf.value, arrDim);\r\n                }\r\n            }\r\n            if (additiveTrack\r\n                && this.interpolable\r\n                && arrDim === additiveTrack.arrDim\r\n                && this.isValueColor === additiveTrack.isValueColor\r\n                && !additiveTrack._finished) {\r\n                this._additiveTrack = additiveTrack;\r\n                var startValue = kfs[0].value;\r\n                for (var i = 0; i < kfsLen; i++) {\r\n                    if (arrDim === 0) {\r\n                        if (this.isValueColor) {\r\n                            kfs[i].additiveValue\r\n                                = add1DArray([], kfs[i].value, startValue, -1);\r\n                        }\r\n                        else {\r\n                            kfs[i].additiveValue = kfs[i].value - startValue;\r\n                        }\r\n                    }\r\n                    else if (arrDim === 1) {\r\n                        kfs[i].additiveValue = add1DArray([], kfs[i].value, startValue, -1);\r\n                    }\r\n                    else if (arrDim === 2) {\r\n                        kfs[i].additiveValue = add2DArray([], kfs[i].value, startValue, -1);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        Track.prototype.step = function (target, percent) {\r\n            if (this._finished) {\r\n                return;\r\n            }\r\n            if (this._additiveTrack && this._additiveTrack._finished) {\r\n                this._additiveTrack = null;\r\n            }\r\n            var isAdditive = this._additiveTrack != null;\r\n            var valueKey = isAdditive ? 'additiveValue' : 'value';\r\n            var keyframes = this.keyframes;\r\n            var kfsNum = this.keyframes.length;\r\n            var propName = this.propName;\r\n            var arrDim = this.arrDim;\r\n            var isValueColor = this.isValueColor;\r\n            var frameIdx;\r\n            if (percent < 0) {\r\n                frameIdx = 0;\r\n            }\r\n            else if (percent < this._lastFramePercent) {\r\n                var start = Math.min(this._lastFrame + 1, kfsNum - 1);\r\n                for (frameIdx = start; frameIdx >= 0; frameIdx--) {\r\n                    if (keyframes[frameIdx].percent <= percent) {\r\n                        break;\r\n                    }\r\n                }\r\n                frameIdx = Math.min(frameIdx, kfsNum - 2);\r\n            }\r\n            else {\r\n                for (frameIdx = this._lastFrame; frameIdx < kfsNum; frameIdx++) {\r\n                    if (keyframes[frameIdx].percent > percent) {\r\n                        break;\r\n                    }\r\n                }\r\n                frameIdx = Math.min(frameIdx - 1, kfsNum - 2);\r\n            }\r\n            var nextFrame = keyframes[frameIdx + 1];\r\n            var frame = keyframes[frameIdx];\r\n            if (!(frame && nextFrame)) {\r\n                return;\r\n            }\r\n            this._lastFrame = frameIdx;\r\n            this._lastFramePercent = percent;\r\n            var range = (nextFrame.percent - frame.percent);\r\n            if (range === 0) {\r\n                return;\r\n            }\r\n            var w = (percent - frame.percent) / range;\r\n            var targetArr = isAdditive ? this._additiveValue\r\n                : (isValueColor ? tmpRgba : target[propName]);\r\n            if ((arrDim > 0 || isValueColor) && !targetArr) {\r\n                targetArr = this._additiveValue = [];\r\n            }\r\n            if (this.useSpline) {\r\n                var p1 = keyframes[frameIdx][valueKey];\r\n                var p0 = keyframes[frameIdx === 0 ? frameIdx : frameIdx - 1][valueKey];\r\n                var p2 = keyframes[frameIdx > kfsNum - 2 ? kfsNum - 1 : frameIdx + 1][valueKey];\r\n                var p3 = keyframes[frameIdx > kfsNum - 3 ? kfsNum - 1 : frameIdx + 2][valueKey];\r\n                if (arrDim > 0) {\r\n                    arrDim === 1\r\n                        ? catmullRomInterpolate1DArray(targetArr, p0, p1, p2, p3, w, w * w, w * w * w)\r\n                        : catmullRomInterpolate2DArray(targetArr, p0, p1, p2, p3, w, w * w, w * w * w);\r\n                }\r\n                else if (isValueColor) {\r\n                    catmullRomInterpolate1DArray(targetArr, p0, p1, p2, p3, w, w * w, w * w * w);\r\n                    if (!isAdditive) {\r\n                        target[propName] = rgba2String(targetArr);\r\n                    }\r\n                }\r\n                else {\r\n                    var value = void 0;\r\n                    if (!this.interpolable) {\r\n                        value = p2;\r\n                    }\r\n                    else {\r\n                        value = catmullRomInterpolate(p0, p1, p2, p3, w, w * w, w * w * w);\r\n                    }\r\n                    if (isAdditive) {\r\n                        this._additiveValue = value;\r\n                    }\r\n                    else {\r\n                        target[propName] = value;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (arrDim > 0) {\r\n                    arrDim === 1\r\n                        ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w)\r\n                        : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\r\n                }\r\n                else if (isValueColor) {\r\n                    interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\r\n                    if (!isAdditive) {\r\n                        target[propName] = rgba2String(targetArr);\r\n                    }\r\n                }\r\n                else {\r\n                    var value = void 0;\r\n                    if (!this.interpolable) {\r\n                        value = step(frame[valueKey], nextFrame[valueKey], w);\r\n                    }\r\n                    else {\r\n                        value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\r\n                    }\r\n                    if (isAdditive) {\r\n                        this._additiveValue = value;\r\n                    }\r\n                    else {\r\n                        target[propName] = value;\r\n                    }\r\n                }\r\n            }\r\n            if (isAdditive) {\r\n                this._addToTarget(target);\r\n            }\r\n        };\r\n        Track.prototype._addToTarget = function (target) {\r\n            var arrDim = this.arrDim;\r\n            var propName = this.propName;\r\n            if (arrDim === 0) {\r\n                if (this.isValueColor) {\r\n                    parse(target[propName], tmpRgba);\r\n                    add1DArray(tmpRgba, tmpRgba, this._additiveValue, 1);\r\n                    target[propName] = rgba2String(tmpRgba);\r\n                }\r\n                else {\r\n                    target[propName] = target[propName] + this._additiveValue;\r\n                }\r\n            }\r\n            else if (arrDim === 1) {\r\n                add1DArray(target[propName], target[propName], this._additiveValue, 1);\r\n            }\r\n            else if (arrDim === 2) {\r\n                add2DArray(target[propName], target[propName], this._additiveValue, 1);\r\n            }\r\n        };\r\n        return Track;\r\n    }());\r\n    var Animator = (function () {\r\n        function Animator(target, loop, additiveTo) {\r\n            this._tracks = {};\r\n            this._trackKeys = [];\r\n            this._delay = 0;\r\n            this._maxTime = 0;\r\n            this._paused = false;\r\n            this._started = 0;\r\n            this._doneList = [];\r\n            this._onframeList = [];\r\n            this._clip = null;\r\n            this._target = target;\r\n            this._loop = loop;\r\n            if (loop) {\r\n                logError('Can\\' use additive animation on looped animation.');\r\n                return;\r\n            }\r\n            this._additiveAnimators = additiveTo;\r\n        }\r\n        Animator.prototype.getTarget = function () {\r\n            return this._target;\r\n        };\r\n        Animator.prototype.changeTarget = function (target) {\r\n            this._target = target;\r\n        };\r\n        Animator.prototype.when = function (time, props) {\r\n            return this.whenWithKeys(time, props, keys(props));\r\n        };\r\n        Animator.prototype.whenWithKeys = function (time, props, propNames) {\r\n            var tracks = this._tracks;\r\n            for (var i = 0; i < propNames.length; i++) {\r\n                var propName = propNames[i];\r\n                var track = tracks[propName];\r\n                if (!track) {\r\n                    track = tracks[propName] = new Track(propName);\r\n                    var initialValue = void 0;\r\n                    var additiveTrack = this._getAdditiveTrack(propName);\r\n                    if (additiveTrack) {\r\n                        var lastFinalKf = additiveTrack.keyframes[additiveTrack.keyframes.length - 1];\r\n                        initialValue = lastFinalKf && lastFinalKf.value;\r\n                        if (additiveTrack.isValueColor && initialValue) {\r\n                            initialValue = rgba2String(initialValue);\r\n                        }\r\n                    }\r\n                    else {\r\n                        initialValue = this._target[propName];\r\n                    }\r\n                    if (initialValue == null) {\r\n                        continue;\r\n                    }\r\n                    if (time !== 0) {\r\n                        track.addKeyframe(0, cloneValue(initialValue));\r\n                    }\r\n                    this._trackKeys.push(propName);\r\n                }\r\n                track.addKeyframe(time, cloneValue(props[propName]));\r\n            }\r\n            this._maxTime = Math.max(this._maxTime, time);\r\n            return this;\r\n        };\r\n        Animator.prototype.during = function (callback) {\r\n            this._onframeList.push(callback);\r\n            return this;\r\n        };\r\n        Animator.prototype.pause = function () {\r\n            this._clip.pause();\r\n            this._paused = true;\r\n        };\r\n        Animator.prototype.resume = function () {\r\n            this._clip.resume();\r\n            this._paused = false;\r\n        };\r\n        Animator.prototype.isPaused = function () {\r\n            return !!this._paused;\r\n        };\r\n        Animator.prototype._doneCallback = function () {\r\n            this._tracks = null;\r\n            this._clip = null;\r\n            var doneList = this._doneList;\r\n            var len = doneList.length;\r\n            for (var i = 0; i < len; i++) {\r\n                doneList[i].call(this);\r\n            }\r\n        };\r\n        Animator.prototype._getAdditiveTrack = function (trackName) {\r\n            var additiveTrack;\r\n            var additiveAnimators = this._additiveAnimators;\r\n            if (additiveAnimators) {\r\n                for (var i = 0; i < additiveAnimators.length; i++) {\r\n                    var track = additiveAnimators[i].getTrack(trackName);\r\n                    if (track) {\r\n                        additiveTrack = track;\r\n                    }\r\n                }\r\n            }\r\n            return additiveTrack;\r\n        };\r\n        Animator.prototype.start = function (easing, forceAnimate) {\r\n            if (this._started > 0) {\r\n                return;\r\n            }\r\n            this._started = 1;\r\n            var self = this;\r\n            var tracks = [];\r\n            for (var i = 0; i < this._trackKeys.length; i++) {\r\n                var propName = this._trackKeys[i];\r\n                var track = this._tracks[propName];\r\n                var additiveTrack = this._getAdditiveTrack(propName);\r\n                var kfs = track.keyframes;\r\n                track.prepare(additiveTrack);\r\n                if (track.needsAnimate()) {\r\n                    tracks.push(track);\r\n                }\r\n                else if (!track.interpolable) {\r\n                    var lastKf = kfs[kfs.length - 1];\r\n                    if (lastKf) {\r\n                        self._target[track.propName] = lastKf.value;\r\n                    }\r\n                }\r\n            }\r\n            if (tracks.length || forceAnimate) {\r\n                var clip = new Clip({\r\n                    life: this._maxTime,\r\n                    loop: this._loop,\r\n                    delay: this._delay,\r\n                    onframe: function (percent) {\r\n                        self._started = 2;\r\n                        var additiveAnimators = self._additiveAnimators;\r\n                        if (additiveAnimators) {\r\n                            var stillHasAdditiveAnimator = false;\r\n                            for (var i = 0; i < additiveAnimators.length; i++) {\r\n                                if (additiveAnimators[i]._clip) {\r\n                                    stillHasAdditiveAnimator = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (!stillHasAdditiveAnimator) {\r\n                                self._additiveAnimators = null;\r\n                            }\r\n                        }\r\n                        for (var i = 0; i < tracks.length; i++) {\r\n                            tracks[i].step(self._target, percent);\r\n                        }\r\n                        for (var i = 0; i < self._onframeList.length; i++) {\r\n                            self._onframeList[i](self._target, percent);\r\n                        }\r\n                    },\r\n                    ondestroy: function () {\r\n                        for (var i = 0; i < tracks.length; i++) {\r\n                            tracks[i].setFinished();\r\n                        }\r\n                        self._doneCallback();\r\n                    }\r\n                });\r\n                this._clip = clip;\r\n                if (this.animation) {\r\n                    this.animation.addClip(clip);\r\n                }\r\n                if (easing && easing !== 'spline') {\r\n                    clip.easing = easing;\r\n                }\r\n            }\r\n            else {\r\n                this._doneCallback();\r\n            }\r\n            return this;\r\n        };\r\n        Animator.prototype.stop = function (forwardToLast) {\r\n            if (!this._clip) {\r\n                return;\r\n            }\r\n            var clip = this._clip;\r\n            var animation = this.animation;\r\n            if (forwardToLast) {\r\n                clip.onframe(1);\r\n            }\r\n            if (animation) {\r\n                animation.removeClip(clip);\r\n            }\r\n            this._clip = null;\r\n        };\r\n        Animator.prototype.delay = function (time) {\r\n            this._delay = time;\r\n            return this;\r\n        };\r\n        Animator.prototype.done = function (cb) {\r\n            if (cb) {\r\n                this._doneList.push(cb);\r\n            }\r\n            return this;\r\n        };\r\n        Animator.prototype.getClip = function () {\r\n            return this._clip;\r\n        };\r\n        Animator.prototype.getTrack = function (propName) {\r\n            return this._tracks[propName];\r\n        };\r\n        Animator.prototype.stopTracks = function (propNames, forwardToLast) {\r\n            if (!propNames.length || !this._clip) {\r\n                return true;\r\n            }\r\n            var tracks = this._tracks;\r\n            var tracksKeys = this._trackKeys;\r\n            for (var i = 0; i < propNames.length; i++) {\r\n                var track = tracks[propNames[i]];\r\n                if (track) {\r\n                    if (forwardToLast) {\r\n                        track.step(this._target, 1);\r\n                    }\r\n                    else if (this._started === 1) {\r\n                        track.step(this._target, 0);\r\n                    }\r\n                    track.setFinished();\r\n                }\r\n            }\r\n            var allAborted = true;\r\n            for (var i = 0; i < tracksKeys.length; i++) {\r\n                if (!tracks[tracksKeys[i]].isFinished()) {\r\n                    allAborted = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (allAborted && this.animation) {\r\n                this.animation.removeClip(this._clip);\r\n                this._clip = null;\r\n            }\r\n            return allAborted;\r\n        };\r\n        Animator.prototype.saveFinalToTarget = function (target, trackKeys) {\r\n            if (!target) {\r\n                return;\r\n            }\r\n            trackKeys = trackKeys || this._trackKeys;\r\n            for (var i = 0; i < trackKeys.length; i++) {\r\n                var propName = trackKeys[i];\r\n                var track = this._tracks[propName];\r\n                if (!track || track.isFinished()) {\r\n                    continue;\r\n                }\r\n                var kfs = track.keyframes;\r\n                var lastKf = kfs[kfs.length - 1];\r\n                if (lastKf) {\r\n                    var val = cloneValue(lastKf.value);\r\n                    if (track.isValueColor) {\r\n                        val = rgba2String(val);\r\n                    }\r\n                    target[propName] = val;\r\n                }\r\n            }\r\n        };\r\n        Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\r\n            trackKeys = trackKeys || keys(finalProps);\r\n            for (var i = 0; i < trackKeys.length; i++) {\r\n                var propName = trackKeys[i];\r\n                var track = this._tracks[propName];\r\n                if (!track) {\r\n                    continue;\r\n                }\r\n                var kfs = track.keyframes;\r\n                if (kfs.length > 1) {\r\n                    var lastKf = kfs.pop();\r\n                    track.addKeyframe(lastKf.time, finalProps[propName]);\r\n                    track.prepare(track.getAdditiveTrack());\r\n                }\r\n            }\r\n        };\r\n        return Animator;\r\n    }());\n\n    var Animation = (function (_super) {\r\n        __extends(Animation, _super);\r\n        function Animation(opts) {\r\n            var _this = _super.call(this) || this;\r\n            _this._running = false;\r\n            _this._time = 0;\r\n            _this._pausedTime = 0;\r\n            _this._pauseStart = 0;\r\n            _this._paused = false;\r\n            opts = opts || {};\r\n            _this.stage = opts.stage || {};\r\n            _this.onframe = opts.onframe || function () { };\r\n            return _this;\r\n        }\r\n        Animation.prototype.addClip = function (clip) {\r\n            if (clip.animation) {\r\n                this.removeClip(clip);\r\n            }\r\n            if (!this._clipsHead) {\r\n                this._clipsHead = this._clipsTail = clip;\r\n            }\r\n            else {\r\n                this._clipsTail.next = clip;\r\n                clip.prev = this._clipsTail;\r\n                clip.next = null;\r\n                this._clipsTail = clip;\r\n            }\r\n            clip.animation = this;\r\n        };\r\n        Animation.prototype.addAnimator = function (animator) {\r\n            animator.animation = this;\r\n            var clip = animator.getClip();\r\n            if (clip) {\r\n                this.addClip(clip);\r\n            }\r\n        };\r\n        Animation.prototype.removeClip = function (clip) {\r\n            if (!clip.animation) {\r\n                return;\r\n            }\r\n            var prev = clip.prev;\r\n            var next = clip.next;\r\n            if (prev) {\r\n                prev.next = next;\r\n            }\r\n            else {\r\n                this._clipsHead = next;\r\n            }\r\n            if (next) {\r\n                next.prev = prev;\r\n            }\r\n            else {\r\n                this._clipsTail = prev;\r\n            }\r\n            clip.next = clip.prev = clip.animation = null;\r\n        };\r\n        Animation.prototype.removeAnimator = function (animator) {\r\n            var clip = animator.getClip();\r\n            if (clip) {\r\n                this.removeClip(clip);\r\n            }\r\n            animator.animation = null;\r\n        };\r\n        Animation.prototype.update = function () {\r\n            var time = new Date().getTime() - this._pausedTime;\r\n            var delta = time - this._time;\r\n            var clip = this._clipsHead;\r\n            while (clip) {\r\n                var nextClip = clip.next;\r\n                var finished = clip.step(time, delta);\r\n                if (finished) {\r\n                    clip.ondestroy && clip.ondestroy();\r\n                    this.removeClip(clip);\r\n                    clip = nextClip;\r\n                }\r\n                else {\r\n                    clip = nextClip;\r\n                }\r\n            }\r\n            this._time = time;\r\n            this.onframe(delta);\r\n            this.trigger('frame', delta);\r\n            if (this.stage.update) {\r\n                this.stage.update();\r\n            }\r\n        };\r\n        Animation.prototype._startLoop = function () {\r\n            var self = this;\r\n            this._running = true;\r\n            function step() {\r\n                if (self._running) {\r\n                    requestAnimationFrame$1(step);\r\n                    !self._paused && self.update();\r\n                }\r\n            }\r\n            requestAnimationFrame$1(step);\r\n        };\r\n        Animation.prototype.start = function () {\r\n            if (this._running) {\r\n                return;\r\n            }\r\n            this._time = new Date().getTime();\r\n            this._pausedTime = 0;\r\n            this._startLoop();\r\n        };\r\n        Animation.prototype.stop = function () {\r\n            this._running = false;\r\n        };\r\n        Animation.prototype.pause = function () {\r\n            if (!this._paused) {\r\n                this._pauseStart = new Date().getTime();\r\n                this._paused = true;\r\n            }\r\n        };\r\n        Animation.prototype.resume = function () {\r\n            if (this._paused) {\r\n                this._pausedTime += (new Date().getTime()) - this._pauseStart;\r\n                this._paused = false;\r\n            }\r\n        };\r\n        Animation.prototype.clear = function () {\r\n            var clip = this._clipsHead;\r\n            while (clip) {\r\n                var nextClip = clip.next;\r\n                clip.prev = clip.next = clip.animation = null;\r\n                clip = nextClip;\r\n            }\r\n            this._clipsHead = this._clipsTail = null;\r\n        };\r\n        Animation.prototype.isFinished = function () {\r\n            return this._clipsHead == null;\r\n        };\r\n        Animation.prototype.animate = function (target, options) {\r\n            options = options || {};\r\n            this.start();\r\n            var animator = new Animator(target, options.loop);\r\n            this.addAnimator(animator);\r\n            return animator;\r\n        };\r\n        return Animation;\r\n    }(Eventful));\n\n    var TOUCH_CLICK_DELAY = 300;\r\n    var globalEventSupported = env.domSupported;\r\n    var localNativeListenerNames = (function () {\r\n        var mouseHandlerNames = [\r\n            'click', 'dblclick', 'mousewheel', 'wheel', 'mouseout',\r\n            'mouseup', 'mousedown', 'mousemove', 'contextmenu'\r\n        ];\r\n        var touchHandlerNames = [\r\n            'touchstart', 'touchend', 'touchmove'\r\n        ];\r\n        var pointerEventNameMap = {\r\n            pointerdown: 1, pointerup: 1, pointermove: 1, pointerout: 1\r\n        };\r\n        var pointerHandlerNames = map(mouseHandlerNames, function (name) {\r\n            var nm = name.replace('mouse', 'pointer');\r\n            return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\r\n        });\r\n        return {\r\n            mouse: mouseHandlerNames,\r\n            touch: touchHandlerNames,\r\n            pointer: pointerHandlerNames\r\n        };\r\n    })();\r\n    var globalNativeListenerNames = {\r\n        mouse: ['mousemove', 'mouseup'],\r\n        pointer: ['pointermove', 'pointerup']\r\n    };\r\n    var wheelEventSupported = false;\r\n    function isPointerFromTouch(event) {\r\n        var pointerType = event.pointerType;\r\n        return pointerType === 'pen' || pointerType === 'touch';\r\n    }\r\n    function setTouchTimer(scope) {\r\n        scope.touching = true;\r\n        if (scope.touchTimer != null) {\r\n            clearTimeout(scope.touchTimer);\r\n            scope.touchTimer = null;\r\n        }\r\n        scope.touchTimer = setTimeout(function () {\r\n            scope.touching = false;\r\n            scope.touchTimer = null;\r\n        }, 700);\r\n    }\r\n    function markTouch(event) {\r\n        event && (event.zrByTouch = true);\r\n    }\r\n    function normalizeGlobalEvent(instance, event) {\r\n        return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\r\n    }\r\n    function isLocalEl(instance, el) {\r\n        var elTmp = el;\r\n        var isLocal = false;\r\n        while (elTmp && elTmp.nodeType !== 9\r\n            && !(isLocal = elTmp.domBelongToZr\r\n                || (elTmp !== el && elTmp === instance.painterRoot))) {\r\n            elTmp = elTmp.parentNode;\r\n        }\r\n        return isLocal;\r\n    }\r\n    var FakeGlobalEvent = (function () {\r\n        function FakeGlobalEvent(instance, event) {\r\n            this.stopPropagation = noop;\r\n            this.stopImmediatePropagation = noop;\r\n            this.preventDefault = noop;\r\n            this.type = event.type;\r\n            this.target = this.currentTarget = instance.dom;\r\n            this.pointerType = event.pointerType;\r\n            this.clientX = event.clientX;\r\n            this.clientY = event.clientY;\r\n        }\r\n        return FakeGlobalEvent;\r\n    }());\r\n    var localDOMHandlers = {\r\n        mousedown: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            this.__mayPointerCapture = [event.zrX, event.zrY];\r\n            this.trigger('mousedown', event);\r\n        },\r\n        mousemove: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            var downPoint = this.__mayPointerCapture;\r\n            if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\r\n                this.__togglePointerCapture(true);\r\n            }\r\n            this.trigger('mousemove', event);\r\n        },\r\n        mouseup: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            this.__togglePointerCapture(false);\r\n            this.trigger('mouseup', event);\r\n        },\r\n        mouseout: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            if (this.__pointerCapturing) {\r\n                event.zrEventControl = 'no_globalout';\r\n            }\r\n            var element = event.toElement || event.relatedTarget;\r\n            event.zrIsToLocalDOM = isLocalEl(this, element);\r\n            this.trigger('mouseout', event);\r\n        },\r\n        wheel: function (event) {\r\n            wheelEventSupported = true;\r\n            event = normalizeEvent(this.dom, event);\r\n            this.trigger('mousewheel', event);\r\n        },\r\n        mousewheel: function (event) {\r\n            if (wheelEventSupported) {\r\n                return;\r\n            }\r\n            event = normalizeEvent(this.dom, event);\r\n            this.trigger('mousewheel', event);\r\n        },\r\n        touchstart: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            markTouch(event);\r\n            this.__lastTouchMoment = new Date();\r\n            this.handler.processGesture(event, 'start');\r\n            localDOMHandlers.mousemove.call(this, event);\r\n            localDOMHandlers.mousedown.call(this, event);\r\n        },\r\n        touchmove: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            markTouch(event);\r\n            this.handler.processGesture(event, 'change');\r\n            localDOMHandlers.mousemove.call(this, event);\r\n        },\r\n        touchend: function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            markTouch(event);\r\n            this.handler.processGesture(event, 'end');\r\n            localDOMHandlers.mouseup.call(this, event);\r\n            if (+new Date() - (+this.__lastTouchMoment) < TOUCH_CLICK_DELAY) {\r\n                localDOMHandlers.click.call(this, event);\r\n            }\r\n        },\r\n        pointerdown: function (event) {\r\n            localDOMHandlers.mousedown.call(this, event);\r\n        },\r\n        pointermove: function (event) {\r\n            if (!isPointerFromTouch(event)) {\r\n                localDOMHandlers.mousemove.call(this, event);\r\n            }\r\n        },\r\n        pointerup: function (event) {\r\n            localDOMHandlers.mouseup.call(this, event);\r\n        },\r\n        pointerout: function (event) {\r\n            if (!isPointerFromTouch(event)) {\r\n                localDOMHandlers.mouseout.call(this, event);\r\n            }\r\n        }\r\n    };\r\n    each(['click', 'dblclick', 'contextmenu'], function (name) {\r\n        localDOMHandlers[name] = function (event) {\r\n            event = normalizeEvent(this.dom, event);\r\n            this.trigger(name, event);\r\n        };\r\n    });\r\n    var globalDOMHandlers = {\r\n        pointermove: function (event) {\r\n            if (!isPointerFromTouch(event)) {\r\n                globalDOMHandlers.mousemove.call(this, event);\r\n            }\r\n        },\r\n        pointerup: function (event) {\r\n            globalDOMHandlers.mouseup.call(this, event);\r\n        },\r\n        mousemove: function (event) {\r\n            this.trigger('mousemove', event);\r\n        },\r\n        mouseup: function (event) {\r\n            var pointerCaptureReleasing = this.__pointerCapturing;\r\n            this.__togglePointerCapture(false);\r\n            this.trigger('mouseup', event);\r\n            if (pointerCaptureReleasing) {\r\n                event.zrEventControl = 'only_globalout';\r\n                this.trigger('mouseout', event);\r\n            }\r\n        }\r\n    };\r\n    function mountLocalDOMEventListeners(instance, scope) {\r\n        var domHandlers = scope.domHandlers;\r\n        if (env.pointerEventsSupported) {\r\n            each(localNativeListenerNames.pointer, function (nativeEventName) {\r\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\r\n                    domHandlers[nativeEventName].call(instance, event);\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            if (env.touchEventsSupported) {\r\n                each(localNativeListenerNames.touch, function (nativeEventName) {\r\n                    mountSingleDOMEventListener(scope, nativeEventName, function (event) {\r\n                        domHandlers[nativeEventName].call(instance, event);\r\n                        setTouchTimer(scope);\r\n                    });\r\n                });\r\n            }\r\n            each(localNativeListenerNames.mouse, function (nativeEventName) {\r\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\r\n                    event = getNativeEvent(event);\r\n                    if (!scope.touching) {\r\n                        domHandlers[nativeEventName].call(instance, event);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n    function mountGlobalDOMEventListeners(instance, scope) {\r\n        if (env.pointerEventsSupported) {\r\n            each(globalNativeListenerNames.pointer, mount);\r\n        }\r\n        else if (!env.touchEventsSupported) {\r\n            each(globalNativeListenerNames.mouse, mount);\r\n        }\r\n        function mount(nativeEventName) {\r\n            function nativeEventListener(event) {\r\n                event = getNativeEvent(event);\r\n                if (!isLocalEl(instance, event.target)) {\r\n                    event = normalizeGlobalEvent(instance, event);\r\n                    scope.domHandlers[nativeEventName].call(instance, event);\r\n                }\r\n            }\r\n            mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, { capture: true });\r\n        }\r\n    }\r\n    function mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\r\n        scope.mounted[nativeEventName] = listener;\r\n        scope.listenerOpts[nativeEventName] = opt;\r\n        addEventListener(scope.domTarget, nativeEventName, listener, opt);\r\n    }\r\n    function unmountDOMEventListeners(scope) {\r\n        var mounted = scope.mounted;\r\n        for (var nativeEventName in mounted) {\r\n            if (mounted.hasOwnProperty(nativeEventName)) {\r\n                removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\r\n            }\r\n        }\r\n        scope.mounted = {};\r\n    }\r\n    var DOMHandlerScope = (function () {\r\n        function DOMHandlerScope(domTarget, domHandlers) {\r\n            this.mounted = {};\r\n            this.listenerOpts = {};\r\n            this.touching = false;\r\n            this.domTarget = domTarget;\r\n            this.domHandlers = domHandlers;\r\n        }\r\n        return DOMHandlerScope;\r\n    }());\r\n    var HandlerDomProxy = (function (_super) {\r\n        __extends(HandlerDomProxy, _super);\r\n        function HandlerDomProxy(dom, painterRoot) {\r\n            var _this = _super.call(this) || this;\r\n            _this.__pointerCapturing = false;\r\n            _this.dom = dom;\r\n            _this.painterRoot = painterRoot;\r\n            _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\r\n            if (globalEventSupported) {\r\n                _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\r\n            }\r\n            mountLocalDOMEventListeners(_this, _this._localHandlerScope);\r\n            return _this;\r\n        }\r\n        HandlerDomProxy.prototype.dispose = function () {\r\n            unmountDOMEventListeners(this._localHandlerScope);\r\n            if (globalEventSupported) {\r\n                unmountDOMEventListeners(this._globalHandlerScope);\r\n            }\r\n        };\r\n        HandlerDomProxy.prototype.setCursor = function (cursorStyle) {\r\n            this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\r\n        };\r\n        HandlerDomProxy.prototype.__togglePointerCapture = function (isPointerCapturing) {\r\n            this.__mayPointerCapture = null;\r\n            if (globalEventSupported\r\n                && ((+this.__pointerCapturing) ^ (+isPointerCapturing))) {\r\n                this.__pointerCapturing = isPointerCapturing;\r\n                var globalHandlerScope = this._globalHandlerScope;\r\n                isPointerCapturing\r\n                    ? mountGlobalDOMEventListeners(this, globalHandlerScope)\r\n                    : unmountDOMEventListeners(globalHandlerScope);\r\n            }\r\n        };\r\n        return HandlerDomProxy;\r\n    }(Eventful));\n\n    function create$1() {\r\n        return [1, 0, 0, 1, 0, 0];\r\n    }\r\n    function identity(out) {\r\n        out[0] = 1;\r\n        out[1] = 0;\r\n        out[2] = 0;\r\n        out[3] = 1;\r\n        out[4] = 0;\r\n        out[5] = 0;\r\n        return out;\r\n    }\r\n    function copy$1(out, m) {\r\n        out[0] = m[0];\r\n        out[1] = m[1];\r\n        out[2] = m[2];\r\n        out[3] = m[3];\r\n        out[4] = m[4];\r\n        out[5] = m[5];\r\n        return out;\r\n    }\r\n    function mul$1(out, m1, m2) {\r\n        var out0 = m1[0] * m2[0] + m1[2] * m2[1];\r\n        var out1 = m1[1] * m2[0] + m1[3] * m2[1];\r\n        var out2 = m1[0] * m2[2] + m1[2] * m2[3];\r\n        var out3 = m1[1] * m2[2] + m1[3] * m2[3];\r\n        var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\r\n        var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\r\n        out[0] = out0;\r\n        out[1] = out1;\r\n        out[2] = out2;\r\n        out[3] = out3;\r\n        out[4] = out4;\r\n        out[5] = out5;\r\n        return out;\r\n    }\r\n    function translate(out, a, v) {\r\n        out[0] = a[0];\r\n        out[1] = a[1];\r\n        out[2] = a[2];\r\n        out[3] = a[3];\r\n        out[4] = a[4] + v[0];\r\n        out[5] = a[5] + v[1];\r\n        return out;\r\n    }\r\n    function rotate(out, a, rad) {\r\n        var aa = a[0];\r\n        var ac = a[2];\r\n        var atx = a[4];\r\n        var ab = a[1];\r\n        var ad = a[3];\r\n        var aty = a[5];\r\n        var st = Math.sin(rad);\r\n        var ct = Math.cos(rad);\r\n        out[0] = aa * ct + ab * st;\r\n        out[1] = -aa * st + ab * ct;\r\n        out[2] = ac * ct + ad * st;\r\n        out[3] = -ac * st + ct * ad;\r\n        out[4] = ct * atx + st * aty;\r\n        out[5] = ct * aty - st * atx;\r\n        return out;\r\n    }\r\n    function scale$1(out, a, v) {\r\n        var vx = v[0];\r\n        var vy = v[1];\r\n        out[0] = a[0] * vx;\r\n        out[1] = a[1] * vy;\r\n        out[2] = a[2] * vx;\r\n        out[3] = a[3] * vy;\r\n        out[4] = a[4] * vx;\r\n        out[5] = a[5] * vy;\r\n        return out;\r\n    }\r\n    function invert(out, a) {\r\n        var aa = a[0];\r\n        var ac = a[2];\r\n        var atx = a[4];\r\n        var ab = a[1];\r\n        var ad = a[3];\r\n        var aty = a[5];\r\n        var det = aa * ad - ab * ac;\r\n        if (!det) {\r\n            return null;\r\n        }\r\n        det = 1.0 / det;\r\n        out[0] = ad * det;\r\n        out[1] = -ab * det;\r\n        out[2] = -ac * det;\r\n        out[3] = aa * det;\r\n        out[4] = (ac * aty - ad * atx) * det;\r\n        out[5] = (ab * atx - aa * aty) * det;\r\n        return out;\r\n    }\r\n    function clone$2(a) {\r\n        var b = create$1();\r\n        copy$1(b, a);\r\n        return b;\r\n    }\n\n    var matrix = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        create: create$1,\n        identity: identity,\n        copy: copy$1,\n        mul: mul$1,\n        translate: translate,\n        rotate: rotate,\n        scale: scale$1,\n        invert: invert,\n        clone: clone$2\n    });\n\n    var mIdentity = identity;\r\n    var EPSILON = 5e-5;\r\n    function isNotAroundZero(val) {\r\n        return val > EPSILON || val < -EPSILON;\r\n    }\r\n    var scaleTmp = [];\r\n    var tmpTransform = [];\r\n    var originTransform = create$1();\r\n    var abs = Math.abs;\r\n    var Transformable = (function () {\r\n        function Transformable() {\r\n        }\r\n        Transformable.prototype.setPosition = function (arr) {\r\n            this.x = arr[0];\r\n            this.y = arr[1];\r\n        };\r\n        Transformable.prototype.setScale = function (arr) {\r\n            this.scaleX = arr[0];\r\n            this.scaleY = arr[1];\r\n        };\r\n        Transformable.prototype.setOrigin = function (arr) {\r\n            this.originX = arr[0];\r\n            this.originY = arr[1];\r\n        };\r\n        Transformable.prototype.needLocalTransform = function () {\r\n            return isNotAroundZero(this.rotation)\r\n                || isNotAroundZero(this.x)\r\n                || isNotAroundZero(this.y)\r\n                || isNotAroundZero(this.scaleX - 1)\r\n                || isNotAroundZero(this.scaleY - 1);\r\n        };\r\n        Transformable.prototype.updateTransform = function () {\r\n            var parent = this.parent;\r\n            var parentHasTransform = parent && parent.transform;\r\n            var needLocalTransform = this.needLocalTransform();\r\n            var m = this.transform;\r\n            if (!(needLocalTransform || parentHasTransform)) {\r\n                m && mIdentity(m);\r\n                return;\r\n            }\r\n            m = m || create$1();\r\n            if (needLocalTransform) {\r\n                this.getLocalTransform(m);\r\n            }\r\n            else {\r\n                mIdentity(m);\r\n            }\r\n            if (parentHasTransform) {\r\n                if (needLocalTransform) {\r\n                    mul$1(m, parent.transform, m);\r\n                }\r\n                else {\r\n                    copy$1(m, parent.transform);\r\n                }\r\n            }\r\n            this.transform = m;\r\n            this._resolveGlobalScaleRatio(m);\r\n        };\r\n        Transformable.prototype._resolveGlobalScaleRatio = function (m) {\r\n            var globalScaleRatio = this.globalScaleRatio;\r\n            if (globalScaleRatio != null && globalScaleRatio !== 1) {\r\n                this.getGlobalScale(scaleTmp);\r\n                var relX = scaleTmp[0] < 0 ? -1 : 1;\r\n                var relY = scaleTmp[1] < 0 ? -1 : 1;\r\n                var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\r\n                var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\r\n                m[0] *= sx;\r\n                m[1] *= sx;\r\n                m[2] *= sy;\r\n                m[3] *= sy;\r\n            }\r\n            this.invTransform = this.invTransform || create$1();\r\n            invert(this.invTransform, m);\r\n        };\r\n        Transformable.prototype.getLocalTransform = function (m) {\r\n            return Transformable.getLocalTransform(this, m);\r\n        };\r\n        Transformable.prototype.getComputedTransform = function () {\r\n            var transformNode = this;\r\n            var ancestors = [];\r\n            while (transformNode) {\r\n                ancestors.push(transformNode);\r\n                transformNode = transformNode.parent;\r\n            }\r\n            while (transformNode = ancestors.pop()) {\r\n                transformNode.updateTransform();\r\n            }\r\n            return this.transform;\r\n        };\r\n        Transformable.prototype.setLocalTransform = function (m) {\r\n            if (!m) {\r\n                return;\r\n            }\r\n            var sx = m[0] * m[0] + m[1] * m[1];\r\n            var sy = m[2] * m[2] + m[3] * m[3];\r\n            if (isNotAroundZero(sx - 1)) {\r\n                sx = Math.sqrt(sx);\r\n            }\r\n            if (isNotAroundZero(sy - 1)) {\r\n                sy = Math.sqrt(sy);\r\n            }\r\n            this.rotation = Math.atan2(-m[1] / sy, m[0] / sx);\r\n            if (m[0] < 0) {\r\n                sx = -sx;\r\n            }\r\n            if (m[3] < 0) {\r\n                sy = -sy;\r\n            }\r\n            if (sx < 0 && sy < 0) {\r\n                this.rotation += Math.PI;\r\n                sx = -sx;\r\n                sy = -sy;\r\n            }\r\n            this.x = m[4];\r\n            this.y = m[5];\r\n            this.scaleX = sx;\r\n            this.scaleY = sy;\r\n        };\r\n        Transformable.prototype.decomposeTransform = function () {\r\n            if (!this.transform) {\r\n                return;\r\n            }\r\n            var parent = this.parent;\r\n            var m = this.transform;\r\n            if (parent && parent.transform) {\r\n                mul$1(tmpTransform, parent.invTransform, m);\r\n                m = tmpTransform;\r\n            }\r\n            var ox = this.originX;\r\n            var oy = this.originY;\r\n            if (ox || oy) {\r\n                originTransform[4] = ox;\r\n                originTransform[5] = oy;\r\n                mul$1(tmpTransform, m, originTransform);\r\n                tmpTransform[4] -= ox;\r\n                tmpTransform[5] -= oy;\r\n                m = tmpTransform;\r\n            }\r\n            this.setLocalTransform(m);\r\n        };\r\n        Transformable.prototype.getGlobalScale = function (out) {\r\n            var m = this.transform;\r\n            out = out || [];\r\n            if (!m) {\r\n                out[0] = 1;\r\n                out[1] = 1;\r\n                return out;\r\n            }\r\n            out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\r\n            out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\r\n            if (m[0] < 0) {\r\n                out[0] = -out[0];\r\n            }\r\n            if (m[3] < 0) {\r\n                out[1] = -out[1];\r\n            }\r\n            return out;\r\n        };\r\n        Transformable.prototype.transformCoordToLocal = function (x, y) {\r\n            var v2 = [x, y];\r\n            var invTransform = this.invTransform;\r\n            if (invTransform) {\r\n                applyTransform(v2, v2, invTransform);\r\n            }\r\n            return v2;\r\n        };\r\n        Transformable.prototype.transformCoordToGlobal = function (x, y) {\r\n            var v2 = [x, y];\r\n            var transform = this.transform;\r\n            if (transform) {\r\n                applyTransform(v2, v2, transform);\r\n            }\r\n            return v2;\r\n        };\r\n        Transformable.prototype.getLineScale = function () {\r\n            var m = this.transform;\r\n            return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10\r\n                ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1]))\r\n                : 1;\r\n        };\r\n        Transformable.getLocalTransform = function (target, m) {\r\n            m = m || [];\r\n            mIdentity(m);\r\n            var ox = target.originX || 0;\r\n            var oy = target.originY || 0;\r\n            var sx = target.scaleX;\r\n            var sy = target.scaleY;\r\n            var rotation = target.rotation || 0;\r\n            var x = target.x;\r\n            var y = target.y;\r\n            m[4] -= ox;\r\n            m[5] -= oy;\r\n            m[0] *= sx;\r\n            m[1] *= sy;\r\n            m[2] *= sx;\r\n            m[3] *= sy;\r\n            m[4] *= sx;\r\n            m[5] *= sy;\r\n            if (rotation) {\r\n                rotate(m, m, rotation);\r\n            }\r\n            m[4] += ox;\r\n            m[5] += oy;\r\n            m[4] += x;\r\n            m[5] += y;\r\n            return m;\r\n        };\r\n        Transformable.initDefaultProps = (function () {\r\n            var proto = Transformable.prototype;\r\n            proto.x = 0;\r\n            proto.y = 0;\r\n            proto.scaleX = 1;\r\n            proto.scaleY = 1;\r\n            proto.originX = 0;\r\n            proto.originY = 0;\r\n            proto.rotation = 0;\r\n            proto.globalScaleRatio = 1;\r\n        })();\r\n        return Transformable;\r\n    }());\n\n    var Point = (function () {\r\n        function Point(x, y) {\r\n            this.x = x || 0;\r\n            this.y = y || 0;\r\n        }\r\n        Point.prototype.copy = function (other) {\r\n            this.x = other.x;\r\n            this.y = other.y;\r\n            return this;\r\n        };\r\n        Point.prototype.clone = function () {\r\n            return new Point(this.x, this.y);\r\n        };\r\n        Point.prototype.set = function (x, y) {\r\n            this.x = x;\r\n            this.y = y;\r\n            return this;\r\n        };\r\n        Point.prototype.equal = function (other) {\r\n            return other.x === this.x && other.y === this.y;\r\n        };\r\n        Point.prototype.add = function (other) {\r\n            this.x += other.x;\r\n            this.y += other.y;\r\n            return this;\r\n        };\r\n        Point.prototype.scale = function (scalar) {\r\n            this.x *= scalar;\r\n            this.y *= scalar;\r\n        };\r\n        Point.prototype.scaleAndAdd = function (other, scalar) {\r\n            this.x += other.x * scalar;\r\n            this.y += other.y * scalar;\r\n        };\r\n        Point.prototype.sub = function (other) {\r\n            this.x -= other.x;\r\n            this.y -= other.y;\r\n            return this;\r\n        };\r\n        Point.prototype.dot = function (other) {\r\n            return this.x * other.x + this.y * other.y;\r\n        };\r\n        Point.prototype.len = function () {\r\n            return Math.sqrt(this.x * this.x + this.y * this.y);\r\n        };\r\n        Point.prototype.lenSquare = function () {\r\n            return this.x * this.x + this.y * this.y;\r\n        };\r\n        Point.prototype.normalize = function () {\r\n            var len = this.len();\r\n            this.x /= len;\r\n            this.y /= len;\r\n            return this;\r\n        };\r\n        Point.prototype.distance = function (other) {\r\n            var dx = this.x - other.x;\r\n            var dy = this.y - other.y;\r\n            return Math.sqrt(dx * dx + dy * dy);\r\n        };\r\n        Point.prototype.distanceSquare = function (other) {\r\n            var dx = this.x - other.x;\r\n            var dy = this.y - other.y;\r\n            return dx * dx + dy * dy;\r\n        };\r\n        Point.prototype.negate = function () {\r\n            this.x = -this.x;\r\n            this.y = -this.y;\r\n            return this;\r\n        };\r\n        Point.prototype.transform = function (m) {\r\n            if (!m) {\r\n                return;\r\n            }\r\n            var x = this.x;\r\n            var y = this.y;\r\n            this.x = m[0] * x + m[2] * y + m[4];\r\n            this.y = m[1] * x + m[3] * y + m[5];\r\n            return this;\r\n        };\r\n        Point.prototype.toArray = function (out) {\r\n            out[0] = this.x;\r\n            out[1] = this.y;\r\n            return out;\r\n        };\r\n        Point.prototype.fromArray = function (input) {\r\n            this.x = input[0];\r\n            this.y = input[1];\r\n        };\r\n        Point.set = function (p, x, y) {\r\n            p.x = x;\r\n            p.y = y;\r\n        };\r\n        Point.copy = function (p, p2) {\r\n            p.x = p2.x;\r\n            p.y = p2.y;\r\n        };\r\n        Point.len = function (p) {\r\n            return Math.sqrt(p.x * p.x + p.y * p.y);\r\n        };\r\n        Point.lenSquare = function (p) {\r\n            return p.x * p.x + p.y * p.y;\r\n        };\r\n        Point.dot = function (p0, p1) {\r\n            return p0.x * p1.x + p0.y * p1.y;\r\n        };\r\n        Point.add = function (out, p0, p1) {\r\n            out.x = p0.x + p1.x;\r\n            out.y = p0.y + p1.y;\r\n        };\r\n        Point.sub = function (out, p0, p1) {\r\n            out.x = p0.x - p1.x;\r\n            out.y = p0.y - p1.y;\r\n        };\r\n        Point.scale = function (out, p0, scalar) {\r\n            out.x = p0.x * scalar;\r\n            out.y = p0.y * scalar;\r\n        };\r\n        Point.scaleAndAdd = function (out, p0, p1, scalar) {\r\n            out.x = p0.x + p1.x * scalar;\r\n            out.y = p0.y + p1.y * scalar;\r\n        };\r\n        Point.lerp = function (out, p0, p1, t) {\r\n            var onet = 1 - t;\r\n            out.x = onet * p0.x + t * p1.x;\r\n            out.y = onet * p0.y + t * p1.y;\r\n        };\r\n        return Point;\r\n    }());\n\n    var mathMin = Math.min;\r\n    var mathMax = Math.max;\r\n    var lt = new Point();\r\n    var rb = new Point();\r\n    var lb = new Point();\r\n    var rt = new Point();\r\n    var minTv = new Point();\r\n    var maxTv = new Point();\r\n    var BoundingRect = (function () {\r\n        function BoundingRect(x, y, width, height) {\r\n            if (width < 0) {\r\n                x = x + width;\r\n                width = -width;\r\n            }\r\n            if (height < 0) {\r\n                y = y + height;\r\n                height = -height;\r\n            }\r\n            this.x = x;\r\n            this.y = y;\r\n            this.width = width;\r\n            this.height = height;\r\n        }\r\n        BoundingRect.prototype.union = function (other) {\r\n            var x = mathMin(other.x, this.x);\r\n            var y = mathMin(other.y, this.y);\r\n            this.width = mathMax(other.x + other.width, this.x + this.width) - x;\r\n            this.height = mathMax(other.y + other.height, this.y + this.height) - y;\r\n            this.x = x;\r\n            this.y = y;\r\n        };\r\n        BoundingRect.prototype.applyTransform = function (m) {\r\n            BoundingRect.applyTransform(this, this, m);\r\n        };\r\n        BoundingRect.prototype.calculateTransform = function (b) {\r\n            var a = this;\r\n            var sx = b.width / a.width;\r\n            var sy = b.height / a.height;\r\n            var m = create$1();\r\n            translate(m, m, [-a.x, -a.y]);\r\n            scale$1(m, m, [sx, sy]);\r\n            translate(m, m, [b.x, b.y]);\r\n            return m;\r\n        };\r\n        BoundingRect.prototype.intersect = function (b, mtv) {\r\n            if (!b) {\r\n                return false;\r\n            }\r\n            if (!(b instanceof BoundingRect)) {\r\n                b = BoundingRect.create(b);\r\n            }\r\n            var a = this;\r\n            var ax0 = a.x;\r\n            var ax1 = a.x + a.width;\r\n            var ay0 = a.y;\r\n            var ay1 = a.y + a.height;\r\n            var bx0 = b.x;\r\n            var bx1 = b.x + b.width;\r\n            var by0 = b.y;\r\n            var by1 = b.y + b.height;\r\n            var overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\r\n            if (mtv) {\r\n                var dMin = Infinity;\r\n                var dMax = 0;\r\n                var d0 = Math.abs(ax1 - bx0);\r\n                var d1 = Math.abs(bx1 - ax0);\r\n                var d2 = Math.abs(ay1 - by0);\r\n                var d3 = Math.abs(by1 - ay0);\r\n                var dx = Math.min(d0, d1);\r\n                var dy = Math.min(d2, d3);\r\n                if (ax1 < bx0 || bx1 < ax0) {\r\n                    if (dx > dMax) {\r\n                        dMax = dx;\r\n                        if (d0 < d1) {\r\n                            Point.set(maxTv, -d0, 0);\r\n                        }\r\n                        else {\r\n                            Point.set(maxTv, d1, 0);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    if (dx < dMin) {\r\n                        dMin = dx;\r\n                        if (d0 < d1) {\r\n                            Point.set(minTv, d0, 0);\r\n                        }\r\n                        else {\r\n                            Point.set(minTv, -d1, 0);\r\n                        }\r\n                    }\r\n                }\r\n                if (ay1 < by0 || by1 < ay0) {\r\n                    if (dy > dMax) {\r\n                        dMax = dy;\r\n                        if (d2 < d3) {\r\n                            Point.set(maxTv, 0, -d2);\r\n                        }\r\n                        else {\r\n                            Point.set(maxTv, 0, d3);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    if (dx < dMin) {\r\n                        dMin = dx;\r\n                        if (d2 < d3) {\r\n                            Point.set(minTv, 0, d2);\r\n                        }\r\n                        else {\r\n                            Point.set(minTv, 0, -d3);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (mtv) {\r\n                Point.copy(mtv, overlap ? minTv : maxTv);\r\n            }\r\n            return overlap;\r\n        };\r\n        BoundingRect.prototype.contain = function (x, y) {\r\n            var rect = this;\r\n            return x >= rect.x\r\n                && x <= (rect.x + rect.width)\r\n                && y >= rect.y\r\n                && y <= (rect.y + rect.height);\r\n        };\r\n        BoundingRect.prototype.clone = function () {\r\n            return new BoundingRect(this.x, this.y, this.width, this.height);\r\n        };\r\n        BoundingRect.prototype.copy = function (other) {\r\n            BoundingRect.copy(this, other);\r\n        };\r\n        BoundingRect.prototype.plain = function () {\r\n            return {\r\n                x: this.x,\r\n                y: this.y,\r\n                width: this.width,\r\n                height: this.height\r\n            };\r\n        };\r\n        BoundingRect.create = function (rect) {\r\n            return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\r\n        };\r\n        BoundingRect.copy = function (target, source) {\r\n            target.x = source.x;\r\n            target.y = source.y;\r\n            target.width = source.width;\r\n            target.height = source.height;\r\n        };\r\n        BoundingRect.applyTransform = function (target, source, m) {\r\n            if (!m) {\r\n                if (target !== source) {\r\n                    BoundingRect.copy(target, source);\r\n                }\r\n                return;\r\n            }\r\n            if (m[1] < 1e-5 && m[1] > -1e-5 && m[2] < 1e-5 && m[2] > -1e-5) {\r\n                var sx = m[0];\r\n                var sy = m[3];\r\n                var tx = m[4];\r\n                var ty = m[5];\r\n                target.x = source.x * sx + tx;\r\n                target.y = source.y * sy + ty;\r\n                target.width = source.width * sx;\r\n                target.height = source.height * sy;\r\n                if (target.width < 0) {\r\n                    target.x += target.width;\r\n                    target.width = -target.width;\r\n                }\r\n                if (target.height < 0) {\r\n                    target.y += target.height;\r\n                    target.height = -target.height;\r\n                }\r\n                return;\r\n            }\r\n            lt.x = lb.x = source.x;\r\n            lt.y = rt.y = source.y;\r\n            rb.x = rt.x = source.x + source.width;\r\n            rb.y = lb.y = source.y + source.height;\r\n            lt.transform(m);\r\n            rt.transform(m);\r\n            rb.transform(m);\r\n            lb.transform(m);\r\n            target.x = mathMin(lt.x, rb.x, lb.x, rt.x);\r\n            target.y = mathMin(lt.y, rb.y, lb.y, rt.y);\r\n            var maxX = mathMax(lt.x, rb.x, lb.x, rt.x);\r\n            var maxY = mathMax(lt.y, rb.y, lb.y, rt.y);\r\n            target.width = maxX - target.x;\r\n            target.height = maxY - target.y;\r\n        };\r\n        return BoundingRect;\r\n    }());\n\n    var textWidthCache = {};\r\n    var DEFAULT_FONT = '12px sans-serif';\r\n    var _ctx;\r\n    var _cachedFont;\r\n    function defaultMeasureText(text, font) {\r\n        if (!_ctx) {\r\n            _ctx = createCanvas().getContext('2d');\r\n        }\r\n        if (_cachedFont !== font) {\r\n            _cachedFont = _ctx.font = font || DEFAULT_FONT;\r\n        }\r\n        return _ctx.measureText(text);\r\n    }\r\n    var methods$1 = {\r\n        measureText: defaultMeasureText\r\n    };\r\n    function getWidth(text, font) {\r\n        font = font || DEFAULT_FONT;\r\n        var cacheOfFont = textWidthCache[font];\r\n        if (!cacheOfFont) {\r\n            cacheOfFont = textWidthCache[font] = new LRU(500);\r\n        }\r\n        var width = cacheOfFont.get(text);\r\n        if (width == null) {\r\n            width = methods$1.measureText(text, font).width;\r\n            cacheOfFont.put(text, width);\r\n        }\r\n        return width;\r\n    }\r\n    function innerGetBoundingRect(text, font, textAlign, textBaseline) {\r\n        var width = getWidth(text, font);\r\n        var height = getLineHeight(font);\r\n        var x = adjustTextX(0, width, textAlign);\r\n        var y = adjustTextY(0, height, textBaseline);\r\n        var rect = new BoundingRect(x, y, width, height);\r\n        return rect;\r\n    }\r\n    function getBoundingRect(text, font, textAlign, textBaseline) {\r\n        var textLines = ((text || '') + '').split('\\n');\r\n        var len = textLines.length;\r\n        if (len === 1) {\r\n            return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\r\n        }\r\n        else {\r\n            var uniondRect = new BoundingRect(0, 0, 0, 0);\r\n            for (var i = 0; i < textLines.length; i++) {\r\n                var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\r\n                i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\r\n            }\r\n            return uniondRect;\r\n        }\r\n    }\r\n    function adjustTextX(x, width, textAlign) {\r\n        if (textAlign === 'right') {\r\n            x -= width;\r\n        }\r\n        else if (textAlign === 'center') {\r\n            x -= width / 2;\r\n        }\r\n        return x;\r\n    }\r\n    function adjustTextY(y, height, verticalAlign) {\r\n        if (verticalAlign === 'middle') {\r\n            y -= height / 2;\r\n        }\r\n        else if (verticalAlign === 'bottom') {\r\n            y -= height;\r\n        }\r\n        return y;\r\n    }\r\n    function getLineHeight(font) {\r\n        return getWidth('', font);\r\n    }\r\n    function parsePercent(value, maxValue) {\r\n        if (typeof value === 'string') {\r\n            if (value.lastIndexOf('%') >= 0) {\r\n                return parseFloat(value) / 100 * maxValue;\r\n            }\r\n            return parseFloat(value);\r\n        }\r\n        return value;\r\n    }\r\n    function calculateTextPosition(out, opts, rect) {\r\n        var textPosition = opts.position || 'inside';\r\n        var distance = opts.distance != null ? opts.distance : 5;\r\n        var height = rect.height;\r\n        var width = rect.width;\r\n        var halfHeight = height / 2;\r\n        var x = rect.x;\r\n        var y = rect.y;\r\n        var textAlign = 'left';\r\n        var textVerticalAlign = 'top';\r\n        if (textPosition instanceof Array) {\r\n            x += parsePercent(textPosition[0], rect.width);\r\n            y += parsePercent(textPosition[1], rect.height);\r\n            textAlign = null;\r\n            textVerticalAlign = null;\r\n        }\r\n        else {\r\n            switch (textPosition) {\r\n                case 'left':\r\n                    x -= distance;\r\n                    y += halfHeight;\r\n                    textAlign = 'right';\r\n                    textVerticalAlign = 'middle';\r\n                    break;\r\n                case 'right':\r\n                    x += distance + width;\r\n                    y += halfHeight;\r\n                    textVerticalAlign = 'middle';\r\n                    break;\r\n                case 'top':\r\n                    x += width / 2;\r\n                    y -= distance;\r\n                    textAlign = 'center';\r\n                    textVerticalAlign = 'bottom';\r\n                    break;\r\n                case 'bottom':\r\n                    x += width / 2;\r\n                    y += height + distance;\r\n                    textAlign = 'center';\r\n                    break;\r\n                case 'inside':\r\n                    x += width / 2;\r\n                    y += halfHeight;\r\n                    textAlign = 'center';\r\n                    textVerticalAlign = 'middle';\r\n                    break;\r\n                case 'insideLeft':\r\n                    x += distance;\r\n                    y += halfHeight;\r\n                    textVerticalAlign = 'middle';\r\n                    break;\r\n                case 'insideRight':\r\n                    x += width - distance;\r\n                    y += halfHeight;\r\n                    textAlign = 'right';\r\n                    textVerticalAlign = 'middle';\r\n                    break;\r\n                case 'insideTop':\r\n                    x += width / 2;\r\n                    y += distance;\r\n                    textAlign = 'center';\r\n                    break;\r\n                case 'insideBottom':\r\n                    x += width / 2;\r\n                    y += height - distance;\r\n                    textAlign = 'center';\r\n                    textVerticalAlign = 'bottom';\r\n                    break;\r\n                case 'insideTopLeft':\r\n                    x += distance;\r\n                    y += distance;\r\n                    break;\r\n                case 'insideTopRight':\r\n                    x += width - distance;\r\n                    y += distance;\r\n                    textAlign = 'right';\r\n                    break;\r\n                case 'insideBottomLeft':\r\n                    x += distance;\r\n                    y += height - distance;\r\n                    textVerticalAlign = 'bottom';\r\n                    break;\r\n                case 'insideBottomRight':\r\n                    x += width - distance;\r\n                    y += height - distance;\r\n                    textAlign = 'right';\r\n                    textVerticalAlign = 'bottom';\r\n                    break;\r\n            }\r\n        }\r\n        out = out || {};\r\n        out.x = x;\r\n        out.y = y;\r\n        out.align = textAlign;\r\n        out.verticalAlign = textVerticalAlign;\r\n        return out;\r\n    }\n\n    var dpr = 1;\r\n    if (typeof window !== 'undefined') {\r\n        dpr = Math.max(window.devicePixelRatio\r\n            || (window.screen.deviceXDPI / window.screen.logicalXDPI)\r\n            || 1, 1);\r\n    }\r\n    var devicePixelRatio = dpr;\r\n    var DARK_MODE_THRESHOLD = 0.4;\r\n    var DARK_LABEL_COLOR = '#333';\r\n    var LIGHT_LABEL_COLOR = '#ccc';\r\n    var LIGHTER_LABEL_COLOR = '#eee';\n\n    var PRESERVED_NORMAL_STATE = '__zr_normal__';\r\n    var PRIMARY_STATES_KEYS = ['x', 'y', 'scaleX', 'scaleY', 'originX', 'originY', 'rotation', 'ignore'];\r\n    var DEFAULT_ANIMATABLE_MAP = {\r\n        x: true,\r\n        y: true,\r\n        scaleX: true,\r\n        scaleY: true,\r\n        originX: true,\r\n        originY: true,\r\n        rotation: true,\r\n        ignore: false\r\n    };\r\n    var tmpTextPosCalcRes = {};\r\n    var tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\r\n    var Element = (function () {\r\n        function Element(props) {\r\n            this.id = guid();\r\n            this.animators = [];\r\n            this.currentStates = [];\r\n            this.states = {};\r\n            this._init(props);\r\n        }\r\n        Element.prototype._init = function (props) {\r\n            this.attr(props);\r\n        };\r\n        Element.prototype.drift = function (dx, dy, e) {\r\n            switch (this.draggable) {\r\n                case 'horizontal':\r\n                    dy = 0;\r\n                    break;\r\n                case 'vertical':\r\n                    dx = 0;\r\n                    break;\r\n            }\r\n            var m = this.transform;\r\n            if (!m) {\r\n                m = this.transform = [1, 0, 0, 1, 0, 0];\r\n            }\r\n            m[4] += dx;\r\n            m[5] += dy;\r\n            this.decomposeTransform();\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.beforeUpdate = function () { };\r\n        Element.prototype.afterUpdate = function () { };\r\n        Element.prototype.update = function () {\r\n            this.updateTransform();\r\n            this.updateInnerText();\r\n        };\r\n        Element.prototype.updateInnerText = function (forceUpdate) {\r\n            var textEl = this._textContent;\r\n            if (textEl && (!textEl.ignore || forceUpdate)) {\r\n                if (!this.textConfig) {\r\n                    this.textConfig = {};\r\n                }\r\n                var textConfig = this.textConfig;\r\n                var isLocal = textConfig.local;\r\n                var attachedTransform = textEl.attachedTransform;\r\n                var textAlign = void 0;\r\n                var textVerticalAlign = void 0;\r\n                var textStyleChanged = false;\r\n                if (isLocal) {\r\n                    attachedTransform.parent = this;\r\n                }\r\n                else {\r\n                    attachedTransform.parent = null;\r\n                }\r\n                var innerOrigin = false;\r\n                attachedTransform.x = textEl.x;\r\n                attachedTransform.y = textEl.y;\r\n                attachedTransform.originX = textEl.originX;\r\n                attachedTransform.originY = textEl.originY;\r\n                attachedTransform.rotation = textEl.rotation;\r\n                attachedTransform.scaleX = textEl.scaleX;\r\n                attachedTransform.scaleY = textEl.scaleY;\r\n                if (textConfig.position != null) {\r\n                    var layoutRect = tmpBoundingRect;\r\n                    if (textConfig.layoutRect) {\r\n                        layoutRect.copy(textConfig.layoutRect);\r\n                    }\r\n                    else {\r\n                        layoutRect.copy(this.getBoundingRect());\r\n                    }\r\n                    if (!isLocal) {\r\n                        layoutRect.applyTransform(this.transform);\r\n                    }\r\n                    if (this.calculateTextPosition) {\r\n                        this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\r\n                    }\r\n                    else {\r\n                        calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\r\n                    }\r\n                    attachedTransform.x = tmpTextPosCalcRes.x;\r\n                    attachedTransform.y = tmpTextPosCalcRes.y;\r\n                    textAlign = tmpTextPosCalcRes.align;\r\n                    textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\r\n                    var textOrigin = textConfig.origin;\r\n                    if (textOrigin && textConfig.rotation != null) {\r\n                        var relOriginX = void 0;\r\n                        var relOriginY = void 0;\r\n                        if (textOrigin === 'center') {\r\n                            relOriginX = layoutRect.width * 0.5;\r\n                            relOriginY = layoutRect.height * 0.5;\r\n                        }\r\n                        else {\r\n                            relOriginX = parsePercent(textOrigin[0], layoutRect.width);\r\n                            relOriginY = parsePercent(textOrigin[1], layoutRect.height);\r\n                        }\r\n                        innerOrigin = true;\r\n                        attachedTransform.originX = -attachedTransform.x + relOriginX + (isLocal ? 0 : layoutRect.x);\r\n                        attachedTransform.originY = -attachedTransform.y + relOriginY + (isLocal ? 0 : layoutRect.y);\r\n                    }\r\n                }\r\n                if (textConfig.rotation != null) {\r\n                    attachedTransform.rotation = textConfig.rotation;\r\n                }\r\n                var textOffset = textConfig.offset;\r\n                if (textOffset) {\r\n                    attachedTransform.x += textOffset[0];\r\n                    attachedTransform.y += textOffset[1];\r\n                    if (!innerOrigin) {\r\n                        attachedTransform.originX = -textOffset[0];\r\n                        attachedTransform.originY = -textOffset[1];\r\n                    }\r\n                }\r\n                var isInside = textConfig.inside == null\r\n                    ? (typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0)\r\n                    : textConfig.inside;\r\n                var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\r\n                var textFill = void 0;\r\n                var textStroke = void 0;\r\n                var autoStroke = void 0;\r\n                if (isInside && this.canBeInsideText()) {\r\n                    textFill = textConfig.insideFill;\r\n                    textStroke = textConfig.insideStroke;\r\n                    if (textFill == null || textFill === 'auto') {\r\n                        textFill = this.getInsideTextFill();\r\n                    }\r\n                    if (textStroke == null || textStroke === 'auto') {\r\n                        textStroke = this.getInsideTextStroke(textFill);\r\n                        autoStroke = true;\r\n                    }\r\n                }\r\n                else {\r\n                    textFill = textConfig.outsideFill;\r\n                    textStroke = textConfig.outsideStroke;\r\n                    if (textFill == null || textFill === 'auto') {\r\n                        textFill = this.getOutsideFill();\r\n                    }\r\n                    if (textStroke == null || textStroke === 'auto') {\r\n                        textStroke = this.getOutsideStroke(textFill);\r\n                        autoStroke = true;\r\n                    }\r\n                }\r\n                textFill = textFill || '#000';\r\n                if (textFill !== innerTextDefaultStyle.fill\r\n                    || textStroke !== innerTextDefaultStyle.stroke\r\n                    || autoStroke !== innerTextDefaultStyle.autoStroke\r\n                    || textAlign !== innerTextDefaultStyle.align\r\n                    || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\r\n                    textStyleChanged = true;\r\n                    innerTextDefaultStyle.fill = textFill;\r\n                    innerTextDefaultStyle.stroke = textStroke;\r\n                    innerTextDefaultStyle.autoStroke = autoStroke;\r\n                    innerTextDefaultStyle.align = textAlign;\r\n                    innerTextDefaultStyle.verticalAlign = textVerticalAlign;\r\n                    textEl.setDefaultTextStyle(innerTextDefaultStyle);\r\n                }\r\n                if (textStyleChanged) {\r\n                    textEl.dirtyStyle();\r\n                }\r\n                textEl.markRedraw();\r\n            }\r\n        };\r\n        Element.prototype.canBeInsideText = function () {\r\n            return true;\r\n        };\r\n        Element.prototype.getInsideTextFill = function () {\r\n            return '#fff';\r\n        };\r\n        Element.prototype.getInsideTextStroke = function (textFill) {\r\n            return '#000';\r\n        };\r\n        Element.prototype.getOutsideFill = function () {\r\n            return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\r\n        };\r\n        Element.prototype.getOutsideStroke = function (textFill) {\r\n            var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\r\n            var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\r\n            if (!colorArr) {\r\n                colorArr = [255, 255, 255, 1];\r\n            }\r\n            var alpha = colorArr[3];\r\n            for (var i = 0; i < 3; i++) {\r\n                colorArr[i] = colorArr[i] * alpha + 255 * (1 - alpha);\r\n            }\r\n            colorArr[3] = 1;\r\n            return stringify(colorArr, 'rgba');\r\n        };\r\n        Element.prototype.traverse = function (cb, context) { };\r\n        Element.prototype.attrKV = function (key, value) {\r\n            if (key === 'textConfig') {\r\n                this.setTextConfig(value);\r\n            }\r\n            else if (key === 'textContent') {\r\n                this.setTextContent(value);\r\n            }\r\n            else if (key === 'clipPath') {\r\n                this.setClipPath(value);\r\n            }\r\n            else if (key === 'extra') {\r\n                this.extra = this.extra || {};\r\n                extend(this.extra, value);\r\n            }\r\n            else {\r\n                this[key] = value;\r\n            }\r\n        };\r\n        Element.prototype.hide = function () {\r\n            this.ignore = true;\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.show = function () {\r\n            this.ignore = false;\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.attr = function (keyOrObj, value) {\r\n            if (typeof keyOrObj === 'string') {\r\n                this.attrKV(keyOrObj, value);\r\n            }\r\n            else if (isObject(keyOrObj)) {\r\n                var obj = keyOrObj;\r\n                var keysArr = keys(obj);\r\n                for (var i = 0; i < keysArr.length; i++) {\r\n                    var key = keysArr[i];\r\n                    this.attrKV(key, keyOrObj[key]);\r\n                }\r\n            }\r\n            this.markRedraw();\r\n            return this;\r\n        };\r\n        Element.prototype.saveCurrentToNormalState = function (toState) {\r\n            this._innerSaveToNormal(toState);\r\n            var normalState = this._normalState;\r\n            for (var i = 0; i < this.animators.length; i++) {\r\n                var animator = this.animators[i];\r\n                var fromStateTransition = animator.__fromStateTransition;\r\n                if (fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\r\n                    continue;\r\n                }\r\n                var targetName = animator.targetName;\r\n                var target = targetName\r\n                    ? normalState[targetName] : normalState;\r\n                animator.saveFinalToTarget(target);\r\n            }\r\n        };\r\n        Element.prototype._innerSaveToNormal = function (toState) {\r\n            var normalState = this._normalState;\r\n            if (!normalState) {\r\n                normalState = this._normalState = {};\r\n            }\r\n            if (toState.textConfig && !normalState.textConfig) {\r\n                normalState.textConfig = this.textConfig;\r\n            }\r\n            this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\r\n        };\r\n        Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\r\n            for (var i = 0; i < primaryKeys.length; i++) {\r\n                var key = primaryKeys[i];\r\n                if (toState[key] != null && !(key in normalState)) {\r\n                    normalState[key] = this[key];\r\n                }\r\n            }\r\n        };\r\n        Element.prototype.hasState = function () {\r\n            return this.currentStates.length > 0;\r\n        };\r\n        Element.prototype.getState = function (name) {\r\n            return this.states[name];\r\n        };\r\n        Element.prototype.ensureState = function (name) {\r\n            var states = this.states;\r\n            if (!states[name]) {\r\n                states[name] = {};\r\n            }\r\n            return states[name];\r\n        };\r\n        Element.prototype.clearStates = function () {\r\n            this.useState(PRESERVED_NORMAL_STATE, false);\r\n        };\r\n        Element.prototype.useState = function (stateName, keepCurrentStates) {\r\n            var toNormalState = stateName === PRESERVED_NORMAL_STATE;\r\n            var hasStates = this.hasState();\r\n            if (!hasStates && toNormalState) {\r\n                return;\r\n            }\r\n            var currentStates = this.currentStates;\r\n            var animationCfg = this.stateTransition;\r\n            if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\r\n                return;\r\n            }\r\n            var state;\r\n            if (this.stateProxy && !toNormalState) {\r\n                state = this.stateProxy(stateName);\r\n            }\r\n            if (!state) {\r\n                state = (this.states && this.states[stateName]);\r\n            }\r\n            if (!state && !toNormalState) {\r\n                logError(\"State \" + stateName + \" not exists.\");\r\n                return;\r\n            }\r\n            if (!toNormalState) {\r\n                this.saveCurrentToNormalState(state);\r\n            }\r\n            var useHoverLayer = !!(state && state.hoverLayer);\r\n            if (useHoverLayer) {\r\n                this._toggleHoverLayerFlag(true);\r\n            }\r\n            this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\r\n            if (this._textContent) {\r\n                this._textContent.useState(stateName, keepCurrentStates);\r\n            }\r\n            if (this._textGuide) {\r\n                this._textGuide.useState(stateName, keepCurrentStates);\r\n            }\r\n            if (toNormalState) {\r\n                this.currentStates = [];\r\n                this._normalState = {};\r\n            }\r\n            else {\r\n                if (!keepCurrentStates) {\r\n                    this.currentStates = [stateName];\r\n                }\r\n                else {\r\n                    this.currentStates.push(stateName);\r\n                }\r\n            }\r\n            this._updateAnimationTargets();\r\n            this.markRedraw();\r\n            if (!useHoverLayer && this.__inHover) {\r\n                this._toggleHoverLayerFlag(false);\r\n                this.__dirty &= ~Element.REDARAW_BIT;\r\n            }\r\n            return state;\r\n        };\r\n        Element.prototype.useStates = function (states) {\r\n            if (!states.length) {\r\n                this.clearStates();\r\n            }\r\n            else {\r\n                var stateObjects = [];\r\n                var currentStates = this.currentStates;\r\n                var len = states.length;\r\n                var notChange = len === currentStates.length;\r\n                if (notChange) {\r\n                    for (var i = 0; i < len; i++) {\r\n                        if (states[i] !== currentStates[i]) {\r\n                            notChange = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (notChange) {\r\n                    return;\r\n                }\r\n                for (var i = 0; i < len; i++) {\r\n                    var stateName = states[i];\r\n                    var stateObj = void 0;\r\n                    if (this.stateProxy) {\r\n                        stateObj = this.stateProxy(stateName, states);\r\n                    }\r\n                    if (!stateObj) {\r\n                        stateObj = this.states[stateName];\r\n                    }\r\n                    if (stateObj) {\r\n                        stateObjects.push(stateObj);\r\n                    }\r\n                }\r\n                var useHoverLayer = !!(stateObjects[len - 1] && stateObjects[len - 1].hoverLayer);\r\n                if (useHoverLayer) {\r\n                    this._toggleHoverLayerFlag(true);\r\n                }\r\n                var mergedState = this._mergeStates(stateObjects);\r\n                var animationCfg = this.stateTransition;\r\n                this.saveCurrentToNormalState(mergedState);\r\n                this._applyStateObj(states.join(','), mergedState, this._normalState, false, !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\r\n                if (this._textContent) {\r\n                    this._textContent.useStates(states);\r\n                }\r\n                if (this._textGuide) {\r\n                    this._textGuide.useStates(states);\r\n                }\r\n                this._updateAnimationTargets();\r\n                this.currentStates = states.slice();\r\n                this.markRedraw();\r\n                if (!useHoverLayer) {\r\n                    this._toggleHoverLayerFlag(false);\r\n                    this.__dirty &= ~Element.REDARAW_BIT;\r\n                }\r\n            }\r\n        };\r\n        Element.prototype._updateAnimationTargets = function () {\r\n            for (var i = 0; i < this.animators.length; i++) {\r\n                var animator = this.animators[i];\r\n                if (animator.targetName) {\r\n                    animator.changeTarget(this[animator.targetName]);\r\n                }\r\n            }\r\n        };\r\n        Element.prototype.removeState = function (state) {\r\n            var idx = indexOf(this.currentStates, state);\r\n            if (idx >= 0) {\r\n                var currentStates = this.currentStates.slice();\r\n                currentStates.splice(idx, 1);\r\n                this.useStates(currentStates);\r\n            }\r\n        };\r\n        Element.prototype.replaceState = function (oldState, newState, forceAdd) {\r\n            var currentStates = this.currentStates.slice();\r\n            var idx = indexOf(currentStates, oldState);\r\n            var newStateExists = indexOf(currentStates, newState) >= 0;\r\n            if (idx >= 0) {\r\n                if (!newStateExists) {\r\n                    currentStates[idx] = newState;\r\n                }\r\n                else {\r\n                    currentStates.splice(idx, 1);\r\n                }\r\n            }\r\n            else if (forceAdd && !newStateExists) {\r\n                currentStates.push(newState);\r\n            }\r\n            this.useStates(currentStates);\r\n        };\r\n        Element.prototype.toggleState = function (state, enable) {\r\n            if (enable) {\r\n                this.useState(state, true);\r\n            }\r\n            else {\r\n                this.removeState(state);\r\n            }\r\n        };\r\n        Element.prototype._mergeStates = function (states) {\r\n            var mergedState = {};\r\n            var mergedTextConfig;\r\n            for (var i = 0; i < states.length; i++) {\r\n                var state = states[i];\r\n                extend(mergedState, state);\r\n                if (state.textConfig) {\r\n                    mergedTextConfig = mergedTextConfig || {};\r\n                    extend(mergedTextConfig, state.textConfig);\r\n                }\r\n            }\r\n            if (mergedTextConfig) {\r\n                mergedState.textConfig = mergedTextConfig;\r\n            }\r\n            return mergedState;\r\n        };\r\n        Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\r\n            var needsRestoreToNormal = !(state && keepCurrentStates);\r\n            if (state && state.textConfig) {\r\n                this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\r\n                extend(this.textConfig, state.textConfig);\r\n            }\r\n            else if (needsRestoreToNormal) {\r\n                if (normalState.textConfig) {\r\n                    this.textConfig = normalState.textConfig;\r\n                }\r\n            }\r\n            var transitionTarget = {};\r\n            var hasTransition = false;\r\n            for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\r\n                var key = PRIMARY_STATES_KEYS[i];\r\n                var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\r\n                if (state && state[key] != null) {\r\n                    if (propNeedsTransition) {\r\n                        hasTransition = true;\r\n                        transitionTarget[key] = state[key];\r\n                    }\r\n                    else {\r\n                        this[key] = state[key];\r\n                    }\r\n                }\r\n                else if (needsRestoreToNormal) {\r\n                    if (normalState[key] != null) {\r\n                        if (propNeedsTransition) {\r\n                            hasTransition = true;\r\n                            transitionTarget[key] = normalState[key];\r\n                        }\r\n                        else {\r\n                            this[key] = normalState[key];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (!transition) {\r\n                for (var i = 0; i < this.animators.length; i++) {\r\n                    var animator = this.animators[i];\r\n                    var targetName = animator.targetName;\r\n                    animator.__changeFinalValue(targetName\r\n                        ? (state || normalState)[targetName]\r\n                        : (state || normalState));\r\n                }\r\n            }\r\n            if (hasTransition) {\r\n                this._transitionState(stateName, transitionTarget, animationCfg);\r\n            }\r\n        };\r\n        Element.prototype._attachComponent = function (componentEl) {\r\n            if (componentEl.__zr && !componentEl.__hostTarget) {\r\n                throw new Error('Text element has been added to zrender.');\r\n            }\r\n            if (componentEl === this) {\r\n                throw new Error('Recursive component attachment.');\r\n            }\r\n            var zr = this.__zr;\r\n            if (zr) {\r\n                componentEl.addSelfToZr(zr);\r\n            }\r\n            componentEl.__zr = zr;\r\n            componentEl.__hostTarget = this;\r\n        };\r\n        Element.prototype._detachComponent = function (componentEl) {\r\n            if (componentEl.__zr) {\r\n                componentEl.removeSelfFromZr(componentEl.__zr);\r\n            }\r\n            componentEl.__zr = null;\r\n            componentEl.__hostTarget = null;\r\n        };\r\n        Element.prototype.getClipPath = function () {\r\n            return this._clipPath;\r\n        };\r\n        Element.prototype.setClipPath = function (clipPath) {\r\n            if (this._clipPath && this._clipPath !== clipPath) {\r\n                this.removeClipPath();\r\n            }\r\n            this._attachComponent(clipPath);\r\n            this._clipPath = clipPath;\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.removeClipPath = function () {\r\n            var clipPath = this._clipPath;\r\n            if (clipPath) {\r\n                this._detachComponent(clipPath);\r\n                this._clipPath = null;\r\n                this.markRedraw();\r\n            }\r\n        };\r\n        Element.prototype.getTextContent = function () {\r\n            return this._textContent;\r\n        };\r\n        Element.prototype.setTextContent = function (textEl) {\r\n            var previousTextContent = this._textContent;\r\n            if (previousTextContent === textEl) {\r\n                return;\r\n            }\r\n            if (previousTextContent && previousTextContent !== textEl) {\r\n                this.removeTextContent();\r\n            }\r\n            if (textEl.__zr && !textEl.__hostTarget) {\r\n                throw new Error('Text element has been added to zrender.');\r\n            }\r\n            textEl.attachedTransform = new Transformable();\r\n            this._attachComponent(textEl);\r\n            this._textContent = textEl;\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.setTextConfig = function (cfg) {\r\n            if (!this.textConfig) {\r\n                this.textConfig = {};\r\n            }\r\n            extend(this.textConfig, cfg);\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.removeTextContent = function () {\r\n            var textEl = this._textContent;\r\n            if (textEl) {\r\n                textEl.attachedTransform = null;\r\n                this._detachComponent(textEl);\r\n                this._textContent = null;\r\n                this._innerTextDefaultStyle = null;\r\n                this.markRedraw();\r\n            }\r\n        };\r\n        Element.prototype.getTextGuideLine = function () {\r\n            return this._textGuide;\r\n        };\r\n        Element.prototype.setTextGuideLine = function (guideLine) {\r\n            if (this._textGuide && this._textGuide !== guideLine) {\r\n                this.removeTextGuideLine();\r\n            }\r\n            this._attachComponent(guideLine);\r\n            this._textGuide = guideLine;\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.removeTextGuideLine = function () {\r\n            var textGuide = this._textGuide;\r\n            if (textGuide) {\r\n                this._detachComponent(textGuide);\r\n                this._textGuide = null;\r\n                this.markRedraw();\r\n            }\r\n        };\r\n        Element.prototype.markRedraw = function () {\r\n            this.__dirty |= Element.REDARAW_BIT;\r\n            var zr = this.__zr;\r\n            if (zr) {\r\n                if (this.__inHover) {\r\n                    zr.refreshHover();\r\n                }\r\n                else {\r\n                    zr.refresh();\r\n                }\r\n            }\r\n            if (this.__hostTarget) {\r\n                this.__hostTarget.markRedraw();\r\n            }\r\n        };\r\n        Element.prototype.dirty = function () {\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype._toggleHoverLayerFlag = function (inHover) {\r\n            this.__inHover = inHover;\r\n            var textContent = this._textContent;\r\n            var textGuide = this._textGuide;\r\n            if (textContent) {\r\n                textContent.__inHover = inHover;\r\n            }\r\n            if (textGuide) {\r\n                textGuide.__inHover = inHover;\r\n            }\r\n        };\r\n        Element.prototype.addSelfToZr = function (zr) {\r\n            this.__zr = zr;\r\n            var animators = this.animators;\r\n            if (animators) {\r\n                for (var i = 0; i < animators.length; i++) {\r\n                    zr.animation.addAnimator(animators[i]);\r\n                }\r\n            }\r\n            if (this._clipPath) {\r\n                this._clipPath.addSelfToZr(zr);\r\n            }\r\n            if (this._textContent) {\r\n                this._textContent.addSelfToZr(zr);\r\n            }\r\n            if (this._textGuide) {\r\n                this._textGuide.addSelfToZr(zr);\r\n            }\r\n        };\r\n        Element.prototype.removeSelfFromZr = function (zr) {\r\n            this.__zr = null;\r\n            var animators = this.animators;\r\n            if (animators) {\r\n                for (var i = 0; i < animators.length; i++) {\r\n                    zr.animation.removeAnimator(animators[i]);\r\n                }\r\n            }\r\n            if (this._clipPath) {\r\n                this._clipPath.removeSelfFromZr(zr);\r\n            }\r\n            if (this._textContent) {\r\n                this._textContent.removeSelfFromZr(zr);\r\n            }\r\n            if (this._textGuide) {\r\n                this._textGuide.removeSelfFromZr(zr);\r\n            }\r\n        };\r\n        Element.prototype.animate = function (key, loop) {\r\n            var target = key ? this[key] : this;\r\n            if (!target) {\r\n                logError('Property \"'\r\n                    + key\r\n                    + '\" is not existed in element '\r\n                    + this.id);\r\n                return;\r\n            }\r\n            var animator = new Animator(target, loop);\r\n            this.addAnimator(animator, key);\r\n            return animator;\r\n        };\r\n        Element.prototype.addAnimator = function (animator, key) {\r\n            var zr = this.__zr;\r\n            var el = this;\r\n            animator.during(function () {\r\n                el.updateDuringAnimation(key);\r\n            }).done(function () {\r\n                var animators = el.animators;\r\n                var idx = indexOf(animators, animator);\r\n                if (idx >= 0) {\r\n                    animators.splice(idx, 1);\r\n                }\r\n            });\r\n            this.animators.push(animator);\r\n            if (zr) {\r\n                zr.animation.addAnimator(animator);\r\n            }\r\n            zr && zr.wakeUp();\r\n        };\r\n        Element.prototype.updateDuringAnimation = function (key) {\r\n            this.markRedraw();\r\n        };\r\n        Element.prototype.stopAnimation = function (scope, forwardToLast) {\r\n            var animators = this.animators;\r\n            var len = animators.length;\r\n            var leftAnimators = [];\r\n            for (var i = 0; i < len; i++) {\r\n                var animator = animators[i];\r\n                if (!scope || scope === animator.scope) {\r\n                    animator.stop(forwardToLast);\r\n                }\r\n                else {\r\n                    leftAnimators.push(animator);\r\n                }\r\n            }\r\n            this.animators = leftAnimators;\r\n            return this;\r\n        };\r\n        Element.prototype.animateTo = function (target, cfg, animationProps) {\r\n            animateTo(this, target, cfg, animationProps);\r\n        };\r\n        Element.prototype.animateFrom = function (target, cfg, animationProps) {\r\n            animateTo(this, target, cfg, animationProps, true);\r\n        };\r\n        Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\r\n            var animators = animateTo(this, target, cfg, animationProps);\r\n            for (var i = 0; i < animators.length; i++) {\r\n                animators[i].__fromStateTransition = stateName;\r\n            }\r\n        };\r\n        Element.prototype.getBoundingRect = function () {\r\n            return null;\r\n        };\r\n        Element.REDARAW_BIT = 1;\r\n        Element.initDefaultProps = (function () {\r\n            var elProto = Element.prototype;\r\n            elProto.type = 'element';\r\n            elProto.name = '';\r\n            elProto.ignore = false;\r\n            elProto.silent = false;\r\n            elProto.isGroup = false;\r\n            elProto.draggable = false;\r\n            elProto.dragging = false;\r\n            elProto.__inHover = false;\r\n            elProto.__dirty = Element.REDARAW_BIT;\r\n            var logs = {};\r\n            function logDeprecatedError(key, xKey, yKey) {\r\n                if (!logs[key + xKey + yKey]) {\r\n                    console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\r\n                    logs[key + xKey + yKey] = true;\r\n                }\r\n            }\r\n            function createLegacyProperty(key, privateKey, xKey, yKey) {\r\n                Object.defineProperty(elProto, key, {\r\n                    get: function () {\r\n                        logDeprecatedError(key, xKey, yKey);\r\n                        if (!this[privateKey]) {\r\n                            var pos = this[privateKey] = [];\r\n                            enhanceArray(this, pos);\r\n                        }\r\n                        return this[privateKey];\r\n                    },\r\n                    set: function (pos) {\r\n                        logDeprecatedError(key, xKey, yKey);\r\n                        this[xKey] = pos[0];\r\n                        this[yKey] = pos[1];\r\n                        this[privateKey] = pos;\r\n                        enhanceArray(this, pos);\r\n                    }\r\n                });\r\n                function enhanceArray(self, pos) {\r\n                    Object.defineProperty(pos, 0, {\r\n                        get: function () {\r\n                            return self[xKey];\r\n                        },\r\n                        set: function (val) {\r\n                            self[xKey] = val;\r\n                        }\r\n                    });\r\n                    Object.defineProperty(pos, 1, {\r\n                        get: function () {\r\n                            return self[yKey];\r\n                        },\r\n                        set: function (val) {\r\n                            self[yKey] = val;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (Object.defineProperty && (!env.browser.ie || env.browser.version > 8)) {\r\n                createLegacyProperty('position', '_legacyPos', 'x', 'y');\r\n                createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\r\n                createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\r\n            }\r\n        })();\r\n        return Element;\r\n    }());\r\n    mixin(Element, Eventful);\r\n    mixin(Element, Transformable);\r\n    function animateTo(animatable, target, cfg, animationProps, reverse) {\r\n        cfg = cfg || {};\r\n        var animators = [];\r\n        animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\r\n        var count = animators.length;\r\n        function done() {\r\n            count--;\r\n            if (!count) {\r\n                cfg.done && cfg.done();\r\n            }\r\n        }\r\n        if (!count) {\r\n            cfg.done && cfg.done();\r\n        }\r\n        if (animators.length > 0 && typeof cfg.during === 'function') {\r\n            animators[0].during(function (target, percent) {\r\n                cfg.during(percent);\r\n            });\r\n        }\r\n        for (var i = 0; i < animators.length; i++) {\r\n            animators[i]\r\n                .done(done)\r\n                .start(cfg.easing, cfg.force);\r\n        }\r\n        return animators;\r\n    }\r\n    function copyArrShallow(source, target, len) {\r\n        for (var i = 0; i < len; i++) {\r\n            source[i] = target[i];\r\n        }\r\n    }\r\n    function is2DArray(value) {\r\n        return isArrayLike(value[0]);\r\n    }\r\n    function copyValue(target, source, key) {\r\n        if (isArrayLike(source[key])) {\r\n            if (!isArrayLike(target[key])) {\r\n                target[key] = [];\r\n            }\r\n            var sourceArr = source[key];\r\n            var targetArr = target[key];\r\n            var len0 = sourceArr.length;\r\n            if (is2DArray(sourceArr)) {\r\n                var len1 = sourceArr[0].length;\r\n                for (var i = 0; i < len0; i++) {\r\n                    if (!targetArr[i]) {\r\n                        targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\r\n                    }\r\n                    else {\r\n                        copyArrShallow(targetArr[i], sourceArr[i], len1);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                copyArrShallow(targetArr, sourceArr, len0);\r\n            }\r\n            targetArr.length = sourceArr.length;\r\n        }\r\n        else {\r\n            target[key] = source[key];\r\n        }\r\n    }\r\n    function animateToShallow(animatable, topKey, source, target, cfg, animationProps, animators, reverse) {\r\n        var animatableKeys = [];\r\n        var changedKeys = [];\r\n        var targetKeys = keys(target);\r\n        var duration = cfg.duration;\r\n        var delay = cfg.delay;\r\n        var additive = cfg.additive;\r\n        var setToFinal = cfg.setToFinal;\r\n        var animateAll = !isObject(animationProps);\r\n        for (var k = 0; k < targetKeys.length; k++) {\r\n            var innerKey = targetKeys[k];\r\n            if (source[innerKey] != null\r\n                && target[innerKey] != null\r\n                && (animateAll || animationProps[innerKey])) {\r\n                if (isObject(target[innerKey]) && !isArrayLike(target[innerKey])) {\r\n                    if (topKey) {\r\n                        if (!reverse) {\r\n                            source[innerKey] = target[innerKey];\r\n                            animatable.updateDuringAnimation(topKey);\r\n                        }\r\n                        continue;\r\n                    }\r\n                    animateToShallow(animatable, innerKey, source[innerKey], target[innerKey], cfg, animationProps && animationProps[innerKey], animators, reverse);\r\n                }\r\n                else {\r\n                    animatableKeys.push(innerKey);\r\n                    changedKeys.push(innerKey);\r\n                }\r\n            }\r\n            else if (!reverse) {\r\n                source[innerKey] = target[innerKey];\r\n                animatable.updateDuringAnimation(topKey);\r\n                changedKeys.push(innerKey);\r\n            }\r\n        }\r\n        var keyLen = animatableKeys.length;\r\n        if (keyLen > 0 || cfg.force) {\r\n            var existsAnimators = animatable.animators;\r\n            var existsAnimatorsOnSameTarget = [];\r\n            for (var i = 0; i < existsAnimators.length; i++) {\r\n                if (existsAnimators[i].targetName === topKey) {\r\n                    existsAnimatorsOnSameTarget.push(existsAnimators[i]);\r\n                }\r\n            }\r\n            if (!additive && existsAnimatorsOnSameTarget.length) {\r\n                for (var i = 0; i < existsAnimatorsOnSameTarget.length; i++) {\r\n                    var allAborted = existsAnimatorsOnSameTarget[i].stopTracks(changedKeys);\r\n                    if (allAborted) {\r\n                        var idx = indexOf(existsAnimators, existsAnimatorsOnSameTarget[i]);\r\n                        existsAnimators.splice(idx, 1);\r\n                    }\r\n                }\r\n            }\r\n            var revertedSource = void 0;\r\n            var reversedTarget = void 0;\r\n            var sourceClone = void 0;\r\n            if (reverse) {\r\n                reversedTarget = {};\r\n                if (setToFinal) {\r\n                    revertedSource = {};\r\n                }\r\n                for (var i = 0; i < keyLen; i++) {\r\n                    var innerKey = animatableKeys[i];\r\n                    reversedTarget[innerKey] = source[innerKey];\r\n                    if (setToFinal) {\r\n                        revertedSource[innerKey] = target[innerKey];\r\n                    }\r\n                    else {\r\n                        source[innerKey] = target[innerKey];\r\n                    }\r\n                }\r\n            }\r\n            else if (setToFinal) {\r\n                sourceClone = {};\r\n                for (var i = 0; i < keyLen; i++) {\r\n                    var innerKey = animatableKeys[i];\r\n                    sourceClone[innerKey] = cloneValue(source[innerKey]);\r\n                    copyValue(source, target, innerKey);\r\n                }\r\n            }\r\n            var animator = new Animator(source, false, additive ? existsAnimatorsOnSameTarget : null);\r\n            animator.targetName = topKey;\r\n            if (cfg.scope) {\r\n                animator.scope = cfg.scope;\r\n            }\r\n            if (setToFinal && revertedSource) {\r\n                animator.whenWithKeys(0, revertedSource, animatableKeys);\r\n            }\r\n            if (sourceClone) {\r\n                animator.whenWithKeys(0, sourceClone, animatableKeys);\r\n            }\r\n            animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animatableKeys).delay(delay || 0);\r\n            animatable.addAnimator(animator, topKey);\r\n            animators.push(animator);\r\n        }\r\n    }\n\n    var STYLE_MAGIC_KEY = '__zr_style_' + Math.round((Math.random() * 10));\r\n    var DEFAULT_COMMON_STYLE = {\r\n        shadowBlur: 0,\r\n        shadowOffsetX: 0,\r\n        shadowOffsetY: 0,\r\n        shadowColor: '#000',\r\n        opacity: 1,\r\n        blend: 'source-over'\r\n    };\r\n    var DEFAULT_COMMON_ANIMATION_PROPS = {\r\n        style: {\r\n            shadowBlur: true,\r\n            shadowOffsetX: true,\r\n            shadowOffsetY: true,\r\n            shadowColor: true,\r\n            opacity: true\r\n        }\r\n    };\r\n    DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;\r\n    var PRIMARY_STATES_KEYS$1 = ['z', 'z2', 'invisible'];\r\n    var Displayable = (function (_super) {\r\n        __extends(Displayable, _super);\r\n        function Displayable(props) {\r\n            return _super.call(this, props) || this;\r\n        }\r\n        Displayable.prototype._init = function (props) {\r\n            var keysArr = keys(props);\r\n            for (var i = 0; i < keysArr.length; i++) {\r\n                var key = keysArr[i];\r\n                if (key === 'style') {\r\n                    this.useStyle(props[key]);\r\n                }\r\n                else {\r\n                    _super.prototype.attrKV.call(this, key, props[key]);\r\n                }\r\n            }\r\n            if (!this.style) {\r\n                this.useStyle({});\r\n            }\r\n        };\r\n        Displayable.prototype.beforeBrush = function () { };\r\n        Displayable.prototype.afterBrush = function () { };\r\n        Displayable.prototype.innerBeforeBrush = function () { };\r\n        Displayable.prototype.innerAfterBrush = function () { };\r\n        Displayable.prototype.contain = function (x, y) {\r\n            return this.rectContain(x, y);\r\n        };\r\n        Displayable.prototype.traverse = function (cb, context) {\r\n            cb.call(context, this);\r\n        };\r\n        Displayable.prototype.rectContain = function (x, y) {\r\n            var coord = this.transformCoordToLocal(x, y);\r\n            var rect = this.getBoundingRect();\r\n            return rect.contain(coord[0], coord[1]);\r\n        };\r\n        Displayable.prototype.animateStyle = function (loop) {\r\n            return this.animate('style', loop);\r\n        };\r\n        Displayable.prototype.updateDuringAnimation = function (targetKey) {\r\n            if (targetKey === 'style') {\r\n                this.dirtyStyle();\r\n            }\r\n            else {\r\n                this.markRedraw();\r\n            }\r\n        };\r\n        Displayable.prototype.attrKV = function (key, value) {\r\n            if (key !== 'style') {\r\n                _super.prototype.attrKV.call(this, key, value);\r\n            }\r\n            else {\r\n                if (!this.style) {\r\n                    this.useStyle(value);\r\n                }\r\n                else {\r\n                    this.setStyle(value);\r\n                }\r\n            }\r\n        };\r\n        Displayable.prototype.setStyle = function (keyOrObj, value) {\r\n            if (typeof keyOrObj === 'string') {\r\n                this.style[keyOrObj] = value;\r\n            }\r\n            else {\r\n                extend(this.style, keyOrObj);\r\n            }\r\n            this.dirtyStyle();\r\n            return this;\r\n        };\r\n        Displayable.prototype.dirtyStyle = function () {\r\n            this.markRedraw();\r\n            this.__dirty |= Displayable.STYLE_CHANGED_BIT;\r\n            if (this._rect) {\r\n                this._rect = null;\r\n            }\r\n        };\r\n        Displayable.prototype.dirty = function () {\r\n            this.dirtyStyle();\r\n        };\r\n        Displayable.prototype.styleChanged = function () {\r\n            return !!(this.__dirty & Displayable.STYLE_CHANGED_BIT);\r\n        };\r\n        Displayable.prototype.styleUpdated = function () {\r\n            this.__dirty &= ~Displayable.STYLE_CHANGED_BIT;\r\n        };\r\n        Displayable.prototype.createStyle = function (obj) {\r\n            return createObject(DEFAULT_COMMON_STYLE, obj);\r\n        };\r\n        Displayable.prototype.useStyle = function (obj) {\r\n            if (!obj[STYLE_MAGIC_KEY]) {\r\n                obj = this.createStyle(obj);\r\n            }\r\n            if (this.__inHover) {\r\n                this.__hoverStyle = obj;\r\n            }\r\n            else {\r\n                this.style = obj;\r\n            }\r\n            this.dirtyStyle();\r\n        };\r\n        Displayable.prototype.isStyleObject = function (obj) {\r\n            return obj[STYLE_MAGIC_KEY];\r\n        };\r\n        Displayable.prototype._innerSaveToNormal = function (toState) {\r\n            _super.prototype._innerSaveToNormal.call(this, toState);\r\n            var normalState = this._normalState;\r\n            if (toState.style && !normalState.style) {\r\n                normalState.style = this._mergeStyle(this.createStyle(), this.style);\r\n            }\r\n            this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS$1);\r\n        };\r\n        Displayable.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\r\n            _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\r\n            var needsRestoreToNormal = !(state && keepCurrentStates);\r\n            var targetStyle;\r\n            if (state && state.style) {\r\n                if (transition) {\r\n                    if (keepCurrentStates) {\r\n                        targetStyle = state.style;\r\n                    }\r\n                    else {\r\n                        targetStyle = this._mergeStyle(this.createStyle(), normalState.style);\r\n                        this._mergeStyle(targetStyle, state.style);\r\n                    }\r\n                }\r\n                else {\r\n                    targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);\r\n                    this._mergeStyle(targetStyle, state.style);\r\n                }\r\n            }\r\n            else if (needsRestoreToNormal) {\r\n                targetStyle = normalState.style;\r\n            }\r\n            if (targetStyle) {\r\n                if (transition) {\r\n                    var sourceStyle = this.style;\r\n                    this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);\r\n                    if (needsRestoreToNormal) {\r\n                        var changedKeys = keys(sourceStyle);\r\n                        for (var i = 0; i < changedKeys.length; i++) {\r\n                            var key = changedKeys[i];\r\n                            if (key in targetStyle) {\r\n                                targetStyle[key] = targetStyle[key];\r\n                                this.style[key] = sourceStyle[key];\r\n                            }\r\n                        }\r\n                    }\r\n                    var targetKeys = keys(targetStyle);\r\n                    for (var i = 0; i < targetKeys.length; i++) {\r\n                        var key = targetKeys[i];\r\n                        this.style[key] = this.style[key];\r\n                    }\r\n                    this._transitionState(stateName, {\r\n                        style: targetStyle\r\n                    }, animationCfg, this._getAnimationStyleProps());\r\n                }\r\n                else {\r\n                    this.useStyle(targetStyle);\r\n                }\r\n            }\r\n            for (var i = 0; i < PRIMARY_STATES_KEYS$1.length; i++) {\r\n                var key = PRIMARY_STATES_KEYS$1[i];\r\n                if (state && state[key] != null) {\r\n                    this[key] = state[key];\r\n                }\r\n                else if (needsRestoreToNormal) {\r\n                    if (normalState[key] != null) {\r\n                        this[key] = normalState[key];\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        Displayable.prototype._mergeStates = function (states) {\r\n            var mergedState = _super.prototype._mergeStates.call(this, states);\r\n            var mergedStyle;\r\n            for (var i = 0; i < states.length; i++) {\r\n                var state = states[i];\r\n                if (state.style) {\r\n                    mergedStyle = mergedStyle || {};\r\n                    this._mergeStyle(mergedStyle, state.style);\r\n                }\r\n            }\r\n            if (mergedStyle) {\r\n                mergedState.style = mergedStyle;\r\n            }\r\n            return mergedState;\r\n        };\r\n        Displayable.prototype._mergeStyle = function (targetStyle, sourceStyle) {\r\n            extend(targetStyle, sourceStyle);\r\n            return targetStyle;\r\n        };\r\n        Displayable.prototype._getAnimationStyleProps = function () {\r\n            return DEFAULT_COMMON_ANIMATION_PROPS;\r\n        };\r\n        Displayable.STYLE_CHANGED_BIT = 2;\r\n        Displayable.initDefaultProps = (function () {\r\n            var dispProto = Displayable.prototype;\r\n            dispProto.type = 'displayable';\r\n            dispProto.invisible = false;\r\n            dispProto.z = 0;\r\n            dispProto.z2 = 0;\r\n            dispProto.zlevel = 0;\r\n            dispProto.culling = false;\r\n            dispProto.cursor = 'pointer';\r\n            dispProto.rectHover = false;\r\n            dispProto.incremental = false;\r\n            dispProto._rect = null;\r\n            dispProto.__dirty = Element.REDARAW_BIT | Displayable.STYLE_CHANGED_BIT;\r\n        })();\r\n        return Displayable;\r\n    }(Element));\n\n    var mathPow = Math.pow;\r\n    var mathSqrt = Math.sqrt;\r\n    var EPSILON$1 = 1e-8;\r\n    var EPSILON_NUMERIC = 1e-4;\r\n    var THREE_SQRT = mathSqrt(3);\r\n    var ONE_THIRD = 1 / 3;\r\n    var _v0 = create();\r\n    var _v1 = create();\r\n    var _v2 = create();\r\n    function isAroundZero(val) {\r\n        return val > -EPSILON$1 && val < EPSILON$1;\r\n    }\r\n    function isNotAroundZero$1(val) {\r\n        return val > EPSILON$1 || val < -EPSILON$1;\r\n    }\r\n    function cubicAt(p0, p1, p2, p3, t) {\r\n        var onet = 1 - t;\r\n        return onet * onet * (onet * p0 + 3 * t * p1)\r\n            + t * t * (t * p3 + 3 * onet * p2);\r\n    }\r\n    function cubicDerivativeAt(p0, p1, p2, p3, t) {\r\n        var onet = 1 - t;\r\n        return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet\r\n            + (p3 - p2) * t * t);\r\n    }\r\n    function cubicRootAt(p0, p1, p2, p3, val, roots) {\r\n        var a = p3 + 3 * (p1 - p2) - p0;\r\n        var b = 3 * (p2 - p1 * 2 + p0);\r\n        var c = 3 * (p1 - p0);\r\n        var d = p0 - val;\r\n        var A = b * b - 3 * a * c;\r\n        var B = b * c - 9 * a * d;\r\n        var C = c * c - 3 * b * d;\r\n        var n = 0;\r\n        if (isAroundZero(A) && isAroundZero(B)) {\r\n            if (isAroundZero(b)) {\r\n                roots[0] = 0;\r\n            }\r\n            else {\r\n                var t1 = -c / b;\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var disc = B * B - 4 * A * C;\r\n            if (isAroundZero(disc)) {\r\n                var K = B / A;\r\n                var t1 = -b / a + K;\r\n                var t2 = -K / 2;\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n                if (t2 >= 0 && t2 <= 1) {\r\n                    roots[n++] = t2;\r\n                }\r\n            }\r\n            else if (disc > 0) {\r\n                var discSqrt = mathSqrt(disc);\r\n                var Y1 = A * b + 1.5 * a * (-B + discSqrt);\r\n                var Y2 = A * b + 1.5 * a * (-B - discSqrt);\r\n                if (Y1 < 0) {\r\n                    Y1 = -mathPow(-Y1, ONE_THIRD);\r\n                }\r\n                else {\r\n                    Y1 = mathPow(Y1, ONE_THIRD);\r\n                }\r\n                if (Y2 < 0) {\r\n                    Y2 = -mathPow(-Y2, ONE_THIRD);\r\n                }\r\n                else {\r\n                    Y2 = mathPow(Y2, ONE_THIRD);\r\n                }\r\n                var t1 = (-b - (Y1 + Y2)) / (3 * a);\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n            }\r\n            else {\r\n                var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\r\n                var theta = Math.acos(T) / 3;\r\n                var ASqrt = mathSqrt(A);\r\n                var tmp = Math.cos(theta);\r\n                var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\r\n                var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\r\n                var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n                if (t2 >= 0 && t2 <= 1) {\r\n                    roots[n++] = t2;\r\n                }\r\n                if (t3 >= 0 && t3 <= 1) {\r\n                    roots[n++] = t3;\r\n                }\r\n            }\r\n        }\r\n        return n;\r\n    }\r\n    function cubicExtrema(p0, p1, p2, p3, extrema) {\r\n        var b = 6 * p2 - 12 * p1 + 6 * p0;\r\n        var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\r\n        var c = 3 * p1 - 3 * p0;\r\n        var n = 0;\r\n        if (isAroundZero(a)) {\r\n            if (isNotAroundZero$1(b)) {\r\n                var t1 = -c / b;\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    extrema[n++] = t1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var disc = b * b - 4 * a * c;\r\n            if (isAroundZero(disc)) {\r\n                extrema[0] = -b / (2 * a);\r\n            }\r\n            else if (disc > 0) {\r\n                var discSqrt = mathSqrt(disc);\r\n                var t1 = (-b + discSqrt) / (2 * a);\r\n                var t2 = (-b - discSqrt) / (2 * a);\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    extrema[n++] = t1;\r\n                }\r\n                if (t2 >= 0 && t2 <= 1) {\r\n                    extrema[n++] = t2;\r\n                }\r\n            }\r\n        }\r\n        return n;\r\n    }\r\n    function cubicSubdivide(p0, p1, p2, p3, t, out) {\r\n        var p01 = (p1 - p0) * t + p0;\r\n        var p12 = (p2 - p1) * t + p1;\r\n        var p23 = (p3 - p2) * t + p2;\r\n        var p012 = (p12 - p01) * t + p01;\r\n        var p123 = (p23 - p12) * t + p12;\r\n        var p0123 = (p123 - p012) * t + p012;\r\n        out[0] = p0;\r\n        out[1] = p01;\r\n        out[2] = p012;\r\n        out[3] = p0123;\r\n        out[4] = p0123;\r\n        out[5] = p123;\r\n        out[6] = p23;\r\n        out[7] = p3;\r\n    }\r\n    function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\r\n        var t;\r\n        var interval = 0.005;\r\n        var d = Infinity;\r\n        var prev;\r\n        var next;\r\n        var d1;\r\n        var d2;\r\n        _v0[0] = x;\r\n        _v0[1] = y;\r\n        for (var _t = 0; _t < 1; _t += 0.05) {\r\n            _v1[0] = cubicAt(x0, x1, x2, x3, _t);\r\n            _v1[1] = cubicAt(y0, y1, y2, y3, _t);\r\n            d1 = distSquare(_v0, _v1);\r\n            if (d1 < d) {\r\n                t = _t;\r\n                d = d1;\r\n            }\r\n        }\r\n        d = Infinity;\r\n        for (var i = 0; i < 32; i++) {\r\n            if (interval < EPSILON_NUMERIC) {\r\n                break;\r\n            }\r\n            prev = t - interval;\r\n            next = t + interval;\r\n            _v1[0] = cubicAt(x0, x1, x2, x3, prev);\r\n            _v1[1] = cubicAt(y0, y1, y2, y3, prev);\r\n            d1 = distSquare(_v1, _v0);\r\n            if (prev >= 0 && d1 < d) {\r\n                t = prev;\r\n                d = d1;\r\n            }\r\n            else {\r\n                _v2[0] = cubicAt(x0, x1, x2, x3, next);\r\n                _v2[1] = cubicAt(y0, y1, y2, y3, next);\r\n                d2 = distSquare(_v2, _v0);\r\n                if (next <= 1 && d2 < d) {\r\n                    t = next;\r\n                    d = d2;\r\n                }\r\n                else {\r\n                    interval *= 0.5;\r\n                }\r\n            }\r\n        }\r\n        if (out) {\r\n            out[0] = cubicAt(x0, x1, x2, x3, t);\r\n            out[1] = cubicAt(y0, y1, y2, y3, t);\r\n        }\r\n        return mathSqrt(d);\r\n    }\r\n    function cubicLength(x0, y0, x1, y1, x2, y2, x3, y3, iteration) {\r\n        var px = x0;\r\n        var py = y0;\r\n        var d = 0;\r\n        var step = 1 / iteration;\r\n        for (var i = 1; i <= iteration; i++) {\r\n            var t = i * step;\r\n            var x = cubicAt(x0, x1, x2, x3, t);\r\n            var y = cubicAt(y0, y1, y2, y3, t);\r\n            var dx = x - px;\r\n            var dy = y - py;\r\n            d += Math.sqrt(dx * dx + dy * dy);\r\n            px = x;\r\n            py = y;\r\n        }\r\n        return d;\r\n    }\r\n    function quadraticAt(p0, p1, p2, t) {\r\n        var onet = 1 - t;\r\n        return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\r\n    }\r\n    function quadraticDerivativeAt(p0, p1, p2, t) {\r\n        return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\r\n    }\r\n    function quadraticRootAt(p0, p1, p2, val, roots) {\r\n        var a = p0 - 2 * p1 + p2;\r\n        var b = 2 * (p1 - p0);\r\n        var c = p0 - val;\r\n        var n = 0;\r\n        if (isAroundZero(a)) {\r\n            if (isNotAroundZero$1(b)) {\r\n                var t1 = -c / b;\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var disc = b * b - 4 * a * c;\r\n            if (isAroundZero(disc)) {\r\n                var t1 = -b / (2 * a);\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n            }\r\n            else if (disc > 0) {\r\n                var discSqrt = mathSqrt(disc);\r\n                var t1 = (-b + discSqrt) / (2 * a);\r\n                var t2 = (-b - discSqrt) / (2 * a);\r\n                if (t1 >= 0 && t1 <= 1) {\r\n                    roots[n++] = t1;\r\n                }\r\n                if (t2 >= 0 && t2 <= 1) {\r\n                    roots[n++] = t2;\r\n                }\r\n            }\r\n        }\r\n        return n;\r\n    }\r\n    function quadraticExtremum(p0, p1, p2) {\r\n        var divider = p0 + p2 - 2 * p1;\r\n        if (divider === 0) {\r\n            return 0.5;\r\n        }\r\n        else {\r\n            return (p0 - p1) / divider;\r\n        }\r\n    }\r\n    function quadraticSubdivide(p0, p1, p2, t, out) {\r\n        var p01 = (p1 - p0) * t + p0;\r\n        var p12 = (p2 - p1) * t + p1;\r\n        var p012 = (p12 - p01) * t + p01;\r\n        out[0] = p0;\r\n        out[1] = p01;\r\n        out[2] = p012;\r\n        out[3] = p012;\r\n        out[4] = p12;\r\n        out[5] = p2;\r\n    }\r\n    function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\r\n        var t;\r\n        var interval = 0.005;\r\n        var d = Infinity;\r\n        _v0[0] = x;\r\n        _v0[1] = y;\r\n        for (var _t = 0; _t < 1; _t += 0.05) {\r\n            _v1[0] = quadraticAt(x0, x1, x2, _t);\r\n            _v1[1] = quadraticAt(y0, y1, y2, _t);\r\n            var d1 = distSquare(_v0, _v1);\r\n            if (d1 < d) {\r\n                t = _t;\r\n                d = d1;\r\n            }\r\n        }\r\n        d = Infinity;\r\n        for (var i = 0; i < 32; i++) {\r\n            if (interval < EPSILON_NUMERIC) {\r\n                break;\r\n            }\r\n            var prev = t - interval;\r\n            var next = t + interval;\r\n            _v1[0] = quadraticAt(x0, x1, x2, prev);\r\n            _v1[1] = quadraticAt(y0, y1, y2, prev);\r\n            var d1 = distSquare(_v1, _v0);\r\n            if (prev >= 0 && d1 < d) {\r\n                t = prev;\r\n                d = d1;\r\n            }\r\n            else {\r\n                _v2[0] = quadraticAt(x0, x1, x2, next);\r\n                _v2[1] = quadraticAt(y0, y1, y2, next);\r\n                var d2 = distSquare(_v2, _v0);\r\n                if (next <= 1 && d2 < d) {\r\n                    t = next;\r\n                    d = d2;\r\n                }\r\n                else {\r\n                    interval *= 0.5;\r\n                }\r\n            }\r\n        }\r\n        if (out) {\r\n            out[0] = quadraticAt(x0, x1, x2, t);\r\n            out[1] = quadraticAt(y0, y1, y2, t);\r\n        }\r\n        return mathSqrt(d);\r\n    }\r\n    function quadraticLength(x0, y0, x1, y1, x2, y2, iteration) {\r\n        var px = x0;\r\n        var py = y0;\r\n        var d = 0;\r\n        var step = 1 / iteration;\r\n        for (var i = 1; i <= iteration; i++) {\r\n            var t = i * step;\r\n            var x = quadraticAt(x0, x1, x2, t);\r\n            var y = quadraticAt(y0, y1, y2, t);\r\n            var dx = x - px;\r\n            var dy = y - py;\r\n            d += Math.sqrt(dx * dx + dy * dy);\r\n            px = x;\r\n            py = y;\r\n        }\r\n        return d;\r\n    }\n\n    var mathMin$1 = Math.min;\r\n    var mathMax$1 = Math.max;\r\n    var mathSin = Math.sin;\r\n    var mathCos = Math.cos;\r\n    var PI2 = Math.PI * 2;\r\n    var start = create();\r\n    var end = create();\r\n    var extremity = create();\r\n    function fromPoints(points, min, max) {\r\n        if (points.length === 0) {\r\n            return;\r\n        }\r\n        var p = points[0];\r\n        var left = p[0];\r\n        var right = p[0];\r\n        var top = p[1];\r\n        var bottom = p[1];\r\n        for (var i = 1; i < points.length; i++) {\r\n            p = points[i];\r\n            left = mathMin$1(left, p[0]);\r\n            right = mathMax$1(right, p[0]);\r\n            top = mathMin$1(top, p[1]);\r\n            bottom = mathMax$1(bottom, p[1]);\r\n        }\r\n        min[0] = left;\r\n        min[1] = top;\r\n        max[0] = right;\r\n        max[1] = bottom;\r\n    }\r\n    function fromLine(x0, y0, x1, y1, min, max) {\r\n        min[0] = mathMin$1(x0, x1);\r\n        min[1] = mathMin$1(y0, y1);\r\n        max[0] = mathMax$1(x0, x1);\r\n        max[1] = mathMax$1(y0, y1);\r\n    }\r\n    var xDim = [];\r\n    var yDim = [];\r\n    function fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min, max) {\r\n        var cubicExtrema$1 = cubicExtrema;\r\n        var cubicAt$1 = cubicAt;\r\n        var n = cubicExtrema$1(x0, x1, x2, x3, xDim);\r\n        min[0] = Infinity;\r\n        min[1] = Infinity;\r\n        max[0] = -Infinity;\r\n        max[1] = -Infinity;\r\n        for (var i = 0; i < n; i++) {\r\n            var x = cubicAt$1(x0, x1, x2, x3, xDim[i]);\r\n            min[0] = mathMin$1(x, min[0]);\r\n            max[0] = mathMax$1(x, max[0]);\r\n        }\r\n        n = cubicExtrema$1(y0, y1, y2, y3, yDim);\r\n        for (var i = 0; i < n; i++) {\r\n            var y = cubicAt$1(y0, y1, y2, y3, yDim[i]);\r\n            min[1] = mathMin$1(y, min[1]);\r\n            max[1] = mathMax$1(y, max[1]);\r\n        }\r\n        min[0] = mathMin$1(x0, min[0]);\r\n        max[0] = mathMax$1(x0, max[0]);\r\n        min[0] = mathMin$1(x3, min[0]);\r\n        max[0] = mathMax$1(x3, max[0]);\r\n        min[1] = mathMin$1(y0, min[1]);\r\n        max[1] = mathMax$1(y0, max[1]);\r\n        min[1] = mathMin$1(y3, min[1]);\r\n        max[1] = mathMax$1(y3, max[1]);\r\n    }\r\n    function fromQuadratic(x0, y0, x1, y1, x2, y2, min, max) {\r\n        var quadraticExtremum$1 = quadraticExtremum;\r\n        var quadraticAt$1 = quadraticAt;\r\n        var tx = mathMax$1(mathMin$1(quadraticExtremum$1(x0, x1, x2), 1), 0);\r\n        var ty = mathMax$1(mathMin$1(quadraticExtremum$1(y0, y1, y2), 1), 0);\r\n        var x = quadraticAt$1(x0, x1, x2, tx);\r\n        var y = quadraticAt$1(y0, y1, y2, ty);\r\n        min[0] = mathMin$1(x0, x2, x);\r\n        min[1] = mathMin$1(y0, y2, y);\r\n        max[0] = mathMax$1(x0, x2, x);\r\n        max[1] = mathMax$1(y0, y2, y);\r\n    }\r\n    function fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min$1, max$1) {\r\n        var vec2Min = min;\r\n        var vec2Max = max;\r\n        var diff = Math.abs(startAngle - endAngle);\r\n        if (diff % PI2 < 1e-4 && diff > 1e-4) {\r\n            min$1[0] = x - rx;\r\n            min$1[1] = y - ry;\r\n            max$1[0] = x + rx;\r\n            max$1[1] = y + ry;\r\n            return;\r\n        }\r\n        start[0] = mathCos(startAngle) * rx + x;\r\n        start[1] = mathSin(startAngle) * ry + y;\r\n        end[0] = mathCos(endAngle) * rx + x;\r\n        end[1] = mathSin(endAngle) * ry + y;\r\n        vec2Min(min$1, start, end);\r\n        vec2Max(max$1, start, end);\r\n        startAngle = startAngle % (PI2);\r\n        if (startAngle < 0) {\r\n            startAngle = startAngle + PI2;\r\n        }\r\n        endAngle = endAngle % (PI2);\r\n        if (endAngle < 0) {\r\n            endAngle = endAngle + PI2;\r\n        }\r\n        if (startAngle > endAngle && !anticlockwise) {\r\n            endAngle += PI2;\r\n        }\r\n        else if (startAngle < endAngle && anticlockwise) {\r\n            startAngle += PI2;\r\n        }\r\n        if (anticlockwise) {\r\n            var tmp = endAngle;\r\n            endAngle = startAngle;\r\n            startAngle = tmp;\r\n        }\r\n        for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\r\n            if (angle > startAngle) {\r\n                extremity[0] = mathCos(angle) * rx + x;\r\n                extremity[1] = mathSin(angle) * ry + y;\r\n                vec2Min(min$1, extremity, min$1);\r\n                vec2Max(max$1, extremity, max$1);\r\n            }\r\n        }\r\n    }\n\n    var CMD = {\r\n        M: 1,\r\n        L: 2,\r\n        C: 3,\r\n        Q: 4,\r\n        A: 5,\r\n        Z: 6,\r\n        R: 7\r\n    };\r\n    var tmpOutX = [];\r\n    var tmpOutY = [];\r\n    var min$1 = [];\r\n    var max$1 = [];\r\n    var min2 = [];\r\n    var max2 = [];\r\n    var mathMin$2 = Math.min;\r\n    var mathMax$2 = Math.max;\r\n    var mathCos$1 = Math.cos;\r\n    var mathSin$1 = Math.sin;\r\n    var mathSqrt$1 = Math.sqrt;\r\n    var mathAbs = Math.abs;\r\n    var PI = Math.PI;\r\n    var PI2$1 = PI * 2;\r\n    var hasTypedArray = typeof Float32Array !== 'undefined';\r\n    var PathProxy = (function () {\r\n        function PathProxy(notSaveData) {\r\n            this.dpr = 1;\r\n            this._xi = 0;\r\n            this._yi = 0;\r\n            this._x0 = 0;\r\n            this._y0 = 0;\r\n            this._len = 0;\r\n            if (notSaveData) {\r\n                this._saveData = false;\r\n            }\r\n            if (this._saveData) {\r\n                this.data = [];\r\n            }\r\n        }\r\n        PathProxy.prototype.setScale = function (sx, sy, segmentIgnoreThreshold) {\r\n            segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\r\n            if (segmentIgnoreThreshold > 0) {\r\n                this._ux = mathAbs(segmentIgnoreThreshold / devicePixelRatio / sx) || 0;\r\n                this._uy = mathAbs(segmentIgnoreThreshold / devicePixelRatio / sy) || 0;\r\n            }\r\n        };\r\n        PathProxy.prototype.setDPR = function (dpr) {\r\n            this.dpr = dpr;\r\n        };\r\n        PathProxy.prototype.setContext = function (ctx) {\r\n            this._ctx = ctx;\r\n        };\r\n        PathProxy.prototype.getContext = function () {\r\n            return this._ctx;\r\n        };\r\n        PathProxy.prototype.beginPath = function () {\r\n            this._ctx && this._ctx.beginPath();\r\n            this.reset();\r\n            return this;\r\n        };\r\n        PathProxy.prototype.reset = function () {\r\n            if (this._saveData) {\r\n                this._len = 0;\r\n            }\r\n            if (this._lineDash) {\r\n                this._lineDash = null;\r\n                this._dashOffset = 0;\r\n            }\r\n            if (this._pathSegLen) {\r\n                this._pathSegLen = null;\r\n                this._pathLen = 0;\r\n            }\r\n        };\r\n        PathProxy.prototype.moveTo = function (x, y) {\r\n            this.addData(CMD.M, x, y);\r\n            this._ctx && this._ctx.moveTo(x, y);\r\n            this._x0 = x;\r\n            this._y0 = y;\r\n            this._xi = x;\r\n            this._yi = y;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.lineTo = function (x, y) {\r\n            var exceedUnit = mathAbs(x - this._xi) > this._ux\r\n                || mathAbs(y - this._yi) > this._uy\r\n                || this._len < 5;\r\n            this.addData(CMD.L, x, y);\r\n            if (this._ctx && exceedUnit) {\r\n                this._needsDash ? this._dashedLineTo(x, y)\r\n                    : this._ctx.lineTo(x, y);\r\n            }\r\n            if (exceedUnit) {\r\n                this._xi = x;\r\n                this._yi = y;\r\n            }\r\n            return this;\r\n        };\r\n        PathProxy.prototype.bezierCurveTo = function (x1, y1, x2, y2, x3, y3) {\r\n            this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\r\n            if (this._ctx) {\r\n                this._needsDash ? this._dashedBezierTo(x1, y1, x2, y2, x3, y3)\r\n                    : this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\r\n            }\r\n            this._xi = x3;\r\n            this._yi = y3;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.quadraticCurveTo = function (x1, y1, x2, y2) {\r\n            this.addData(CMD.Q, x1, y1, x2, y2);\r\n            if (this._ctx) {\r\n                this._needsDash ? this._dashedQuadraticTo(x1, y1, x2, y2)\r\n                    : this._ctx.quadraticCurveTo(x1, y1, x2, y2);\r\n            }\r\n            this._xi = x2;\r\n            this._yi = y2;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\r\n            var delta = endAngle - startAngle;\r\n            endAngle = startAngle + delta;\r\n            this.addData(CMD.A, cx, cy, r, r, startAngle, delta, 0, anticlockwise ? 0 : 1);\r\n            this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\r\n            this._xi = mathCos$1(endAngle) * r + cx;\r\n            this._yi = mathSin$1(endAngle) * r + cy;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.arcTo = function (x1, y1, x2, y2, radius) {\r\n            if (this._ctx) {\r\n                this._ctx.arcTo(x1, y1, x2, y2, radius);\r\n            }\r\n            return this;\r\n        };\r\n        PathProxy.prototype.rect = function (x, y, w, h) {\r\n            this._ctx && this._ctx.rect(x, y, w, h);\r\n            this.addData(CMD.R, x, y, w, h);\r\n            return this;\r\n        };\r\n        PathProxy.prototype.closePath = function () {\r\n            this.addData(CMD.Z);\r\n            var ctx = this._ctx;\r\n            var x0 = this._x0;\r\n            var y0 = this._y0;\r\n            if (ctx) {\r\n                this._needsDash && this._dashedLineTo(x0, y0);\r\n                ctx.closePath();\r\n            }\r\n            this._xi = x0;\r\n            this._yi = y0;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.fill = function (ctx) {\r\n            ctx && ctx.fill();\r\n            this.toStatic();\r\n        };\r\n        PathProxy.prototype.stroke = function (ctx) {\r\n            ctx && ctx.stroke();\r\n            this.toStatic();\r\n        };\r\n        PathProxy.prototype.setLineDash = function (lineDash) {\r\n            if (lineDash instanceof Array) {\r\n                this._lineDash = lineDash;\r\n                this._dashIdx = 0;\r\n                var lineDashSum = 0;\r\n                for (var i = 0; i < lineDash.length; i++) {\r\n                    lineDashSum += lineDash[i];\r\n                }\r\n                this._dashSum = lineDashSum;\r\n                this._needsDash = true;\r\n            }\r\n            else {\r\n                this._lineDash = null;\r\n                this._needsDash = false;\r\n            }\r\n            return this;\r\n        };\r\n        PathProxy.prototype.setLineDashOffset = function (offset) {\r\n            this._dashOffset = offset;\r\n            return this;\r\n        };\r\n        PathProxy.prototype.len = function () {\r\n            return this._len;\r\n        };\r\n        PathProxy.prototype.setData = function (data) {\r\n            var len = data.length;\r\n            if (!(this.data && this.data.length === len) && hasTypedArray) {\r\n                this.data = new Float32Array(len);\r\n            }\r\n            for (var i = 0; i < len; i++) {\r\n                this.data[i] = data[i];\r\n            }\r\n            this._len = len;\r\n        };\r\n        PathProxy.prototype.appendPath = function (path) {\r\n            if (!(path instanceof Array)) {\r\n                path = [path];\r\n            }\r\n            var len = path.length;\r\n            var appendSize = 0;\r\n            var offset = this._len;\r\n            for (var i = 0; i < len; i++) {\r\n                appendSize += path[i].len();\r\n            }\r\n            if (hasTypedArray && (this.data instanceof Float32Array)) {\r\n                this.data = new Float32Array(offset + appendSize);\r\n            }\r\n            for (var i = 0; i < len; i++) {\r\n                var appendPathData = path[i].data;\r\n                for (var k = 0; k < appendPathData.length; k++) {\r\n                    this.data[offset++] = appendPathData[k];\r\n                }\r\n            }\r\n            this._len = offset;\r\n        };\r\n        PathProxy.prototype.addData = function (cmd, a, b, c, d, e, f, g, h) {\r\n            if (!this._saveData) {\r\n                return;\r\n            }\r\n            var data = this.data;\r\n            if (this._len + arguments.length > data.length) {\r\n                this._expandData();\r\n                data = this.data;\r\n            }\r\n            for (var i = 0; i < arguments.length; i++) {\r\n                data[this._len++] = arguments[i];\r\n            }\r\n        };\r\n        PathProxy.prototype._expandData = function () {\r\n            if (!(this.data instanceof Array)) {\r\n                var newData = [];\r\n                for (var i = 0; i < this._len; i++) {\r\n                    newData[i] = this.data[i];\r\n                }\r\n                this.data = newData;\r\n            }\r\n        };\r\n        PathProxy.prototype._dashedLineTo = function (x1, y1) {\r\n            var dashSum = this._dashSum;\r\n            var lineDash = this._lineDash;\r\n            var ctx = this._ctx;\r\n            var offset = this._dashOffset;\r\n            var x0 = this._xi;\r\n            var y0 = this._yi;\r\n            var dx = x1 - x0;\r\n            var dy = y1 - y0;\r\n            var dist = mathSqrt$1(dx * dx + dy * dy);\r\n            var x = x0;\r\n            var y = y0;\r\n            var nDash = lineDash.length;\r\n            var dash;\r\n            var idx;\r\n            dx /= dist;\r\n            dy /= dist;\r\n            if (offset < 0) {\r\n                offset = dashSum + offset;\r\n            }\r\n            offset %= dashSum;\r\n            x -= offset * dx;\r\n            y -= offset * dy;\r\n            while ((dx > 0 && x <= x1) || (dx < 0 && x >= x1)\r\n                || (dx === 0 && ((dy > 0 && y <= y1) || (dy < 0 && y >= y1)))) {\r\n                idx = this._dashIdx;\r\n                dash = lineDash[idx];\r\n                x += dx * dash;\r\n                y += dy * dash;\r\n                this._dashIdx = (idx + 1) % nDash;\r\n                if ((dx > 0 && x < x0) || (dx < 0 && x > x0) || (dy > 0 && y < y0) || (dy < 0 && y > y0)) {\r\n                    continue;\r\n                }\r\n                ctx[idx % 2 ? 'moveTo' : 'lineTo'](dx >= 0 ? mathMin$2(x, x1) : mathMax$2(x, x1), dy >= 0 ? mathMin$2(y, y1) : mathMax$2(y, y1));\r\n            }\r\n            dx = x - x1;\r\n            dy = y - y1;\r\n            this._dashOffset = -mathSqrt$1(dx * dx + dy * dy);\r\n        };\r\n        PathProxy.prototype._dashedBezierTo = function (x1, y1, x2, y2, x3, y3) {\r\n            var ctx = this._ctx;\r\n            var dashSum = this._dashSum;\r\n            var offset = this._dashOffset;\r\n            var lineDash = this._lineDash;\r\n            var x0 = this._xi;\r\n            var y0 = this._yi;\r\n            var bezierLen = 0;\r\n            var idx = this._dashIdx;\r\n            var nDash = lineDash.length;\r\n            var t;\r\n            var dx;\r\n            var dy;\r\n            var x;\r\n            var y;\r\n            var tmpLen = 0;\r\n            if (offset < 0) {\r\n                offset = dashSum + offset;\r\n            }\r\n            offset %= dashSum;\r\n            for (t = 0; t < 1; t += 0.1) {\r\n                dx = cubicAt(x0, x1, x2, x3, t + 0.1)\r\n                    - cubicAt(x0, x1, x2, x3, t);\r\n                dy = cubicAt(y0, y1, y2, y3, t + 0.1)\r\n                    - cubicAt(y0, y1, y2, y3, t);\r\n                bezierLen += mathSqrt$1(dx * dx + dy * dy);\r\n            }\r\n            for (; idx < nDash; idx++) {\r\n                tmpLen += lineDash[idx];\r\n                if (tmpLen > offset) {\r\n                    break;\r\n                }\r\n            }\r\n            t = (tmpLen - offset) / bezierLen;\r\n            while (t <= 1) {\r\n                x = cubicAt(x0, x1, x2, x3, t);\r\n                y = cubicAt(y0, y1, y2, y3, t);\r\n                idx % 2 ? ctx.moveTo(x, y)\r\n                    : ctx.lineTo(x, y);\r\n                t += lineDash[idx] / bezierLen;\r\n                idx = (idx + 1) % nDash;\r\n            }\r\n            (idx % 2 !== 0) && ctx.lineTo(x3, y3);\r\n            dx = x3 - x;\r\n            dy = y3 - y;\r\n            this._dashOffset = -mathSqrt$1(dx * dx + dy * dy);\r\n        };\r\n        PathProxy.prototype._dashedQuadraticTo = function (x1, y1, x2, y2) {\r\n            var x3 = x2;\r\n            var y3 = y2;\r\n            x2 = (x2 + 2 * x1) / 3;\r\n            y2 = (y2 + 2 * y1) / 3;\r\n            x1 = (this._xi + 2 * x1) / 3;\r\n            y1 = (this._yi + 2 * y1) / 3;\r\n            this._dashedBezierTo(x1, y1, x2, y2, x3, y3);\r\n        };\r\n        PathProxy.prototype.toStatic = function () {\r\n            if (!this._saveData) {\r\n                return;\r\n            }\r\n            var data = this.data;\r\n            if (data instanceof Array) {\r\n                data.length = this._len;\r\n                if (hasTypedArray && this._len > 11) {\r\n                    this.data = new Float32Array(data);\r\n                }\r\n            }\r\n        };\r\n        PathProxy.prototype.getBoundingRect = function () {\r\n            min$1[0] = min$1[1] = min2[0] = min2[1] = Number.MAX_VALUE;\r\n            max$1[0] = max$1[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\r\n            var data = this.data;\r\n            var xi = 0;\r\n            var yi = 0;\r\n            var x0 = 0;\r\n            var y0 = 0;\r\n            var i;\r\n            for (i = 0; i < data.length;) {\r\n                var cmd = data[i++];\r\n                if (i === 1) {\r\n                    xi = data[i];\r\n                    yi = data[i + 1];\r\n                    x0 = xi;\r\n                    y0 = yi;\r\n                }\r\n                switch (cmd) {\r\n                    case CMD.M:\r\n                        xi = x0 = data[i++];\r\n                        yi = y0 = data[i++];\r\n                        min2[0] = x0;\r\n                        min2[1] = y0;\r\n                        max2[0] = x0;\r\n                        max2[1] = y0;\r\n                        break;\r\n                    case CMD.L:\r\n                        fromLine(xi, yi, data[i], data[i + 1], min2, max2);\r\n                        xi = data[i++];\r\n                        yi = data[i++];\r\n                        break;\r\n                    case CMD.C:\r\n                        fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\r\n                        xi = data[i++];\r\n                        yi = data[i++];\r\n                        break;\r\n                    case CMD.Q:\r\n                        fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\r\n                        xi = data[i++];\r\n                        yi = data[i++];\r\n                        break;\r\n                    case CMD.A:\r\n                        var cx = data[i++];\r\n                        var cy = data[i++];\r\n                        var rx = data[i++];\r\n                        var ry = data[i++];\r\n                        var startAngle = data[i++];\r\n                        var endAngle = data[i++] + startAngle;\r\n                        i += 1;\r\n                        var anticlockwise = 1 - data[i++];\r\n                        if (i === 1) {\r\n                            x0 = mathCos$1(startAngle) * rx + cx;\r\n                            y0 = mathSin$1(startAngle) * ry + cy;\r\n                        }\r\n                        fromArc(cx, cy, rx, ry, startAngle, endAngle, !!anticlockwise, min2, max2);\r\n                        xi = mathCos$1(endAngle) * rx + cx;\r\n                        yi = mathSin$1(endAngle) * ry + cy;\r\n                        break;\r\n                    case CMD.R:\r\n                        x0 = xi = data[i++];\r\n                        y0 = yi = data[i++];\r\n                        var width = data[i++];\r\n                        var height = data[i++];\r\n                        fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\r\n                        break;\r\n                    case CMD.Z:\r\n                        xi = x0;\r\n                        yi = y0;\r\n                        break;\r\n                }\r\n                min(min$1, min$1, min2);\r\n                max(max$1, max$1, max2);\r\n            }\r\n            if (i === 0) {\r\n                min$1[0] = min$1[1] = max$1[0] = max$1[1] = 0;\r\n            }\r\n            return new BoundingRect(min$1[0], min$1[1], max$1[0] - min$1[0], max$1[1] - min$1[1]);\r\n        };\r\n        PathProxy.prototype._calculateLength = function () {\r\n            var data = this.data;\r\n            var len = this._len;\r\n            var ux = this._ux;\r\n            var uy = this._uy;\r\n            var xi = 0;\r\n            var yi = 0;\r\n            var x0 = 0;\r\n            var y0 = 0;\r\n            if (!this._pathSegLen) {\r\n                this._pathSegLen = [];\r\n            }\r\n            var pathSegLen = this._pathSegLen;\r\n            var pathTotalLen = 0;\r\n            var segCount = 0;\r\n            for (var i = 0; i < len;) {\r\n                var cmd = data[i++];\r\n                if (i === 1) {\r\n                    xi = data[i];\r\n                    yi = data[i + 1];\r\n                    x0 = xi;\r\n                    y0 = yi;\r\n                }\r\n                var l = -1;\r\n                switch (cmd) {\r\n                    case CMD.M:\r\n                        xi = x0 = data[i++];\r\n                        yi = y0 = data[i++];\r\n                        break;\r\n                    case CMD.L: {\r\n                        var x2 = data[i++];\r\n                        var y2 = data[i++];\r\n                        var dx = x2 - xi;\r\n                        var dy = y2 - yi;\r\n                        if (mathAbs(dx) > ux || mathAbs(dy) > uy || i === len - 1) {\r\n                            l = Math.sqrt(dx * dx + dy * dy);\r\n                            xi = x2;\r\n                            yi = y2;\r\n                        }\r\n                        break;\r\n                    }\r\n                    case CMD.C: {\r\n                        var x1 = data[i++];\r\n                        var y1 = data[i++];\r\n                        var x2 = data[i++];\r\n                        var y2 = data[i++];\r\n                        var x3 = data[i++];\r\n                        var y3 = data[i++];\r\n                        l = cubicLength(xi, yi, x1, y1, x2, y2, x3, y3, 10);\r\n                        xi = x3;\r\n                        yi = y3;\r\n                        break;\r\n                    }\r\n                    case CMD.Q: {\r\n                        var x1 = data[i++];\r\n                        var y1 = data[i++];\r\n                        var x2 = data[i++];\r\n                        var y2 = data[i++];\r\n                        l = quadraticLength(xi, yi, x1, y1, x2, y2, 10);\r\n                        xi = x2;\r\n                        yi = y2;\r\n                        break;\r\n                    }\r\n                    case CMD.A:\r\n                        var cx = data[i++];\r\n                        var cy = data[i++];\r\n                        var rx = data[i++];\r\n                        var ry = data[i++];\r\n                        var startAngle = data[i++];\r\n                        var delta = data[i++];\r\n                        var endAngle = delta + startAngle;\r\n                        i += 1;\r\n                        var anticlockwise = !data[i++];\r\n                        if (i === 1) {\r\n                            x0 = mathCos$1(startAngle) * rx + cx;\r\n                            y0 = mathSin$1(startAngle) * ry + cy;\r\n                        }\r\n                        l = mathMax$2(rx, ry) * mathMin$2(PI2$1, Math.abs(delta));\r\n                        xi = mathCos$1(endAngle) * rx + cx;\r\n                        yi = mathSin$1(endAngle) * ry + cy;\r\n                        break;\r\n                    case CMD.R: {\r\n                        x0 = xi = data[i++];\r\n                        y0 = yi = data[i++];\r\n                        var width = data[i++];\r\n                        var height = data[i++];\r\n                        l = width * 2 + height * 2;\r\n                        break;\r\n                    }\r\n                    case CMD.Z: {\r\n                        var dx = x0 - xi;\r\n                        var dy = y0 - yi;\r\n                        l = Math.sqrt(dx * dx + dy * dy);\r\n                        xi = x0;\r\n                        yi = y0;\r\n                        break;\r\n                    }\r\n                }\r\n                if (l >= 0) {\r\n                    pathSegLen[segCount++] = l;\r\n                    pathTotalLen += l;\r\n                }\r\n            }\r\n            this._pathLen = pathTotalLen;\r\n            return pathTotalLen;\r\n        };\r\n        PathProxy.prototype.rebuildPath = function (ctx, percent) {\r\n            var d = this.data;\r\n            var ux = this._ux;\r\n            var uy = this._uy;\r\n            var len = this._len;\r\n            var x0;\r\n            var y0;\r\n            var xi;\r\n            var yi;\r\n            var x;\r\n            var y;\r\n            var drawPart = percent < 1;\r\n            var pathSegLen;\r\n            var pathTotalLen;\r\n            var accumLength = 0;\r\n            var segCount = 0;\r\n            var displayedLength;\r\n            if (drawPart) {\r\n                if (!this._pathSegLen) {\r\n                    this._calculateLength();\r\n                }\r\n                pathSegLen = this._pathSegLen;\r\n                pathTotalLen = this._pathLen;\r\n                displayedLength = percent * pathTotalLen;\r\n                if (!displayedLength) {\r\n                    return;\r\n                }\r\n            }\r\n            lo: for (var i = 0; i < len;) {\r\n                var cmd = d[i++];\r\n                if (i === 1) {\r\n                    xi = d[i];\r\n                    yi = d[i + 1];\r\n                    x0 = xi;\r\n                    y0 = yi;\r\n                }\r\n                switch (cmd) {\r\n                    case CMD.M:\r\n                        x0 = xi = d[i++];\r\n                        y0 = yi = d[i++];\r\n                        ctx.moveTo(xi, yi);\r\n                        break;\r\n                    case CMD.L: {\r\n                        x = d[i++];\r\n                        y = d[i++];\r\n                        if (mathAbs(x - xi) > ux || mathAbs(y - yi) > uy || i === len - 1) {\r\n                            if (drawPart) {\r\n                                var l = pathSegLen[segCount++];\r\n                                if (accumLength + l > displayedLength) {\r\n                                    var t = (displayedLength - accumLength) / l;\r\n                                    ctx.lineTo(xi * (1 - t) + x * t, yi * (1 - t) + y * t);\r\n                                    break lo;\r\n                                }\r\n                                accumLength += l;\r\n                            }\r\n                            ctx.lineTo(x, y);\r\n                            xi = x;\r\n                            yi = y;\r\n                        }\r\n                        break;\r\n                    }\r\n                    case CMD.C: {\r\n                        var x1 = d[i++];\r\n                        var y1 = d[i++];\r\n                        var x2 = d[i++];\r\n                        var y2 = d[i++];\r\n                        var x3 = d[i++];\r\n                        var y3 = d[i++];\r\n                        if (drawPart) {\r\n                            var l = pathSegLen[segCount++];\r\n                            if (accumLength + l > displayedLength) {\r\n                                var t = (displayedLength - accumLength) / l;\r\n                                cubicSubdivide(xi, x1, x2, x3, t, tmpOutX);\r\n                                cubicSubdivide(yi, y1, y2, y3, t, tmpOutY);\r\n                                ctx.bezierCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2], tmpOutX[3], tmpOutY[3]);\r\n                                break lo;\r\n                            }\r\n                            accumLength += l;\r\n                        }\r\n                        ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\r\n                        xi = x3;\r\n                        yi = y3;\r\n                        break;\r\n                    }\r\n                    case CMD.Q: {\r\n                        var x1 = d[i++];\r\n                        var y1 = d[i++];\r\n                        var x2 = d[i++];\r\n                        var y2 = d[i++];\r\n                        if (drawPart) {\r\n                            var l = pathSegLen[segCount++];\r\n                            if (accumLength + l > displayedLength) {\r\n                                var t = (displayedLength - accumLength) / l;\r\n                                quadraticSubdivide(xi, x1, x2, t, tmpOutX);\r\n                                quadraticSubdivide(yi, y1, y2, t, tmpOutY);\r\n                                ctx.quadraticCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2]);\r\n                                break lo;\r\n                            }\r\n                            accumLength += l;\r\n                        }\r\n                        ctx.quadraticCurveTo(x1, y1, x2, y2);\r\n                        xi = x2;\r\n                        yi = y2;\r\n                        break;\r\n                    }\r\n                    case CMD.A:\r\n                        var cx = d[i++];\r\n                        var cy = d[i++];\r\n                        var rx = d[i++];\r\n                        var ry = d[i++];\r\n                        var startAngle = d[i++];\r\n                        var delta = d[i++];\r\n                        var psi = d[i++];\r\n                        var anticlockwise = !d[i++];\r\n                        var r = (rx > ry) ? rx : ry;\r\n                        var scaleX = (rx > ry) ? 1 : rx / ry;\r\n                        var scaleY = (rx > ry) ? ry / rx : 1;\r\n                        var isEllipse = mathAbs(rx - ry) > 1e-3;\r\n                        var endAngle = startAngle + delta;\r\n                        var breakBuild = false;\r\n                        if (drawPart) {\r\n                            var l = pathSegLen[segCount++];\r\n                            if (accumLength + l > displayedLength) {\r\n                                endAngle = startAngle + delta * (displayedLength - accumLength) / l;\r\n                                breakBuild = true;\r\n                            }\r\n                            accumLength += l;\r\n                        }\r\n                        if (isEllipse) {\r\n                            ctx.translate(cx, cy);\r\n                            ctx.rotate(psi);\r\n                            ctx.scale(scaleX, scaleY);\r\n                            ctx.arc(0, 0, r, startAngle, endAngle, anticlockwise);\r\n                            ctx.scale(1 / scaleX, 1 / scaleY);\r\n                            ctx.rotate(-psi);\r\n                            ctx.translate(-cx, -cy);\r\n                        }\r\n                        else {\r\n                            ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\r\n                        }\r\n                        if (breakBuild) {\r\n                            break lo;\r\n                        }\r\n                        if (i === 1) {\r\n                            x0 = mathCos$1(startAngle) * rx + cx;\r\n                            y0 = mathSin$1(startAngle) * ry + cy;\r\n                        }\r\n                        xi = mathCos$1(endAngle) * rx + cx;\r\n                        yi = mathSin$1(endAngle) * ry + cy;\r\n                        break;\r\n                    case CMD.R:\r\n                        x0 = xi = d[i];\r\n                        y0 = yi = d[i + 1];\r\n                        x = d[i++];\r\n                        y = d[i++];\r\n                        var width = d[i++];\r\n                        var height = d[i++];\r\n                        if (drawPart) {\r\n                            var l = pathSegLen[segCount++];\r\n                            if (accumLength + l > displayedLength) {\r\n                                var d_1 = displayedLength - accumLength;\r\n                                ctx.moveTo(x, y);\r\n                                ctx.lineTo(x + mathMin$2(d_1, width), y);\r\n                                d_1 -= width;\r\n                                if (d_1 > 0) {\r\n                                    ctx.lineTo(x + width, y + mathMin$2(d_1, height));\r\n                                }\r\n                                d_1 -= height;\r\n                                if (d_1 > 0) {\r\n                                    ctx.lineTo(x + mathMax$2(width - d_1, 0), y + height);\r\n                                }\r\n                                d_1 -= width;\r\n                                if (d_1 > 0) {\r\n                                    ctx.lineTo(x, y + mathMax$2(height - d_1, 0));\r\n                                }\r\n                                break lo;\r\n                            }\r\n                            accumLength += l;\r\n                        }\r\n                        ctx.rect(x, y, width, height);\r\n                        break;\r\n                    case CMD.Z:\r\n                        if (drawPart) {\r\n                            var l = pathSegLen[segCount++];\r\n                            if (accumLength + l > displayedLength) {\r\n                                var t = (displayedLength - accumLength) / l;\r\n                                ctx.lineTo(xi * (1 - t) + x0 * t, yi * (1 - t) + y0 * t);\r\n                                break lo;\r\n                            }\r\n                            accumLength += l;\r\n                        }\r\n                        ctx.closePath();\r\n                        xi = x0;\r\n                        yi = y0;\r\n                }\r\n            }\r\n        };\r\n        PathProxy.CMD = CMD;\r\n        PathProxy.initDefaultProps = (function () {\r\n            var proto = PathProxy.prototype;\r\n            proto._saveData = true;\r\n            proto._needsDash = false;\r\n            proto._dashOffset = 0;\r\n            proto._dashIdx = 0;\r\n            proto._dashSum = 0;\r\n            proto._ux = 0;\r\n            proto._uy = 0;\r\n        })();\r\n        return PathProxy;\r\n    }());\n\n    function containStroke(x0, y0, x1, y1, lineWidth, x, y) {\r\n        if (lineWidth === 0) {\r\n            return false;\r\n        }\r\n        var _l = lineWidth;\r\n        var _a = 0;\r\n        var _b = x0;\r\n        if ((y > y0 + _l && y > y1 + _l)\r\n            || (y < y0 - _l && y < y1 - _l)\r\n            || (x > x0 + _l && x > x1 + _l)\r\n            || (x < x0 - _l && x < x1 - _l)) {\r\n            return false;\r\n        }\r\n        if (x0 !== x1) {\r\n            _a = (y0 - y1) / (x0 - x1);\r\n            _b = (x0 * y1 - x1 * y0) / (x0 - x1);\r\n        }\r\n        else {\r\n            return Math.abs(x - x0) <= _l / 2;\r\n        }\r\n        var tmp = _a * x - y + _b;\r\n        var _s = tmp * tmp / (_a * _a + 1);\r\n        return _s <= _l / 2 * _l / 2;\r\n    }\n\n    function containStroke$1(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\r\n        if (lineWidth === 0) {\r\n            return false;\r\n        }\r\n        var _l = lineWidth;\r\n        if ((y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l)\r\n            || (y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l)\r\n            || (x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l)\r\n            || (x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l)) {\r\n            return false;\r\n        }\r\n        var d = cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\r\n        return d <= _l / 2;\r\n    }\n\n    function containStroke$2(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\r\n        if (lineWidth === 0) {\r\n            return false;\r\n        }\r\n        var _l = lineWidth;\r\n        if ((y > y0 + _l && y > y1 + _l && y > y2 + _l)\r\n            || (y < y0 - _l && y < y1 - _l && y < y2 - _l)\r\n            || (x > x0 + _l && x > x1 + _l && x > x2 + _l)\r\n            || (x < x0 - _l && x < x1 - _l && x < x2 - _l)) {\r\n            return false;\r\n        }\r\n        var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\r\n        return d <= _l / 2;\r\n    }\n\n    var PI2$2 = Math.PI * 2;\r\n    function normalizeRadian(angle) {\r\n        angle %= PI2$2;\r\n        if (angle < 0) {\r\n            angle += PI2$2;\r\n        }\r\n        return angle;\r\n    }\n\n    var PI2$3 = Math.PI * 2;\r\n    function containStroke$3(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\r\n        if (lineWidth === 0) {\r\n            return false;\r\n        }\r\n        var _l = lineWidth;\r\n        x -= cx;\r\n        y -= cy;\r\n        var d = Math.sqrt(x * x + y * y);\r\n        if ((d - _l > r) || (d + _l < r)) {\r\n            return false;\r\n        }\r\n        if (Math.abs(startAngle - endAngle) % PI2$3 < 1e-4) {\r\n            return true;\r\n        }\r\n        if (anticlockwise) {\r\n            var tmp = startAngle;\r\n            startAngle = normalizeRadian(endAngle);\r\n            endAngle = normalizeRadian(tmp);\r\n        }\r\n        else {\r\n            startAngle = normalizeRadian(startAngle);\r\n            endAngle = normalizeRadian(endAngle);\r\n        }\r\n        if (startAngle > endAngle) {\r\n            endAngle += PI2$3;\r\n        }\r\n        var angle = Math.atan2(y, x);\r\n        if (angle < 0) {\r\n            angle += PI2$3;\r\n        }\r\n        return (angle >= startAngle && angle <= endAngle)\r\n            || (angle + PI2$3 >= startAngle && angle + PI2$3 <= endAngle);\r\n    }\n\n    function windingLine(x0, y0, x1, y1, x, y) {\r\n        if ((y > y0 && y > y1) || (y < y0 && y < y1)) {\r\n            return 0;\r\n        }\r\n        if (y1 === y0) {\r\n            return 0;\r\n        }\r\n        var t = (y - y0) / (y1 - y0);\r\n        var dir = y1 < y0 ? 1 : -1;\r\n        if (t === 1 || t === 0) {\r\n            dir = y1 < y0 ? 0.5 : -0.5;\r\n        }\r\n        var x_ = t * (x1 - x0) + x0;\r\n        return x_ === x ? Infinity : x_ > x ? dir : 0;\r\n    }\n\n    var CMD$1 = PathProxy.CMD;\r\n    var PI2$4 = Math.PI * 2;\r\n    var EPSILON$2 = 1e-4;\r\n    function isAroundEqual(a, b) {\r\n        return Math.abs(a - b) < EPSILON$2;\r\n    }\r\n    var roots = [-1, -1, -1];\r\n    var extrema = [-1, -1];\r\n    function swapExtrema() {\r\n        var tmp = extrema[0];\r\n        extrema[0] = extrema[1];\r\n        extrema[1] = tmp;\r\n    }\r\n    function windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\r\n        if ((y > y0 && y > y1 && y > y2 && y > y3)\r\n            || (y < y0 && y < y1 && y < y2 && y < y3)) {\r\n            return 0;\r\n        }\r\n        var nRoots = cubicRootAt(y0, y1, y2, y3, y, roots);\r\n        if (nRoots === 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            var w = 0;\r\n            var nExtrema = -1;\r\n            var y0_ = void 0;\r\n            var y1_ = void 0;\r\n            for (var i = 0; i < nRoots; i++) {\r\n                var t = roots[i];\r\n                var unit = (t === 0 || t === 1) ? 0.5 : 1;\r\n                var x_ = cubicAt(x0, x1, x2, x3, t);\r\n                if (x_ < x) {\r\n                    continue;\r\n                }\r\n                if (nExtrema < 0) {\r\n                    nExtrema = cubicExtrema(y0, y1, y2, y3, extrema);\r\n                    if (extrema[1] < extrema[0] && nExtrema > 1) {\r\n                        swapExtrema();\r\n                    }\r\n                    y0_ = cubicAt(y0, y1, y2, y3, extrema[0]);\r\n                    if (nExtrema > 1) {\r\n                        y1_ = cubicAt(y0, y1, y2, y3, extrema[1]);\r\n                    }\r\n                }\r\n                if (nExtrema === 2) {\r\n                    if (t < extrema[0]) {\r\n                        w += y0_ < y0 ? unit : -unit;\r\n                    }\r\n                    else if (t < extrema[1]) {\r\n                        w += y1_ < y0_ ? unit : -unit;\r\n                    }\r\n                    else {\r\n                        w += y3 < y1_ ? unit : -unit;\r\n                    }\r\n                }\r\n                else {\r\n                    if (t < extrema[0]) {\r\n                        w += y0_ < y0 ? unit : -unit;\r\n                    }\r\n                    else {\r\n                        w += y3 < y0_ ? unit : -unit;\r\n                    }\r\n                }\r\n            }\r\n            return w;\r\n        }\r\n    }\r\n    function windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\r\n        if ((y > y0 && y > y1 && y > y2)\r\n            || (y < y0 && y < y1 && y < y2)) {\r\n            return 0;\r\n        }\r\n        var nRoots = quadraticRootAt(y0, y1, y2, y, roots);\r\n        if (nRoots === 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            var t = quadraticExtremum(y0, y1, y2);\r\n            if (t >= 0 && t <= 1) {\r\n                var w = 0;\r\n                var y_ = quadraticAt(y0, y1, y2, t);\r\n                for (var i = 0; i < nRoots; i++) {\r\n                    var unit = (roots[i] === 0 || roots[i] === 1) ? 0.5 : 1;\r\n                    var x_ = quadraticAt(x0, x1, x2, roots[i]);\r\n                    if (x_ < x) {\r\n                        continue;\r\n                    }\r\n                    if (roots[i] < t) {\r\n                        w += y_ < y0 ? unit : -unit;\r\n                    }\r\n                    else {\r\n                        w += y2 < y_ ? unit : -unit;\r\n                    }\r\n                }\r\n                return w;\r\n            }\r\n            else {\r\n                var unit = (roots[0] === 0 || roots[0] === 1) ? 0.5 : 1;\r\n                var x_ = quadraticAt(x0, x1, x2, roots[0]);\r\n                if (x_ < x) {\r\n                    return 0;\r\n                }\r\n                return y2 < y0 ? unit : -unit;\r\n            }\r\n        }\r\n    }\r\n    function windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\r\n        y -= cy;\r\n        if (y > r || y < -r) {\r\n            return 0;\r\n        }\r\n        var tmp = Math.sqrt(r * r - y * y);\r\n        roots[0] = -tmp;\r\n        roots[1] = tmp;\r\n        var dTheta = Math.abs(startAngle - endAngle);\r\n        if (dTheta < 1e-4) {\r\n            return 0;\r\n        }\r\n        if (dTheta % PI2$4 < 1e-4) {\r\n            startAngle = 0;\r\n            endAngle = PI2$4;\r\n            var dir = anticlockwise ? 1 : -1;\r\n            if (x >= roots[0] + cx && x <= roots[1] + cx) {\r\n                return dir;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n        if (anticlockwise) {\r\n            var tmp_1 = startAngle;\r\n            startAngle = normalizeRadian(endAngle);\r\n            endAngle = normalizeRadian(tmp_1);\r\n        }\r\n        else {\r\n            startAngle = normalizeRadian(startAngle);\r\n            endAngle = normalizeRadian(endAngle);\r\n        }\r\n        if (startAngle > endAngle) {\r\n            endAngle += PI2$4;\r\n        }\r\n        var w = 0;\r\n        for (var i = 0; i < 2; i++) {\r\n            var x_ = roots[i];\r\n            if (x_ + cx > x) {\r\n                var angle = Math.atan2(y, x_);\r\n                var dir = anticlockwise ? 1 : -1;\r\n                if (angle < 0) {\r\n                    angle = PI2$4 + angle;\r\n                }\r\n                if ((angle >= startAngle && angle <= endAngle)\r\n                    || (angle + PI2$4 >= startAngle && angle + PI2$4 <= endAngle)) {\r\n                    if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\r\n                        dir = -dir;\r\n                    }\r\n                    w += dir;\r\n                }\r\n            }\r\n        }\r\n        return w;\r\n    }\r\n    function containPath(data, lineWidth, isStroke, x, y) {\r\n        var w = 0;\r\n        var xi = 0;\r\n        var yi = 0;\r\n        var x0 = 0;\r\n        var y0 = 0;\r\n        var x1;\r\n        var y1;\r\n        for (var i = 0; i < data.length;) {\r\n            var cmd = data[i++];\r\n            if (cmd === CMD$1.M && i > 1) {\r\n                if (!isStroke) {\r\n                    w += windingLine(xi, yi, x0, y0, x, y);\r\n                }\r\n            }\r\n            if (i === 1) {\r\n                xi = data[i];\r\n                yi = data[i + 1];\r\n                x0 = xi;\r\n                y0 = yi;\r\n            }\r\n            switch (cmd) {\r\n                case CMD$1.M:\r\n                    x0 = data[i++];\r\n                    y0 = data[i++];\r\n                    xi = x0;\r\n                    yi = y0;\r\n                    break;\r\n                case CMD$1.L:\r\n                    if (isStroke) {\r\n                        if (containStroke(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\r\n                    }\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$1.C:\r\n                    if (isStroke) {\r\n                        if (containStroke$1(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\r\n                    }\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$1.Q:\r\n                    if (isStroke) {\r\n                        if (containStroke$2(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\r\n                    }\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$1.A:\r\n                    var cx = data[i++];\r\n                    var cy = data[i++];\r\n                    var rx = data[i++];\r\n                    var ry = data[i++];\r\n                    var theta = data[i++];\r\n                    var dTheta = data[i++];\r\n                    i += 1;\r\n                    var anticlockwise = !!(1 - data[i++]);\r\n                    x1 = Math.cos(theta) * rx + cx;\r\n                    y1 = Math.sin(theta) * ry + cy;\r\n                    if (i > 1) {\r\n                        w += windingLine(xi, yi, x1, y1, x, y);\r\n                    }\r\n                    else {\r\n                        x0 = x1;\r\n                        y0 = y1;\r\n                    }\r\n                    var _x = (x - cx) * ry / rx + cx;\r\n                    if (isStroke) {\r\n                        if (containStroke$3(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\r\n                    }\r\n                    xi = Math.cos(theta + dTheta) * rx + cx;\r\n                    yi = Math.sin(theta + dTheta) * ry + cy;\r\n                    break;\r\n                case CMD$1.R:\r\n                    x0 = xi = data[i++];\r\n                    y0 = yi = data[i++];\r\n                    var width = data[i++];\r\n                    var height = data[i++];\r\n                    x1 = x0 + width;\r\n                    y1 = y0 + height;\r\n                    if (isStroke) {\r\n                        if (containStroke(x0, y0, x1, y0, lineWidth, x, y)\r\n                            || containStroke(x1, y0, x1, y1, lineWidth, x, y)\r\n                            || containStroke(x1, y1, x0, y1, lineWidth, x, y)\r\n                            || containStroke(x0, y1, x0, y0, lineWidth, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingLine(x1, y0, x1, y1, x, y);\r\n                        w += windingLine(x0, y1, x0, y0, x, y);\r\n                    }\r\n                    break;\r\n                case CMD$1.Z:\r\n                    if (isStroke) {\r\n                        if (containStroke(xi, yi, x0, y0, lineWidth, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        w += windingLine(xi, yi, x0, y0, x, y);\r\n                    }\r\n                    xi = x0;\r\n                    yi = y0;\r\n                    break;\r\n            }\r\n        }\r\n        if (!isStroke && !isAroundEqual(yi, y0)) {\r\n            w += windingLine(xi, yi, x0, y0, x, y) || 0;\r\n        }\r\n        return w !== 0;\r\n    }\r\n    function contain(pathData, x, y) {\r\n        return containPath(pathData, 0, false, x, y);\r\n    }\r\n    function containStroke$4(pathData, lineWidth, x, y) {\r\n        return containPath(pathData, lineWidth, true, x, y);\r\n    }\n\n    var DEFAULT_PATH_STYLE = defaults({\r\n        fill: '#000',\r\n        stroke: null,\r\n        strokePercent: 1,\r\n        fillOpacity: 1,\r\n        strokeOpacity: 1,\r\n        lineDashOffset: 0,\r\n        lineWidth: 1,\r\n        lineCap: 'butt',\r\n        miterLimit: 10,\r\n        strokeNoScale: false,\r\n        strokeFirst: false\r\n    }, DEFAULT_COMMON_STYLE);\r\n    var DEFAULT_PATH_ANIMATION_PROPS = {\r\n        style: defaults({\r\n            fill: true,\r\n            stroke: true,\r\n            strokePercent: true,\r\n            fillOpacity: true,\r\n            strokeOpacity: true,\r\n            lineDashOffset: true,\r\n            lineWidth: true,\r\n            miterLimit: true\r\n        }, DEFAULT_COMMON_ANIMATION_PROPS.style)\r\n    };\r\n    var Path = (function (_super) {\r\n        __extends(Path, _super);\r\n        function Path(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Path.prototype._init = function (props) {\r\n            var keysArr = keys(props);\r\n            this.shape = this.getDefaultShape();\r\n            var defaultStyle = this.getDefaultStyle();\r\n            if (defaultStyle) {\r\n                this.useStyle(defaultStyle);\r\n            }\r\n            for (var i = 0; i < keysArr.length; i++) {\r\n                var key = keysArr[i];\r\n                var value = props[key];\r\n                if (key === 'style') {\r\n                    if (!this.style) {\r\n                        this.useStyle(value);\r\n                    }\r\n                    else {\r\n                        extend(this.style, value);\r\n                    }\r\n                }\r\n                else if (key === 'shape') {\r\n                    extend(this.shape, value);\r\n                }\r\n                else {\r\n                    _super.prototype.attrKV.call(this, key, value);\r\n                }\r\n            }\r\n            if (!this.style) {\r\n                this.useStyle({});\r\n            }\r\n        };\r\n        Path.prototype.getDefaultStyle = function () {\r\n            return null;\r\n        };\r\n        Path.prototype.getDefaultShape = function () {\r\n            return {};\r\n        };\r\n        Path.prototype.canBeInsideText = function () {\r\n            return this.hasFill();\r\n        };\r\n        Path.prototype.getInsideTextFill = function () {\r\n            var pathFill = this.style.fill;\r\n            if (pathFill !== 'none') {\r\n                if (isString(pathFill)) {\r\n                    var fillLum = lum(pathFill, 0);\r\n                    if (fillLum > 0.6) {\r\n                        return DARK_LABEL_COLOR;\r\n                    }\r\n                    else if (fillLum > 0.2) {\r\n                        return LIGHTER_LABEL_COLOR;\r\n                    }\r\n                    return LIGHT_LABEL_COLOR;\r\n                }\r\n                else if (pathFill) {\r\n                    return LIGHT_LABEL_COLOR;\r\n                }\r\n            }\r\n            return DARK_LABEL_COLOR;\r\n        };\r\n        Path.prototype.getInsideTextStroke = function (textFill) {\r\n            var pathFill = this.style.fill;\r\n            if (isString(pathFill)) {\r\n                var zr = this.__zr;\r\n                var isDarkMode = !!(zr && zr.isDarkMode());\r\n                var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;\r\n                if (isDarkMode === isDarkLabel) {\r\n                    return pathFill;\r\n                }\r\n            }\r\n        };\r\n        Path.prototype.buildPath = function (ctx, shapeCfg, inBundle) { };\r\n        Path.prototype.pathUpdated = function () {\r\n            this.__dirty &= ~Path.SHAPE_CHANGED_BIT;\r\n        };\r\n        Path.prototype.createPathProxy = function () {\r\n            this.path = new PathProxy(false);\r\n        };\r\n        Path.prototype.hasStroke = function () {\r\n            var style = this.style;\r\n            var stroke = style.stroke;\r\n            return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\r\n        };\r\n        Path.prototype.hasFill = function () {\r\n            var style = this.style;\r\n            var fill = style.fill;\r\n            return fill != null && fill !== 'none';\r\n        };\r\n        Path.prototype.getBoundingRect = function () {\r\n            var rect = this._rect;\r\n            var style = this.style;\r\n            var needsUpdateRect = !rect;\r\n            if (needsUpdateRect) {\r\n                var firstInvoke = false;\r\n                if (!this.path) {\r\n                    firstInvoke = true;\r\n                    this.createPathProxy();\r\n                }\r\n                var path = this.path;\r\n                if (firstInvoke || (this.__dirty & Path.SHAPE_CHANGED_BIT)) {\r\n                    path.beginPath();\r\n                    this.buildPath(path, this.shape, false);\r\n                    this.pathUpdated();\r\n                }\r\n                rect = path.getBoundingRect();\r\n            }\r\n            this._rect = rect;\r\n            if (this.hasStroke()) {\r\n                var rectWithStroke = this._rectWithStroke || (this._rectWithStroke = rect.clone());\r\n                if (this.__dirty || needsUpdateRect) {\r\n                    rectWithStroke.copy(rect);\r\n                    var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\r\n                    var w = style.lineWidth;\r\n                    if (!this.hasFill()) {\r\n                        w = Math.max(w, this.strokeContainThreshold || 4);\r\n                    }\r\n                    if (lineScale > 1e-10) {\r\n                        rectWithStroke.width += w / lineScale;\r\n                        rectWithStroke.height += w / lineScale;\r\n                        rectWithStroke.x -= w / lineScale / 2;\r\n                        rectWithStroke.y -= w / lineScale / 2;\r\n                    }\r\n                }\r\n                return rectWithStroke;\r\n            }\r\n            return rect;\r\n        };\r\n        Path.prototype.contain = function (x, y) {\r\n            var localPos = this.transformCoordToLocal(x, y);\r\n            var rect = this.getBoundingRect();\r\n            var style = this.style;\r\n            x = localPos[0];\r\n            y = localPos[1];\r\n            if (rect.contain(x, y)) {\r\n                var pathData = this.path.data;\r\n                if (this.hasStroke()) {\r\n                    var lineWidth = style.lineWidth;\r\n                    var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\r\n                    if (lineScale > 1e-10) {\r\n                        if (!this.hasFill()) {\r\n                            lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\r\n                        }\r\n                        if (containStroke$4(pathData, lineWidth / lineScale, x, y)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                if (this.hasFill()) {\r\n                    return contain(pathData, x, y);\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        Path.prototype.dirtyShape = function () {\r\n            this.__dirty |= Path.SHAPE_CHANGED_BIT;\r\n            if (this._rect) {\r\n                this._rect = null;\r\n            }\r\n            this.markRedraw();\r\n        };\r\n        Path.prototype.dirty = function () {\r\n            this.dirtyStyle();\r\n            this.dirtyShape();\r\n        };\r\n        Path.prototype.animateShape = function (loop) {\r\n            return this.animate('shape', loop);\r\n        };\r\n        Path.prototype.updateDuringAnimation = function (targetKey) {\r\n            if (targetKey === 'style') {\r\n                this.dirtyStyle();\r\n            }\r\n            else if (targetKey === 'shape') {\r\n                this.dirtyShape();\r\n            }\r\n            else {\r\n                this.markRedraw();\r\n            }\r\n        };\r\n        Path.prototype.attrKV = function (key, value) {\r\n            if (key === 'shape') {\r\n                this.setShape(value);\r\n            }\r\n            else {\r\n                _super.prototype.attrKV.call(this, key, value);\r\n            }\r\n        };\r\n        Path.prototype.setShape = function (keyOrObj, value) {\r\n            var shape = this.shape;\r\n            if (!shape) {\r\n                shape = this.shape = {};\r\n            }\r\n            if (typeof keyOrObj === 'string') {\r\n                shape[keyOrObj] = value;\r\n            }\r\n            else {\r\n                extend(shape, keyOrObj);\r\n            }\r\n            this.dirtyShape();\r\n            return this;\r\n        };\r\n        Path.prototype.shapeChanged = function () {\r\n            return !!(this.__dirty & Path.SHAPE_CHANGED_BIT);\r\n        };\r\n        Path.prototype.createStyle = function (obj) {\r\n            return createObject(DEFAULT_PATH_STYLE, obj);\r\n        };\r\n        Path.prototype._innerSaveToNormal = function (toState) {\r\n            _super.prototype._innerSaveToNormal.call(this, toState);\r\n            var normalState = this._normalState;\r\n            if (toState.shape && !normalState.shape) {\r\n                normalState.shape = extend({}, this.shape);\r\n            }\r\n        };\r\n        Path.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\r\n            _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\r\n            var needsRestoreToNormal = !(state && keepCurrentStates);\r\n            var targetShape;\r\n            if (state && state.shape) {\r\n                if (transition) {\r\n                    if (keepCurrentStates) {\r\n                        targetShape = state.shape;\r\n                    }\r\n                    else {\r\n                        targetShape = extend({}, normalState.shape);\r\n                        extend(targetShape, state.shape);\r\n                    }\r\n                }\r\n                else {\r\n                    targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);\r\n                    extend(targetShape, state.shape);\r\n                }\r\n            }\r\n            else if (needsRestoreToNormal) {\r\n                targetShape = normalState.shape;\r\n            }\r\n            if (targetShape) {\r\n                if (transition) {\r\n                    this.shape = extend({}, this.shape);\r\n                    var targetShapePrimaryProps = {};\r\n                    var shapeKeys = keys(targetShape);\r\n                    for (var i = 0; i < shapeKeys.length; i++) {\r\n                        var key = shapeKeys[i];\r\n                        if (typeof targetShape[key] === 'object') {\r\n                            this.shape[key] = targetShape[key];\r\n                        }\r\n                        else {\r\n                            targetShapePrimaryProps[key] = targetShape[key];\r\n                        }\r\n                    }\r\n                    this._transitionState(stateName, {\r\n                        shape: targetShapePrimaryProps\r\n                    }, animationCfg);\r\n                }\r\n                else {\r\n                    this.shape = targetShape;\r\n                    this.dirtyShape();\r\n                }\r\n            }\r\n        };\r\n        Path.prototype._mergeStates = function (states) {\r\n            var mergedState = _super.prototype._mergeStates.call(this, states);\r\n            var mergedShape;\r\n            for (var i = 0; i < states.length; i++) {\r\n                var state = states[i];\r\n                if (state.shape) {\r\n                    mergedShape = mergedShape || {};\r\n                    this._mergeStyle(mergedShape, state.shape);\r\n                }\r\n            }\r\n            if (mergedShape) {\r\n                mergedState.shape = mergedShape;\r\n            }\r\n            return mergedState;\r\n        };\r\n        Path.prototype._getAnimationStyleProps = function () {\r\n            return DEFAULT_PATH_ANIMATION_PROPS;\r\n        };\r\n        Path.prototype.isZeroArea = function () {\r\n            return false;\r\n        };\r\n        Path.extend = function (defaultProps) {\r\n            var Sub = (function (_super) {\r\n                __extends(Sub, _super);\r\n                function Sub(opts) {\r\n                    var _this = _super.call(this, opts) || this;\r\n                    defaultProps.init && defaultProps.init.call(_this, opts);\r\n                    return _this;\r\n                }\r\n                Sub.prototype.getDefaultStyle = function () {\r\n                    return clone(defaultProps.style);\r\n                };\r\n                Sub.prototype.getDefaultShape = function () {\r\n                    return clone(defaultProps.shape);\r\n                };\r\n                return Sub;\r\n            }(Path));\r\n            for (var key in defaultProps) {\r\n                if (typeof defaultProps[key] === 'function') {\r\n                    Sub.prototype[key] = defaultProps[key];\r\n                }\r\n            }\r\n            return Sub;\r\n        };\r\n        Path.SHAPE_CHANGED_BIT = 4;\r\n        Path.initDefaultProps = (function () {\r\n            var pathProto = Path.prototype;\r\n            pathProto.type = 'path';\r\n            pathProto.strokeContainThreshold = 5;\r\n            pathProto.segmentIgnoreThreshold = 0;\r\n            pathProto.subPixelOptimize = false;\r\n            pathProto.autoBatch = false;\r\n            pathProto.__dirty = Element.REDARAW_BIT | Displayable.STYLE_CHANGED_BIT | Path.SHAPE_CHANGED_BIT;\r\n        })();\r\n        return Path;\r\n    }(Displayable));\n\n    var CMD$2 = PathProxy.CMD;\r\n    var points = [[], [], []];\r\n    var mathSqrt$2 = Math.sqrt;\r\n    var mathAtan2 = Math.atan2;\r\n    function transformPath (path, m) {\r\n        var data = path.data;\r\n        var cmd;\r\n        var nPoint;\r\n        var i;\r\n        var j;\r\n        var k;\r\n        var p;\r\n        var M = CMD$2.M;\r\n        var C = CMD$2.C;\r\n        var L = CMD$2.L;\r\n        var R = CMD$2.R;\r\n        var A = CMD$2.A;\r\n        var Q = CMD$2.Q;\r\n        for (i = 0, j = 0; i < data.length;) {\r\n            cmd = data[i++];\r\n            j = i;\r\n            nPoint = 0;\r\n            switch (cmd) {\r\n                case M:\r\n                    nPoint = 1;\r\n                    break;\r\n                case L:\r\n                    nPoint = 1;\r\n                    break;\r\n                case C:\r\n                    nPoint = 3;\r\n                    break;\r\n                case Q:\r\n                    nPoint = 2;\r\n                    break;\r\n                case A:\r\n                    var x = m[4];\r\n                    var y = m[5];\r\n                    var sx = mathSqrt$2(m[0] * m[0] + m[1] * m[1]);\r\n                    var sy = mathSqrt$2(m[2] * m[2] + m[3] * m[3]);\r\n                    var angle = mathAtan2(-m[1] / sy, m[0] / sx);\r\n                    data[i] *= sx;\r\n                    data[i++] += x;\r\n                    data[i] *= sy;\r\n                    data[i++] += y;\r\n                    data[i++] *= sx;\r\n                    data[i++] *= sy;\r\n                    data[i++] += angle;\r\n                    data[i++] += angle;\r\n                    i += 2;\r\n                    j = i;\r\n                    break;\r\n                case R:\r\n                    p[0] = data[i++];\r\n                    p[1] = data[i++];\r\n                    applyTransform(p, p, m);\r\n                    data[j++] = p[0];\r\n                    data[j++] = p[1];\r\n                    p[0] += data[i++];\r\n                    p[1] += data[i++];\r\n                    applyTransform(p, p, m);\r\n                    data[j++] = p[0];\r\n                    data[j++] = p[1];\r\n            }\r\n            for (k = 0; k < nPoint; k++) {\r\n                var p_1 = points[k];\r\n                p_1[0] = data[i++];\r\n                p_1[1] = data[i++];\r\n                applyTransform(p_1, p_1, m);\r\n                data[j++] = p_1[0];\r\n                data[j++] = p_1[1];\r\n            }\r\n        }\r\n    }\n\n    var mathSqrt$3 = Math.sqrt;\r\n    var mathSin$2 = Math.sin;\r\n    var mathCos$2 = Math.cos;\r\n    var PI$1 = Math.PI;\r\n    function vMag(v) {\r\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\r\n    }\r\n    function vRatio(u, v) {\r\n        return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\r\n    }\r\n    function vAngle(u, v) {\r\n        return (u[0] * v[1] < u[1] * v[0] ? -1 : 1)\r\n            * Math.acos(vRatio(u, v));\r\n    }\r\n    function processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\r\n        var psi = psiDeg * (PI$1 / 180.0);\r\n        var xp = mathCos$2(psi) * (x1 - x2) / 2.0\r\n            + mathSin$2(psi) * (y1 - y2) / 2.0;\r\n        var yp = -1 * mathSin$2(psi) * (x1 - x2) / 2.0\r\n            + mathCos$2(psi) * (y1 - y2) / 2.0;\r\n        var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\r\n        if (lambda > 1) {\r\n            rx *= mathSqrt$3(lambda);\r\n            ry *= mathSqrt$3(lambda);\r\n        }\r\n        var f = (fa === fs ? -1 : 1)\r\n            * mathSqrt$3((((rx * rx) * (ry * ry))\r\n                - ((rx * rx) * (yp * yp))\r\n                - ((ry * ry) * (xp * xp))) / ((rx * rx) * (yp * yp)\r\n                + (ry * ry) * (xp * xp))) || 0;\r\n        var cxp = f * rx * yp / ry;\r\n        var cyp = f * -ry * xp / rx;\r\n        var cx = (x1 + x2) / 2.0\r\n            + mathCos$2(psi) * cxp\r\n            - mathSin$2(psi) * cyp;\r\n        var cy = (y1 + y2) / 2.0\r\n            + mathSin$2(psi) * cxp\r\n            + mathCos$2(psi) * cyp;\r\n        var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\r\n        var u = [(xp - cxp) / rx, (yp - cyp) / ry];\r\n        var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\r\n        var dTheta = vAngle(u, v);\r\n        if (vRatio(u, v) <= -1) {\r\n            dTheta = PI$1;\r\n        }\r\n        if (vRatio(u, v) >= 1) {\r\n            dTheta = 0;\r\n        }\r\n        if (dTheta < 0) {\r\n            var n = Math.round(dTheta / PI$1 * 1e6) / 1e6;\r\n            dTheta = PI$1 * 2 + (n % 2) * PI$1;\r\n        }\r\n        path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\r\n    }\r\n    var commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;\r\n    var numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\r\n    function createPathProxyFromString(data) {\r\n        if (!data) {\r\n            return new PathProxy();\r\n        }\r\n        var cpx = 0;\r\n        var cpy = 0;\r\n        var subpathX = cpx;\r\n        var subpathY = cpy;\r\n        var prevCmd;\r\n        var path = new PathProxy();\r\n        var CMD = PathProxy.CMD;\r\n        var cmdList = data.match(commandReg);\r\n        for (var l = 0; l < cmdList.length; l++) {\r\n            var cmdText = cmdList[l];\r\n            var cmdStr = cmdText.charAt(0);\r\n            var cmd = void 0;\r\n            var p = cmdText.match(numberReg) || [];\r\n            var pLen = p.length;\r\n            for (var i = 0; i < pLen; i++) {\r\n                p[i] = parseFloat(p[i]);\r\n            }\r\n            var off = 0;\r\n            while (off < pLen) {\r\n                var ctlPtx = void 0;\r\n                var ctlPty = void 0;\r\n                var rx = void 0;\r\n                var ry = void 0;\r\n                var psi = void 0;\r\n                var fa = void 0;\r\n                var fs = void 0;\r\n                var x1 = cpx;\r\n                var y1 = cpy;\r\n                var len = void 0;\r\n                var pathData = void 0;\r\n                switch (cmdStr) {\r\n                    case 'l':\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'L':\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'm':\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        cmd = CMD.M;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        subpathX = cpx;\r\n                        subpathY = cpy;\r\n                        cmdStr = 'l';\r\n                        break;\r\n                    case 'M':\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        cmd = CMD.M;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        subpathX = cpx;\r\n                        subpathY = cpy;\r\n                        cmdStr = 'L';\r\n                        break;\r\n                    case 'h':\r\n                        cpx += p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'H':\r\n                        cpx = p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'v':\r\n                        cpy += p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'V':\r\n                        cpy = p[off++];\r\n                        cmd = CMD.L;\r\n                        path.addData(cmd, cpx, cpy);\r\n                        break;\r\n                    case 'C':\r\n                        cmd = CMD.C;\r\n                        path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\r\n                        cpx = p[off - 2];\r\n                        cpy = p[off - 1];\r\n                        break;\r\n                    case 'c':\r\n                        cmd = CMD.C;\r\n                        path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\r\n                        cpx += p[off - 2];\r\n                        cpy += p[off - 1];\r\n                        break;\r\n                    case 'S':\r\n                        ctlPtx = cpx;\r\n                        ctlPty = cpy;\r\n                        len = path.len();\r\n                        pathData = path.data;\r\n                        if (prevCmd === CMD.C) {\r\n                            ctlPtx += cpx - pathData[len - 4];\r\n                            ctlPty += cpy - pathData[len - 3];\r\n                        }\r\n                        cmd = CMD.C;\r\n                        x1 = p[off++];\r\n                        y1 = p[off++];\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\r\n                        break;\r\n                    case 's':\r\n                        ctlPtx = cpx;\r\n                        ctlPty = cpy;\r\n                        len = path.len();\r\n                        pathData = path.data;\r\n                        if (prevCmd === CMD.C) {\r\n                            ctlPtx += cpx - pathData[len - 4];\r\n                            ctlPty += cpy - pathData[len - 3];\r\n                        }\r\n                        cmd = CMD.C;\r\n                        x1 = cpx + p[off++];\r\n                        y1 = cpy + p[off++];\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\r\n                        break;\r\n                    case 'Q':\r\n                        x1 = p[off++];\r\n                        y1 = p[off++];\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        cmd = CMD.Q;\r\n                        path.addData(cmd, x1, y1, cpx, cpy);\r\n                        break;\r\n                    case 'q':\r\n                        x1 = p[off++] + cpx;\r\n                        y1 = p[off++] + cpy;\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        cmd = CMD.Q;\r\n                        path.addData(cmd, x1, y1, cpx, cpy);\r\n                        break;\r\n                    case 'T':\r\n                        ctlPtx = cpx;\r\n                        ctlPty = cpy;\r\n                        len = path.len();\r\n                        pathData = path.data;\r\n                        if (prevCmd === CMD.Q) {\r\n                            ctlPtx += cpx - pathData[len - 4];\r\n                            ctlPty += cpy - pathData[len - 3];\r\n                        }\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        cmd = CMD.Q;\r\n                        path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\r\n                        break;\r\n                    case 't':\r\n                        ctlPtx = cpx;\r\n                        ctlPty = cpy;\r\n                        len = path.len();\r\n                        pathData = path.data;\r\n                        if (prevCmd === CMD.Q) {\r\n                            ctlPtx += cpx - pathData[len - 4];\r\n                            ctlPty += cpy - pathData[len - 3];\r\n                        }\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        cmd = CMD.Q;\r\n                        path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\r\n                        break;\r\n                    case 'A':\r\n                        rx = p[off++];\r\n                        ry = p[off++];\r\n                        psi = p[off++];\r\n                        fa = p[off++];\r\n                        fs = p[off++];\r\n                        x1 = cpx, y1 = cpy;\r\n                        cpx = p[off++];\r\n                        cpy = p[off++];\r\n                        cmd = CMD.A;\r\n                        processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\r\n                        break;\r\n                    case 'a':\r\n                        rx = p[off++];\r\n                        ry = p[off++];\r\n                        psi = p[off++];\r\n                        fa = p[off++];\r\n                        fs = p[off++];\r\n                        x1 = cpx, y1 = cpy;\r\n                        cpx += p[off++];\r\n                        cpy += p[off++];\r\n                        cmd = CMD.A;\r\n                        processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\r\n                        break;\r\n                }\r\n            }\r\n            if (cmdStr === 'z' || cmdStr === 'Z') {\r\n                cmd = CMD.Z;\r\n                path.addData(cmd);\r\n                cpx = subpathX;\r\n                cpy = subpathY;\r\n            }\r\n            prevCmd = cmd;\r\n        }\r\n        path.toStatic();\r\n        return path;\r\n    }\r\n    var SVGPath = (function (_super) {\r\n        __extends(SVGPath, _super);\r\n        function SVGPath() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        SVGPath.prototype.applyTransform = function (m) { };\r\n        return SVGPath;\r\n    }(Path));\r\n    function isPathProxy(path) {\r\n        return path.setData != null;\r\n    }\r\n    function createPathOptions(str, opts) {\r\n        var pathProxy = createPathProxyFromString(str);\r\n        var innerOpts = extend({}, opts);\r\n        innerOpts.buildPath = function (path) {\r\n            if (isPathProxy(path)) {\r\n                path.setData(pathProxy.data);\r\n                var ctx = path.getContext();\r\n                if (ctx) {\r\n                    path.rebuildPath(ctx, 1);\r\n                }\r\n            }\r\n            else {\r\n                var ctx = path;\r\n                pathProxy.rebuildPath(ctx, 1);\r\n            }\r\n        };\r\n        innerOpts.applyTransform = function (m) {\r\n            transformPath(pathProxy, m);\r\n            this.dirtyShape();\r\n        };\r\n        return innerOpts;\r\n    }\r\n    function createFromString(str, opts) {\r\n        return new SVGPath(createPathOptions(str, opts));\r\n    }\r\n    function extendFromString(str, defaultOpts) {\r\n        var innerOpts = createPathOptions(str, defaultOpts);\r\n        var Sub = (function (_super) {\r\n            __extends(Sub, _super);\r\n            function Sub(opts) {\r\n                var _this = _super.call(this, opts) || this;\r\n                _this.applyTransform = innerOpts.applyTransform;\r\n                _this.buildPath = innerOpts.buildPath;\r\n                return _this;\r\n            }\r\n            return Sub;\r\n        }(SVGPath));\r\n        return Sub;\r\n    }\r\n    function mergePath(pathEls, opts) {\r\n        var pathList = [];\r\n        var len = pathEls.length;\r\n        for (var i = 0; i < len; i++) {\r\n            var pathEl = pathEls[i];\r\n            if (!pathEl.path) {\r\n                pathEl.createPathProxy();\r\n            }\r\n            if (pathEl.shapeChanged()) {\r\n                pathEl.buildPath(pathEl.path, pathEl.shape, true);\r\n            }\r\n            pathList.push(pathEl.path);\r\n        }\r\n        var pathBundle = new Path(opts);\r\n        pathBundle.createPathProxy();\r\n        pathBundle.buildPath = function (path) {\r\n            if (isPathProxy(path)) {\r\n                path.appendPath(pathList);\r\n                var ctx = path.getContext();\r\n                if (ctx) {\r\n                    path.rebuildPath(ctx, 1);\r\n                }\r\n            }\r\n        };\r\n        return pathBundle;\r\n    }\n\n    var Group = (function (_super) {\r\n        __extends(Group, _super);\r\n        function Group(opts) {\r\n            var _this = _super.call(this) || this;\r\n            _this.isGroup = true;\r\n            _this._children = [];\r\n            _this.attr(opts);\r\n            return _this;\r\n        }\r\n        Group.prototype.childrenRef = function () {\r\n            return this._children;\r\n        };\r\n        Group.prototype.children = function () {\r\n            return this._children.slice();\r\n        };\r\n        Group.prototype.childAt = function (idx) {\r\n            return this._children[idx];\r\n        };\r\n        Group.prototype.childOfName = function (name) {\r\n            var children = this._children;\r\n            for (var i = 0; i < children.length; i++) {\r\n                if (children[i].name === name) {\r\n                    return children[i];\r\n                }\r\n            }\r\n        };\r\n        Group.prototype.childCount = function () {\r\n            return this._children.length;\r\n        };\r\n        Group.prototype.add = function (child) {\r\n            if (child) {\r\n                if (child !== this && child.parent !== this) {\r\n                    this._children.push(child);\r\n                    this._doAdd(child);\r\n                }\r\n                if (child.__hostTarget) {\r\n                    throw 'This elemenet has been used as an attachment';\r\n                }\r\n            }\r\n            return this;\r\n        };\r\n        Group.prototype.addBefore = function (child, nextSibling) {\r\n            if (child && child !== this && child.parent !== this\r\n                && nextSibling && nextSibling.parent === this) {\r\n                var children = this._children;\r\n                var idx = children.indexOf(nextSibling);\r\n                if (idx >= 0) {\r\n                    children.splice(idx, 0, child);\r\n                    this._doAdd(child);\r\n                }\r\n            }\r\n            return this;\r\n        };\r\n        Group.prototype.replaceAt = function (child, index) {\r\n            var children = this._children;\r\n            var old = children[index];\r\n            if (child && child !== this && child.parent !== this && child !== old) {\r\n                children[index] = child;\r\n                old.parent = null;\r\n                var zr = this.__zr;\r\n                if (zr) {\r\n                    old.removeSelfFromZr(zr);\r\n                }\r\n                this._doAdd(child);\r\n            }\r\n            return this;\r\n        };\r\n        Group.prototype._doAdd = function (child) {\r\n            if (child.parent) {\r\n                child.parent.remove(child);\r\n            }\r\n            child.parent = this;\r\n            var zr = this.__zr;\r\n            if (zr && zr !== child.__zr) {\r\n                child.addSelfToZr(zr);\r\n            }\r\n            zr && zr.refresh();\r\n        };\r\n        Group.prototype.remove = function (child) {\r\n            var zr = this.__zr;\r\n            var children = this._children;\r\n            var idx = indexOf(children, child);\r\n            if (idx < 0) {\r\n                return this;\r\n            }\r\n            children.splice(idx, 1);\r\n            child.parent = null;\r\n            if (zr) {\r\n                child.removeSelfFromZr(zr);\r\n            }\r\n            zr && zr.refresh();\r\n            return this;\r\n        };\r\n        Group.prototype.removeAll = function () {\r\n            var children = this._children;\r\n            var zr = this.__zr;\r\n            for (var i = 0; i < children.length; i++) {\r\n                var child = children[i];\r\n                if (zr) {\r\n                    child.removeSelfFromZr(zr);\r\n                }\r\n                child.parent = null;\r\n            }\r\n            children.length = 0;\r\n            return this;\r\n        };\r\n        Group.prototype.eachChild = function (cb, context) {\r\n            var children = this._children;\r\n            for (var i = 0; i < children.length; i++) {\r\n                var child = children[i];\r\n                cb.call(context, child, i);\r\n            }\r\n            return this;\r\n        };\r\n        Group.prototype.traverse = function (cb, context) {\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                var child = this._children[i];\r\n                var stopped = cb.call(context, child);\r\n                if (child.isGroup && !stopped) {\r\n                    child.traverse(cb, context);\r\n                }\r\n            }\r\n            return this;\r\n        };\r\n        Group.prototype.addSelfToZr = function (zr) {\r\n            _super.prototype.addSelfToZr.call(this, zr);\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                var child = this._children[i];\r\n                child.addSelfToZr(zr);\r\n            }\r\n        };\r\n        Group.prototype.removeSelfFromZr = function (zr) {\r\n            _super.prototype.removeSelfFromZr.call(this, zr);\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                var child = this._children[i];\r\n                child.removeSelfFromZr(zr);\r\n            }\r\n        };\r\n        Group.prototype.getBoundingRect = function (includeChildren) {\r\n            var tmpRect = new BoundingRect(0, 0, 0, 0);\r\n            var children = includeChildren || this._children;\r\n            var tmpMat = [];\r\n            var rect = null;\r\n            for (var i = 0; i < children.length; i++) {\r\n                var child = children[i];\r\n                if (child.ignore || child.invisible) {\r\n                    continue;\r\n                }\r\n                var childRect = child.getBoundingRect();\r\n                var transform = child.getLocalTransform(tmpMat);\r\n                if (transform) {\r\n                    BoundingRect.applyTransform(tmpRect, childRect, transform);\r\n                    rect = rect || tmpRect.clone();\r\n                    rect.union(tmpRect);\r\n                }\r\n                else {\r\n                    rect = rect || childRect.clone();\r\n                    rect.union(childRect);\r\n                }\r\n            }\r\n            return rect || tmpRect;\r\n        };\r\n        return Group;\r\n    }(Element));\r\n    Group.prototype.type = 'group';\n\n    var DEFAULT_IMAGE_STYLE = defaults({\r\n        x: 0,\r\n        y: 0\r\n    }, DEFAULT_COMMON_STYLE);\r\n    var DEFAULT_IMAGE_ANIMATION_PROPS = {\r\n        style: defaults({\r\n            x: true,\r\n            y: true,\r\n            width: true,\r\n            height: true,\r\n            sx: true,\r\n            sy: true,\r\n            sWidth: true,\r\n            sHeight: true\r\n        }, DEFAULT_COMMON_ANIMATION_PROPS.style)\r\n    };\r\n    var ZRImage = (function (_super) {\r\n        __extends(ZRImage, _super);\r\n        function ZRImage() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ZRImage.prototype.createStyle = function (obj) {\r\n            return createObject(DEFAULT_IMAGE_STYLE, obj);\r\n        };\r\n        ZRImage.prototype._getAnimationStyleProps = function () {\r\n            return DEFAULT_IMAGE_ANIMATION_PROPS;\r\n        };\r\n        ZRImage.prototype.getBoundingRect = function () {\r\n            var style = this.style;\r\n            if (!this._rect) {\r\n                this._rect = new BoundingRect(style.x || 0, style.y || 0, style.width || 0, style.height || 0);\r\n            }\r\n            return this._rect;\r\n        };\r\n        return ZRImage;\r\n    }(Displayable));\r\n    ZRImage.prototype.type = 'image';\n\n    var CircleShape = (function () {\r\n        function CircleShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r = 0;\r\n        }\r\n        return CircleShape;\r\n    }());\r\n    var Circle = (function (_super) {\r\n        __extends(Circle, _super);\r\n        function Circle(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Circle.prototype.getDefaultShape = function () {\r\n            return new CircleShape();\r\n        };\r\n        Circle.prototype.buildPath = function (ctx, shape, inBundle) {\r\n            if (inBundle) {\r\n                ctx.moveTo(shape.cx + shape.r, shape.cy);\r\n            }\r\n            ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\r\n        };\r\n        return Circle;\r\n    }(Path));\r\n    Circle.prototype.type = 'circle';\n\n    function buildPath(ctx, shape) {\r\n        var x = shape.x;\r\n        var y = shape.y;\r\n        var width = shape.width;\r\n        var height = shape.height;\r\n        var r = shape.r;\r\n        var r1;\r\n        var r2;\r\n        var r3;\r\n        var r4;\r\n        if (width < 0) {\r\n            x = x + width;\r\n            width = -width;\r\n        }\r\n        if (height < 0) {\r\n            y = y + height;\r\n            height = -height;\r\n        }\r\n        if (typeof r === 'number') {\r\n            r1 = r2 = r3 = r4 = r;\r\n        }\r\n        else if (r instanceof Array) {\r\n            if (r.length === 1) {\r\n                r1 = r2 = r3 = r4 = r[0];\r\n            }\r\n            else if (r.length === 2) {\r\n                r1 = r3 = r[0];\r\n                r2 = r4 = r[1];\r\n            }\r\n            else if (r.length === 3) {\r\n                r1 = r[0];\r\n                r2 = r4 = r[1];\r\n                r3 = r[2];\r\n            }\r\n            else {\r\n                r1 = r[0];\r\n                r2 = r[1];\r\n                r3 = r[2];\r\n                r4 = r[3];\r\n            }\r\n        }\r\n        else {\r\n            r1 = r2 = r3 = r4 = 0;\r\n        }\r\n        var total;\r\n        if (r1 + r2 > width) {\r\n            total = r1 + r2;\r\n            r1 *= width / total;\r\n            r2 *= width / total;\r\n        }\r\n        if (r3 + r4 > width) {\r\n            total = r3 + r4;\r\n            r3 *= width / total;\r\n            r4 *= width / total;\r\n        }\r\n        if (r2 + r3 > height) {\r\n            total = r2 + r3;\r\n            r2 *= height / total;\r\n            r3 *= height / total;\r\n        }\r\n        if (r1 + r4 > height) {\r\n            total = r1 + r4;\r\n            r1 *= height / total;\r\n            r4 *= height / total;\r\n        }\r\n        ctx.moveTo(x + r1, y);\r\n        ctx.lineTo(x + width - r2, y);\r\n        r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\r\n        ctx.lineTo(x + width, y + height - r3);\r\n        r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\r\n        ctx.lineTo(x + r4, y + height);\r\n        r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\r\n        ctx.lineTo(x, y + r1);\r\n        r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\r\n    }\n\n    var round = Math.round;\r\n    function subPixelOptimizeLine(outputShape, inputShape, style) {\r\n        if (!inputShape) {\r\n            return;\r\n        }\r\n        var x1 = inputShape.x1;\r\n        var x2 = inputShape.x2;\r\n        var y1 = inputShape.y1;\r\n        var y2 = inputShape.y2;\r\n        outputShape.x1 = x1;\r\n        outputShape.x2 = x2;\r\n        outputShape.y1 = y1;\r\n        outputShape.y2 = y2;\r\n        var lineWidth = style && style.lineWidth;\r\n        if (!lineWidth) {\r\n            return outputShape;\r\n        }\r\n        if (round(x1 * 2) === round(x2 * 2)) {\r\n            outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\r\n        }\r\n        if (round(y1 * 2) === round(y2 * 2)) {\r\n            outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\r\n        }\r\n        return outputShape;\r\n    }\r\n    function subPixelOptimizeRect(outputShape, inputShape, style) {\r\n        if (!inputShape) {\r\n            return;\r\n        }\r\n        var originX = inputShape.x;\r\n        var originY = inputShape.y;\r\n        var originWidth = inputShape.width;\r\n        var originHeight = inputShape.height;\r\n        outputShape.x = originX;\r\n        outputShape.y = originY;\r\n        outputShape.width = originWidth;\r\n        outputShape.height = originHeight;\r\n        var lineWidth = style && style.lineWidth;\r\n        if (!lineWidth) {\r\n            return outputShape;\r\n        }\r\n        outputShape.x = subPixelOptimize(originX, lineWidth, true);\r\n        outputShape.y = subPixelOptimize(originY, lineWidth, true);\r\n        outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\r\n        outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\r\n        return outputShape;\r\n    }\r\n    function subPixelOptimize(position, lineWidth, positiveOrNegative) {\r\n        if (!lineWidth) {\r\n            return position;\r\n        }\r\n        var doubledPosition = round(position * 2);\r\n        return (doubledPosition + round(lineWidth)) % 2 === 0\r\n            ? doubledPosition / 2\r\n            : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\r\n    }\n\n    var RectShape = (function () {\r\n        function RectShape() {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            this.width = 0;\r\n            this.height = 0;\r\n        }\r\n        return RectShape;\r\n    }());\r\n    var subPixelOptimizeOutputShape = {};\r\n    var Rect = (function (_super) {\r\n        __extends(Rect, _super);\r\n        function Rect(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Rect.prototype.getDefaultShape = function () {\r\n            return new RectShape();\r\n        };\r\n        Rect.prototype.buildPath = function (ctx, shape) {\r\n            var x;\r\n            var y;\r\n            var width;\r\n            var height;\r\n            if (this.subPixelOptimize) {\r\n                var optimizedShape = subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\r\n                x = optimizedShape.x;\r\n                y = optimizedShape.y;\r\n                width = optimizedShape.width;\r\n                height = optimizedShape.height;\r\n                optimizedShape.r = shape.r;\r\n                shape = optimizedShape;\r\n            }\r\n            else {\r\n                x = shape.x;\r\n                y = shape.y;\r\n                width = shape.width;\r\n                height = shape.height;\r\n            }\r\n            if (!shape.r) {\r\n                ctx.rect(x, y, width, height);\r\n            }\r\n            else {\r\n                buildPath(ctx, shape);\r\n            }\r\n        };\r\n        Rect.prototype.isZeroArea = function () {\r\n            return !this.shape.width || !this.shape.height;\r\n        };\r\n        return Rect;\r\n    }(Path));\r\n    Rect.prototype.type = 'rect';\n\n    var EllipseShape = (function () {\r\n        function EllipseShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.rx = 0;\r\n            this.ry = 0;\r\n        }\r\n        return EllipseShape;\r\n    }());\r\n    var Ellipse = (function (_super) {\r\n        __extends(Ellipse, _super);\r\n        function Ellipse(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Ellipse.prototype.getDefaultShape = function () {\r\n            return new EllipseShape();\r\n        };\r\n        Ellipse.prototype.buildPath = function (ctx, shape) {\r\n            var k = 0.5522848;\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var a = shape.rx;\r\n            var b = shape.ry;\r\n            var ox = a * k;\r\n            var oy = b * k;\r\n            ctx.moveTo(x - a, y);\r\n            ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\r\n            ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\r\n            ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\r\n            ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\r\n            ctx.closePath();\r\n        };\r\n        return Ellipse;\r\n    }(Path));\r\n    Ellipse.prototype.type = 'ellipse';\n\n    var subPixelOptimizeOutputShape$1 = {};\r\n    var LineShape = (function () {\r\n        function LineShape() {\r\n            this.x1 = 0;\r\n            this.y1 = 0;\r\n            this.x2 = 0;\r\n            this.y2 = 0;\r\n            this.percent = 1;\r\n        }\r\n        return LineShape;\r\n    }());\r\n    var Line = (function (_super) {\r\n        __extends(Line, _super);\r\n        function Line(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Line.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        Line.prototype.getDefaultShape = function () {\r\n            return new LineShape();\r\n        };\r\n        Line.prototype.buildPath = function (ctx, shape) {\r\n            var x1;\r\n            var y1;\r\n            var x2;\r\n            var y2;\r\n            if (this.subPixelOptimize) {\r\n                var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape$1, shape, this.style);\r\n                x1 = optimizedShape.x1;\r\n                y1 = optimizedShape.y1;\r\n                x2 = optimizedShape.x2;\r\n                y2 = optimizedShape.y2;\r\n            }\r\n            else {\r\n                x1 = shape.x1;\r\n                y1 = shape.y1;\r\n                x2 = shape.x2;\r\n                y2 = shape.y2;\r\n            }\r\n            var percent = shape.percent;\r\n            if (percent === 0) {\r\n                return;\r\n            }\r\n            ctx.moveTo(x1, y1);\r\n            if (percent < 1) {\r\n                x2 = x1 * (1 - percent) + x2 * percent;\r\n                y2 = y1 * (1 - percent) + y2 * percent;\r\n            }\r\n            ctx.lineTo(x2, y2);\r\n        };\r\n        Line.prototype.pointAt = function (p) {\r\n            var shape = this.shape;\r\n            return [\r\n                shape.x1 * (1 - p) + shape.x2 * p,\r\n                shape.y1 * (1 - p) + shape.y2 * p\r\n            ];\r\n        };\r\n        return Line;\r\n    }(Path));\r\n    Line.prototype.type = 'line';\n\n    function interpolate(p0, p1, p2, p3, t, t2, t3) {\r\n        var v0 = (p2 - p0) * 0.5;\r\n        var v1 = (p3 - p1) * 0.5;\r\n        return (2 * (p1 - p2) + v0 + v1) * t3\r\n            + (-3 * (p1 - p2) - 2 * v0 - v1) * t2\r\n            + v0 * t + p1;\r\n    }\r\n    function smoothSpline (points, isLoop) {\r\n        var len = points.length;\r\n        var ret = [];\r\n        var distance$1 = 0;\r\n        for (var i = 1; i < len; i++) {\r\n            distance$1 += distance(points[i - 1], points[i]);\r\n        }\r\n        var segs = distance$1 / 2;\r\n        segs = segs < len ? len : segs;\r\n        for (var i = 0; i < segs; i++) {\r\n            var pos = i / (segs - 1) * (isLoop ? len : len - 1);\r\n            var idx = Math.floor(pos);\r\n            var w = pos - idx;\r\n            var p0 = void 0;\r\n            var p1 = points[idx % len];\r\n            var p2 = void 0;\r\n            var p3 = void 0;\r\n            if (!isLoop) {\r\n                p0 = points[idx === 0 ? idx : idx - 1];\r\n                p2 = points[idx > len - 2 ? len - 1 : idx + 1];\r\n                p3 = points[idx > len - 3 ? len - 1 : idx + 2];\r\n            }\r\n            else {\r\n                p0 = points[(idx - 1 + len) % len];\r\n                p2 = points[(idx + 1) % len];\r\n                p3 = points[(idx + 2) % len];\r\n            }\r\n            var w2 = w * w;\r\n            var w3 = w * w2;\r\n            ret.push([\r\n                interpolate(p0[0], p1[0], p2[0], p3[0], w, w2, w3),\r\n                interpolate(p0[1], p1[1], p2[1], p3[1], w, w2, w3)\r\n            ]);\r\n        }\r\n        return ret;\r\n    }\n\n    function smoothBezier (points, smooth, isLoop, constraint) {\r\n        var cps = [];\r\n        var v = [];\r\n        var v1 = [];\r\n        var v2 = [];\r\n        var prevPoint;\r\n        var nextPoint;\r\n        var min$1;\r\n        var max$1;\r\n        if (constraint) {\r\n            min$1 = [Infinity, Infinity];\r\n            max$1 = [-Infinity, -Infinity];\r\n            for (var i = 0, len = points.length; i < len; i++) {\r\n                min(min$1, min$1, points[i]);\r\n                max(max$1, max$1, points[i]);\r\n            }\r\n            min(min$1, min$1, constraint[0]);\r\n            max(max$1, max$1, constraint[1]);\r\n        }\r\n        for (var i = 0, len = points.length; i < len; i++) {\r\n            var point = points[i];\r\n            if (isLoop) {\r\n                prevPoint = points[i ? i - 1 : len - 1];\r\n                nextPoint = points[(i + 1) % len];\r\n            }\r\n            else {\r\n                if (i === 0 || i === len - 1) {\r\n                    cps.push(clone$1(points[i]));\r\n                    continue;\r\n                }\r\n                else {\r\n                    prevPoint = points[i - 1];\r\n                    nextPoint = points[i + 1];\r\n                }\r\n            }\r\n            sub(v, nextPoint, prevPoint);\r\n            scale(v, v, smooth);\r\n            var d0 = distance(point, prevPoint);\r\n            var d1 = distance(point, nextPoint);\r\n            var sum = d0 + d1;\r\n            if (sum !== 0) {\r\n                d0 /= sum;\r\n                d1 /= sum;\r\n            }\r\n            scale(v1, v, -d0);\r\n            scale(v2, v, d1);\r\n            var cp0 = add([], point, v1);\r\n            var cp1 = add([], point, v2);\r\n            if (constraint) {\r\n                max(cp0, cp0, min$1);\r\n                min(cp0, cp0, max$1);\r\n                max(cp1, cp1, min$1);\r\n                min(cp1, cp1, max$1);\r\n            }\r\n            cps.push(cp0);\r\n            cps.push(cp1);\r\n        }\r\n        if (isLoop) {\r\n            cps.push(cps.shift());\r\n        }\r\n        return cps;\r\n    }\n\n    function buildPath$1(ctx, shape, closePath) {\r\n        var smooth = shape.smooth;\r\n        var points = shape.points;\r\n        if (points && points.length >= 2) {\r\n            if (smooth && smooth !== 'spline') {\r\n                var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\r\n                ctx.moveTo(points[0][0], points[0][1]);\r\n                var len = points.length;\r\n                for (var i = 0; i < (closePath ? len : len - 1); i++) {\r\n                    var cp1 = controlPoints[i * 2];\r\n                    var cp2 = controlPoints[i * 2 + 1];\r\n                    var p = points[(i + 1) % len];\r\n                    ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\r\n                }\r\n            }\r\n            else {\r\n                if (smooth === 'spline') {\r\n                    points = smoothSpline(points, closePath);\r\n                }\r\n                ctx.moveTo(points[0][0], points[0][1]);\r\n                for (var i = 1, l = points.length; i < l; i++) {\r\n                    ctx.lineTo(points[i][0], points[i][1]);\r\n                }\r\n            }\r\n            closePath && ctx.closePath();\r\n        }\r\n    }\n\n    var PolygonShape = (function () {\r\n        function PolygonShape() {\r\n            this.points = null;\r\n            this.smooth = 0;\r\n            this.smoothConstraint = null;\r\n        }\r\n        return PolygonShape;\r\n    }());\r\n    var Polygon = (function (_super) {\r\n        __extends(Polygon, _super);\r\n        function Polygon(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Polygon.prototype.getDefaultShape = function () {\r\n            return new PolygonShape();\r\n        };\r\n        Polygon.prototype.buildPath = function (ctx, shape) {\r\n            buildPath$1(ctx, shape, true);\r\n        };\r\n        return Polygon;\r\n    }(Path));\r\n    Polygon.prototype.type = 'polygon';\n\n    var PolylineShape = (function () {\r\n        function PolylineShape() {\r\n            this.points = null;\r\n            this.percent = 1;\r\n            this.smooth = 0;\r\n            this.smoothConstraint = null;\r\n        }\r\n        return PolylineShape;\r\n    }());\r\n    var Polyline = (function (_super) {\r\n        __extends(Polyline, _super);\r\n        function Polyline(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Polyline.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        Polyline.prototype.getDefaultShape = function () {\r\n            return new PolylineShape();\r\n        };\r\n        Polyline.prototype.buildPath = function (ctx, shape) {\r\n            buildPath$1(ctx, shape, false);\r\n        };\r\n        return Polyline;\r\n    }(Path));\r\n    Polyline.prototype.type = 'polyline';\n\n    var Gradient = (function () {\r\n        function Gradient(colorStops) {\r\n            this.colorStops = colorStops || [];\r\n        }\r\n        Gradient.prototype.addColorStop = function (offset, color) {\r\n            this.colorStops.push({\r\n                offset: offset,\r\n                color: color\r\n            });\r\n        };\r\n        return Gradient;\r\n    }());\n\n    var LinearGradient = (function (_super) {\r\n        __extends(LinearGradient, _super);\r\n        function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\r\n            var _this = _super.call(this, colorStops) || this;\r\n            _this.x = x == null ? 0 : x;\r\n            _this.y = y == null ? 0 : y;\r\n            _this.x2 = x2 == null ? 1 : x2;\r\n            _this.y2 = y2 == null ? 0 : y2;\r\n            _this.type = 'linear';\r\n            _this.global = globalCoord || false;\r\n            return _this;\r\n        }\r\n        return LinearGradient;\r\n    }(Gradient));\n\n    var DEFAULT_TSPAN_STYLE = defaults({\r\n        strokeFirst: true,\r\n        font: DEFAULT_FONT,\r\n        x: 0,\r\n        y: 0,\r\n        textAlign: 'left',\r\n        textBaseline: 'top'\r\n    }, DEFAULT_PATH_STYLE);\r\n    var TSpan = (function (_super) {\r\n        __extends(TSpan, _super);\r\n        function TSpan() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        TSpan.prototype.hasStroke = function () {\r\n            var style = this.style;\r\n            var stroke = style.stroke;\r\n            return stroke != null && stroke !== 'none' && style.lineWidth > 0;\r\n        };\r\n        TSpan.prototype.hasFill = function () {\r\n            var style = this.style;\r\n            var fill = style.fill;\r\n            return fill != null && fill !== 'none';\r\n        };\r\n        TSpan.prototype.createStyle = function (obj) {\r\n            return createObject(DEFAULT_TSPAN_STYLE, obj);\r\n        };\r\n        TSpan.prototype.setBoundingRect = function (rect) {\r\n            this._rect = rect;\r\n        };\r\n        TSpan.prototype.getBoundingRect = function () {\r\n            var style = this.style;\r\n            if (!this._rect) {\r\n                var text = style.text;\r\n                text != null ? (text += '') : (text = '');\r\n                var rect = getBoundingRect(text, style.font, style.textAlign, style.textBaseline);\r\n                rect.x += style.x || 0;\r\n                rect.y += style.y || 0;\r\n                if (this.hasStroke()) {\r\n                    var w = style.lineWidth;\r\n                    rect.x -= w / 2;\r\n                    rect.y -= w / 2;\r\n                    rect.width += w;\r\n                    rect.height += w;\r\n                }\r\n                this._rect = rect;\r\n            }\r\n            return this._rect;\r\n        };\r\n        return TSpan;\r\n    }(Displayable));\r\n    TSpan.prototype.type = 'tspan';\n\n    function parseXML(svg) {\r\n        if (isString(svg)) {\r\n            var parser = new DOMParser();\r\n            svg = parser.parseFromString(svg, 'text/xml');\r\n        }\r\n        var svgNode = svg;\r\n        if (svgNode.nodeType === 9) {\r\n            svgNode = svgNode.firstChild;\r\n        }\r\n        while (svgNode.nodeName.toLowerCase() !== 'svg' || svgNode.nodeType !== 1) {\r\n            svgNode = svgNode.nextSibling;\r\n        }\r\n        return svgNode;\r\n    }\n\n    var CompoundPath = (function (_super) {\r\n        __extends(CompoundPath, _super);\r\n        function CompoundPath() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'compound';\r\n            return _this;\r\n        }\r\n        CompoundPath.prototype._updatePathDirty = function () {\r\n            var paths = this.shape.paths;\r\n            var dirtyPath = this.shapeChanged();\r\n            for (var i = 0; i < paths.length; i++) {\r\n                dirtyPath = dirtyPath || paths[i].shapeChanged();\r\n            }\r\n            if (dirtyPath) {\r\n                this.dirtyShape();\r\n            }\r\n        };\r\n        CompoundPath.prototype.beforeBrush = function () {\r\n            this._updatePathDirty();\r\n            var paths = this.shape.paths || [];\r\n            var scale = this.getGlobalScale();\r\n            for (var i = 0; i < paths.length; i++) {\r\n                if (!paths[i].path) {\r\n                    paths[i].createPathProxy();\r\n                }\r\n                paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\r\n            }\r\n        };\r\n        CompoundPath.prototype.buildPath = function (ctx, shape) {\r\n            var paths = shape.paths || [];\r\n            for (var i = 0; i < paths.length; i++) {\r\n                paths[i].buildPath(ctx, paths[i].shape, true);\r\n            }\r\n        };\r\n        CompoundPath.prototype.afterBrush = function () {\r\n            var paths = this.shape.paths || [];\r\n            for (var i = 0; i < paths.length; i++) {\r\n                paths[i].pathUpdated();\r\n            }\r\n        };\r\n        CompoundPath.prototype.getBoundingRect = function () {\r\n            this._updatePathDirty.call(this);\r\n            return Path.prototype.getBoundingRect.call(this);\r\n        };\r\n        return CompoundPath;\r\n    }(Path));\n\n    var m = [];\r\n    var IncrementalDisplayble = (function (_super) {\r\n        __extends(IncrementalDisplayble, _super);\r\n        function IncrementalDisplayble() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.notClear = true;\r\n            _this.incremental = true;\r\n            _this._displayables = [];\r\n            _this._temporaryDisplayables = [];\r\n            _this._cursor = 0;\r\n            return _this;\r\n        }\r\n        IncrementalDisplayble.prototype.traverse = function (cb, context) {\r\n            cb.call(context, this);\r\n        };\r\n        IncrementalDisplayble.prototype.useStyle = function () {\r\n            this.style = {};\r\n        };\r\n        IncrementalDisplayble.prototype.getCursor = function () {\r\n            return this._cursor;\r\n        };\r\n        IncrementalDisplayble.prototype.innerAfterBrush = function () {\r\n            this._cursor = this._displayables.length;\r\n        };\r\n        IncrementalDisplayble.prototype.clearDisplaybles = function () {\r\n            this._displayables = [];\r\n            this._temporaryDisplayables = [];\r\n            this._cursor = 0;\r\n            this.markRedraw();\r\n            this.notClear = false;\r\n        };\r\n        IncrementalDisplayble.prototype.clearTemporalDisplayables = function () {\r\n            this._temporaryDisplayables = [];\r\n        };\r\n        IncrementalDisplayble.prototype.addDisplayable = function (displayable, notPersistent) {\r\n            if (notPersistent) {\r\n                this._temporaryDisplayables.push(displayable);\r\n            }\r\n            else {\r\n                this._displayables.push(displayable);\r\n            }\r\n            this.markRedraw();\r\n        };\r\n        IncrementalDisplayble.prototype.addDisplayables = function (displayables, notPersistent) {\r\n            notPersistent = notPersistent || false;\r\n            for (var i = 0; i < displayables.length; i++) {\r\n                this.addDisplayable(displayables[i], notPersistent);\r\n            }\r\n        };\r\n        IncrementalDisplayble.prototype.getDisplayables = function () {\r\n            return this._displayables;\r\n        };\r\n        IncrementalDisplayble.prototype.getTemporalDisplayables = function () {\r\n            return this._temporaryDisplayables;\r\n        };\r\n        IncrementalDisplayble.prototype.eachPendingDisplayable = function (cb) {\r\n            for (var i = this._cursor; i < this._displayables.length; i++) {\r\n                cb && cb(this._displayables[i]);\r\n            }\r\n            for (var i = 0; i < this._temporaryDisplayables.length; i++) {\r\n                cb && cb(this._temporaryDisplayables[i]);\r\n            }\r\n        };\r\n        IncrementalDisplayble.prototype.update = function () {\r\n            this.updateTransform();\r\n            for (var i = this._cursor; i < this._displayables.length; i++) {\r\n                var displayable = this._displayables[i];\r\n                displayable.parent = this;\r\n                displayable.update();\r\n                displayable.parent = null;\r\n            }\r\n            for (var i = 0; i < this._temporaryDisplayables.length; i++) {\r\n                var displayable = this._temporaryDisplayables[i];\r\n                displayable.parent = this;\r\n                displayable.update();\r\n                displayable.parent = null;\r\n            }\r\n        };\r\n        IncrementalDisplayble.prototype.getBoundingRect = function () {\r\n            if (!this._rect) {\r\n                var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\r\n                for (var i = 0; i < this._displayables.length; i++) {\r\n                    var displayable = this._displayables[i];\r\n                    var childRect = displayable.getBoundingRect().clone();\r\n                    if (displayable.needLocalTransform()) {\r\n                        childRect.applyTransform(displayable.getLocalTransform(m));\r\n                    }\r\n                    rect.union(childRect);\r\n                }\r\n                this._rect = rect;\r\n            }\r\n            return this._rect;\r\n        };\r\n        IncrementalDisplayble.prototype.contain = function (x, y) {\r\n            var localPos = this.transformCoordToLocal(x, y);\r\n            var rect = this.getBoundingRect();\r\n            if (rect.contain(localPos[0], localPos[1])) {\r\n                for (var i = 0; i < this._displayables.length; i++) {\r\n                    var displayable = this._displayables[i];\r\n                    if (displayable.contain(x, y)) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        return IncrementalDisplayble;\r\n    }(Displayable));\n\n    var globalImageCache = new LRU(50);\r\n    function findExistImage(newImageOrSrc) {\r\n        if (typeof newImageOrSrc === 'string') {\r\n            var cachedImgObj = globalImageCache.get(newImageOrSrc);\r\n            return cachedImgObj && cachedImgObj.image;\r\n        }\r\n        else {\r\n            return newImageOrSrc;\r\n        }\r\n    }\r\n    function createOrUpdateImage(newImageOrSrc, image, hostEl, cb, cbPayload) {\r\n        if (!newImageOrSrc) {\r\n            return image;\r\n        }\r\n        else if (typeof newImageOrSrc === 'string') {\r\n            if ((image && image.__zrImageSrc === newImageOrSrc) || !hostEl) {\r\n                return image;\r\n            }\r\n            var cachedImgObj = globalImageCache.get(newImageOrSrc);\r\n            var pendingWrap = { hostEl: hostEl, cb: cb, cbPayload: cbPayload };\r\n            if (cachedImgObj) {\r\n                image = cachedImgObj.image;\r\n                !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\r\n            }\r\n            else {\r\n                image = new Image();\r\n                image.onload = image.onerror = imageOnLoad;\r\n                globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\r\n                    image: image,\r\n                    pending: [pendingWrap]\r\n                });\r\n                image.src = image.__zrImageSrc = newImageOrSrc;\r\n            }\r\n            return image;\r\n        }\r\n        else {\r\n            return newImageOrSrc;\r\n        }\r\n    }\r\n    function imageOnLoad() {\r\n        var cachedImgObj = this.__cachedImgObj;\r\n        this.onload = this.onerror = this.__cachedImgObj = null;\r\n        for (var i = 0; i < cachedImgObj.pending.length; i++) {\r\n            var pendingWrap = cachedImgObj.pending[i];\r\n            var cb = pendingWrap.cb;\r\n            cb && cb(this, pendingWrap.cbPayload);\r\n            pendingWrap.hostEl.dirty();\r\n        }\r\n        cachedImgObj.pending.length = 0;\r\n    }\r\n    function isImageReady(image) {\r\n        return image && image.width && image.height;\r\n    }\n\n    var STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\r\n    function truncateText(text, containerWidth, font, ellipsis, options) {\r\n        if (!containerWidth) {\r\n            return '';\r\n        }\r\n        var textLines = (text + '').split('\\n');\r\n        options = prepareTruncateOptions(containerWidth, font, ellipsis, options);\r\n        for (var i = 0, len = textLines.length; i < len; i++) {\r\n            textLines[i] = truncateSingleLine(textLines[i], options);\r\n        }\r\n        return textLines.join('\\n');\r\n    }\r\n    function prepareTruncateOptions(containerWidth, font, ellipsis, options) {\r\n        options = options || {};\r\n        var preparedOpts = extend({}, options);\r\n        preparedOpts.font = font;\r\n        ellipsis = retrieve2(ellipsis, '...');\r\n        preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);\r\n        var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);\r\n        preparedOpts.cnCharWidth = getWidth('', font);\r\n        var ascCharWidth = preparedOpts.ascCharWidth = getWidth('a', font);\r\n        preparedOpts.placeholder = retrieve2(options.placeholder, '');\r\n        var contentWidth = containerWidth = Math.max(0, containerWidth - 1);\r\n        for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\r\n            contentWidth -= ascCharWidth;\r\n        }\r\n        var ellipsisWidth = getWidth(ellipsis, font);\r\n        if (ellipsisWidth > contentWidth) {\r\n            ellipsis = '';\r\n            ellipsisWidth = 0;\r\n        }\r\n        contentWidth = containerWidth - ellipsisWidth;\r\n        preparedOpts.ellipsis = ellipsis;\r\n        preparedOpts.ellipsisWidth = ellipsisWidth;\r\n        preparedOpts.contentWidth = contentWidth;\r\n        preparedOpts.containerWidth = containerWidth;\r\n        return preparedOpts;\r\n    }\r\n    function truncateSingleLine(textLine, options) {\r\n        var containerWidth = options.containerWidth;\r\n        var font = options.font;\r\n        var contentWidth = options.contentWidth;\r\n        if (!containerWidth) {\r\n            return '';\r\n        }\r\n        var lineWidth = getWidth(textLine, font);\r\n        if (lineWidth <= containerWidth) {\r\n            return textLine;\r\n        }\r\n        for (var j = 0;; j++) {\r\n            if (lineWidth <= contentWidth || j >= options.maxIterations) {\r\n                textLine += options.ellipsis;\r\n                break;\r\n            }\r\n            var subLength = j === 0\r\n                ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth)\r\n                : lineWidth > 0\r\n                    ? Math.floor(textLine.length * contentWidth / lineWidth)\r\n                    : 0;\r\n            textLine = textLine.substr(0, subLength);\r\n            lineWidth = getWidth(textLine, font);\r\n        }\r\n        if (textLine === '') {\r\n            textLine = options.placeholder;\r\n        }\r\n        return textLine;\r\n    }\r\n    function estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\r\n        var width = 0;\r\n        var i = 0;\r\n        for (var len = text.length; i < len && width < contentWidth; i++) {\r\n            var charCode = text.charCodeAt(i);\r\n            width += (0 <= charCode && charCode <= 127) ? ascCharWidth : cnCharWidth;\r\n        }\r\n        return i;\r\n    }\r\n    function parsePlainText(text, style) {\r\n        text != null && (text += '');\r\n        var overflow = style.overflow;\r\n        var padding = style.padding;\r\n        var font = style.font;\r\n        var truncate = overflow === 'truncate';\r\n        var calculatedLineHeight = getLineHeight(font);\r\n        var lineHeight = retrieve2(style.lineHeight, calculatedLineHeight);\r\n        var truncateLineOverflow = style.lineOverflow === 'truncate';\r\n        var width = style.width;\r\n        var lines;\r\n        if (width != null && overflow === 'break' || overflow === 'breakAll') {\r\n            lines = text ? wrapText(text, style.font, width, overflow === 'breakAll', 0).lines : [];\r\n        }\r\n        else {\r\n            lines = text ? text.split('\\n') : [];\r\n        }\r\n        var contentHeight = lines.length * lineHeight;\r\n        var height = retrieve2(style.height, contentHeight);\r\n        if (contentHeight > height && truncateLineOverflow) {\r\n            var lineCount = Math.floor(height / lineHeight);\r\n            lines = lines.slice(0, lineCount);\r\n        }\r\n        var outerHeight = height;\r\n        var outerWidth = width;\r\n        if (padding) {\r\n            outerHeight += padding[0] + padding[2];\r\n            if (outerWidth != null) {\r\n                outerWidth += padding[1] + padding[3];\r\n            }\r\n        }\r\n        if (text && truncate && outerWidth != null) {\r\n            var options = prepareTruncateOptions(width, font, style.ellipsis, {\r\n                minChar: style.truncateMinChar,\r\n                placeholder: style.placeholder\r\n            });\r\n            for (var i = 0; i < lines.length; i++) {\r\n                lines[i] = truncateSingleLine(lines[i], options);\r\n            }\r\n        }\r\n        if (width == null) {\r\n            var maxWidth = 0;\r\n            for (var i = 0; i < lines.length; i++) {\r\n                maxWidth = Math.max(getWidth(lines[i], font), maxWidth);\r\n            }\r\n            width = maxWidth;\r\n        }\r\n        return {\r\n            lines: lines,\r\n            height: height,\r\n            outerHeight: outerHeight,\r\n            lineHeight: lineHeight,\r\n            calculatedLineHeight: calculatedLineHeight,\r\n            contentHeight: contentHeight,\r\n            width: width\r\n        };\r\n    }\r\n    var RichTextToken = (function () {\r\n        function RichTextToken() {\r\n        }\r\n        return RichTextToken;\r\n    }());\r\n    var RichTextLine = (function () {\r\n        function RichTextLine(tokens) {\r\n            this.tokens = [];\r\n            if (tokens) {\r\n                this.tokens = tokens;\r\n            }\r\n        }\r\n        return RichTextLine;\r\n    }());\r\n    var RichTextContentBlock = (function () {\r\n        function RichTextContentBlock() {\r\n            this.width = 0;\r\n            this.height = 0;\r\n            this.contentWidth = 0;\r\n            this.contentHeight = 0;\r\n            this.outerWidth = 0;\r\n            this.outerHeight = 0;\r\n            this.lines = [];\r\n        }\r\n        return RichTextContentBlock;\r\n    }());\r\n    function parseRichText(text, style) {\r\n        var contentBlock = new RichTextContentBlock();\r\n        text != null && (text += '');\r\n        if (!text) {\r\n            return contentBlock;\r\n        }\r\n        var topWidth = style.width;\r\n        var topHeight = style.height;\r\n        var overflow = style.overflow;\r\n        var wrapInfo = (overflow === 'break' || overflow === 'breakAll') && topWidth != null\r\n            ? { width: topWidth, accumWidth: 0, breakAll: overflow === 'breakAll' }\r\n            : null;\r\n        var lastIndex = STYLE_REG.lastIndex = 0;\r\n        var result;\r\n        while ((result = STYLE_REG.exec(text)) != null) {\r\n            var matchedIndex = result.index;\r\n            if (matchedIndex > lastIndex) {\r\n                pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style, wrapInfo);\r\n            }\r\n            pushTokens(contentBlock, result[2], style, wrapInfo, result[1]);\r\n            lastIndex = STYLE_REG.lastIndex;\r\n        }\r\n        if (lastIndex < text.length) {\r\n            pushTokens(contentBlock, text.substring(lastIndex, text.length), style, wrapInfo);\r\n        }\r\n        var pendingList = [];\r\n        var calculatedHeight = 0;\r\n        var calculatedWidth = 0;\r\n        var stlPadding = style.padding;\r\n        var truncate = overflow === 'truncate';\r\n        var truncateLine = style.lineOverflow === 'truncate';\r\n        outer: for (var i = 0; i < contentBlock.lines.length; i++) {\r\n            var line = contentBlock.lines[i];\r\n            var lineHeight = 0;\r\n            var lineWidth = 0;\r\n            for (var j = 0; j < line.tokens.length; j++) {\r\n                var token = line.tokens[j];\r\n                var tokenStyle = token.styleName && style.rich[token.styleName] || {};\r\n                var textPadding = token.textPadding = tokenStyle.padding;\r\n                var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;\r\n                var font = token.font = tokenStyle.font || style.font;\r\n                token.contentHeight = getLineHeight(font);\r\n                var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);\r\n                token.lineHeight = retrieve3(tokenStyle.lineHeight, style.lineHeight, tokenHeight);\r\n                textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\r\n                token.height = tokenHeight;\r\n                token.align = tokenStyle && tokenStyle.align || style.align;\r\n                token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || 'middle';\r\n                if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {\r\n                    if (j > 0) {\r\n                        line.tokens = line.tokens.slice(0, j);\r\n                        contentBlock.lines = contentBlock.lines.slice(0, i + 1);\r\n                    }\r\n                    else {\r\n                        contentBlock.lines = contentBlock.lines.slice(0, i);\r\n                    }\r\n                    break outer;\r\n                }\r\n                var styleTokenWidth = tokenStyle.width;\r\n                var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === 'auto';\r\n                if (typeof styleTokenWidth === 'string' && styleTokenWidth.charAt(styleTokenWidth.length - 1) === '%') {\r\n                    token.percentWidth = styleTokenWidth;\r\n                    pendingList.push(token);\r\n                    token.contentWidth = getWidth(token.text, font);\r\n                }\r\n                else {\r\n                    if (tokenWidthNotSpecified) {\r\n                        var textBackgroundColor = tokenStyle.backgroundColor;\r\n                        var bgImg = textBackgroundColor && textBackgroundColor.image;\r\n                        if (bgImg) {\r\n                            bgImg = findExistImage(bgImg);\r\n                            if (isImageReady(bgImg)) {\r\n                                token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);\r\n                            }\r\n                        }\r\n                    }\r\n                    var remainTruncWidth = truncate && topWidth != null\r\n                        ? topWidth - lineWidth : null;\r\n                    if (remainTruncWidth != null && remainTruncWidth < token.width) {\r\n                        if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {\r\n                            token.text = '';\r\n                            token.width = token.contentWidth = 0;\r\n                        }\r\n                        else {\r\n                            token.text = truncateText(token.text, remainTruncWidth - paddingH, font, style.ellipsis, { minChar: style.truncateMinChar });\r\n                            token.width = token.contentWidth = getWidth(token.text, font);\r\n                        }\r\n                    }\r\n                    else {\r\n                        token.contentWidth = getWidth(token.text, font);\r\n                    }\r\n                }\r\n                token.width += paddingH;\r\n                lineWidth += token.width;\r\n                tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\r\n            }\r\n            line.width = lineWidth;\r\n            line.lineHeight = lineHeight;\r\n            calculatedHeight += lineHeight;\r\n            calculatedWidth = Math.max(calculatedWidth, lineWidth);\r\n        }\r\n        contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);\r\n        contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);\r\n        contentBlock.contentHeight = calculatedHeight;\r\n        contentBlock.contentWidth = calculatedWidth;\r\n        if (stlPadding) {\r\n            contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\r\n            contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\r\n        }\r\n        for (var i = 0; i < pendingList.length; i++) {\r\n            var token = pendingList[i];\r\n            var percentWidth = token.percentWidth;\r\n            token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;\r\n        }\r\n        return contentBlock;\r\n    }\r\n    function pushTokens(block, str, style, wrapInfo, styleName) {\r\n        var isEmptyStr = str === '';\r\n        var tokenStyle = styleName && style.rich[styleName] || {};\r\n        var lines = block.lines;\r\n        var font = tokenStyle.font || style.font;\r\n        var newLine = false;\r\n        var strLines;\r\n        var linesWidths;\r\n        if (wrapInfo) {\r\n            var tokenPadding = tokenStyle.padding;\r\n            var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;\r\n            if (tokenStyle.width != null && tokenStyle.width !== 'auto') {\r\n                var outerWidth_1 = parsePercent$1(tokenStyle.width, wrapInfo.width) + tokenPaddingH;\r\n                if (lines.length > 0) {\r\n                    if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {\r\n                        strLines = str.split('\\n');\r\n                        newLine = true;\r\n                    }\r\n                }\r\n                wrapInfo.accumWidth = outerWidth_1;\r\n            }\r\n            else {\r\n                var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);\r\n                wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;\r\n                linesWidths = res.linesWidths;\r\n                strLines = res.lines;\r\n            }\r\n        }\r\n        else {\r\n            strLines = str.split('\\n');\r\n        }\r\n        for (var i = 0; i < strLines.length; i++) {\r\n            var text = strLines[i];\r\n            var token = new RichTextToken();\r\n            token.styleName = styleName;\r\n            token.text = text;\r\n            token.isLineHolder = !text && !isEmptyStr;\r\n            if (typeof tokenStyle.width === 'number') {\r\n                token.width = tokenStyle.width;\r\n            }\r\n            else {\r\n                token.width = linesWidths\r\n                    ? linesWidths[i]\r\n                    : getWidth(text, font);\r\n            }\r\n            if (!i && !newLine) {\r\n                var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;\r\n                var tokensLen = tokens.length;\r\n                (tokensLen === 1 && tokens[0].isLineHolder)\r\n                    ? (tokens[0] = token)\r\n                    : ((text || !tokensLen || isEmptyStr) && tokens.push(token));\r\n            }\r\n            else {\r\n                lines.push(new RichTextLine([token]));\r\n            }\r\n        }\r\n    }\r\n    function isLatin(ch) {\r\n        var code = ch.charCodeAt(0);\r\n        return code >= 0x21 && code <= 0xFF;\r\n    }\r\n    var breakCharMap = reduce(',&?/;] '.split(''), function (obj, ch) {\r\n        obj[ch] = true;\r\n        return obj;\r\n    }, {});\r\n    function isWordBreakChar(ch) {\r\n        if (isLatin(ch)) {\r\n            if (breakCharMap[ch]) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    function wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {\r\n        var lines = [];\r\n        var linesWidths = [];\r\n        var line = '';\r\n        var currentWord = '';\r\n        var currentWordWidth = 0;\r\n        var accumWidth = 0;\r\n        for (var i = 0; i < text.length; i++) {\r\n            var ch = text.charAt(i);\r\n            if (ch === '\\n') {\r\n                if (currentWord) {\r\n                    line += currentWord;\r\n                    accumWidth += currentWordWidth;\r\n                }\r\n                lines.push(line);\r\n                linesWidths.push(accumWidth);\r\n                line = '';\r\n                currentWord = '';\r\n                currentWordWidth = 0;\r\n                accumWidth = 0;\r\n                continue;\r\n            }\r\n            var chWidth = getWidth(ch, font);\r\n            var inWord = isBreakAll ? false : !isWordBreakChar(ch);\r\n            if (!lines.length\r\n                ? lastAccumWidth + accumWidth + chWidth > lineWidth\r\n                : accumWidth + chWidth > lineWidth) {\r\n                if (!accumWidth) {\r\n                    if (inWord) {\r\n                        lines.push(currentWord);\r\n                        linesWidths.push(currentWordWidth);\r\n                        currentWord = ch;\r\n                        currentWordWidth = chWidth;\r\n                    }\r\n                    else {\r\n                        lines.push(ch);\r\n                        linesWidths.push(chWidth);\r\n                    }\r\n                }\r\n                else if (line || currentWord) {\r\n                    if (inWord) {\r\n                        if (!line) {\r\n                            line = currentWord;\r\n                            currentWord = '';\r\n                            currentWordWidth = 0;\r\n                            accumWidth = currentWordWidth;\r\n                        }\r\n                        lines.push(line);\r\n                        linesWidths.push(accumWidth - currentWordWidth);\r\n                        currentWord += ch;\r\n                        currentWordWidth += chWidth;\r\n                        line = '';\r\n                        accumWidth = currentWordWidth;\r\n                    }\r\n                    else {\r\n                        if (currentWord) {\r\n                            line += currentWord;\r\n                            accumWidth += currentWordWidth;\r\n                            currentWord = '';\r\n                            currentWordWidth = 0;\r\n                        }\r\n                        lines.push(line);\r\n                        linesWidths.push(accumWidth);\r\n                        line = ch;\r\n                        accumWidth = chWidth;\r\n                    }\r\n                }\r\n                continue;\r\n            }\r\n            accumWidth += chWidth;\r\n            if (inWord) {\r\n                currentWord += ch;\r\n                currentWordWidth += chWidth;\r\n            }\r\n            else {\r\n                if (currentWord) {\r\n                    line += currentWord;\r\n                    currentWord = '';\r\n                    currentWordWidth = 0;\r\n                }\r\n                line += ch;\r\n            }\r\n        }\r\n        if (!lines.length && !line) {\r\n            line = text;\r\n            currentWord = '';\r\n            currentWordWidth = 0;\r\n        }\r\n        if (currentWord) {\r\n            line += currentWord;\r\n        }\r\n        if (line) {\r\n            lines.push(line);\r\n            linesWidths.push(accumWidth);\r\n        }\r\n        if (lines.length === 1) {\r\n            accumWidth += lastAccumWidth;\r\n        }\r\n        return {\r\n            accumWidth: accumWidth,\r\n            lines: lines,\r\n            linesWidths: linesWidths\r\n        };\r\n    }\r\n    function parsePercent$1(value, maxValue) {\r\n        if (typeof value === 'string') {\r\n            if (value.lastIndexOf('%') >= 0) {\r\n                return parseFloat(value) / 100 * maxValue;\r\n            }\r\n            return parseFloat(value);\r\n        }\r\n        return value;\r\n    }\n\n    var DEFAULT_RICH_TEXT_COLOR = {\r\n        fill: '#000'\r\n    };\r\n    var DEFAULT_STROKE_LINE_WIDTH = 2;\r\n    var DEFAULT_TEXT_ANIMATION_PROPS = {\r\n        style: defaults({\r\n            fill: true,\r\n            stroke: true,\r\n            fillOpacity: true,\r\n            strokeOpacity: true,\r\n            lineWidth: true,\r\n            fontSize: true,\r\n            lineHeight: true,\r\n            width: true,\r\n            height: true,\r\n            textShadowColor: true,\r\n            textShadowBlur: true,\r\n            textShadowOffsetX: true,\r\n            textShadowOffsetY: true,\r\n            backgroundColor: true,\r\n            padding: true,\r\n            borderColor: true,\r\n            borderWidth: true,\r\n            borderRadius: true\r\n        }, DEFAULT_COMMON_ANIMATION_PROPS.style)\r\n    };\r\n    var ZRText = (function (_super) {\r\n        __extends(ZRText, _super);\r\n        function ZRText(opts) {\r\n            var _this = _super.call(this) || this;\r\n            _this.type = 'text';\r\n            _this._children = [];\r\n            _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\r\n            _this.attr(opts);\r\n            return _this;\r\n        }\r\n        ZRText.prototype.childrenRef = function () {\r\n            return this._children;\r\n        };\r\n        ZRText.prototype.update = function () {\r\n            if (this.styleChanged()) {\r\n                this._updateSubTexts();\r\n            }\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                var child = this._children[i];\r\n                child.zlevel = this.zlevel;\r\n                child.z = this.z;\r\n                child.z2 = this.z2;\r\n                child.culling = this.culling;\r\n                child.cursor = this.cursor;\r\n                child.invisible = this.invisible;\r\n            }\r\n            var attachedTransform = this.attachedTransform;\r\n            if (attachedTransform) {\r\n                attachedTransform.updateTransform();\r\n                var m = attachedTransform.transform;\r\n                if (m) {\r\n                    this.transform = this.transform || [];\r\n                    copy$1(this.transform, m);\r\n                }\r\n                else {\r\n                    this.transform = null;\r\n                }\r\n            }\r\n            else {\r\n                _super.prototype.update.call(this);\r\n            }\r\n        };\r\n        ZRText.prototype.getComputedTransform = function () {\r\n            if (this.__hostTarget) {\r\n                this.__hostTarget.getComputedTransform();\r\n                this.__hostTarget.updateInnerText(true);\r\n            }\r\n            return this.attachedTransform ? this.attachedTransform.getComputedTransform()\r\n                : _super.prototype.getComputedTransform.call(this);\r\n        };\r\n        ZRText.prototype._updateSubTexts = function () {\r\n            this._childCursor = 0;\r\n            normalizeTextStyle(this.style);\r\n            this.style.rich\r\n                ? this._updateRichTexts()\r\n                : this._updatePlainTexts();\r\n            this._children.length = this._childCursor;\r\n            this.styleUpdated();\r\n        };\r\n        ZRText.prototype.addSelfToZr = function (zr) {\r\n            _super.prototype.addSelfToZr.call(this, zr);\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                this._children[i].__zr = zr;\r\n            }\r\n        };\r\n        ZRText.prototype.removeSelfFromZr = function (zr) {\r\n            _super.prototype.removeSelfFromZr.call(this, zr);\r\n            for (var i = 0; i < this._children.length; i++) {\r\n                this._children[i].__zr = null;\r\n            }\r\n        };\r\n        ZRText.prototype.getBoundingRect = function () {\r\n            if (this.styleChanged()) {\r\n                this._updateSubTexts();\r\n            }\r\n            if (!this._rect) {\r\n                var tmpRect = new BoundingRect(0, 0, 0, 0);\r\n                var children = this._children;\r\n                var tmpMat = [];\r\n                var rect = null;\r\n                for (var i = 0; i < children.length; i++) {\r\n                    var child = children[i];\r\n                    var childRect = child.getBoundingRect();\r\n                    var transform = child.getLocalTransform(tmpMat);\r\n                    if (transform) {\r\n                        tmpRect.copy(childRect);\r\n                        tmpRect.applyTransform(transform);\r\n                        rect = rect || tmpRect.clone();\r\n                        rect.union(tmpRect);\r\n                    }\r\n                    else {\r\n                        rect = rect || childRect.clone();\r\n                        rect.union(childRect);\r\n                    }\r\n                }\r\n                this._rect = rect || tmpRect;\r\n            }\r\n            return this._rect;\r\n        };\r\n        ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\r\n            this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\r\n        };\r\n        ZRText.prototype.setTextContent = function (textContent) {\r\n            throw new Error('Can\\'t attach text on another text');\r\n        };\r\n        ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\r\n            if (!sourceStyle) {\r\n                return targetStyle;\r\n            }\r\n            var sourceRich = sourceStyle.rich;\r\n            var targetRich = targetStyle.rich || (sourceRich && {});\r\n            extend(targetStyle, sourceStyle);\r\n            if (sourceRich && targetRich) {\r\n                this._mergeRich(targetRich, sourceRich);\r\n                targetStyle.rich = targetRich;\r\n            }\r\n            else if (targetRich) {\r\n                targetStyle.rich = targetRich;\r\n            }\r\n            return targetStyle;\r\n        };\r\n        ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\r\n            var richNames = keys(sourceRich);\r\n            for (var i = 0; i < richNames.length; i++) {\r\n                var richName = richNames[i];\r\n                targetRich[richName] = targetRich[richName] || {};\r\n                extend(targetRich[richName], sourceRich[richName]);\r\n            }\r\n        };\r\n        ZRText.prototype._getAnimationStyleProps = function () {\r\n            return DEFAULT_TEXT_ANIMATION_PROPS;\r\n        };\r\n        ZRText.prototype._getOrCreateChild = function (Ctor) {\r\n            var child = this._children[this._childCursor];\r\n            if (!child || !(child instanceof Ctor)) {\r\n                child = new Ctor();\r\n            }\r\n            this._children[this._childCursor++] = child;\r\n            child.__zr = this.__zr;\r\n            child.parent = this;\r\n            return child;\r\n        };\r\n        ZRText.prototype._updatePlainTexts = function () {\r\n            var style = this.style;\r\n            var textFont = style.font || DEFAULT_FONT;\r\n            var textPadding = style.padding;\r\n            var text = getStyleText(style);\r\n            var contentBlock = parsePlainText(text, style);\r\n            var needDrawBg = needDrawBackground(style);\r\n            var bgColorDrawn = !!(style.backgroundColor);\r\n            var outerHeight = contentBlock.outerHeight;\r\n            var textLines = contentBlock.lines;\r\n            var lineHeight = contentBlock.lineHeight;\r\n            var defaultStyle = this._defaultStyle;\r\n            var baseX = style.x || 0;\r\n            var baseY = style.y || 0;\r\n            var textAlign = style.align || defaultStyle.align || 'left';\r\n            var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\r\n            var textX = baseX;\r\n            var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\r\n            if (needDrawBg || textPadding) {\r\n                var outerWidth_1 = contentBlock.width;\r\n                textPadding && (outerWidth_1 += textPadding[1] + textPadding[3]);\r\n                var boxX = adjustTextX(baseX, outerWidth_1, textAlign);\r\n                var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\r\n                needDrawBg && this._renderBackground(style, boxX, boxY, outerWidth_1, outerHeight);\r\n            }\r\n            textY += lineHeight / 2;\r\n            if (textPadding) {\r\n                textX = getTextXForPadding(baseX, textAlign, textPadding);\r\n                if (verticalAlign === 'top') {\r\n                    textY += textPadding[0];\r\n                }\r\n                else if (verticalAlign === 'bottom') {\r\n                    textY -= textPadding[2];\r\n                }\r\n            }\r\n            var defaultLineWidth = 0;\r\n            var useDefaultFill = false;\r\n            var textFill = getFill('fill' in style\r\n                ? style.fill\r\n                : (useDefaultFill = true, defaultStyle.fill));\r\n            var textStroke = getStroke('stroke' in style\r\n                ? style.stroke\r\n                : (!bgColorDrawn\r\n                    && (!defaultStyle.autoStroke || useDefaultFill))\r\n                    ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\r\n                    : null);\r\n            var hasShadow = style.textShadowBlur > 0;\r\n            var fixedBoundingRect = style.width != null\r\n                && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\r\n            var calculatedLineHeight = contentBlock.calculatedLineHeight;\r\n            for (var i = 0; i < textLines.length; i++) {\r\n                var el = this._getOrCreateChild(TSpan);\r\n                var subElStyle = el.createStyle();\r\n                el.useStyle(subElStyle);\r\n                subElStyle.text = textLines[i];\r\n                subElStyle.x = textX;\r\n                subElStyle.y = textY;\r\n                if (textAlign) {\r\n                    subElStyle.textAlign = textAlign;\r\n                }\r\n                subElStyle.textBaseline = 'middle';\r\n                subElStyle.opacity = style.opacity;\r\n                subElStyle.strokeFirst = true;\r\n                if (hasShadow) {\r\n                    subElStyle.shadowBlur = style.textShadowBlur || 0;\r\n                    subElStyle.shadowColor = style.textShadowColor || 'transparent';\r\n                    subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\r\n                    subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\r\n                }\r\n                if (textStroke) {\r\n                    subElStyle.stroke = textStroke;\r\n                    subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\r\n                    subElStyle.lineDash = style.lineDash;\r\n                    subElStyle.lineDashOffset = style.lineDashOffset || 0;\r\n                }\r\n                if (textFill) {\r\n                    subElStyle.fill = textFill;\r\n                }\r\n                subElStyle.font = textFont;\r\n                textY += lineHeight;\r\n                if (fixedBoundingRect) {\r\n                    el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), style.width, calculatedLineHeight));\r\n                }\r\n            }\r\n        };\r\n        ZRText.prototype._updateRichTexts = function () {\r\n            var style = this.style;\r\n            var text = getStyleText(style);\r\n            var contentBlock = parseRichText(text, style);\r\n            var contentWidth = contentBlock.width;\r\n            var outerWidth = contentBlock.outerWidth;\r\n            var outerHeight = contentBlock.outerHeight;\r\n            var textPadding = style.padding;\r\n            var baseX = style.x || 0;\r\n            var baseY = style.y || 0;\r\n            var defaultStyle = this._defaultStyle;\r\n            var textAlign = style.align || defaultStyle.align;\r\n            var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\r\n            var boxX = adjustTextX(baseX, outerWidth, textAlign);\r\n            var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\r\n            var xLeft = boxX;\r\n            var lineTop = boxY;\r\n            if (textPadding) {\r\n                xLeft += textPadding[3];\r\n                lineTop += textPadding[0];\r\n            }\r\n            var xRight = xLeft + contentWidth;\r\n            if (needDrawBackground(style)) {\r\n                this._renderBackground(style, boxX, boxY, outerWidth, outerHeight);\r\n            }\r\n            var bgColorDrawn = !!(style.backgroundColor);\r\n            for (var i = 0; i < contentBlock.lines.length; i++) {\r\n                var line = contentBlock.lines[i];\r\n                var tokens = line.tokens;\r\n                var tokenCount = tokens.length;\r\n                var lineHeight = line.lineHeight;\r\n                var remainedWidth = line.width;\r\n                var leftIndex = 0;\r\n                var lineXLeft = xLeft;\r\n                var lineXRight = xRight;\r\n                var rightIndex = tokenCount - 1;\r\n                var token = void 0;\r\n                while (leftIndex < tokenCount\r\n                    && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\r\n                    this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\r\n                    remainedWidth -= token.width;\r\n                    lineXLeft += token.width;\r\n                    leftIndex++;\r\n                }\r\n                while (rightIndex >= 0\r\n                    && (token = tokens[rightIndex], token.align === 'right')) {\r\n                    this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\r\n                    remainedWidth -= token.width;\r\n                    lineXRight -= token.width;\r\n                    rightIndex--;\r\n                }\r\n                lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\r\n                while (leftIndex <= rightIndex) {\r\n                    token = tokens[leftIndex];\r\n                    this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\r\n                    lineXLeft += token.width;\r\n                    leftIndex++;\r\n                }\r\n                lineTop += lineHeight;\r\n            }\r\n        };\r\n        ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\r\n            var tokenStyle = style.rich[token.styleName] || {};\r\n            tokenStyle.text = token.text;\r\n            var verticalAlign = token.verticalAlign;\r\n            var y = lineTop + lineHeight / 2;\r\n            if (verticalAlign === 'top') {\r\n                y = lineTop + token.height / 2;\r\n            }\r\n            else if (verticalAlign === 'bottom') {\r\n                y = lineTop + lineHeight - token.height / 2;\r\n            }\r\n            var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\r\n            needDrawBg && this._renderBackground(tokenStyle, textAlign === 'right'\r\n                ? x - token.width\r\n                : textAlign === 'center'\r\n                    ? x - token.width / 2\r\n                    : x, y - token.height / 2, token.width, token.height);\r\n            var bgColorDrawn = !!tokenStyle.backgroundColor;\r\n            var textPadding = token.textPadding;\r\n            if (textPadding) {\r\n                x = getTextXForPadding(x, textAlign, textPadding);\r\n            }\r\n            var el = this._getOrCreateChild(TSpan);\r\n            var subElStyle = el.createStyle();\r\n            el.useStyle(subElStyle);\r\n            var defaultStyle = this._defaultStyle;\r\n            var useDefaultFill = false;\r\n            var defaultLineWidth = 0;\r\n            var textFill = getStroke('fill' in tokenStyle ? tokenStyle.fill\r\n                : 'fill' in style ? style.fill\r\n                    : (useDefaultFill = true, defaultStyle.fill));\r\n            var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\r\n                : 'stroke' in style ? style.stroke\r\n                    : (!bgColorDrawn\r\n                        && !parentBgColorDrawn\r\n                        && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\r\n                        : null);\r\n            var hasShadow = tokenStyle.textShadowBlur > 0\r\n                || style.textShadowBlur > 0;\r\n            subElStyle.text = token.text;\r\n            subElStyle.x = x;\r\n            subElStyle.y = y;\r\n            if (hasShadow) {\r\n                subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\r\n                subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\r\n                subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\r\n                subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\r\n            }\r\n            subElStyle.textAlign = textAlign;\r\n            subElStyle.textBaseline = 'middle';\r\n            subElStyle.font = token.font || DEFAULT_FONT;\r\n            if (textStroke) {\r\n                subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\r\n                subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\r\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\r\n                subElStyle.stroke = textStroke;\r\n            }\r\n            if (textFill) {\r\n                subElStyle.fill = textFill;\r\n            }\r\n            var textWidth = token.contentWidth;\r\n            var textHeight = token.contentHeight;\r\n            el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\r\n        };\r\n        ZRText.prototype._renderBackground = function (style, x, y, width, height) {\r\n            var textBackgroundColor = style.backgroundColor;\r\n            var textBorderWidth = style.borderWidth;\r\n            var textBorderColor = style.borderColor;\r\n            var isPlainBg = isString(textBackgroundColor);\r\n            var textBorderRadius = style.borderRadius;\r\n            var self = this;\r\n            var rectEl;\r\n            var imgEl;\r\n            if (isPlainBg || (textBorderWidth && textBorderColor)) {\r\n                rectEl = this._getOrCreateChild(Rect);\r\n                rectEl.useStyle(rectEl.createStyle());\r\n                rectEl.style.fill = null;\r\n                var rectShape = rectEl.shape;\r\n                rectShape.x = x;\r\n                rectShape.y = y;\r\n                rectShape.width = width;\r\n                rectShape.height = height;\r\n                rectShape.r = textBorderRadius;\r\n                rectEl.dirtyShape();\r\n            }\r\n            if (isPlainBg) {\r\n                var rectStyle = rectEl.style;\r\n                rectStyle.fill = textBackgroundColor || null;\r\n                rectStyle.opacity = retrieve2(style.opacity, 1);\r\n                rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\r\n            }\r\n            else if (textBackgroundColor && textBackgroundColor.image) {\r\n                imgEl = this._getOrCreateChild(ZRImage);\r\n                imgEl.onload = function () {\r\n                    self.dirtyStyle();\r\n                };\r\n                var imgStyle = imgEl.style;\r\n                imgStyle.image = textBackgroundColor.image;\r\n                imgStyle.x = x;\r\n                imgStyle.y = y;\r\n                imgStyle.width = width;\r\n                imgStyle.height = height;\r\n            }\r\n            if (textBorderWidth && textBorderColor) {\r\n                var rectStyle = rectEl.style;\r\n                rectStyle.lineWidth = textBorderWidth;\r\n                rectStyle.stroke = textBorderColor;\r\n                rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\r\n                rectStyle.lineDash = style.borderDash;\r\n                rectStyle.lineDashOffset = style.borderDashOffset || 0;\r\n                if (rectEl.hasFill() && rectEl.hasStroke()) {\r\n                    rectStyle.strokeFirst = true;\r\n                    rectStyle.lineWidth *= 2;\r\n                }\r\n            }\r\n            var shadowStyle = (rectEl || imgEl).style;\r\n            shadowStyle.shadowBlur = style.shadowBlur || 0;\r\n            shadowStyle.shadowColor = style.shadowColor || 'transparent';\r\n            shadowStyle.shadowOffsetX = style.shadowOffsetX || 0;\r\n            shadowStyle.shadowOffsetY = style.shadowOffsetY || 0;\r\n        };\r\n        ZRText.makeFont = function (style) {\r\n            var font = '';\r\n            if (style.fontSize || style.fontFamily || style.fontWeight) {\r\n                var fontSize = '';\r\n                if (typeof style.fontSize === 'string'\r\n                    && (style.fontSize.indexOf('px') !== -1\r\n                        || style.fontSize.indexOf('rem') !== -1\r\n                        || style.fontSize.indexOf('em') !== -1)) {\r\n                    fontSize = style.fontSize;\r\n                }\r\n                else if (!isNaN(+style.fontSize)) {\r\n                    fontSize = style.fontSize + 'px';\r\n                }\r\n                else {\r\n                    fontSize = '12px';\r\n                }\r\n                font = [\r\n                    style.fontStyle,\r\n                    style.fontWeight,\r\n                    fontSize,\r\n                    style.fontFamily || 'sans-serif'\r\n                ].join(' ');\r\n            }\r\n            return font && trim(font) || style.textFont || style.font;\r\n        };\r\n        return ZRText;\r\n    }(Displayable));\r\n    var VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\r\n    var VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\r\n    function normalizeTextStyle(style) {\r\n        normalizeStyle(style);\r\n        each(style.rich, normalizeStyle);\r\n        return style;\r\n    }\r\n    function normalizeStyle(style) {\r\n        if (style) {\r\n            style.font = ZRText.makeFont(style);\r\n            var textAlign = style.align;\r\n            textAlign === 'middle' && (textAlign = 'center');\r\n            style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\r\n            var verticalAlign = style.verticalAlign;\r\n            verticalAlign === 'center' && (verticalAlign = 'middle');\r\n            style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\r\n            var textPadding = style.padding;\r\n            if (textPadding) {\r\n                style.padding = normalizeCssArray(style.padding);\r\n            }\r\n        }\r\n    }\r\n    function getStroke(stroke, lineWidth) {\r\n        return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\r\n            ? null\r\n            : (stroke.image || stroke.colorStops)\r\n                ? '#000'\r\n                : stroke;\r\n    }\r\n    function getFill(fill) {\r\n        return (fill == null || fill === 'none')\r\n            ? null\r\n            : (fill.image || fill.colorStops)\r\n                ? '#000'\r\n                : fill;\r\n    }\r\n    function getTextXForPadding(x, textAlign, textPadding) {\r\n        return textAlign === 'right'\r\n            ? (x - textPadding[1])\r\n            : textAlign === 'center'\r\n                ? (x + textPadding[3] / 2 - textPadding[1] / 2)\r\n                : (x + textPadding[3]);\r\n    }\r\n    function getStyleText(style) {\r\n        var text = style.text;\r\n        text != null && (text += '');\r\n        return text;\r\n    }\r\n    function needDrawBackground(style) {\r\n        return !!(style.backgroundColor\r\n            || (style.borderWidth && style.borderColor));\r\n    }\n\n    var ArcShape = (function () {\r\n        function ArcShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r = 0;\r\n            this.startAngle = 0;\r\n            this.endAngle = Math.PI * 2;\r\n            this.clockwise = true;\r\n        }\r\n        return ArcShape;\r\n    }());\r\n    var Arc = (function (_super) {\r\n        __extends(Arc, _super);\r\n        function Arc(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Arc.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        Arc.prototype.getDefaultShape = function () {\r\n            return new ArcShape();\r\n        };\r\n        Arc.prototype.buildPath = function (ctx, shape) {\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var r = Math.max(shape.r, 0);\r\n            var startAngle = shape.startAngle;\r\n            var endAngle = shape.endAngle;\r\n            var clockwise = shape.clockwise;\r\n            var unitX = Math.cos(startAngle);\r\n            var unitY = Math.sin(startAngle);\r\n            ctx.moveTo(unitX * r + x, unitY * r + y);\r\n            ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\r\n        };\r\n        return Arc;\r\n    }(Path));\r\n    Arc.prototype.type = 'arc';\n\n    var out = [];\r\n    var BezierCurveShape = (function () {\r\n        function BezierCurveShape() {\r\n            this.x1 = 0;\r\n            this.y1 = 0;\r\n            this.x2 = 0;\r\n            this.y2 = 0;\r\n            this.cpx1 = 0;\r\n            this.cpy1 = 0;\r\n            this.percent = 1;\r\n        }\r\n        return BezierCurveShape;\r\n    }());\r\n    function someVectorAt(shape, t, isTangent) {\r\n        var cpx2 = shape.cpx2;\r\n        var cpy2 = shape.cpy2;\r\n        if (cpx2 === null || cpy2 === null) {\r\n            return [\r\n                (isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t),\r\n                (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)\r\n            ];\r\n        }\r\n        else {\r\n            return [\r\n                (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t),\r\n                (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)\r\n            ];\r\n        }\r\n    }\r\n    var BezierCurve = (function (_super) {\r\n        __extends(BezierCurve, _super);\r\n        function BezierCurve(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        BezierCurve.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        BezierCurve.prototype.getDefaultShape = function () {\r\n            return new BezierCurveShape();\r\n        };\r\n        BezierCurve.prototype.buildPath = function (ctx, shape) {\r\n            var x1 = shape.x1;\r\n            var y1 = shape.y1;\r\n            var x2 = shape.x2;\r\n            var y2 = shape.y2;\r\n            var cpx1 = shape.cpx1;\r\n            var cpy1 = shape.cpy1;\r\n            var cpx2 = shape.cpx2;\r\n            var cpy2 = shape.cpy2;\r\n            var percent = shape.percent;\r\n            if (percent === 0) {\r\n                return;\r\n            }\r\n            ctx.moveTo(x1, y1);\r\n            if (cpx2 == null || cpy2 == null) {\r\n                if (percent < 1) {\r\n                    quadraticSubdivide(x1, cpx1, x2, percent, out);\r\n                    cpx1 = out[1];\r\n                    x2 = out[2];\r\n                    quadraticSubdivide(y1, cpy1, y2, percent, out);\r\n                    cpy1 = out[1];\r\n                    y2 = out[2];\r\n                }\r\n                ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\r\n            }\r\n            else {\r\n                if (percent < 1) {\r\n                    cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\r\n                    cpx1 = out[1];\r\n                    cpx2 = out[2];\r\n                    x2 = out[3];\r\n                    cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\r\n                    cpy1 = out[1];\r\n                    cpy2 = out[2];\r\n                    y2 = out[3];\r\n                }\r\n                ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\r\n            }\r\n        };\r\n        BezierCurve.prototype.pointAt = function (t) {\r\n            return someVectorAt(this.shape, t, false);\r\n        };\r\n        BezierCurve.prototype.tangentAt = function (t) {\r\n            var p = someVectorAt(this.shape, t, true);\r\n            return normalize(p, p);\r\n        };\r\n        return BezierCurve;\r\n    }(Path));\r\n    BezierCurve.prototype.type = 'bezier-curve';\n\n    var DropletShape = (function () {\r\n        function DropletShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.width = 0;\r\n            this.height = 0;\r\n        }\r\n        return DropletShape;\r\n    }());\r\n    var Droplet = (function (_super) {\r\n        __extends(Droplet, _super);\r\n        function Droplet(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Droplet.prototype.getDefaultShape = function () {\r\n            return new DropletShape();\r\n        };\r\n        Droplet.prototype.buildPath = function (ctx, shape) {\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var a = shape.width;\r\n            var b = shape.height;\r\n            ctx.moveTo(x, y + a);\r\n            ctx.bezierCurveTo(x + a, y + a, x + a * 3 / 2, y - a / 3, x, y - b);\r\n            ctx.bezierCurveTo(x - a * 3 / 2, y - a / 3, x - a, y + a, x, y + a);\r\n            ctx.closePath();\r\n        };\r\n        return Droplet;\r\n    }(Path));\r\n    Droplet.prototype.type = 'droplet';\n\n    var HeartShape = (function () {\r\n        function HeartShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.width = 0;\r\n            this.height = 0;\r\n        }\r\n        return HeartShape;\r\n    }());\r\n    var Heart = (function (_super) {\r\n        __extends(Heart, _super);\r\n        function Heart(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Heart.prototype.getDefaultShape = function () {\r\n            return new HeartShape();\r\n        };\r\n        Heart.prototype.buildPath = function (ctx, shape) {\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var a = shape.width;\r\n            var b = shape.height;\r\n            ctx.moveTo(x, y);\r\n            ctx.bezierCurveTo(x + a / 2, y - b * 2 / 3, x + a * 2, y + b / 3, x, y + b);\r\n            ctx.bezierCurveTo(x - a * 2, y + b / 3, x - a / 2, y - b * 2 / 3, x, y);\r\n        };\r\n        return Heart;\r\n    }(Path));\r\n    Heart.prototype.type = 'heart';\n\n    var PI$2 = Math.PI;\r\n    var sin = Math.sin;\r\n    var cos = Math.cos;\r\n    var IsogonShape = (function () {\r\n        function IsogonShape() {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            this.r = 0;\r\n            this.n = 0;\r\n        }\r\n        return IsogonShape;\r\n    }());\r\n    var Isogon = (function (_super) {\r\n        __extends(Isogon, _super);\r\n        function Isogon(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Isogon.prototype.getDefaultShape = function () {\r\n            return new IsogonShape();\r\n        };\r\n        Isogon.prototype.buildPath = function (ctx, shape) {\r\n            var n = shape.n;\r\n            if (!n || n < 2) {\r\n                return;\r\n            }\r\n            var x = shape.x;\r\n            var y = shape.y;\r\n            var r = shape.r;\r\n            var dStep = 2 * PI$2 / n;\r\n            var deg = -PI$2 / 2;\r\n            ctx.moveTo(x + r * cos(deg), y + r * sin(deg));\r\n            for (var i = 0, end = n - 1; i < end; i++) {\r\n                deg += dStep;\r\n                ctx.lineTo(x + r * cos(deg), y + r * sin(deg));\r\n            }\r\n            ctx.closePath();\r\n            return;\r\n        };\r\n        return Isogon;\r\n    }(Path));\r\n    Isogon.prototype.type = 'isogon';\n\n    var RingShape = (function () {\r\n        function RingShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r = 0;\r\n            this.r0 = 0;\r\n        }\r\n        return RingShape;\r\n    }());\r\n    var Ring = (function (_super) {\r\n        __extends(Ring, _super);\r\n        function Ring(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Ring.prototype.getDefaultShape = function () {\r\n            return new RingShape();\r\n        };\r\n        Ring.prototype.buildPath = function (ctx, shape) {\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var PI2 = Math.PI * 2;\r\n            ctx.moveTo(x + shape.r, y);\r\n            ctx.arc(x, y, shape.r, 0, PI2, false);\r\n            ctx.moveTo(x + shape.r0, y);\r\n            ctx.arc(x, y, shape.r0, 0, PI2, true);\r\n        };\r\n        return Ring;\r\n    }(Path));\r\n    Ring.prototype.type = 'ring';\n\n    var sin$1 = Math.sin;\r\n    var cos$1 = Math.cos;\r\n    var radian = Math.PI / 180;\r\n    var RoseShape = (function () {\r\n        function RoseShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r = [];\r\n            this.k = 0;\r\n            this.n = 1;\r\n        }\r\n        return RoseShape;\r\n    }());\r\n    var Rose = (function (_super) {\r\n        __extends(Rose, _super);\r\n        function Rose(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Rose.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        Rose.prototype.getDefaultShape = function () {\r\n            return new RoseShape();\r\n        };\r\n        Rose.prototype.buildPath = function (ctx, shape) {\r\n            var R = shape.r;\r\n            var k = shape.k;\r\n            var n = shape.n;\r\n            var x0 = shape.cx;\r\n            var y0 = shape.cy;\r\n            var x;\r\n            var y;\r\n            var r;\r\n            ctx.moveTo(x0, y0);\r\n            for (var i = 0, len = R.length; i < len; i++) {\r\n                r = R[i];\r\n                for (var j = 0; j <= 360 * n; j++) {\r\n                    x = r\r\n                        * sin$1(k / n * j % 360 * radian)\r\n                        * cos$1(j * radian)\r\n                        + x0;\r\n                    y = r\r\n                        * sin$1(k / n * j % 360 * radian)\r\n                        * sin$1(j * radian)\r\n                        + y0;\r\n                    ctx.lineTo(x, y);\r\n                }\r\n            }\r\n        };\r\n        return Rose;\r\n    }(Path));\r\n    Rose.prototype.type = 'rose';\n\n    var SectorShape = (function () {\r\n        function SectorShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r0 = 0;\r\n            this.r = 0;\r\n            this.startAngle = 0;\r\n            this.endAngle = Math.PI * 2;\r\n            this.clockwise = true;\r\n        }\r\n        return SectorShape;\r\n    }());\r\n    var Sector = (function (_super) {\r\n        __extends(Sector, _super);\r\n        function Sector(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Sector.prototype.getDefaultShape = function () {\r\n            return new SectorShape();\r\n        };\r\n        Sector.prototype.buildPath = function (ctx, shape) {\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var r0 = Math.max(shape.r0 || 0, 0);\r\n            var r = Math.max(shape.r, 0);\r\n            var startAngle = shape.startAngle;\r\n            var endAngle = shape.endAngle;\r\n            var clockwise = shape.clockwise;\r\n            var unitX = Math.cos(startAngle);\r\n            var unitY = Math.sin(startAngle);\r\n            ctx.moveTo(unitX * r0 + x, unitY * r0 + y);\r\n            ctx.lineTo(unitX * r + x, unitY * r + y);\r\n            ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\r\n            ctx.lineTo(Math.cos(endAngle) * r0 + x, Math.sin(endAngle) * r0 + y);\r\n            if (r0 !== 0) {\r\n                ctx.arc(x, y, r0, endAngle, startAngle, clockwise);\r\n            }\r\n            ctx.closePath();\r\n        };\r\n        Sector.prototype.isZeroArea = function () {\r\n            return this.shape.startAngle === this.shape.endAngle\r\n                || this.shape.r === this.shape.r0;\r\n        };\r\n        return Sector;\r\n    }(Path));\r\n    Sector.prototype.type = 'sector';\n\n    var PI$3 = Math.PI;\r\n    var cos$2 = Math.cos;\r\n    var sin$2 = Math.sin;\r\n    var StarShape = (function () {\r\n        function StarShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.n = 3;\r\n            this.r = 0;\r\n        }\r\n        return StarShape;\r\n    }());\r\n    var Star = (function (_super) {\r\n        __extends(Star, _super);\r\n        function Star(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Star.prototype.getDefaultShape = function () {\r\n            return new StarShape();\r\n        };\r\n        Star.prototype.buildPath = function (ctx, shape) {\r\n            var n = shape.n;\r\n            if (!n || n < 2) {\r\n                return;\r\n            }\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var r = shape.r;\r\n            var r0 = shape.r0;\r\n            if (r0 == null) {\r\n                r0 = n > 4\r\n                    ? r * cos$2(2 * PI$3 / n) / cos$2(PI$3 / n)\r\n                    : r / 3;\r\n            }\r\n            var dStep = PI$3 / n;\r\n            var deg = -PI$3 / 2;\r\n            var xStart = x + r * cos$2(deg);\r\n            var yStart = y + r * sin$2(deg);\r\n            deg += dStep;\r\n            ctx.moveTo(xStart, yStart);\r\n            for (var i = 0, end = n * 2 - 1, ri = void 0; i < end; i++) {\r\n                ri = i % 2 === 0 ? r0 : r;\r\n                ctx.lineTo(x + ri * cos$2(deg), y + ri * sin$2(deg));\r\n                deg += dStep;\r\n            }\r\n            ctx.closePath();\r\n        };\r\n        return Star;\r\n    }(Path));\r\n    Star.prototype.type = 'star';\n\n    var cos$3 = Math.cos;\r\n    var sin$3 = Math.sin;\r\n    var TrochoidShape = (function () {\r\n        function TrochoidShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r = 0;\r\n            this.r0 = 0;\r\n            this.d = 0;\r\n            this.location = 'out';\r\n        }\r\n        return TrochoidShape;\r\n    }());\r\n    var Trochoid = (function (_super) {\r\n        __extends(Trochoid, _super);\r\n        function Trochoid(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        Trochoid.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        Trochoid.prototype.getDefaultShape = function () {\r\n            return new TrochoidShape();\r\n        };\r\n        Trochoid.prototype.buildPath = function (ctx, shape) {\r\n            var R = shape.r;\r\n            var r = shape.r0;\r\n            var d = shape.d;\r\n            var offsetX = shape.cx;\r\n            var offsetY = shape.cy;\r\n            var delta = shape.location === 'out' ? 1 : -1;\r\n            var x1;\r\n            var y1;\r\n            var x2;\r\n            var y2;\r\n            if (shape.location && R <= r) {\r\n                return;\r\n            }\r\n            var num = 0;\r\n            var i = 1;\r\n            var theta;\r\n            x1 = (R + delta * r) * cos$3(0)\r\n                - delta * d * cos$3(0) + offsetX;\r\n            y1 = (R + delta * r) * sin$3(0)\r\n                - d * sin$3(0) + offsetY;\r\n            ctx.moveTo(x1, y1);\r\n            do {\r\n                num++;\r\n            } while ((r * num) % (R + delta * r) !== 0);\r\n            do {\r\n                theta = Math.PI / 180 * i;\r\n                x2 = (R + delta * r) * cos$3(theta)\r\n                    - delta * d * cos$3((R / r + delta) * theta)\r\n                    + offsetX;\r\n                y2 = (R + delta * r) * sin$3(theta)\r\n                    - d * sin$3((R / r + delta) * theta)\r\n                    + offsetY;\r\n                ctx.lineTo(x2, y2);\r\n                i++;\r\n            } while (i <= (r * num) / (R + delta * r) * 360);\r\n        };\r\n        return Trochoid;\r\n    }(Path));\r\n    Trochoid.prototype.type = 'trochoid';\n\n    var RadialGradient = (function (_super) {\r\n        __extends(RadialGradient, _super);\r\n        function RadialGradient(x, y, r, colorStops, globalCoord) {\r\n            var _this = _super.call(this, colorStops) || this;\r\n            _this.x = x == null ? 0.5 : x;\r\n            _this.y = y == null ? 0.5 : y;\r\n            _this.r = r == null ? 0.5 : r;\r\n            _this.type = 'radial';\r\n            _this.global = globalCoord || false;\r\n            return _this;\r\n        }\r\n        return RadialGradient;\r\n    }(Gradient));\n\n    var extent = [0, 0];\r\n    var extent2 = [0, 0];\r\n    var minTv$1 = new Point();\r\n    var maxTv$1 = new Point();\r\n    var OrientedBoundingRect = (function () {\r\n        function OrientedBoundingRect(rect, transform) {\r\n            this._corners = [];\r\n            this._axes = [];\r\n            this._origin = [0, 0];\r\n            for (var i = 0; i < 4; i++) {\r\n                this._corners[i] = new Point();\r\n            }\r\n            for (var i = 0; i < 2; i++) {\r\n                this._axes[i] = new Point();\r\n            }\r\n            if (rect) {\r\n                this.fromBoundingRect(rect, transform);\r\n            }\r\n        }\r\n        OrientedBoundingRect.prototype.fromBoundingRect = function (rect, transform) {\r\n            var corners = this._corners;\r\n            var axes = this._axes;\r\n            var x = rect.x;\r\n            var y = rect.y;\r\n            var x2 = x + rect.width;\r\n            var y2 = y + rect.height;\r\n            corners[0].set(x, y);\r\n            corners[1].set(x2, y);\r\n            corners[2].set(x2, y2);\r\n            corners[3].set(x, y2);\r\n            if (transform) {\r\n                for (var i = 0; i < 4; i++) {\r\n                    corners[i].transform(transform);\r\n                }\r\n            }\r\n            Point.sub(axes[0], corners[1], corners[0]);\r\n            Point.sub(axes[1], corners[3], corners[0]);\r\n            axes[0].normalize();\r\n            axes[1].normalize();\r\n            for (var i = 0; i < 2; i++) {\r\n                this._origin[i] = axes[i].dot(corners[0]);\r\n            }\r\n        };\r\n        OrientedBoundingRect.prototype.intersect = function (other, mtv) {\r\n            var overlapped = true;\r\n            var noMtv = !mtv;\r\n            minTv$1.set(Infinity, Infinity);\r\n            maxTv$1.set(0, 0);\r\n            if (!this._intersectCheckOneSide(this, other, minTv$1, maxTv$1, noMtv, 1)) {\r\n                overlapped = false;\r\n                if (noMtv) {\r\n                    return overlapped;\r\n                }\r\n            }\r\n            if (!this._intersectCheckOneSide(other, this, minTv$1, maxTv$1, noMtv, -1)) {\r\n                overlapped = false;\r\n                if (noMtv) {\r\n                    return overlapped;\r\n                }\r\n            }\r\n            if (!noMtv) {\r\n                Point.copy(mtv, overlapped ? minTv$1 : maxTv$1);\r\n            }\r\n            return overlapped;\r\n        };\r\n        OrientedBoundingRect.prototype._intersectCheckOneSide = function (self, other, minTv, maxTv, noMtv, inverse) {\r\n            var overlapped = true;\r\n            for (var i = 0; i < 2; i++) {\r\n                var axis = this._axes[i];\r\n                this._getProjMinMaxOnAxis(i, self._corners, extent);\r\n                this._getProjMinMaxOnAxis(i, other._corners, extent2);\r\n                if (extent[1] < extent2[0] || extent[0] > extent2[1]) {\r\n                    overlapped = false;\r\n                    if (noMtv) {\r\n                        return overlapped;\r\n                    }\r\n                    var dist0 = Math.abs(extent2[0] - extent[1]);\r\n                    var dist1 = Math.abs(extent[0] - extent2[1]);\r\n                    if (Math.min(dist0, dist1) > maxTv.len()) {\r\n                        if (dist0 < dist1) {\r\n                            Point.scale(maxTv, axis, -dist0 * inverse);\r\n                        }\r\n                        else {\r\n                            Point.scale(maxTv, axis, dist1 * inverse);\r\n                        }\r\n                    }\r\n                }\r\n                else if (minTv) {\r\n                    var dist0 = Math.abs(extent2[0] - extent[1]);\r\n                    var dist1 = Math.abs(extent[0] - extent2[1]);\r\n                    if (Math.min(dist0, dist1) < minTv.len()) {\r\n                        if (dist0 < dist1) {\r\n                            Point.scale(minTv, axis, dist0 * inverse);\r\n                        }\r\n                        else {\r\n                            Point.scale(minTv, axis, -dist1 * inverse);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return overlapped;\r\n        };\r\n        OrientedBoundingRect.prototype._getProjMinMaxOnAxis = function (dim, corners, out) {\r\n            var axis = this._axes[dim];\r\n            var origin = this._origin;\r\n            var proj = corners[0].dot(axis) + origin[dim];\r\n            var min = proj;\r\n            var max = proj;\r\n            for (var i = 1; i < corners.length; i++) {\r\n                var proj_1 = corners[i].dot(axis) + origin[dim];\r\n                min = Math.min(proj_1, min);\r\n                max = Math.max(proj_1, max);\r\n            }\r\n            out[0] = min;\r\n            out[1] = max;\r\n        };\r\n        return OrientedBoundingRect;\r\n    }());\n\n    /*!\r\n    * ZRender, a high performance 2d drawing library.\r\n    *\r\n    * Copyright (c) 2013, Baidu Inc.\r\n    * All rights reserved.\r\n    *\r\n    * LICENSE\r\n    * https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\r\n    */\r\n    var useVML = !env.canvasSupported;\r\n    var painterCtors = {};\r\n    var instances = {};\r\n    function delInstance(id) {\r\n        delete instances[id];\r\n    }\r\n    function isDarkMode(backgroundColor) {\r\n        if (!backgroundColor) {\r\n            return false;\r\n        }\r\n        if (typeof backgroundColor === 'string') {\r\n            return lum(backgroundColor, 1) < DARK_MODE_THRESHOLD;\r\n        }\r\n        else if (backgroundColor.colorStops) {\r\n            var colorStops = backgroundColor.colorStops;\r\n            var totalLum = 0;\r\n            var len = colorStops.length;\r\n            for (var i = 0; i < len; i++) {\r\n                totalLum += lum(colorStops[i].color, 1);\r\n            }\r\n            totalLum /= len;\r\n            return totalLum < DARK_MODE_THRESHOLD;\r\n        }\r\n        return false;\r\n    }\r\n    var ZRender = (function () {\r\n        function ZRender(id, dom, opts) {\r\n            var _this = this;\r\n            this._stillFrameAccum = 0;\r\n            this._needsRefresh = true;\r\n            this._needsRefreshHover = true;\r\n            this._darkMode = false;\r\n            opts = opts || {};\r\n            this.dom = dom;\r\n            this.id = id;\r\n            var storage = new Storage();\r\n            var rendererType = opts.renderer;\r\n            if (useVML) {\r\n                if (!painterCtors.vml) {\r\n                    throw new Error('You need to require \\'zrender/vml/vml\\' to support IE8');\r\n                }\r\n                rendererType = 'vml';\r\n            }\r\n            else if (!rendererType) {\r\n                rendererType = 'canvas';\r\n            }\r\n            if (!painterCtors[rendererType]) {\r\n                throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\r\n            }\r\n            var painter = new painterCtors[rendererType](dom, storage, opts, id);\r\n            this.storage = storage;\r\n            this.painter = painter;\r\n            var handerProxy = (!env.node && !env.worker)\r\n                ? new HandlerDomProxy(painter.getViewportRoot(), painter.root)\r\n                : null;\r\n            this.handler = new Handler(storage, painter, handerProxy, painter.root);\r\n            this.animation = new Animation({\r\n                stage: {\r\n                    update: function () { return _this._flush(true); }\r\n                }\r\n            });\r\n            this.animation.start();\r\n        }\r\n        ZRender.prototype.add = function (el) {\r\n            this.storage.addRoot(el);\r\n            el.addSelfToZr(this);\r\n            this.refresh();\r\n        };\r\n        ZRender.prototype.remove = function (el) {\r\n            this.storage.delRoot(el);\r\n            el.removeSelfFromZr(this);\r\n            this.refresh();\r\n        };\r\n        ZRender.prototype.configLayer = function (zLevel, config) {\r\n            if (this.painter.configLayer) {\r\n                this.painter.configLayer(zLevel, config);\r\n            }\r\n            this.refresh();\r\n        };\r\n        ZRender.prototype.setBackgroundColor = function (backgroundColor) {\r\n            if (this.painter.setBackgroundColor) {\r\n                this.painter.setBackgroundColor(backgroundColor);\r\n            }\r\n            this.refresh();\r\n            this._backgroundColor = backgroundColor;\r\n            this._darkMode = isDarkMode(backgroundColor);\r\n        };\r\n        ZRender.prototype.getBackgroundColor = function () {\r\n            return this._backgroundColor;\r\n        };\r\n        ZRender.prototype.setDarkMode = function (darkMode) {\r\n            this._darkMode = darkMode;\r\n        };\r\n        ZRender.prototype.isDarkMode = function () {\r\n            return this._darkMode;\r\n        };\r\n        ZRender.prototype.refreshImmediately = function (fromInside) {\r\n            if (!fromInside) {\r\n                this.animation.update();\r\n            }\r\n            this._needsRefresh = false;\r\n            this.painter.refresh();\r\n            this._needsRefresh = false;\r\n        };\r\n        ZRender.prototype.refresh = function () {\r\n            this._needsRefresh = true;\r\n            this.animation.start();\r\n        };\r\n        ZRender.prototype.flush = function () {\r\n            this._flush(false);\r\n        };\r\n        ZRender.prototype._flush = function (fromInside) {\r\n            var triggerRendered;\r\n            if (this._needsRefresh) {\r\n                triggerRendered = true;\r\n                this.refreshImmediately(fromInside);\r\n            }\r\n            if (this._needsRefreshHover) {\r\n                triggerRendered = true;\r\n                this.refreshHoverImmediately();\r\n            }\r\n            if (triggerRendered) {\r\n                this._stillFrameAccum = 0;\r\n                this.trigger('rendered');\r\n            }\r\n            else {\r\n                this._stillFrameAccum++;\r\n                if (this._stillFrameAccum > 10) {\r\n                    this.animation.stop();\r\n                }\r\n            }\r\n        };\r\n        ZRender.prototype.wakeUp = function () {\r\n            this.animation.start();\r\n            this._stillFrameAccum = 0;\r\n        };\r\n        ZRender.prototype.addHover = function (el) {\r\n        };\r\n        ZRender.prototype.removeHover = function (el) {\r\n        };\r\n        ZRender.prototype.clearHover = function () {\r\n        };\r\n        ZRender.prototype.refreshHover = function () {\r\n            this._needsRefreshHover = true;\r\n        };\r\n        ZRender.prototype.refreshHoverImmediately = function () {\r\n            this._needsRefreshHover = false;\r\n            if (this.painter.refreshHover) {\r\n                this.painter.refreshHover();\r\n            }\r\n        };\r\n        ZRender.prototype.resize = function (opts) {\r\n            opts = opts || {};\r\n            this.painter.resize(opts.width, opts.height);\r\n            this.handler.resize();\r\n        };\r\n        ZRender.prototype.clearAnimation = function () {\r\n            this.animation.clear();\r\n        };\r\n        ZRender.prototype.getWidth = function () {\r\n            return this.painter.getWidth();\r\n        };\r\n        ZRender.prototype.getHeight = function () {\r\n            return this.painter.getHeight();\r\n        };\r\n        ZRender.prototype.pathToImage = function (e, dpr) {\r\n            if (this.painter.pathToImage) {\r\n                return this.painter.pathToImage(e, dpr);\r\n            }\r\n        };\r\n        ZRender.prototype.setCursorStyle = function (cursorStyle) {\r\n            this.handler.setCursorStyle(cursorStyle);\r\n        };\r\n        ZRender.prototype.findHover = function (x, y) {\r\n            return this.handler.findHover(x, y);\r\n        };\r\n        ZRender.prototype.on = function (eventName, eventHandler, context) {\r\n            this.handler.on(eventName, eventHandler, context);\r\n            return this;\r\n        };\r\n        ZRender.prototype.off = function (eventName, eventHandler) {\r\n            this.handler.off(eventName, eventHandler);\r\n        };\r\n        ZRender.prototype.trigger = function (eventName, event) {\r\n            this.handler.trigger(eventName, event);\r\n        };\r\n        ZRender.prototype.clear = function () {\r\n            var roots = this.storage.getRoots();\r\n            for (var i = 0; i < roots.length; i++) {\r\n                if (roots[i] instanceof Group) {\r\n                    roots[i].removeSelfFromZr(this);\r\n                }\r\n            }\r\n            this.storage.delAllRoots();\r\n            this.painter.clear();\r\n        };\r\n        ZRender.prototype.dispose = function () {\r\n            this.animation.stop();\r\n            this.clear();\r\n            this.storage.dispose();\r\n            this.painter.dispose();\r\n            this.handler.dispose();\r\n            this.animation =\r\n                this.storage =\r\n                    this.painter =\r\n                        this.handler = null;\r\n            delInstance(this.id);\r\n        };\r\n        return ZRender;\r\n    }());\r\n    function init(dom, opts) {\r\n        var zr = new ZRender(guid(), dom, opts);\r\n        instances[zr.id] = zr;\r\n        return zr;\r\n    }\r\n    function dispose(zr) {\r\n        zr.dispose();\r\n    }\r\n    function disposeAll() {\r\n        for (var key in instances) {\r\n            if (instances.hasOwnProperty(key)) {\r\n                instances[key].dispose();\r\n            }\r\n        }\r\n        instances = {};\r\n    }\r\n    function getInstance(id) {\r\n        return instances[id];\r\n    }\r\n    function registerPainter(name, Ctor) {\r\n        painterCtors[name] = Ctor;\r\n    }\r\n    var version = '5.0.0-alpha.2';\n\n    var zrender = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init,\n        dispose: dispose,\n        disposeAll: disposeAll,\n        getInstance: getInstance,\n        registerPainter: registerPainter,\n        version: version\n    });\n\n    var RADIAN_EPSILON = 1e-4;\r\n    function _trim(str) {\r\n        return str.replace(/^\\s+|\\s+$/g, '');\r\n    }\r\n    function linearMap(val, domain, range, clamp) {\r\n        var subDomain = domain[1] - domain[0];\r\n        var subRange = range[1] - range[0];\r\n        if (subDomain === 0) {\r\n            return subRange === 0\r\n                ? range[0]\r\n                : (range[0] + range[1]) / 2;\r\n        }\r\n        if (clamp) {\r\n            if (subDomain > 0) {\r\n                if (val <= domain[0]) {\r\n                    return range[0];\r\n                }\r\n                else if (val >= domain[1]) {\r\n                    return range[1];\r\n                }\r\n            }\r\n            else {\r\n                if (val >= domain[0]) {\r\n                    return range[0];\r\n                }\r\n                else if (val <= domain[1]) {\r\n                    return range[1];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (val === domain[0]) {\r\n                return range[0];\r\n            }\r\n            if (val === domain[1]) {\r\n                return range[1];\r\n            }\r\n        }\r\n        return (val - domain[0]) / subDomain * subRange + range[0];\r\n    }\r\n    function parsePercent$2(percent, all) {\r\n        switch (percent) {\r\n            case 'center':\r\n            case 'middle':\r\n                percent = '50%';\r\n                break;\r\n            case 'left':\r\n            case 'top':\r\n                percent = '0%';\r\n                break;\r\n            case 'right':\r\n            case 'bottom':\r\n                percent = '100%';\r\n                break;\r\n        }\r\n        if (typeof percent === 'string') {\r\n            if (_trim(percent).match(/%$/)) {\r\n                return parseFloat(percent) / 100 * all;\r\n            }\r\n            return parseFloat(percent);\r\n        }\r\n        return percent == null ? NaN : +percent;\r\n    }\r\n    function round$1(x, precision, returnStr) {\r\n        if (precision == null) {\r\n            precision = 10;\r\n        }\r\n        precision = Math.min(Math.max(0, precision), 20);\r\n        x = (+x).toFixed(precision);\r\n        return (returnStr ? x : +x);\r\n    }\r\n    function asc(arr) {\r\n        arr.sort(function (a, b) {\r\n            return a - b;\r\n        });\r\n        return arr;\r\n    }\r\n    function getPrecision(val) {\r\n        val = +val;\r\n        if (isNaN(val)) {\r\n            return 0;\r\n        }\r\n        var e = 1;\r\n        var count = 0;\r\n        while (Math.round(val * e) / e !== val) {\r\n            e *= 10;\r\n            count++;\r\n        }\r\n        return count;\r\n    }\r\n    function getPrecisionSafe(val) {\r\n        var str = val.toString();\r\n        var eIndex = str.indexOf('e');\r\n        if (eIndex > 0) {\r\n            var precision = +str.slice(eIndex + 1);\r\n            return precision < 0 ? -precision : 0;\r\n        }\r\n        else {\r\n            var dotIndex = str.indexOf('.');\r\n            return dotIndex < 0 ? 0 : str.length - 1 - dotIndex;\r\n        }\r\n    }\r\n    function getPixelPrecision(dataExtent, pixelExtent) {\r\n        var log = Math.log;\r\n        var LN10 = Math.LN10;\r\n        var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\r\n        var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10);\r\n        var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\r\n        return !isFinite(precision) ? 20 : precision;\r\n    }\r\n    function getPercentWithPrecision(valueList, idx, precision) {\r\n        if (!valueList[idx]) {\r\n            return 0;\r\n        }\r\n        var sum = reduce(valueList, function (acc, val) {\r\n            return acc + (isNaN(val) ? 0 : val);\r\n        }, 0);\r\n        if (sum === 0) {\r\n            return 0;\r\n        }\r\n        var digits = Math.pow(10, precision);\r\n        var votesPerQuota = map(valueList, function (val) {\r\n            return (isNaN(val) ? 0 : val) / sum * digits * 100;\r\n        });\r\n        var targetSeats = digits * 100;\r\n        var seats = map(votesPerQuota, function (votes) {\r\n            return Math.floor(votes);\r\n        });\r\n        var currentSum = reduce(seats, function (acc, val) {\r\n            return acc + val;\r\n        }, 0);\r\n        var remainder = map(votesPerQuota, function (votes, idx) {\r\n            return votes - seats[idx];\r\n        });\r\n        while (currentSum < targetSeats) {\r\n            var max = Number.NEGATIVE_INFINITY;\r\n            var maxId = null;\r\n            for (var i = 0, len = remainder.length; i < len; ++i) {\r\n                if (remainder[i] > max) {\r\n                    max = remainder[i];\r\n                    maxId = i;\r\n                }\r\n            }\r\n            ++seats[maxId];\r\n            remainder[maxId] = 0;\r\n            ++currentSum;\r\n        }\r\n        return seats[idx] / digits;\r\n    }\r\n    var MAX_SAFE_INTEGER = 9007199254740991;\r\n    function remRadian(radian) {\r\n        var pi2 = Math.PI * 2;\r\n        return (radian % pi2 + pi2) % pi2;\r\n    }\r\n    function isRadianAroundZero(val) {\r\n        return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\r\n    }\r\n    var TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d{1,2})(?::(\\d{1,2})(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/;\r\n    function parseDate(value) {\r\n        if (value instanceof Date) {\r\n            return value;\r\n        }\r\n        else if (typeof value === 'string') {\r\n            var match = TIME_REG.exec(value);\r\n            if (!match) {\r\n                return new Date(NaN);\r\n            }\r\n            if (!match[8]) {\r\n                return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, +match[7] || 0);\r\n            }\r\n            else {\r\n                var hour = +match[4] || 0;\r\n                if (match[8].toUpperCase() !== 'Z') {\r\n                    hour -= +match[8].slice(0, 3);\r\n                }\r\n                return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, +match[7] || 0));\r\n            }\r\n        }\r\n        else if (value == null) {\r\n            return new Date(NaN);\r\n        }\r\n        return new Date(Math.round(value));\r\n    }\r\n    function quantity(val) {\r\n        return Math.pow(10, quantityExponent(val));\r\n    }\r\n    function quantityExponent(val) {\r\n        if (val === 0) {\r\n            return 0;\r\n        }\r\n        var exp = Math.floor(Math.log(val) / Math.LN10);\r\n        if (val / Math.pow(10, exp) >= 10) {\r\n            exp++;\r\n        }\r\n        return exp;\r\n    }\r\n    function nice(val, round) {\r\n        var exponent = quantityExponent(val);\r\n        var exp10 = Math.pow(10, exponent);\r\n        var f = val / exp10;\r\n        var nf;\r\n        if (round) {\r\n            if (f < 1.5) {\r\n                nf = 1;\r\n            }\r\n            else if (f < 2.5) {\r\n                nf = 2;\r\n            }\r\n            else if (f < 4) {\r\n                nf = 3;\r\n            }\r\n            else if (f < 7) {\r\n                nf = 5;\r\n            }\r\n            else {\r\n                nf = 10;\r\n            }\r\n        }\r\n        else {\r\n            if (f < 1) {\r\n                nf = 1;\r\n            }\r\n            else if (f < 2) {\r\n                nf = 2;\r\n            }\r\n            else if (f < 3) {\r\n                nf = 3;\r\n            }\r\n            else if (f < 5) {\r\n                nf = 5;\r\n            }\r\n            else {\r\n                nf = 10;\r\n            }\r\n        }\r\n        val = nf * exp10;\r\n        return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\r\n    }\r\n    function quantile(ascArr, p) {\r\n        var H = (ascArr.length - 1) * p + 1;\r\n        var h = Math.floor(H);\r\n        var v = +ascArr[h - 1];\r\n        var e = H - h;\r\n        return e ? v + e * (ascArr[h] - v) : v;\r\n    }\r\n    function reformIntervals(list) {\r\n        list.sort(function (a, b) {\r\n            return littleThan(a, b, 0) ? -1 : 1;\r\n        });\r\n        var curr = -Infinity;\r\n        var currClose = 1;\r\n        for (var i = 0; i < list.length;) {\r\n            var interval = list[i].interval;\r\n            var close_1 = list[i].close;\r\n            for (var lg = 0; lg < 2; lg++) {\r\n                if (interval[lg] <= curr) {\r\n                    interval[lg] = curr;\r\n                    close_1[lg] = (!lg ? 1 - currClose : 1);\r\n                }\r\n                curr = interval[lg];\r\n                currClose = close_1[lg];\r\n            }\r\n            if (interval[0] === interval[1] && close_1[0] * close_1[1] !== 1) {\r\n                list.splice(i, 1);\r\n            }\r\n            else {\r\n                i++;\r\n            }\r\n        }\r\n        return list;\r\n        function littleThan(a, b, lg) {\r\n            return a.interval[lg] < b.interval[lg]\r\n                || (a.interval[lg] === b.interval[lg]\r\n                    && ((a.close[lg] - b.close[lg] === (!lg ? 1 : -1))\r\n                        || (!lg && littleThan(a, b, 1))));\r\n        }\r\n    }\r\n    function numericToNumber(val) {\r\n        var valFloat = parseFloat(val);\r\n        return (valFloat == val\r\n            && (valFloat !== 0 || typeof val !== 'string' || val.indexOf('x') <= 0)) ? valFloat : NaN;\r\n    }\r\n    function isNumeric(val) {\r\n        return !isNaN(numericToNumber(val));\r\n    }\n\n    var number = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        linearMap: linearMap,\n        parsePercent: parsePercent$2,\n        round: round$1,\n        asc: asc,\n        getPrecision: getPrecision,\n        getPrecisionSafe: getPrecisionSafe,\n        getPixelPrecision: getPixelPrecision,\n        getPercentWithPrecision: getPercentWithPrecision,\n        MAX_SAFE_INTEGER: MAX_SAFE_INTEGER,\n        remRadian: remRadian,\n        isRadianAroundZero: isRadianAroundZero,\n        parseDate: parseDate,\n        quantity: quantity,\n        quantityExponent: quantityExponent,\n        nice: nice,\n        quantile: quantile,\n        reformIntervals: reformIntervals,\n        numericToNumber: numericToNumber,\n        isNumeric: isNumeric\n    });\n\n    var DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\r\n    var INTERNAL_COMPONENT_ID_PREFIX = '\\0_ec_\\0';\r\n    function normalizeToArray(value) {\r\n        return value instanceof Array\r\n            ? value\r\n            : value == null\r\n                ? []\r\n                : [value];\r\n    }\r\n    function defaultEmphasis(opt, key, subOpts) {\r\n        if (opt) {\r\n            opt[key] = opt[key] || {};\r\n            opt.emphasis = opt.emphasis || {};\r\n            opt.emphasis[key] = opt.emphasis[key] || {};\r\n            for (var i = 0, len = subOpts.length; i < len; i++) {\r\n                var subOptName = subOpts[i];\r\n                if (!opt.emphasis[key].hasOwnProperty(subOptName)\r\n                    && opt[key].hasOwnProperty(subOptName)) {\r\n                    opt.emphasis[key][subOptName] = opt[key][subOptName];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    var TEXT_STYLE_OPTIONS = [\r\n        'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\r\n        'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth',\r\n        'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline',\r\n        'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY',\r\n        'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY',\r\n        'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding'\r\n    ];\r\n    function getDataItemValue(dataItem) {\r\n        return (isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date))\r\n            ? dataItem.value : dataItem;\r\n    }\r\n    function isDataItemOption(dataItem) {\r\n        return isObject(dataItem)\r\n            && !(dataItem instanceof Array);\r\n    }\r\n    function mappingToExists(existings, newCmptOptions, mode) {\r\n        var isNormalMergeMode = mode === 'normalMerge';\r\n        var isReplaceMergeMode = mode === 'replaceMerge';\r\n        var isReplaceAllMode = mode === 'replaceAll';\r\n        existings = existings || [];\r\n        newCmptOptions = (newCmptOptions || []).slice();\r\n        var existingIdIdxMap = createHashMap();\r\n        each(newCmptOptions, function (cmptOption, index) {\r\n            if (!isObject(cmptOption)) {\r\n                newCmptOptions[index] = null;\r\n                return;\r\n            }\r\n            cmptOption.id == null || validateIdOrName(cmptOption.id);\r\n            cmptOption.name == null || validateIdOrName(cmptOption.name);\r\n        });\r\n        var result = prepareResult(existings, existingIdIdxMap, mode);\r\n        if (isNormalMergeMode || isReplaceMergeMode) {\r\n            mappingById(result, existings, existingIdIdxMap, newCmptOptions);\r\n        }\r\n        if (isNormalMergeMode) {\r\n            mappingByName(result, newCmptOptions);\r\n        }\r\n        if (isNormalMergeMode || isReplaceMergeMode) {\r\n            mappingByIndex(result, newCmptOptions, isReplaceMergeMode);\r\n        }\r\n        else if (isReplaceAllMode) {\r\n            mappingInReplaceAllMode(result, newCmptOptions);\r\n        }\r\n        makeIdAndName(result);\r\n        return result;\r\n    }\r\n    function prepareResult(existings, existingIdIdxMap, mode) {\r\n        var result = [];\r\n        if (mode === 'replaceAll') {\r\n            return result;\r\n        }\r\n        for (var index = 0; index < existings.length; index++) {\r\n            var existing = existings[index];\r\n            if (existing && existing.id != null) {\r\n                existingIdIdxMap.set(existing.id, index);\r\n            }\r\n            result.push({\r\n                existing: (mode === 'replaceMerge' || isComponentIdInternal(existing))\r\n                    ? null\r\n                    : existing,\r\n                newOption: null,\r\n                keyInfo: null,\r\n                brandNew: null\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function mappingById(result, existings, existingIdIdxMap, newCmptOptions) {\r\n        each(newCmptOptions, function (cmptOption, index) {\r\n            if (!cmptOption || cmptOption.id == null) {\r\n                return;\r\n            }\r\n            var optionId = makeComparableKey(cmptOption.id);\r\n            var existingIdx = existingIdIdxMap.get(optionId);\r\n            if (existingIdx != null) {\r\n                var resultItem = result[existingIdx];\r\n                assert(!resultItem.newOption, 'Duplicated option on id \"' + optionId + '\".');\r\n                resultItem.newOption = cmptOption;\r\n                resultItem.existing = existings[existingIdx];\r\n                newCmptOptions[index] = null;\r\n            }\r\n        });\r\n    }\r\n    function mappingByName(result, newCmptOptions) {\r\n        each(newCmptOptions, function (cmptOption, index) {\r\n            if (!cmptOption || cmptOption.name == null) {\r\n                return;\r\n            }\r\n            for (var i = 0; i < result.length; i++) {\r\n                var existing = result[i].existing;\r\n                if (!result[i].newOption\r\n                    && existing\r\n                    && (existing.id == null || cmptOption.id == null)\r\n                    && !isComponentIdInternal(cmptOption)\r\n                    && !isComponentIdInternal(existing)\r\n                    && keyExistAndEqual('name', existing, cmptOption)) {\r\n                    result[i].newOption = cmptOption;\r\n                    newCmptOptions[index] = null;\r\n                    return;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    function mappingByIndex(result, newCmptOptions, brandNew) {\r\n        var nextIdx = 0;\r\n        each(newCmptOptions, function (cmptOption) {\r\n            if (!cmptOption) {\r\n                return;\r\n            }\r\n            var resultItem;\r\n            while ((resultItem = result[nextIdx])\r\n                && (resultItem.newOption\r\n                    || isComponentIdInternal(resultItem.existing)\r\n                    || (resultItem.existing\r\n                        && cmptOption.id != null\r\n                        && !keyExistAndEqual('id', cmptOption, resultItem.existing)))) {\r\n                nextIdx++;\r\n            }\r\n            if (resultItem) {\r\n                resultItem.newOption = cmptOption;\r\n                resultItem.brandNew = brandNew;\r\n            }\r\n            else {\r\n                result.push({\r\n                    newOption: cmptOption,\r\n                    brandNew: brandNew,\r\n                    existing: null,\r\n                    keyInfo: null\r\n                });\r\n            }\r\n            nextIdx++;\r\n        });\r\n    }\r\n    function mappingInReplaceAllMode(result, newCmptOptions) {\r\n        each(newCmptOptions, function (cmptOption) {\r\n            result.push({\r\n                newOption: cmptOption,\r\n                brandNew: true,\r\n                existing: null,\r\n                keyInfo: null\r\n            });\r\n        });\r\n    }\r\n    function makeIdAndName(mapResult) {\r\n        var idMap = createHashMap();\r\n        each(mapResult, function (item) {\r\n            var existing = item.existing;\r\n            existing && idMap.set(existing.id, item);\r\n        });\r\n        each(mapResult, function (item) {\r\n            var opt = item.newOption;\r\n            assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\r\n            opt && opt.id != null && idMap.set(opt.id, item);\r\n            !item.keyInfo && (item.keyInfo = {});\r\n        });\r\n        each(mapResult, function (item, index) {\r\n            var existing = item.existing;\r\n            var opt = item.newOption;\r\n            var keyInfo = item.keyInfo;\r\n            if (!isObject(opt)) {\r\n                return;\r\n            }\r\n            keyInfo.name = opt.name != null\r\n                ? makeComparableKey(opt.name)\r\n                : existing\r\n                    ? existing.name\r\n                    : DUMMY_COMPONENT_NAME_PREFIX + index;\r\n            if (existing) {\r\n                keyInfo.id = makeComparableKey(existing.id);\r\n            }\r\n            else if (opt.id != null) {\r\n                keyInfo.id = makeComparableKey(opt.id);\r\n            }\r\n            else {\r\n                var idNum = 0;\r\n                do {\r\n                    keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\r\n                } while (idMap.get(keyInfo.id));\r\n            }\r\n            idMap.set(keyInfo.id, item);\r\n        });\r\n    }\r\n    function keyExistAndEqual(attr, obj1, obj2) {\r\n        var key1 = obj1[attr];\r\n        var key2 = obj2[attr];\r\n        return key1 != null && key2 != null && key1 + '' === key2 + '';\r\n    }\r\n    function makeComparableKey(val) {\r\n        if (__DEV__) {\r\n            if (val == null) {\r\n                throw new Error();\r\n            }\r\n        }\r\n        return val + '';\r\n    }\r\n    function validateIdOrName(idOrName) {\r\n        if (__DEV__) {\r\n            assert(isValidIdOrName(idOrName), '`' + idOrName + '` is invalid id or name. Must be a string.');\r\n        }\r\n    }\r\n    function isValidIdOrName(idOrName) {\r\n        return isStringSafe(idOrName) || isNumeric(idOrName);\r\n    }\r\n    function isNameSpecified(componentModel) {\r\n        var name = componentModel.name;\r\n        return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\r\n    }\r\n    function isComponentIdInternal(cmptOption) {\r\n        return cmptOption\r\n            && cmptOption.id != null\r\n            && makeComparableKey(cmptOption.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX) === 0;\r\n    }\r\n    function makeInternalComponentId(idSuffix) {\r\n        return INTERNAL_COMPONENT_ID_PREFIX + idSuffix;\r\n    }\r\n    function setComponentTypeToKeyInfo(mappingResult, mainType, componentModelCtor) {\r\n        each(mappingResult, function (item) {\r\n            var newOption = item.newOption;\r\n            if (isObject(newOption)) {\r\n                item.keyInfo.mainType = mainType;\r\n                item.keyInfo.subType = determineSubType(mainType, newOption, item.existing, componentModelCtor);\r\n            }\r\n        });\r\n    }\r\n    function determineSubType(mainType, newCmptOption, existComponent, componentModelCtor) {\r\n        var subType = newCmptOption.type\r\n            ? newCmptOption.type\r\n            : existComponent\r\n                ? existComponent.subType\r\n                : componentModelCtor.determineSubType(mainType, newCmptOption);\r\n        return subType;\r\n    }\r\n    function queryDataIndex(data, payload) {\r\n        if (payload.dataIndexInside != null) {\r\n            return payload.dataIndexInside;\r\n        }\r\n        else if (payload.dataIndex != null) {\r\n            return isArray(payload.dataIndex)\r\n                ? map(payload.dataIndex, function (value) {\r\n                    return data.indexOfRawIndex(value);\r\n                })\r\n                : data.indexOfRawIndex(payload.dataIndex);\r\n        }\r\n        else if (payload.name != null) {\r\n            return isArray(payload.name)\r\n                ? map(payload.name, function (value) {\r\n                    return data.indexOfName(value);\r\n                })\r\n                : data.indexOfName(payload.name);\r\n        }\r\n    }\r\n    function makeInner() {\r\n        var key = '__ec_inner_' + innerUniqueIndex++;\r\n        return function (hostObj) {\r\n            return hostObj[key] || (hostObj[key] = {});\r\n        };\r\n    }\r\n    var innerUniqueIndex = Math.round(Math.random() * 5);\r\n    function parseFinder(ecModel, finderInput, opt) {\r\n        var finder;\r\n        if (isString(finderInput)) {\r\n            var obj = {};\r\n            obj[finderInput + 'Index'] = 0;\r\n            finder = obj;\r\n        }\r\n        else {\r\n            finder = finderInput;\r\n        }\r\n        var defaultMainType = opt ? opt.defaultMainType : null;\r\n        var queryOptionMap = createHashMap();\r\n        var result = {};\r\n        each(finder, function (value, key) {\r\n            if (key === 'dataIndex' || key === 'dataIndexInside') {\r\n                result[key] = value;\r\n                return;\r\n            }\r\n            var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\r\n            var mainType = parsedKey[1];\r\n            var queryType = (parsedKey[2] || '').toLowerCase();\r\n            if (!mainType\r\n                || !queryType\r\n                || (mainType !== defaultMainType && value == null)\r\n                || (opt && opt.includeMainTypes && indexOf(opt.includeMainTypes, mainType) < 0)) {\r\n                return;\r\n            }\r\n            var queryOption = queryOptionMap.get(mainType) || queryOptionMap.set(mainType, {});\r\n            queryOption[queryType] = value;\r\n        });\r\n        queryOptionMap.each(function (queryOption, mainType) {\r\n            var queryResult = queryReferringComponents(ecModel, mainType, queryOption, {\r\n                useDefault: mainType === defaultMainType,\r\n                enableAll: true,\r\n                enableNone: true\r\n            });\r\n            result[mainType + 'Models'] = queryResult.models;\r\n            result[mainType + 'Model'] = queryResult.models[0];\r\n        });\r\n        return result;\r\n    }\r\n    var SINGLE_REFERRING = { useDefault: true, enableAll: false, enableNone: false };\r\n    var MULTIPLE_REFERRING = { useDefault: false, enableAll: true, enableNone: true };\r\n    function queryReferringComponents(ecModel, mainType, userOption, opt) {\r\n        var indexOption = userOption.index;\r\n        var idOption = userOption.id;\r\n        var nameOption = userOption.name;\r\n        var result = {\r\n            models: null,\r\n            specified: indexOption != null || idOption != null || nameOption != null\r\n        };\r\n        if (!result.specified) {\r\n            var firstCmpt = void 0;\r\n            result.models = (opt.useDefault && (firstCmpt = ecModel.getComponent(mainType))) ? [firstCmpt] : [];\r\n            return result;\r\n        }\r\n        if (indexOption === 'none' || indexOption === false) {\r\n            assert(opt.enableNone, '`\"none\"` or `false` is not a valid value on index option.');\r\n            result.models = [];\r\n            return result;\r\n        }\r\n        if (indexOption === 'all') {\r\n            assert(opt.enableAll, '`\"all\"` is not a valid value on index option.');\r\n            indexOption = idOption = nameOption = null;\r\n        }\r\n        result.models = ecModel.queryComponents({\r\n            mainType: mainType,\r\n            index: indexOption,\r\n            id: idOption,\r\n            name: nameOption\r\n        });\r\n        return result;\r\n    }\r\n    function setAttribute(dom, key, value) {\r\n        dom.setAttribute\r\n            ? dom.setAttribute(key, value)\r\n            : (dom[key] = value);\r\n    }\r\n    function getAttribute(dom, key) {\r\n        return dom.getAttribute\r\n            ? dom.getAttribute(key)\r\n            : dom[key];\r\n    }\r\n    function getTooltipRenderMode(renderModeOption) {\r\n        if (renderModeOption === 'auto') {\r\n            return env.domSupported ? 'html' : 'richText';\r\n        }\r\n        else {\r\n            return renderModeOption || 'html';\r\n        }\r\n    }\n\n    var TYPE_DELIMITER = '.';\r\n    var IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\r\n    var IS_EXTENDED_CLASS = '___EC__EXTENDED_CLASS___';\r\n    function parseClassType(componentType) {\r\n        var ret = { main: '', sub: '' };\r\n        if (componentType) {\r\n            var typeArr = componentType.split(TYPE_DELIMITER);\r\n            ret.main = typeArr[0] || '';\r\n            ret.sub = typeArr[1] || '';\r\n        }\r\n        return ret;\r\n    }\r\n    function checkClassType(componentType) {\r\n        assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\r\n    }\r\n    function isExtendedClass(clz) {\r\n        return !!(clz && clz[IS_EXTENDED_CLASS]);\r\n    }\r\n    function enableClassExtend(rootClz, mandatoryMethods) {\r\n        rootClz.$constructor = rootClz;\r\n        rootClz.extend = function (proto) {\r\n            if (__DEV__) {\r\n                each(mandatoryMethods, function (method) {\r\n                    if (!proto[method]) {\r\n                        console.warn('Method `' + method + '` should be implemented'\r\n                            + (proto.type ? ' in ' + proto.type : '') + '.');\r\n                    }\r\n                });\r\n            }\r\n            var superClass = this;\r\n            function ExtendedClass() {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                if (!proto.$constructor) {\r\n                    if (!isESClass(superClass)) {\r\n                        superClass.apply(this, arguments);\r\n                    }\r\n                    else {\r\n                        var ins = createObject(ExtendedClass.prototype, new (superClass.bind.apply(superClass, __spreadArrays([void 0], args)))());\r\n                        return ins;\r\n                    }\r\n                }\r\n                else {\r\n                    proto.$constructor.apply(this, arguments);\r\n                }\r\n            }\r\n            ExtendedClass[IS_EXTENDED_CLASS] = true;\r\n            extend(ExtendedClass.prototype, proto);\r\n            ExtendedClass.extend = this.extend;\r\n            ExtendedClass.superCall = superCall;\r\n            ExtendedClass.superApply = superApply;\r\n            inherits(ExtendedClass, this);\r\n            ExtendedClass.superClass = superClass;\r\n            return ExtendedClass;\r\n        };\r\n    }\r\n    function isESClass(fn) {\r\n        return typeof fn === 'function'\r\n            && /^class\\s/.test(Function.prototype.toString.call(fn));\r\n    }\r\n    function mountExtend(SubClz, SupperClz) {\r\n        SubClz.extend = SupperClz.extend;\r\n    }\r\n    var classBase = Math.round(Math.random() * 10);\r\n    function enableClassCheck(target) {\r\n        var classAttr = ['__\\0is_clz', classBase++].join('_');\r\n        target.prototype[classAttr] = true;\r\n        if (__DEV__) {\r\n            assert(!target.isInstance, 'The method \"is\" can not be defined.');\r\n        }\r\n        target.isInstance = function (obj) {\r\n            return !!(obj && obj[classAttr]);\r\n        };\r\n    }\r\n    function superCall(context, methodName) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        return this.superClass.prototype[methodName].apply(context, args);\r\n    }\r\n    function superApply(context, methodName, args) {\r\n        return this.superClass.prototype[methodName].apply(context, args);\r\n    }\r\n    function enableClassManagement(target, options) {\r\n        options = options || {};\r\n        var storage = {};\r\n        target.registerClass = function (clz) {\r\n            var componentFullType = clz.type || clz.prototype.type;\r\n            if (componentFullType) {\r\n                checkClassType(componentFullType);\r\n                clz.prototype.type = componentFullType;\r\n                var componentTypeInfo = parseClassType(componentFullType);\r\n                if (!componentTypeInfo.sub) {\r\n                    if (__DEV__) {\r\n                        if (storage[componentTypeInfo.main]) {\r\n                            console.warn(componentTypeInfo.main + ' exists.');\r\n                        }\r\n                    }\r\n                    storage[componentTypeInfo.main] = clz;\r\n                }\r\n                else if (componentTypeInfo.sub !== IS_CONTAINER) {\r\n                    var container = makeContainer(componentTypeInfo);\r\n                    container[componentTypeInfo.sub] = clz;\r\n                }\r\n            }\r\n            return clz;\r\n        };\r\n        target.getClass = function (mainType, subType, throwWhenNotFound) {\r\n            var clz = storage[mainType];\r\n            if (clz && clz[IS_CONTAINER]) {\r\n                clz = subType ? clz[subType] : null;\r\n            }\r\n            if (throwWhenNotFound && !clz) {\r\n                throw new Error(!subType\r\n                    ? mainType + '.' + 'type should be specified.'\r\n                    : 'Component ' + mainType + '.' + (subType || '') + ' not exists. Load it first.');\r\n            }\r\n            return clz;\r\n        };\r\n        target.getClassesByMainType = function (componentType) {\r\n            var componentTypeInfo = parseClassType(componentType);\r\n            var result = [];\r\n            var obj = storage[componentTypeInfo.main];\r\n            if (obj && obj[IS_CONTAINER]) {\r\n                each(obj, function (o, type) {\r\n                    type !== IS_CONTAINER && result.push(o);\r\n                });\r\n            }\r\n            else {\r\n                result.push(obj);\r\n            }\r\n            return result;\r\n        };\r\n        target.hasClass = function (componentType) {\r\n            var componentTypeInfo = parseClassType(componentType);\r\n            return !!storage[componentTypeInfo.main];\r\n        };\r\n        target.getAllClassMainTypes = function () {\r\n            var types = [];\r\n            each(storage, function (obj, type) {\r\n                types.push(type);\r\n            });\r\n            return types;\r\n        };\r\n        target.hasSubTypes = function (componentType) {\r\n            var componentTypeInfo = parseClassType(componentType);\r\n            var obj = storage[componentTypeInfo.main];\r\n            return obj && obj[IS_CONTAINER];\r\n        };\r\n        function makeContainer(componentTypeInfo) {\r\n            var container = storage[componentTypeInfo.main];\r\n            if (!container || !container[IS_CONTAINER]) {\r\n                container = storage[componentTypeInfo.main] = {};\r\n                container[IS_CONTAINER] = true;\r\n            }\r\n            return container;\r\n        }\r\n        if (options.registerWhenExtend) {\r\n            var originalExtend_1 = target.extend;\r\n            if (originalExtend_1) {\r\n                target.extend = function (proto) {\r\n                    var ExtendedClass = originalExtend_1.call(this, proto);\r\n                    return target.registerClass(ExtendedClass);\r\n                };\r\n            }\r\n        }\r\n    }\n\n    function makeStyleMapper (properties, ignoreParent) {\r\n        for (var i = 0; i < properties.length; i++) {\r\n            if (!properties[i][1]) {\r\n                properties[i][1] = properties[i][0];\r\n            }\r\n        }\r\n        ignoreParent = ignoreParent || false;\r\n        return function (model, excludes, includes) {\r\n            var style = {};\r\n            for (var i = 0; i < properties.length; i++) {\r\n                var propName = properties[i][1];\r\n                if ((excludes && indexOf(excludes, propName) >= 0)\r\n                    || (includes && indexOf(includes, propName) < 0)) {\r\n                    continue;\r\n                }\r\n                var val = model.getShallow(propName, ignoreParent);\r\n                if (val != null) {\r\n                    style[properties[i][0]] = val;\r\n                }\r\n            }\r\n            return style;\r\n        };\r\n    }\n\n    var AREA_STYLE_KEY_MAP = [\r\n        ['fill', 'color'],\r\n        ['shadowBlur'],\r\n        ['shadowOffsetX'],\r\n        ['shadowOffsetY'],\r\n        ['opacity'],\r\n        ['shadowColor']\r\n    ];\r\n    var getAreaStyle = makeStyleMapper(AREA_STYLE_KEY_MAP);\r\n    var AreaStyleMixin = (function () {\r\n        function AreaStyleMixin() {\r\n        }\r\n        AreaStyleMixin.prototype.getAreaStyle = function (excludes, includes) {\r\n            return getAreaStyle(this, excludes, includes);\r\n        };\r\n        return AreaStyleMixin;\r\n    }());\n\n    var getECData = makeInner();\n\n    var _highlightNextDigit = 1;\r\n    var _highlightKeyMap = {};\r\n    var getSavedStates = makeInner();\r\n    var HOVER_STATE_NORMAL = 0;\r\n    var HOVER_STATE_BLUR = 1;\r\n    var HOVER_STATE_EMPHASIS = 2;\r\n    var SPECIAL_STATES = ['emphasis', 'blur', 'select'];\r\n    var DISPLAY_STATES = ['normal', 'emphasis', 'blur', 'select'];\r\n    var Z2_EMPHASIS_LIFT = 10;\r\n    var Z2_SELECT_LIFT = 9;\r\n    var HIGHLIGHT_ACTION_TYPE = 'highlight';\r\n    var DOWNPLAY_ACTION_TYPE = 'downplay';\r\n    var SELECT_ACTION_TYPE = 'select';\r\n    var UNSELECT_ACTION_TYPE = 'unselect';\r\n    var TOGGLE_SELECT_ACTION_TYPE = 'toggleSelect';\r\n    function hasFillOrStroke(fillOrStroke) {\r\n        return fillOrStroke != null && fillOrStroke !== 'none';\r\n    }\r\n    var liftedColorCache = new LRU(100);\r\n    function liftColor(color$1) {\r\n        if (typeof color$1 !== 'string') {\r\n            return color$1;\r\n        }\r\n        var liftedColor = liftedColorCache.get(color$1);\r\n        if (!liftedColor) {\r\n            liftedColor = lift(color$1, -0.1);\r\n            liftedColorCache.put(color$1, liftedColor);\r\n        }\r\n        return liftedColor;\r\n    }\r\n    function doChangeHoverState(el, stateName, hoverStateEnum) {\r\n        if (el.onHoverStateChange) {\r\n            if ((el.hoverState || 0) !== hoverStateEnum) {\r\n                el.onHoverStateChange(stateName);\r\n            }\r\n        }\r\n        el.hoverState = hoverStateEnum;\r\n    }\r\n    function singleEnterEmphasis(el) {\r\n        doChangeHoverState(el, 'emphasis', HOVER_STATE_EMPHASIS);\r\n    }\r\n    function singleLeaveEmphasis(el) {\r\n        doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\r\n    }\r\n    function singleEnterBlur(el) {\r\n        doChangeHoverState(el, 'blur', HOVER_STATE_BLUR);\r\n    }\r\n    function singleLeaveBlur(el) {\r\n        doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\r\n    }\r\n    function singleEnterSelect(el) {\r\n        el.selected = true;\r\n    }\r\n    function singleLeaveSelect(el) {\r\n        el.selected = false;\r\n    }\r\n    function updateElementState(el, updater, commonParam) {\r\n        updater(el, commonParam);\r\n    }\r\n    function traverseUpdateState(el, updater, commonParam) {\r\n        updateElementState(el, updater, commonParam);\r\n        el.isGroup && el.traverse(function (child) {\r\n            updateElementState(child, updater, commonParam);\r\n        });\r\n    }\r\n    function setStatesFlag(el, stateName) {\r\n        switch (stateName) {\r\n            case 'emphasis':\r\n                el.hoverState = HOVER_STATE_EMPHASIS;\r\n                break;\r\n            case 'normal':\r\n                el.hoverState = HOVER_STATE_NORMAL;\r\n                break;\r\n            case 'blur':\r\n                el.hoverState = HOVER_STATE_BLUR;\r\n                break;\r\n            case 'select':\r\n                el.selected = true;\r\n        }\r\n    }\r\n    function getFromStateStyle(el, props, toStateName, defaultValue) {\r\n        var style = el.style;\r\n        var fromState = {};\r\n        for (var i = 0; i < props.length; i++) {\r\n            var propName = props[i];\r\n            var val = style[propName];\r\n            fromState[propName] = val == null ? (defaultValue && defaultValue[propName]) : val;\r\n        }\r\n        for (var i = 0; i < el.animators.length; i++) {\r\n            var animator = el.animators[i];\r\n            if (animator.__fromStateTransition\r\n                && animator.__fromStateTransition.indexOf(toStateName) < 0\r\n                && animator.targetName === 'style') {\r\n                animator.saveFinalToTarget(fromState, props);\r\n            }\r\n        }\r\n        return fromState;\r\n    }\r\n    function createEmphasisDefaultState(el, stateName, targetStates, state) {\r\n        var hasSelect = targetStates && indexOf(targetStates, 'select') >= 0;\r\n        var cloned = false;\r\n        if (el instanceof Path) {\r\n            var store = getSavedStates(el);\r\n            var fromFill = hasSelect ? (store.selectFill || store.normalFill) : store.normalFill;\r\n            var fromStroke = hasSelect ? (store.selectStroke || store.normalStroke) : store.normalStroke;\r\n            if (hasFillOrStroke(fromFill) || hasFillOrStroke(fromStroke)) {\r\n                state = state || {};\r\n                var emphasisStyle = state.style || {};\r\n                if (!hasFillOrStroke(emphasisStyle.fill) && hasFillOrStroke(fromFill)) {\r\n                    cloned = true;\r\n                    state = extend({}, state);\r\n                    emphasisStyle = extend({}, emphasisStyle);\r\n                    emphasisStyle.fill = liftColor(fromFill);\r\n                }\r\n                else if (!hasFillOrStroke(emphasisStyle.stroke) && hasFillOrStroke(fromStroke)) {\r\n                    if (!cloned) {\r\n                        state = extend({}, state);\r\n                        emphasisStyle = extend({}, emphasisStyle);\r\n                    }\r\n                    emphasisStyle.stroke = liftColor(fromStroke);\r\n                }\r\n                state.style = emphasisStyle;\r\n            }\r\n        }\r\n        if (state) {\r\n            if (state.z2 == null) {\r\n                if (!cloned) {\r\n                    state = extend({}, state);\r\n                }\r\n                var z2EmphasisLift = el.z2EmphasisLift;\r\n                state.z2 = el.z2 + (z2EmphasisLift != null ? z2EmphasisLift : Z2_EMPHASIS_LIFT);\r\n            }\r\n        }\r\n        return state;\r\n    }\r\n    function createSelectDefaultState(el, stateName, state) {\r\n        if (state) {\r\n            if (state.z2 == null) {\r\n                state = extend({}, state);\r\n                var z2SelectLift = el.z2SelectLift;\r\n                state.z2 = el.z2 + (z2SelectLift != null ? z2SelectLift : Z2_SELECT_LIFT);\r\n            }\r\n        }\r\n        return state;\r\n    }\r\n    function createBlurDefaultState(el, stateName, state) {\r\n        var hasBlur = indexOf(el.currentStates, stateName) >= 0;\r\n        var currentOpacity = el.style.opacity;\r\n        var fromState = !hasBlur\r\n            ? getFromStateStyle(el, ['opacity'], stateName, {\r\n                opacity: 1\r\n            })\r\n            : null;\r\n        state = state || {};\r\n        var blurStyle = state.style || {};\r\n        if (blurStyle.opacity == null) {\r\n            state = extend({}, state);\r\n            blurStyle = extend({\r\n                opacity: hasBlur ? currentOpacity : (fromState.opacity * 0.1)\r\n            }, blurStyle);\r\n            state.style = blurStyle;\r\n        }\r\n        return state;\r\n    }\r\n    function elementStateProxy(stateName, targetStates) {\r\n        var state = this.states[stateName];\r\n        if (this.style) {\r\n            if (stateName === 'emphasis') {\r\n                return createEmphasisDefaultState(this, stateName, targetStates, state);\r\n            }\r\n            else if (stateName === 'blur') {\r\n                return createBlurDefaultState(this, stateName, state);\r\n            }\r\n            else if (stateName === 'select') {\r\n                return createSelectDefaultState(this, stateName, state);\r\n            }\r\n        }\r\n        return state;\r\n    }\r\n    function setDefaultStateProxy(el) {\r\n        el.stateProxy = elementStateProxy;\r\n        var textContent = el.getTextContent();\r\n        var textGuide = el.getTextGuideLine();\r\n        if (textContent) {\r\n            textContent.stateProxy = elementStateProxy;\r\n        }\r\n        if (textGuide) {\r\n            textGuide.stateProxy = elementStateProxy;\r\n        }\r\n    }\r\n    function enterEmphasisWhenMouseOver(el, e) {\r\n        !shouldSilent(el, e)\r\n            && !el.__highByOuter\r\n            && traverseUpdateState(el, singleEnterEmphasis);\r\n    }\r\n    function leaveEmphasisWhenMouseOut(el, e) {\r\n        !shouldSilent(el, e)\r\n            && !el.__highByOuter\r\n            && traverseUpdateState(el, singleLeaveEmphasis);\r\n    }\r\n    function enterEmphasis(el, highlightDigit) {\r\n        el.__highByOuter |= 1 << (highlightDigit || 0);\r\n        traverseUpdateState(el, singleEnterEmphasis);\r\n    }\r\n    function leaveEmphasis(el, highlightDigit) {\r\n        !(el.__highByOuter &= ~(1 << (highlightDigit || 0)))\r\n            && traverseUpdateState(el, singleLeaveEmphasis);\r\n    }\r\n    function enterBlur(el) {\r\n        traverseUpdateState(el, singleEnterBlur);\r\n    }\r\n    function leaveBlur(el) {\r\n        traverseUpdateState(el, singleLeaveBlur);\r\n    }\r\n    function enterSelect(el) {\r\n        traverseUpdateState(el, singleEnterSelect);\r\n    }\r\n    function leaveSelect(el) {\r\n        traverseUpdateState(el, singleLeaveSelect);\r\n    }\r\n    function shouldSilent(el, e) {\r\n        return el.__highDownSilentOnTouch && e.zrByTouch;\r\n    }\r\n    function allLeaveBlur(ecIns) {\r\n        var model = ecIns.getModel();\r\n        model.eachComponent(function (componentType, componentModel) {\r\n            var view = componentType === 'series'\r\n                ? ecIns.getViewOfSeriesModel(componentModel)\r\n                : ecIns.getViewOfComponentModel(componentModel);\r\n            view.group.traverse(function (child) {\r\n                singleLeaveBlur(child);\r\n            });\r\n        });\r\n    }\r\n    function toggleSeriesBlurState(targetSeriesIndex, focus, blurScope, ecIns, isBlur) {\r\n        var ecModel = ecIns.getModel();\r\n        blurScope = blurScope || 'coordinateSystem';\r\n        function leaveBlurOfIndices(data, dataIndices) {\r\n            for (var i = 0; i < dataIndices.length; i++) {\r\n                var itemEl = data.getItemGraphicEl(dataIndices[i]);\r\n                itemEl && leaveBlur(itemEl);\r\n            }\r\n        }\r\n        if (!isBlur) {\r\n            allLeaveBlur(ecIns);\r\n            return;\r\n        }\r\n        if (targetSeriesIndex == null) {\r\n            return;\r\n        }\r\n        if (!focus || focus === 'none') {\r\n            return;\r\n        }\r\n        var targetSeriesModel = ecModel.getSeriesByIndex(targetSeriesIndex);\r\n        var targetCoordSys = targetSeriesModel.coordinateSystem;\r\n        if (targetCoordSys && targetCoordSys.master) {\r\n            targetCoordSys = targetCoordSys.master;\r\n        }\r\n        var blurredSeries = [];\r\n        ecModel.eachSeries(function (seriesModel) {\r\n            var sameSeries = targetSeriesModel === seriesModel;\r\n            var coordSys = seriesModel.coordinateSystem;\r\n            if (coordSys && coordSys.master) {\r\n                coordSys = coordSys.master;\r\n            }\r\n            var sameCoordSys = coordSys && targetCoordSys\r\n                ? coordSys === targetCoordSys\r\n                : sameSeries;\r\n            if (!(blurScope === 'series' && !sameSeries\r\n                || blurScope === 'coordinateSystem' && !sameCoordSys\r\n                || focus === 'series' && sameSeries)) {\r\n                var view = ecIns.getViewOfSeriesModel(seriesModel);\r\n                view.group.traverse(function (child) {\r\n                    singleEnterBlur(child);\r\n                });\r\n                if (isArrayLike(focus)) {\r\n                    leaveBlurOfIndices(seriesModel.getData(), focus);\r\n                }\r\n                else if (isObject(focus)) {\r\n                    var dataTypes = keys(focus);\r\n                    for (var d = 0; d < dataTypes.length; d++) {\r\n                        leaveBlurOfIndices(seriesModel.getData(dataTypes[d]), focus[dataTypes[d]]);\r\n                    }\r\n                }\r\n                blurredSeries.push(seriesModel);\r\n            }\r\n        });\r\n        ecModel.eachComponent(function (componentType, componentModel) {\r\n            if (componentType === 'series') {\r\n                return;\r\n            }\r\n            var view = ecIns.getViewOfComponentModel(componentModel);\r\n            if (view && view.blurSeries) {\r\n                view.blurSeries(blurredSeries, ecModel);\r\n            }\r\n        });\r\n    }\r\n    function toggleSeriesBlurStateFromPayload(seriesModel, payload, ecIns) {\r\n        if (!isHighDownPayload(payload)) {\r\n            return;\r\n        }\r\n        var isHighlight = payload.type === HIGHLIGHT_ACTION_TYPE;\r\n        var seriesIndex = seriesModel.seriesIndex;\r\n        var data = seriesModel.getData(payload.dataType);\r\n        var dataIndex = queryDataIndex(data, payload);\r\n        dataIndex = (isArray(dataIndex) ? dataIndex[0] : dataIndex) || 0;\r\n        var el = data.getItemGraphicEl(dataIndex);\r\n        if (!el) {\r\n            var count = data.count();\r\n            var current = 0;\r\n            while (!el && current < count) {\r\n                el = data.getItemGraphicEl(current++);\r\n            }\r\n        }\r\n        if (el) {\r\n            var ecData = getECData(el);\r\n            toggleSeriesBlurState(seriesIndex, ecData.focus, ecData.blurScope, ecIns, isHighlight);\r\n        }\r\n        else {\r\n            var focus_1 = seriesModel.get(['emphasis', 'focus']);\r\n            var blurScope = seriesModel.get(['emphasis', 'blurScope']);\r\n            if (focus_1 != null) {\r\n                toggleSeriesBlurState(seriesIndex, focus_1, blurScope, ecIns, isHighlight);\r\n            }\r\n        }\r\n    }\r\n    function toggleSelectionFromPayload(seriesModel, payload, ecIns) {\r\n        if (!(isSelectChangePayload(payload))) {\r\n            return;\r\n        }\r\n        var dataType = payload.dataType;\r\n        var data = seriesModel.getData(dataType);\r\n        var dataIndex = queryDataIndex(data, payload);\r\n        if (!isArray(dataIndex)) {\r\n            dataIndex = [dataIndex];\r\n        }\r\n        seriesModel[payload.type === TOGGLE_SELECT_ACTION_TYPE ? 'toggleSelect'\r\n            : payload.type === SELECT_ACTION_TYPE ? 'select' : 'unselect'](dataIndex, dataType);\r\n    }\r\n    function updateSeriesElementSelection(seriesModel) {\r\n        var allData = seriesModel.getAllData();\r\n        each(allData, function (_a) {\r\n            var data = _a.data, type = _a.type;\r\n            data.eachItemGraphicEl(function (el, idx) {\r\n                seriesModel.isSelected(idx, type) ? enterSelect(el) : leaveSelect(el);\r\n            });\r\n        });\r\n    }\r\n    function getAllSelectedIndices(ecModel) {\r\n        var ret = [];\r\n        ecModel.eachSeries(function (seriesModel) {\r\n            var allData = seriesModel.getAllData();\r\n            each(allData, function (_a) {\r\n                var data = _a.data, type = _a.type;\r\n                var dataIndices = seriesModel.getSelectedDataIndices();\r\n                if (dataIndices.length > 0) {\r\n                    var item = {\r\n                        dataIndex: dataIndices,\r\n                        seriesIndex: seriesModel.seriesIndex\r\n                    };\r\n                    if (type != null) {\r\n                        item.dataType = type;\r\n                    }\r\n                    ret.push(item);\r\n                }\r\n            });\r\n        });\r\n        return ret;\r\n    }\r\n    function enableHoverEmphasis(el, focus, blurScope) {\r\n        setAsHighDownDispatcher(el, true);\r\n        traverseUpdateState(el, setDefaultStateProxy);\r\n        enableHoverFocus(el, focus, blurScope);\r\n    }\r\n    function enableHoverFocus(el, focus, blurScope) {\r\n        if (focus != null) {\r\n            var ecData = getECData(el);\r\n            ecData.focus = focus;\r\n            ecData.blurScope = blurScope;\r\n        }\r\n    }\r\n    var OTHER_STATES = ['emphasis', 'blur', 'select'];\r\n    var styleGetterMap = {\r\n        itemStyle: 'getItemStyle',\r\n        lineStyle: 'getLineStyle',\r\n        areaStyle: 'getAreaStyle'\r\n    };\r\n    function setStatesStylesFromModel(el, itemModel, styleType, getterType) {\r\n        styleType = styleType || 'itemStyle';\r\n        for (var i = 0; i < OTHER_STATES.length; i++) {\r\n            var stateName = OTHER_STATES[i];\r\n            var model = itemModel.getModel([stateName, styleType]);\r\n            var state = el.ensureState(stateName);\r\n            state.style = model[getterType || styleGetterMap[styleType]]();\r\n        }\r\n    }\r\n    function setAsHighDownDispatcher(el, asDispatcher) {\r\n        var disable = asDispatcher === false;\r\n        var extendedEl = el;\r\n        if (el.highDownSilentOnTouch) {\r\n            extendedEl.__highDownSilentOnTouch = el.highDownSilentOnTouch;\r\n        }\r\n        if (!disable || extendedEl.__highDownDispatcher) {\r\n            extendedEl.__highByOuter = extendedEl.__highByOuter || 0;\r\n            extendedEl.__highDownDispatcher = !disable;\r\n        }\r\n    }\r\n    function isHighDownDispatcher(el) {\r\n        return !!(el && el.__highDownDispatcher);\r\n    }\r\n    function getHighlightDigit(highlightKey) {\r\n        var highlightDigit = _highlightKeyMap[highlightKey];\r\n        if (highlightDigit == null && _highlightNextDigit <= 32) {\r\n            highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\r\n        }\r\n        return highlightDigit;\r\n    }\r\n    function isSelectChangePayload(payload) {\r\n        var payloadType = payload.type;\r\n        return payloadType === SELECT_ACTION_TYPE\r\n            || payloadType === UNSELECT_ACTION_TYPE\r\n            || payloadType === TOGGLE_SELECT_ACTION_TYPE;\r\n    }\r\n    function isHighDownPayload(payload) {\r\n        var payloadType = payload.type;\r\n        return payloadType === HIGHLIGHT_ACTION_TYPE\r\n            || payloadType === DOWNPLAY_ACTION_TYPE;\r\n    }\r\n    function savePathStates(el) {\r\n        var store = getSavedStates(el);\r\n        store.normalFill = el.style.fill;\r\n        store.normalStroke = el.style.stroke;\r\n        var selectState = el.states.select || {};\r\n        store.selectFill = (selectState.style && selectState.style.fill) || null;\r\n        store.selectStroke = (selectState.style && selectState.style.stroke) || null;\r\n    }\n\n    var ECHARTS_PREFIX = '[ECharts] ';\r\n    var storedLogs = {};\r\n    var hasConsole = typeof console !== 'undefined'\r\n        && console.warn && console.log;\r\n    function warn(str) {\r\n        if (hasConsole) {\r\n            console.warn(ECHARTS_PREFIX + str);\r\n        }\r\n    }\r\n    function deprecateLog(str) {\r\n        if (__DEV__) {\r\n            if (storedLogs[str]) {\r\n                return;\r\n            }\r\n            if (hasConsole) {\r\n                storedLogs[str] = true;\r\n                console.warn(ECHARTS_PREFIX + 'DEPRECATED: ' + str);\r\n            }\r\n        }\r\n    }\r\n    function deprecateReplaceLog(oldOpt, newOpt, scope) {\r\n        if (__DEV__) {\r\n            deprecateLog((scope ? \"[\" + scope + \"]\" : '') + (oldOpt + \" is deprecated, use \" + newOpt + \" instead.\"));\r\n        }\r\n    }\r\n    function consoleLog() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (__DEV__) {\r\n            if (typeof console !== 'undefined' && console.log) {\r\n                console.log.apply(console, args);\r\n            }\r\n        }\r\n    }\r\n    function makePrintable() {\r\n        var hintInfo = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            hintInfo[_i] = arguments[_i];\r\n        }\r\n        var msg = '';\r\n        if (__DEV__) {\r\n            msg = map(hintInfo, function (arg) {\r\n                if (isString(arg)) {\r\n                    return arg;\r\n                }\r\n                else if (typeof JSON !== 'undefined' && JSON.stringify) {\r\n                    try {\r\n                        return JSON.stringify(arg, function (n, val) {\r\n                            return val === void 0 ? 'undefined'\r\n                                : val === Infinity ? 'Infinity'\r\n                                    : val === -Infinity ? '-Infinity'\r\n                                        : eqNaN(val) ? 'NaN'\r\n                                            : val instanceof Date ? 'Date(' + val.toISOString() + ')'\r\n                                                : isFunction(val) ? 'function () { ... }'\r\n                                                    : isRegExp(val) ? val + ''\r\n                                                        : val;\r\n                        });\r\n                    }\r\n                    catch (err) {\r\n                        return '?';\r\n                    }\r\n                }\r\n                else {\r\n                    return '?';\r\n                }\r\n            }).join(' ');\r\n        }\r\n        return msg;\r\n    }\n\n    var EMPTY_OBJ = {};\r\n    function getLabelText(opt, stateModels, overrideValue) {\r\n        var labelFetcher = opt.labelFetcher;\r\n        var labelDataIndex = opt.labelDataIndex;\r\n        var labelDimIndex = opt.labelDimIndex;\r\n        var normalModel = stateModels.normal;\r\n        var baseText;\r\n        if (labelFetcher) {\r\n            baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), overrideValue != null ? {\r\n                value: overrideValue\r\n            } : null);\r\n        }\r\n        if (baseText == null) {\r\n            baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt) : opt.defaultText;\r\n        }\r\n        var statesText = {\r\n            normal: baseText\r\n        };\r\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n            var stateName = SPECIAL_STATES[i];\r\n            var stateModel = stateModels[stateName];\r\n            statesText[stateName] = retrieve2(labelFetcher\r\n                ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter'))\r\n                : null, baseText);\r\n        }\r\n        return statesText;\r\n    }\r\n    function setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified) {\r\n        opt = opt || EMPTY_OBJ;\r\n        var isSetOnText = targetEl instanceof ZRText;\r\n        var needsCreateText = false;\r\n        for (var i = 0; i < DISPLAY_STATES.length; i++) {\r\n            var stateModel = labelStatesModels[DISPLAY_STATES[i]];\r\n            if (stateModel && stateModel.getShallow('show')) {\r\n                needsCreateText = true;\r\n                break;\r\n            }\r\n        }\r\n        var textContent = isSetOnText ? targetEl : null;\r\n        if (needsCreateText) {\r\n            if (!isSetOnText) {\r\n                textContent = targetEl.getTextContent();\r\n                if (!textContent) {\r\n                    textContent = new ZRText();\r\n                    targetEl.setTextContent(textContent);\r\n                }\r\n                if (targetEl.stateProxy) {\r\n                    textContent.stateProxy = targetEl.stateProxy;\r\n                }\r\n            }\r\n            var labelStatesTexts = getLabelText(opt, labelStatesModels);\r\n            var normalModel = labelStatesModels.normal;\r\n            var showNormal = normalModel.getShallow('show');\r\n            var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\r\n            normalStyle.text = labelStatesTexts.normal;\r\n            if (!isSetOnText) {\r\n                targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\r\n            }\r\n            for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n                var stateName = SPECIAL_STATES[i];\r\n                var stateModel = labelStatesModels[stateName];\r\n                if (stateModel) {\r\n                    var stateObj = textContent.ensureState(stateName);\r\n                    stateObj.ignore = !retrieve2(stateModel.getShallow('show'), showNormal);\r\n                    stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\r\n                    stateObj.style.text = labelStatesTexts[stateName];\r\n                    if (!isSetOnText) {\r\n                        var targetElEmphasisState = targetEl.ensureState(stateName);\r\n                        targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\r\n                    }\r\n                }\r\n            }\r\n            textContent.silent = !!normalModel.getShallow('silent');\r\n            if (textContent.style.x != null) {\r\n                normalStyle.x = textContent.style.x;\r\n            }\r\n            if (textContent.style.y != null) {\r\n                normalStyle.y = textContent.style.y;\r\n            }\r\n            textContent.ignore = !showNormal;\r\n            textContent.useStyle(normalStyle);\r\n            textContent.dirty();\r\n        }\r\n        else if (textContent) {\r\n            textContent.ignore = true;\r\n        }\r\n        targetEl.dirty();\r\n    }\r\n    function getLabelStatesModels(itemModel, labelName) {\r\n        labelName = (labelName || 'label');\r\n        var statesModels = {\r\n            normal: itemModel.getModel(labelName)\r\n        };\r\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n            var stateName = SPECIAL_STATES[i];\r\n            statesModels[stateName] = itemModel.getModel([stateName, labelName]);\r\n        }\r\n        return statesModels;\r\n    }\r\n    function createTextStyle(textStyleModel, specifiedTextStyle, opt, isNotNormal, isAttached) {\r\n        var textStyle = {};\r\n        setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\r\n        specifiedTextStyle && extend(textStyle, specifiedTextStyle);\r\n        return textStyle;\r\n    }\r\n    function createTextConfig(textStyleModel, opt, isNotNormal) {\r\n        opt = opt || {};\r\n        var textConfig = {};\r\n        var labelPosition;\r\n        var labelRotate = textStyleModel.getShallow('rotate');\r\n        var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\r\n        var labelOffset = textStyleModel.getShallow('offset');\r\n        labelPosition = textStyleModel.getShallow('position')\r\n            || (isNotNormal ? null : 'inside');\r\n        labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\r\n        if (labelPosition != null) {\r\n            textConfig.position = labelPosition;\r\n        }\r\n        if (labelOffset != null) {\r\n            textConfig.offset = labelOffset;\r\n        }\r\n        if (labelRotate != null) {\r\n            labelRotate *= Math.PI / 180;\r\n            textConfig.rotation = labelRotate;\r\n        }\r\n        if (labelDistance != null) {\r\n            textConfig.distance = labelDistance;\r\n        }\r\n        textConfig.outsideFill = textStyleModel.get('color') === 'inherit'\r\n            ? (opt.inheritColor || null)\r\n            : 'auto';\r\n        return textConfig;\r\n    }\r\n    function setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\r\n        opt = opt || EMPTY_OBJ;\r\n        var ecModel = textStyleModel.ecModel;\r\n        var globalTextStyle = ecModel && ecModel.option.textStyle;\r\n        var richItemNames = getRichItemNames(textStyleModel);\r\n        var richResult;\r\n        if (richItemNames) {\r\n            richResult = {};\r\n            for (var name_1 in richItemNames) {\r\n                if (richItemNames.hasOwnProperty(name_1)) {\r\n                    var richTextStyle = textStyleModel.getModel(['rich', name_1]);\r\n                    setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached);\r\n                }\r\n            }\r\n        }\r\n        if (richResult) {\r\n            textStyle.rich = richResult;\r\n        }\r\n        var overflow = textStyleModel.get('overflow');\r\n        if (overflow) {\r\n            textStyle.overflow = overflow;\r\n        }\r\n        var margin = textStyleModel.get('minMargin');\r\n        if (margin != null) {\r\n            textStyle.margin = margin;\r\n        }\r\n        setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true);\r\n    }\r\n    function getRichItemNames(textStyleModel) {\r\n        var richItemNameMap;\r\n        while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\r\n            var rich = (textStyleModel.option || EMPTY_OBJ).rich;\r\n            if (rich) {\r\n                richItemNameMap = richItemNameMap || {};\r\n                var richKeys = keys(rich);\r\n                for (var i = 0; i < richKeys.length; i++) {\r\n                    var richKey = richKeys[i];\r\n                    richItemNameMap[richKey] = 1;\r\n                }\r\n            }\r\n            textStyleModel = textStyleModel.parentModel;\r\n        }\r\n        return richItemNameMap;\r\n    }\r\n    var TEXT_PROPS_WITH_GLOBAL = [\r\n        'fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'opacity',\r\n        'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'\r\n    ];\r\n    var TEXT_PROPS_SELF = [\r\n        'align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign'\r\n    ];\r\n    var TEXT_PROPS_BOX = [\r\n        'padding', 'borderWidth', 'borderRadius',\r\n        'backgroundColor', 'borderColor',\r\n        'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'\r\n    ];\r\n    function setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock) {\r\n        globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\r\n        var inheritColor = opt && opt.inheritColor;\r\n        var fillColor = textStyleModel.getShallow('color');\r\n        var strokeColor = textStyleModel.getShallow('textBorderColor');\r\n        if (fillColor === 'inherit' || fillColor === 'auto') {\r\n            if (__DEV__) {\r\n                if (fillColor === 'auto') {\r\n                    deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\r\n                }\r\n            }\r\n            if (inheritColor) {\r\n                fillColor = inheritColor;\r\n            }\r\n            else {\r\n                fillColor = null;\r\n            }\r\n        }\r\n        if (strokeColor === 'inherit' || (strokeColor === 'auto')) {\r\n            if (__DEV__) {\r\n                if (strokeColor === 'auto') {\r\n                    deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\r\n                }\r\n            }\r\n            if (inheritColor) {\r\n                strokeColor = inheritColor;\r\n            }\r\n            else {\r\n                strokeColor = null;\r\n            }\r\n        }\r\n        if (!isAttached) {\r\n            fillColor = fillColor || globalTextStyle.color;\r\n            strokeColor = strokeColor || globalTextStyle.textBorderColor;\r\n        }\r\n        if (fillColor != null) {\r\n            textStyle.fill = fillColor;\r\n        }\r\n        if (strokeColor != null) {\r\n            textStyle.stroke = strokeColor;\r\n        }\r\n        var lineWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\r\n        if (lineWidth != null) {\r\n            textStyle.lineWidth = lineWidth;\r\n        }\r\n        if (!isNotNormal && !isAttached) {\r\n            if (textStyle.fill == null && opt.inheritColor) {\r\n                textStyle.fill = opt.inheritColor;\r\n            }\r\n        }\r\n        for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\r\n            var key = TEXT_PROPS_WITH_GLOBAL[i];\r\n            var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\r\n            if (val != null) {\r\n                textStyle[key] = val;\r\n            }\r\n        }\r\n        for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\r\n            var key = TEXT_PROPS_SELF[i];\r\n            var val = textStyleModel.getShallow(key);\r\n            if (val != null) {\r\n                textStyle[key] = val;\r\n            }\r\n        }\r\n        if (textStyle.verticalAlign == null) {\r\n            var baseline = textStyleModel.getShallow('baseline');\r\n            if (baseline != null) {\r\n                textStyle.verticalAlign = baseline;\r\n            }\r\n        }\r\n        if (!isBlock || !opt.disableBox) {\r\n            for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\r\n                var key = TEXT_PROPS_BOX[i];\r\n                var val = textStyleModel.getShallow(key);\r\n                if (val != null) {\r\n                    textStyle[key] = val;\r\n                }\r\n            }\r\n            if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\r\n                if (__DEV__) {\r\n                    if (textStyle.backgroundColor === 'auto') {\r\n                        deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\r\n                    }\r\n                }\r\n                textStyle.backgroundColor = inheritColor;\r\n            }\r\n            if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\r\n                if (__DEV__) {\r\n                    if (textStyle.borderColor === 'auto') {\r\n                        deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\r\n                    }\r\n                }\r\n                textStyle.borderColor = inheritColor;\r\n            }\r\n        }\r\n    }\r\n    function getFont(opt, ecModel) {\r\n        var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\r\n        return trim([\r\n            opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '',\r\n            opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '',\r\n            (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px',\r\n            opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'\r\n        ].join(' '));\r\n    }\n\n    var PATH_COLOR = ['textStyle', 'color'];\r\n    var tmpRichText = new ZRText();\r\n    var TextStyleMixin = (function () {\r\n        function TextStyleMixin() {\r\n        }\r\n        TextStyleMixin.prototype.getTextColor = function (isEmphasis) {\r\n            var ecModel = this.ecModel;\r\n            return this.getShallow('color')\r\n                || ((!isEmphasis && ecModel) ? ecModel.get(PATH_COLOR) : null);\r\n        };\r\n        TextStyleMixin.prototype.getFont = function () {\r\n            return getFont({\r\n                fontStyle: this.getShallow('fontStyle'),\r\n                fontWeight: this.getShallow('fontWeight'),\r\n                fontSize: this.getShallow('fontSize'),\r\n                fontFamily: this.getShallow('fontFamily')\r\n            }, this.ecModel);\r\n        };\r\n        TextStyleMixin.prototype.getTextRect = function (text) {\r\n            tmpRichText.useStyle({\r\n                text: text,\r\n                fontStyle: this.getShallow('fontStyle'),\r\n                fontWeight: this.getShallow('fontWeight'),\r\n                fontSize: this.getShallow('fontSize'),\r\n                fontFamily: this.getShallow('fontFamily'),\r\n                verticalAlign: this.getShallow('verticalAlign') || this.getShallow('baseline'),\r\n                padding: this.getShallow('padding'),\r\n                lineHeight: this.getShallow('lineHeight'),\r\n                rich: this.getShallow('rich')\r\n            });\r\n            tmpRichText.update();\r\n            return tmpRichText.getBoundingRect();\r\n        };\r\n        return TextStyleMixin;\r\n    }());\n\n    var LINE_STYLE_KEY_MAP = [\r\n        ['lineWidth', 'width'],\r\n        ['stroke', 'color'],\r\n        ['opacity'],\r\n        ['shadowBlur'],\r\n        ['shadowOffsetX'],\r\n        ['shadowOffsetY'],\r\n        ['shadowColor']\r\n    ];\r\n    var getLineStyle = makeStyleMapper(LINE_STYLE_KEY_MAP);\r\n    var LineStyleMixin = (function () {\r\n        function LineStyleMixin() {\r\n        }\r\n        LineStyleMixin.prototype.getLineStyle = function (excludes) {\r\n            var style = getLineStyle(this, excludes);\r\n            style.lineDash = this.getLineDash(style.lineWidth);\r\n            return style;\r\n        };\r\n        LineStyleMixin.prototype.getLineDash = function (lineWidth) {\r\n            if (lineWidth == null) {\r\n                lineWidth = 1;\r\n            }\r\n            var lineType = this.get('type');\r\n            var dotSize = Math.max(lineWidth, 2);\r\n            var dashSize = lineWidth * 4;\r\n            return (lineType === 'solid' || lineType == null)\r\n                ? false\r\n                : lineType === 'dashed'\r\n                    ? [dashSize, dashSize]\r\n                    : [dotSize, dotSize];\r\n        };\r\n        return LineStyleMixin;\r\n    }());\n\n    var ITEM_STYLE_KEY_MAP = [\r\n        ['fill', 'color'],\r\n        ['stroke', 'borderColor'],\r\n        ['lineWidth', 'borderWidth'],\r\n        ['opacity'],\r\n        ['shadowBlur'],\r\n        ['shadowOffsetX'],\r\n        ['shadowOffsetY'],\r\n        ['shadowColor']\r\n    ];\r\n    var getItemStyle = makeStyleMapper(ITEM_STYLE_KEY_MAP);\r\n    var ItemStyleMixin = (function () {\r\n        function ItemStyleMixin() {\r\n        }\r\n        ItemStyleMixin.prototype.getItemStyle = function (excludes, includes) {\r\n            var style = getItemStyle(this, excludes, includes);\r\n            var lineDash = this.getBorderLineDash();\r\n            lineDash && (style.lineDash = lineDash);\r\n            return style;\r\n        };\r\n        ItemStyleMixin.prototype.getBorderLineDash = function () {\r\n            var lineType = this.get('borderType');\r\n            return (lineType === 'solid' || lineType == null) ? null\r\n                : (lineType === 'dashed' ? [5, 5] : [1, 1]);\r\n        };\r\n        return ItemStyleMixin;\r\n    }());\n\n    var Model = (function () {\r\n        function Model(option, parentModel, ecModel) {\r\n            this.parentModel = parentModel;\r\n            this.ecModel = ecModel;\r\n            this.option = option;\r\n        }\r\n        Model.prototype.init = function (option, parentModel, ecModel) {\r\n            var rest = [];\r\n            for (var _i = 3; _i < arguments.length; _i++) {\r\n                rest[_i - 3] = arguments[_i];\r\n            }\r\n        };\r\n        Model.prototype.mergeOption = function (option, ecModel) {\r\n            merge(this.option, option, true);\r\n        };\r\n        Model.prototype.get = function (path, ignoreParent) {\r\n            if (path == null) {\r\n                return this.option;\r\n            }\r\n            return this._doGet(this.parsePath(path), !ignoreParent && this.parentModel);\r\n        };\r\n        Model.prototype.getShallow = function (key, ignoreParent) {\r\n            var option = this.option;\r\n            var val = option == null ? option : option[key];\r\n            if (val == null && !ignoreParent) {\r\n                var parentModel = this.parentModel;\r\n                if (parentModel) {\r\n                    val = parentModel.getShallow(key);\r\n                }\r\n            }\r\n            return val;\r\n        };\r\n        Model.prototype.getModel = function (path, parentModel) {\r\n            var hasPath = path != null;\r\n            var pathFinal = hasPath ? this.parsePath(path) : null;\r\n            var obj = hasPath\r\n                ? this._doGet(pathFinal)\r\n                : this.option;\r\n            parentModel = parentModel || (this.parentModel\r\n                && this.parentModel.getModel(this.resolveParentPath(pathFinal)));\r\n            return new Model(obj, parentModel, this.ecModel);\r\n        };\r\n        Model.prototype.isEmpty = function () {\r\n            return this.option == null;\r\n        };\r\n        Model.prototype.restoreData = function () { };\r\n        Model.prototype.clone = function () {\r\n            var Ctor = this.constructor;\r\n            return new Ctor(clone(this.option));\r\n        };\r\n        Model.prototype.parsePath = function (path) {\r\n            if (typeof path === 'string') {\r\n                return path.split('.');\r\n            }\r\n            return path;\r\n        };\r\n        Model.prototype.resolveParentPath = function (path) {\r\n            return path;\r\n        };\r\n        Model.prototype.isAnimationEnabled = function () {\r\n            if (!env.node && this.option) {\r\n                if (this.option.animation != null) {\r\n                    return !!this.option.animation;\r\n                }\r\n                else if (this.parentModel) {\r\n                    return this.parentModel.isAnimationEnabled();\r\n                }\r\n            }\r\n        };\r\n        Model.prototype._doGet = function (pathArr, parentModel) {\r\n            var obj = this.option;\r\n            if (!pathArr) {\r\n                return obj;\r\n            }\r\n            for (var i = 0; i < pathArr.length; i++) {\r\n                if (!pathArr[i]) {\r\n                    continue;\r\n                }\r\n                obj = (obj && typeof obj === 'object') ? obj[pathArr[i]] : null;\r\n                if (obj == null) {\r\n                    break;\r\n                }\r\n            }\r\n            if (obj == null && parentModel) {\r\n                obj = parentModel._doGet(this.resolveParentPath(pathArr), parentModel.parentModel);\r\n            }\r\n            return obj;\r\n        };\r\n        return Model;\r\n    }());\r\n    enableClassExtend(Model);\r\n    enableClassCheck(Model);\r\n    mixin(Model, LineStyleMixin);\r\n    mixin(Model, ItemStyleMixin);\r\n    mixin(Model, AreaStyleMixin);\r\n    mixin(Model, TextStyleMixin);\n\n    var base = Math.round(Math.random() * 10);\r\n    function getUID(type) {\r\n        return [(type || ''), base++].join('_');\r\n    }\r\n    function enableSubTypeDefaulter(target) {\r\n        var subTypeDefaulters = {};\r\n        target.registerSubTypeDefaulter = function (componentType, defaulter) {\r\n            var componentTypeInfo = parseClassType(componentType);\r\n            subTypeDefaulters[componentTypeInfo.main] = defaulter;\r\n        };\r\n        target.determineSubType = function (componentType, option) {\r\n            var type = option.type;\r\n            if (!type) {\r\n                var componentTypeMain = parseClassType(componentType).main;\r\n                if (target.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\r\n                    type = subTypeDefaulters[componentTypeMain](option);\r\n                }\r\n            }\r\n            return type;\r\n        };\r\n    }\r\n    function enableTopologicalTravel(entity, dependencyGetter) {\r\n        entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\r\n            if (!targetNameList.length) {\r\n                return;\r\n            }\r\n            var result = makeDepndencyGraph(fullNameList);\r\n            var graph = result.graph;\r\n            var stack = result.noEntryList;\r\n            var targetNameSet = {};\r\n            each(targetNameList, function (name) {\r\n                targetNameSet[name] = true;\r\n            });\r\n            while (stack.length) {\r\n                var currComponentType = stack.pop();\r\n                var currVertex = graph[currComponentType];\r\n                var isInTargetNameSet = !!targetNameSet[currComponentType];\r\n                if (isInTargetNameSet) {\r\n                    callback.call(context, currComponentType, currVertex.originalDeps.slice());\r\n                    delete targetNameSet[currComponentType];\r\n                }\r\n                each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\r\n            }\r\n            each(targetNameSet, function () {\r\n                throw new Error('Circle dependency may exists');\r\n            });\r\n            function removeEdge(succComponentType) {\r\n                graph[succComponentType].entryCount--;\r\n                if (graph[succComponentType].entryCount === 0) {\r\n                    stack.push(succComponentType);\r\n                }\r\n            }\r\n            function removeEdgeAndAdd(succComponentType) {\r\n                targetNameSet[succComponentType] = true;\r\n                removeEdge(succComponentType);\r\n            }\r\n        };\r\n        function makeDepndencyGraph(fullNameList) {\r\n            var graph = {};\r\n            var noEntryList = [];\r\n            each(fullNameList, function (name) {\r\n                var thisItem = createDependencyGraphItem(graph, name);\r\n                var originalDeps = thisItem.originalDeps = dependencyGetter(name);\r\n                var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\r\n                thisItem.entryCount = availableDeps.length;\r\n                if (thisItem.entryCount === 0) {\r\n                    noEntryList.push(name);\r\n                }\r\n                each(availableDeps, function (dependentName) {\r\n                    if (indexOf(thisItem.predecessor, dependentName) < 0) {\r\n                        thisItem.predecessor.push(dependentName);\r\n                    }\r\n                    var thatItem = createDependencyGraphItem(graph, dependentName);\r\n                    if (indexOf(thatItem.successor, dependentName) < 0) {\r\n                        thatItem.successor.push(name);\r\n                    }\r\n                });\r\n            });\r\n            return { graph: graph, noEntryList: noEntryList };\r\n        }\r\n        function createDependencyGraphItem(graph, name) {\r\n            if (!graph[name]) {\r\n                graph[name] = { predecessor: [], successor: [] };\r\n            }\r\n            return graph[name];\r\n        }\r\n        function getAvailableDependencies(originalDeps, fullNameList) {\r\n            var availableDeps = [];\r\n            each(originalDeps, function (dep) {\r\n                indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\r\n            });\r\n            return availableDeps;\r\n        }\r\n    }\r\n    function inheritDefaultOption(superOption, subOption) {\r\n        return merge(merge({}, superOption, true), subOption, true);\r\n    }\n\n    var langEN = {\r\n        time: {\r\n            month: [\r\n                'January', 'February', 'March', 'April', 'May', 'June',\r\n                'July', 'August', 'September', 'October', 'November', 'December'\r\n            ],\r\n            monthAbbr: [\r\n                'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\r\n                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\r\n            ],\r\n            dayOfWeek: [\r\n                'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\r\n            ],\r\n            dayOfWeekAbbr: [\r\n                'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\r\n            ]\r\n        },\r\n        legend: {\r\n            selector: {\r\n                all: 'All',\r\n                inverse: 'Inv'\r\n            }\r\n        },\r\n        toolbox: {\r\n            brush: {\r\n                title: {\r\n                    rect: 'Box Select',\r\n                    polygon: 'Lasso Select',\r\n                    lineX: 'Horizontally Select',\r\n                    lineY: 'Vertically Select',\r\n                    keep: 'Keep Selections',\r\n                    clear: 'Clear Selections'\r\n                }\r\n            },\r\n            dataView: {\r\n                title: 'Data View',\r\n                lang: ['Data View', 'Close', 'Refresh']\r\n            },\r\n            dataZoom: {\r\n                title: {\r\n                    zoom: 'Zoom',\r\n                    back: 'Zoom Reset'\r\n                }\r\n            },\r\n            magicType: {\r\n                title: {\r\n                    line: 'Switch to Line Chart',\r\n                    bar: 'Switch to Bar Chart',\r\n                    stack: 'Stack',\r\n                    tiled: 'Tile'\r\n                }\r\n            },\r\n            restore: {\r\n                title: 'Restore'\r\n            },\r\n            saveAsImage: {\r\n                title: 'Save as Image',\r\n                lang: ['Right Click to Save Image']\r\n            }\r\n        },\r\n        series: {\r\n            typeNames: {\r\n                pie: 'Pie chart',\r\n                bar: 'Bar chart',\r\n                line: 'Line chart',\r\n                scatter: 'Scatter plot',\r\n                effectScatter: 'Ripple scatter plot',\r\n                radar: 'Radar chart',\r\n                tree: 'Tree',\r\n                treemap: 'Treemap',\r\n                boxplot: 'Boxplot',\r\n                candlestick: 'Candlestick',\r\n                k: 'K line chart',\r\n                heatmap: 'Heat map',\r\n                map: 'Map',\r\n                parallel: 'Parallel coordinate map',\r\n                lines: 'Line graph',\r\n                graph: 'Relationship graph',\r\n                sankey: 'Sankey diagram',\r\n                funnel: 'Funnel chart',\r\n                gauge: 'Guage',\r\n                pictorialBar: 'Pictorial bar',\r\n                themeRiver: 'Theme River Map',\r\n                sunburst: 'Sunburst'\r\n            }\r\n        },\r\n        aria: {\r\n            general: {\r\n                withTitle: 'This is a chart about \"{title}\"',\r\n                withoutTitle: 'This is a chart'\r\n            },\r\n            series: {\r\n                single: {\r\n                    prefix: '',\r\n                    withName: ' with type {seriesType} named {seriesName}.',\r\n                    withoutName: ' with type {seriesType}.'\r\n                },\r\n                multiple: {\r\n                    prefix: '. It consists of {seriesCount} series count.',\r\n                    withName: ' The {seriesId} series is a {seriesType} representing {seriesName}.',\r\n                    withoutName: ' The {seriesId} series is a {seriesType}.',\r\n                    separator: {\r\n                        middle: '',\r\n                        end: ''\r\n                    }\r\n                }\r\n            },\r\n            data: {\r\n                allData: 'The data is as follows: ',\r\n                partialData: 'The first {displayCnt} items are: ',\r\n                withName: 'the data for {name} is {value}',\r\n                withoutName: '{value}',\r\n                separator: {\r\n                    middle: ', ',\r\n                    end: '. '\r\n                }\r\n            }\r\n        }\r\n    };\n\n    var langZH = {\r\n        time: {\r\n            month: [\r\n                '', '', '', '', '', '',\r\n                '', '', '', '', '', ''\r\n            ],\r\n            monthAbbr: [\r\n                '1', '2', '3', '4', '5', '6',\r\n                '7', '8', '9', '10', '11', '12'\r\n            ],\r\n            dayOfWeek: [\r\n                '', '', '', '', '', '', ''\r\n            ],\r\n            dayOfWeekAbbr: [\r\n                '', '', '', '', '', '', ''\r\n            ]\r\n        },\r\n        legend: {\r\n            selector: {\r\n                all: '',\r\n                inverse: ''\r\n            }\r\n        },\r\n        toolbox: {\r\n            brush: {\r\n                title: {\r\n                    rect: '',\r\n                    polygon: '',\r\n                    lineX: '',\r\n                    lineY: '',\r\n                    keep: '',\r\n                    clear: ''\r\n                }\r\n            },\r\n            dataView: {\r\n                title: '',\r\n                lang: ['', '', '']\r\n            },\r\n            dataZoom: {\r\n                title: {\r\n                    zoom: '',\r\n                    back: ''\r\n                }\r\n            },\r\n            magicType: {\r\n                title: {\r\n                    line: '',\r\n                    bar: '',\r\n                    stack: '',\r\n                    tiled: ''\r\n                }\r\n            },\r\n            restore: {\r\n                title: ''\r\n            },\r\n            saveAsImage: {\r\n                title: '',\r\n                lang: ['']\r\n            }\r\n        },\r\n        series: {\r\n            typeNames: {\r\n                pie: '',\r\n                bar: '',\r\n                line: '',\r\n                scatter: '',\r\n                effectScatter: '',\r\n                radar: '',\r\n                tree: '',\r\n                treemap: '',\r\n                boxplot: '',\r\n                candlestick: 'K',\r\n                k: 'K',\r\n                heatmap: '',\r\n                map: '',\r\n                parallel: '',\r\n                lines: '',\r\n                graph: '',\r\n                sankey: '',\r\n                funnel: '',\r\n                gauge: '',\r\n                pictorialBar: '',\r\n                themeRiver: '',\r\n                sunburst: ''\r\n            }\r\n        },\r\n        aria: {\r\n            general: {\r\n                withTitle: '{title}',\r\n                withoutTitle: ''\r\n            },\r\n            series: {\r\n                single: {\r\n                    prefix: '',\r\n                    withName: '{seriesType}{seriesName}',\r\n                    withoutName: '{seriesType}'\r\n                },\r\n                multiple: {\r\n                    prefix: '{seriesCount}',\r\n                    withName: '{seriesId}{seriesName}{seriesType}',\r\n                    withoutName: '{seriesId}{seriesType}',\r\n                    separator: {\r\n                        middle: '',\r\n                        end: ''\r\n                    }\r\n                }\r\n            },\r\n            data: {\r\n                allData: '',\r\n                partialData: '{displayCnt}',\r\n                withName: '{name}{value}',\r\n                withoutName: '{value}',\r\n                separator: {\r\n                    middle: '',\r\n                    end: ''\r\n                }\r\n            }\r\n        }\r\n    };\n\n    var LOCALE_ZH = 'ZH';\r\n    var LOCALE_EN = 'EN';\r\n    var DEFAULT_LOCALE = LOCALE_EN;\r\n    var localeStorage = {};\r\n    var localeModels = {};\r\n    var SYSTEM_LANG = !env.domSupported ? DEFAULT_LOCALE : (function () {\r\n        var langStr = (document.documentElement.lang || navigator.language || navigator.browserLanguage).toUpperCase();\r\n        return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;\r\n    })();\r\n    function registerLocale(locale, localeObj) {\r\n        locale = locale.toUpperCase();\r\n        localeModels[locale] = new Model(localeObj);\r\n        localeStorage[locale] = localeObj;\r\n    }\r\n    function createLocaleObject(locale) {\r\n        if (isString(locale)) {\r\n            var localeObj = localeStorage[locale.toUpperCase()] || {};\r\n            if (locale === LOCALE_ZH || locale === LOCALE_EN) {\r\n                return clone(localeObj);\r\n            }\r\n            else {\r\n                return merge(clone(localeObj), clone(localeStorage[DEFAULT_LOCALE]), false);\r\n            }\r\n        }\r\n        else {\r\n            return merge(clone(locale), clone(localeStorage[DEFAULT_LOCALE]), false);\r\n        }\r\n    }\r\n    function getLocaleModel(lang) {\r\n        return localeModels[lang];\r\n    }\r\n    function getDefaultLocaleModel() {\r\n        return localeModels[DEFAULT_LOCALE];\r\n    }\r\n    registerLocale(LOCALE_EN, langEN);\r\n    registerLocale(LOCALE_ZH, langZH);\n\n    var ONE_SECOND = 1000;\r\n    var ONE_MINUTE = ONE_SECOND * 60;\r\n    var ONE_HOUR = ONE_MINUTE * 60;\r\n    var ONE_DAY = ONE_HOUR * 24;\r\n    var ONE_YEAR = ONE_DAY * 365;\r\n    var defaultLeveledFormatter = {\r\n        year: '{yyyy}',\r\n        month: '{MMM}',\r\n        day: '{d}',\r\n        hour: '{HH}:{mm}',\r\n        minute: '{HH}:{mm}',\r\n        second: '{HH}:{mm}:{ss}',\r\n        millisecond: '{hh}:{mm}:{ss} {SSS}',\r\n        none: '{yyyy}-{MM}-{dd} {hh}:{mm}:{ss} {SSS}'\r\n    };\r\n    var fullDayFormatter = '{yyyy}-{MM}-{dd}';\r\n    var fullLeveledFormatter = {\r\n        year: '{yyyy}',\r\n        month: '{yyyy}:{MM}',\r\n        day: fullDayFormatter,\r\n        hour: fullDayFormatter + ' ' + defaultLeveledFormatter.hour,\r\n        minute: fullDayFormatter + ' ' + defaultLeveledFormatter.minute,\r\n        second: fullDayFormatter + ' ' + defaultLeveledFormatter.second,\r\n        millisecond: defaultLeveledFormatter.none\r\n    };\r\n    var primaryTimeUnits = [\r\n        'year', 'month', 'day', 'hour', 'minute', 'second', 'millisecond'\r\n    ];\r\n    var timeUnits = [\r\n        'year', 'half-year', 'quarter', 'month', 'week', 'half-week', 'day',\r\n        'half-day', 'quarter-day', 'hour', 'minute', 'second', 'millisecond'\r\n    ];\r\n    function pad(str, len) {\r\n        str += '';\r\n        return '0000'.substr(0, len - str.length) + str;\r\n    }\r\n    function getPrimaryTimeUnit(timeUnit) {\r\n        switch (timeUnit) {\r\n            case 'half-year':\r\n            case 'quarter':\r\n                return 'month';\r\n            case 'week':\r\n            case 'half-week':\r\n                return 'day';\r\n            case 'half-day':\r\n            case 'quarter-day':\r\n                return 'hour';\r\n            default:\r\n                return timeUnit;\r\n        }\r\n    }\r\n    function isPrimaryTimeUnit(timeUnit) {\r\n        return timeUnit === getPrimaryTimeUnit(timeUnit);\r\n    }\r\n    function getDefaultFormatPrecisionOfInterval(timeUnit) {\r\n        switch (timeUnit) {\r\n            case 'year':\r\n            case 'month':\r\n                return 'day';\r\n            case 'millisecond':\r\n                return 'millisecond';\r\n            default:\r\n                return 'second';\r\n        }\r\n    }\r\n    function format(time, template, lang, isUTC) {\r\n        var date = parseDate(time);\r\n        var y = date[fullYearGetterName(isUTC)]();\r\n        var M = date[monthGetterName(isUTC)]() + 1;\r\n        var q = Math.floor((M - 1) / 4) + 1;\r\n        var d = date[dateGetterName(isUTC)]();\r\n        var e = date['get' + (isUTC ? 'UTC' : '') + 'Day']();\r\n        var H = date[hoursGetterName(isUTC)]();\r\n        var h = (H - 1) % 12 + 1;\r\n        var m = date[minutesGetterName(isUTC)]();\r\n        var s = date[secondsGetterName(isUTC)]();\r\n        var S = date[millisecondsGetterName(isUTC)]();\r\n        var localeModel = lang instanceof Model ? lang\r\n            : getLocaleModel(lang || SYSTEM_LANG) || getDefaultLocaleModel();\r\n        var timeModel = localeModel.getModel('time');\r\n        var month = timeModel.get('month');\r\n        var monthAbbr = timeModel.get('monthAbbr');\r\n        var dayOfWeek = timeModel.get('dayOfWeek');\r\n        var dayOfWeekAbbr = timeModel.get('dayOfWeekAbbr');\r\n        return (template || '')\r\n            .replace(/{yyyy}/g, y + '')\r\n            .replace(/{yy}/g, y % 100 + '')\r\n            .replace(/{Q}/g, q + '')\r\n            .replace(/{MMMM}/g, month[M - 1])\r\n            .replace(/{MMM}/g, monthAbbr[M - 1])\r\n            .replace(/{MM}/g, pad(M, 2))\r\n            .replace(/{M}/g, M + '')\r\n            .replace(/{dd}/g, pad(d, 2))\r\n            .replace(/{d}/g, d + '')\r\n            .replace(/{eeee}/g, dayOfWeek[e])\r\n            .replace(/{ee}/g, dayOfWeekAbbr[e])\r\n            .replace(/{e}/g, e + '')\r\n            .replace(/{HH}/g, pad(H, 2))\r\n            .replace(/{H}/g, H + '')\r\n            .replace(/{hh}/g, pad(h + '', 2))\r\n            .replace(/{h}/g, h + '')\r\n            .replace(/{mm}/g, pad(m, 2))\r\n            .replace(/{m}/g, m + '')\r\n            .replace(/{ss}/g, pad(s, 2))\r\n            .replace(/{s}/g, s + '')\r\n            .replace(/{SSS}/g, pad(S, 3))\r\n            .replace(/{S}/g, S + '');\r\n    }\r\n    function leveledFormat(tick, idx, formatter, lang, isUTC) {\r\n        var template = null;\r\n        if (typeof formatter === 'string') {\r\n            template = formatter;\r\n        }\r\n        else if (typeof formatter === 'function') {\r\n            template = formatter(tick.value, idx, {\r\n                level: tick.level\r\n            });\r\n        }\r\n        else {\r\n            var defaults$1 = extend({}, defaultLeveledFormatter);\r\n            if (tick.level > 0) {\r\n                for (var i = 0; i < primaryTimeUnits.length; ++i) {\r\n                    defaults$1[primaryTimeUnits[i]] = \"{primary|\" + defaults$1[primaryTimeUnits[i]] + \"}\";\r\n                }\r\n            }\r\n            var mergedFormatter = (formatter\r\n                ? (formatter.inherit === false\r\n                    ? formatter\r\n                    : defaults(formatter, defaults$1))\r\n                : defaults$1);\r\n            var unit = getUnitFromValue(tick.value, isUTC);\r\n            if (mergedFormatter[unit]) {\r\n                template = mergedFormatter[unit];\r\n            }\r\n            else if (mergedFormatter.inherit) {\r\n                var targetId = timeUnits.indexOf(unit);\r\n                for (var i = targetId - 1; i >= 0; --i) {\r\n                    if (mergedFormatter[unit]) {\r\n                        template = mergedFormatter[unit];\r\n                        break;\r\n                    }\r\n                }\r\n                template = template || defaults$1.none;\r\n            }\r\n            if (isArray(template)) {\r\n                var levelId = tick.level == null\r\n                    ? 0\r\n                    : (tick.level >= 0 ? tick.level : template.length + tick.level);\r\n                levelId = Math.min(levelId, template.length - 1);\r\n                template = template[levelId];\r\n            }\r\n        }\r\n        return format(new Date(tick.value), template, lang, isUTC);\r\n    }\r\n    function getUnitFromValue(value, isUTC) {\r\n        var date = parseDate(value);\r\n        var M = date[monthGetterName(isUTC)]() + 1;\r\n        var d = date[dateGetterName(isUTC)]();\r\n        var h = date[hoursGetterName(isUTC)]();\r\n        var m = date[minutesGetterName(isUTC)]();\r\n        var s = date[secondsGetterName(isUTC)]();\r\n        var S = date[millisecondsGetterName(isUTC)]();\r\n        var isSecond = S === 0;\r\n        var isMinute = isSecond && s === 0;\r\n        var isHour = isMinute && m === 0;\r\n        var isDay = isHour && h === 0;\r\n        var isMonth = isDay && d === 1;\r\n        var isYear = isMonth && M === 1;\r\n        if (isYear) {\r\n            return 'year';\r\n        }\r\n        else if (isMonth) {\r\n            return 'month';\r\n        }\r\n        else if (isDay) {\r\n            return 'day';\r\n        }\r\n        else if (isHour) {\r\n            return 'hour';\r\n        }\r\n        else if (isMinute) {\r\n            return 'minute';\r\n        }\r\n        else if (isSecond) {\r\n            return 'second';\r\n        }\r\n        else {\r\n            return 'millisecond';\r\n        }\r\n    }\r\n    function getUnitValue(value, unit, isUTC) {\r\n        var date = typeof value === 'number'\r\n            ? parseDate(value)\r\n            : value;\r\n        unit = unit || getUnitFromValue(value, isUTC);\r\n        switch (unit) {\r\n            case 'year':\r\n                return date[fullYearGetterName(isUTC)]();\r\n            case 'half-year':\r\n                return date[monthGetterName(isUTC)]() >= 6 ? 1 : 0;\r\n            case 'quarter':\r\n                return Math.floor((date[monthGetterName(isUTC)]() + 1) / 4);\r\n            case 'month':\r\n                return date[monthGetterName(isUTC)]();\r\n            case 'day':\r\n                return date[dateGetterName(isUTC)]();\r\n            case 'half-day':\r\n                return date[hoursGetterName(isUTC)]() / 24;\r\n            case 'hour':\r\n                return date[hoursGetterName(isUTC)]();\r\n            case 'minute':\r\n                return date[minutesGetterName(isUTC)]();\r\n            case 'second':\r\n                return date[secondsGetterName(isUTC)]();\r\n            case 'millisecond':\r\n                return date[millisecondsGetterName(isUTC)]();\r\n        }\r\n    }\r\n    function fullYearGetterName(isUTC) {\r\n        return isUTC ? 'getUTCFullYear' : 'getFullYear';\r\n    }\r\n    function monthGetterName(isUTC) {\r\n        return isUTC ? 'getUTCMonth' : 'getMonth';\r\n    }\r\n    function dateGetterName(isUTC) {\r\n        return isUTC ? 'getUTCDate' : 'getDate';\r\n    }\r\n    function hoursGetterName(isUTC) {\r\n        return isUTC ? 'getUTCHours' : 'getHours';\r\n    }\r\n    function minutesGetterName(isUTC) {\r\n        return isUTC ? 'getUTCMinutes' : 'getMinutes';\r\n    }\r\n    function secondsGetterName(isUTC) {\r\n        return isUTC ? 'getUTCSeconds' : 'getSeconds';\r\n    }\r\n    function millisecondsGetterName(isUTC) {\r\n        return isUTC ? 'getUTCSeconds' : 'getSeconds';\r\n    }\r\n    function fullYearSetterName(isUTC) {\r\n        return isUTC ? 'setUTCFullYear' : 'setFullYear';\r\n    }\r\n    function monthSetterName(isUTC) {\r\n        return isUTC ? 'setUTCMonth' : 'setMonth';\r\n    }\r\n    function dateSetterName(isUTC) {\r\n        return isUTC ? 'setUTCDate' : 'setDate';\r\n    }\r\n    function hoursSetterName(isUTC) {\r\n        return isUTC ? 'setUTCHours' : 'setHours';\r\n    }\r\n    function minutesSetterName(isUTC) {\r\n        return isUTC ? 'setUTCMinutes' : 'setMinutes';\r\n    }\r\n    function secondsSetterName(isUTC) {\r\n        return isUTC ? 'setUTCSeconds' : 'setSeconds';\r\n    }\r\n    function millisecondsSetterName(isUTC) {\r\n        return isUTC ? 'setUTCSeconds' : 'setSeconds';\r\n    }\n\n    var mathMax$3 = Math.max;\r\n    var mathMin$3 = Math.min;\r\n    var _customShapeMap = {};\r\n    var innerLabel = makeInner();\r\n    function extendShape(opts) {\r\n        return Path.extend(opts);\r\n    }\r\n    var extendPathFromString = extendFromString;\r\n    function extendPath(pathData, opts) {\r\n        return extendPathFromString(pathData, opts);\r\n    }\r\n    function registerShape(name, ShapeClass) {\r\n        _customShapeMap[name] = ShapeClass;\r\n    }\r\n    function getShapeClass(name) {\r\n        if (_customShapeMap.hasOwnProperty(name)) {\r\n            return _customShapeMap[name];\r\n        }\r\n    }\r\n    function makePath(pathData, opts, rect, layout) {\r\n        var path = createFromString(pathData, opts);\r\n        if (rect) {\r\n            if (layout === 'center') {\r\n                rect = centerGraphic(rect, path.getBoundingRect());\r\n            }\r\n            resizePath(path, rect);\r\n        }\r\n        return path;\r\n    }\r\n    function makeImage(imageUrl, rect, layout) {\r\n        var zrImg = new ZRImage({\r\n            style: {\r\n                image: imageUrl,\r\n                x: rect.x,\r\n                y: rect.y,\r\n                width: rect.width,\r\n                height: rect.height\r\n            },\r\n            onload: function (img) {\r\n                if (layout === 'center') {\r\n                    var boundingRect = {\r\n                        width: img.width,\r\n                        height: img.height\r\n                    };\r\n                    zrImg.setStyle(centerGraphic(rect, boundingRect));\r\n                }\r\n            }\r\n        });\r\n        return zrImg;\r\n    }\r\n    function centerGraphic(rect, boundingRect) {\r\n        var aspect = boundingRect.width / boundingRect.height;\r\n        var width = rect.height * aspect;\r\n        var height;\r\n        if (width <= rect.width) {\r\n            height = rect.height;\r\n        }\r\n        else {\r\n            width = rect.width;\r\n            height = width / aspect;\r\n        }\r\n        var cx = rect.x + rect.width / 2;\r\n        var cy = rect.y + rect.height / 2;\r\n        return {\r\n            x: cx - width / 2,\r\n            y: cy - height / 2,\r\n            width: width,\r\n            height: height\r\n        };\r\n    }\r\n    var mergePath$1 = mergePath;\r\n    function resizePath(path, rect) {\r\n        if (!path.applyTransform) {\r\n            return;\r\n        }\r\n        var pathRect = path.getBoundingRect();\r\n        var m = pathRect.calculateTransform(rect);\r\n        path.applyTransform(m);\r\n    }\r\n    function subPixelOptimizeLine$1(param) {\r\n        subPixelOptimizeLine(param.shape, param.shape, param.style);\r\n        return param;\r\n    }\r\n    function subPixelOptimizeRect$1(param) {\r\n        subPixelOptimizeRect(param.shape, param.shape, param.style);\r\n        return param;\r\n    }\r\n    var subPixelOptimize$1 = subPixelOptimize;\r\n    function animateOrSetProps(animationType, el, props, animatableModel, dataIndex, cb, during) {\r\n        var isFrom = false;\r\n        if (typeof dataIndex === 'function') {\r\n            during = cb;\r\n            cb = dataIndex;\r\n            dataIndex = null;\r\n        }\r\n        else if (isObject(dataIndex)) {\r\n            cb = dataIndex.cb;\r\n            during = dataIndex.during;\r\n            isFrom = dataIndex.isFrom;\r\n            dataIndex = dataIndex.dataIndex;\r\n        }\r\n        var isUpdate = animationType === 'update';\r\n        var isRemove = animationType === 'remove';\r\n        var animationPayload;\r\n        if (animatableModel && animatableModel.ecModel) {\r\n            var updatePayload = animatableModel.ecModel.getUpdatePayload();\r\n            animationPayload = (updatePayload && updatePayload.animation);\r\n        }\r\n        var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\r\n        if (animationEnabled) {\r\n            var duration = void 0;\r\n            var animationEasing = void 0;\r\n            var animationDelay = void 0;\r\n            if (animationPayload) {\r\n                duration = animationPayload.duration || 0;\r\n                animationEasing = animationPayload.easing || 'cubicOut';\r\n                animationDelay = animationPayload.delay || 0;\r\n            }\r\n            else if (isRemove) {\r\n                duration = 200;\r\n                animationEasing = 'cubicOut';\r\n                animationDelay = 0;\r\n            }\r\n            else {\r\n                duration = animatableModel.getShallow(isUpdate ? 'animationDurationUpdate' : 'animationDuration');\r\n                animationEasing = animatableModel.getShallow(isUpdate ? 'animationEasingUpdate' : 'animationEasing');\r\n                animationDelay = animatableModel.getShallow(isUpdate ? 'animationDelayUpdate' : 'animationDelay');\r\n                if (typeof animationDelay === 'function') {\r\n                    animationDelay = animationDelay(dataIndex, animatableModel.getAnimationDelayParams\r\n                        ? animatableModel.getAnimationDelayParams(el, dataIndex)\r\n                        : null);\r\n                }\r\n                if (typeof duration === 'function') {\r\n                    duration = duration(dataIndex);\r\n                }\r\n            }\r\n            if (!isRemove) {\r\n                el.stopAnimation('remove');\r\n            }\r\n            duration > 0\r\n                ? (isFrom\r\n                    ? el.animateFrom(props, {\r\n                        duration: duration,\r\n                        delay: animationDelay || 0,\r\n                        easing: animationEasing,\r\n                        done: cb,\r\n                        force: !!cb || !!during,\r\n                        scope: animationType,\r\n                        during: during\r\n                    })\r\n                    : el.animateTo(props, {\r\n                        duration: duration,\r\n                        delay: animationDelay || 0,\r\n                        easing: animationEasing,\r\n                        done: cb,\r\n                        force: !!cb || !!during,\r\n                        setToFinal: true,\r\n                        scope: animationType,\r\n                        during: during\r\n                    }))\r\n                : (el.stopAnimation(), el.attr(props), cb && cb());\r\n        }\r\n        else {\r\n            el.stopAnimation();\r\n            !isFrom && el.attr(props);\r\n            cb && cb();\r\n        }\r\n    }\r\n    function updateProps(el, props, animatableModel, dataIndex, cb, during) {\r\n        animateOrSetProps('update', el, props, animatableModel, dataIndex, cb, during);\r\n    }\r\n    function initProps(el, props, animatableModel, dataIndex, cb, during) {\r\n        animateOrSetProps('init', el, props, animatableModel, dataIndex, cb, function (percent) {\r\n            during && during(percent);\r\n        });\r\n    }\r\n    function removeElement(el, props, animatableModel, dataIndex, cb, during) {\r\n        animateOrSetProps('remove', el, props, animatableModel, dataIndex, cb, during);\r\n    }\r\n    function fadeOutDisplayable(el, animatableModel, dataIndex, done) {\r\n        el.removeTextContent();\r\n        el.removeTextGuideLine();\r\n        removeElement(el, {\r\n            style: {\r\n                opacity: 0\r\n            }\r\n        }, animatableModel, dataIndex, done);\r\n    }\r\n    function removeElementWithFadeOut(el, animatableModel, dataIndex) {\r\n        function doRemove() {\r\n            el.parent && el.parent.remove(el);\r\n        }\r\n        if (!el.isGroup) {\r\n            fadeOutDisplayable(el, animatableModel, dataIndex, doRemove);\r\n        }\r\n        else {\r\n            el.traverse(function (disp) {\r\n                if (!disp.isGroup) {\r\n                    fadeOutDisplayable(disp, animatableModel, dataIndex, doRemove);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function isElementRemoved(el) {\r\n        if (!el.__zr) {\r\n            return true;\r\n        }\r\n        for (var i = 0; i < el.animators.length; i++) {\r\n            var animator = el.animators[i];\r\n            if (animator.scope === 'remove') {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function animateOrSetLabel(animationType, el, data, dataIndex, labelModel, seriesModel, animatableModel, defaultTextGetter) {\r\n        var valueAnimationEnabled = labelModel && labelModel.get('valueAnimation');\r\n        if (valueAnimationEnabled) {\r\n            var precisionOption = labelModel.get('precision');\r\n            var precision_1 = !precisionOption || precisionOption === 'auto'\r\n                ? 0\r\n                : precisionOption;\r\n            var interpolateValues_1;\r\n            var rawValues_1 = seriesModel.getRawValue(dataIndex);\r\n            var isRawValueNumber_1 = false;\r\n            if (typeof rawValues_1 === 'number') {\r\n                isRawValueNumber_1 = true;\r\n                interpolateValues_1 = rawValues_1;\r\n            }\r\n            else {\r\n                interpolateValues_1 = [];\r\n                for (var i = 0; i < rawValues_1.length; ++i) {\r\n                    var info = data.getDimensionInfo(i);\r\n                    if (info.type !== 'ordinal') {\r\n                        interpolateValues_1.push(rawValues_1[i]);\r\n                    }\r\n                }\r\n            }\r\n            var text = el.getTextContent();\r\n            var host_1 = text && innerLabel(text);\r\n            host_1 && (host_1.startValue = host_1.nextValue);\r\n            var duration = animatableModel.get('animationDuration');\r\n            if (!duration) {\r\n                host_1.nextValue = interpolateValues_1;\r\n            }\r\n            var during = function (percent) {\r\n                var text = el.getTextContent();\r\n                if (!text || !host_1) {\r\n                    return;\r\n                }\r\n                var interpolated;\r\n                if (isRawValueNumber_1) {\r\n                    var value = interpolateNumber(host_1.startValue || 0, interpolateValues_1, percent);\r\n                    interpolated = round$1(value, precision_1);\r\n                }\r\n                else {\r\n                    interpolated = [];\r\n                    for (var i = 0; i < rawValues_1.length; ++i) {\r\n                        var info = data.getDimensionInfo(i);\r\n                        if (info.type === 'ordinal') {\r\n                            interpolated[i] = rawValues_1[i];\r\n                        }\r\n                        else {\r\n                            var startValues = host_1.startValue;\r\n                            var value = startValues == null\r\n                                ? rawValues_1[i]\r\n                                : interpolateNumber(startValues && startValues[i] ? startValues[i] : 0, interpolateValues_1[i], percent);\r\n                            interpolated[i] = round$1(value), precision_1;\r\n                        }\r\n                    }\r\n                }\r\n                host_1.nextValue = interpolated;\r\n                var labelText = getLabelText({\r\n                    labelDataIndex: dataIndex,\r\n                    labelFetcher: seriesModel,\r\n                    defaultText: defaultTextGetter\r\n                        ? defaultTextGetter(interpolated)\r\n                        : interpolated + ''\r\n                }, { normal: labelModel }, interpolated);\r\n                text.style.text = labelText.normal;\r\n                text.dirty();\r\n            };\r\n            var props = {};\r\n            animateOrSetProps(animationType, el, props, animatableModel, dataIndex, null, during);\r\n        }\r\n    }\r\n    function updateLabel(el, data, dataIndex, labelModel, seriesModel, animatableModel, defaultTextGetter) {\r\n        animateOrSetLabel('update', el, data, dataIndex, labelModel, seriesModel, animatableModel, defaultTextGetter);\r\n    }\r\n    function initLabel(el, data, dataIndex, labelModel, seriesModel, animatableModel, defaultTextGetter) {\r\n        animateOrSetLabel('init', el, data, dataIndex, labelModel, seriesModel, animatableModel, defaultTextGetter);\r\n    }\r\n    function getTransform(target, ancestor) {\r\n        var mat = identity([]);\r\n        while (target && target !== ancestor) {\r\n            mul$1(mat, target.getLocalTransform(), mat);\r\n            target = target.parent;\r\n        }\r\n        return mat;\r\n    }\r\n    function applyTransform$1(target, transform, invert$1) {\r\n        if (transform && !isArrayLike(transform)) {\r\n            transform = Transformable.getLocalTransform(transform);\r\n        }\r\n        if (invert$1) {\r\n            transform = invert([], transform);\r\n        }\r\n        return applyTransform([], target, transform);\r\n    }\r\n    function transformDirection(direction, transform, invert) {\r\n        var hBase = (transform[4] === 0 || transform[5] === 0 || transform[0] === 0)\r\n            ? 1 : Math.abs(2 * transform[4] / transform[0]);\r\n        var vBase = (transform[4] === 0 || transform[5] === 0 || transform[2] === 0)\r\n            ? 1 : Math.abs(2 * transform[4] / transform[2]);\r\n        var vertex = [\r\n            direction === 'left' ? -hBase : direction === 'right' ? hBase : 0,\r\n            direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0\r\n        ];\r\n        vertex = applyTransform$1(vertex, transform, invert);\r\n        return Math.abs(vertex[0]) > Math.abs(vertex[1])\r\n            ? (vertex[0] > 0 ? 'right' : 'left')\r\n            : (vertex[1] > 0 ? 'bottom' : 'top');\r\n    }\r\n    function isNotGroup(el) {\r\n        return !el.isGroup;\r\n    }\r\n    function isPath(el) {\r\n        return el.shape != null;\r\n    }\r\n    function groupTransition(g1, g2, animatableModel) {\r\n        if (!g1 || !g2) {\r\n            return;\r\n        }\r\n        function getElMap(g) {\r\n            var elMap = {};\r\n            g.traverse(function (el) {\r\n                if (isNotGroup(el) && el.anid) {\r\n                    elMap[el.anid] = el;\r\n                }\r\n            });\r\n            return elMap;\r\n        }\r\n        function getAnimatableProps(el) {\r\n            var obj = {\r\n                x: el.x,\r\n                y: el.y,\r\n                rotation: el.rotation\r\n            };\r\n            if (isPath(el)) {\r\n                obj.shape = extend({}, el.shape);\r\n            }\r\n            return obj;\r\n        }\r\n        var elMap1 = getElMap(g1);\r\n        g2.traverse(function (el) {\r\n            if (isNotGroup(el) && el.anid) {\r\n                var oldEl = elMap1[el.anid];\r\n                if (oldEl) {\r\n                    var newProp = getAnimatableProps(el);\r\n                    el.attr(getAnimatableProps(oldEl));\r\n                    updateProps(el, newProp, animatableModel, getECData(el).dataIndex);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    function clipPointsByRect(points, rect) {\r\n        return map(points, function (point) {\r\n            var x = point[0];\r\n            x = mathMax$3(x, rect.x);\r\n            x = mathMin$3(x, rect.x + rect.width);\r\n            var y = point[1];\r\n            y = mathMax$3(y, rect.y);\r\n            y = mathMin$3(y, rect.y + rect.height);\r\n            return [x, y];\r\n        });\r\n    }\r\n    function clipRectByRect(targetRect, rect) {\r\n        var x = mathMax$3(targetRect.x, rect.x);\r\n        var x2 = mathMin$3(targetRect.x + targetRect.width, rect.x + rect.width);\r\n        var y = mathMax$3(targetRect.y, rect.y);\r\n        var y2 = mathMin$3(targetRect.y + targetRect.height, rect.y + rect.height);\r\n        if (x2 >= x && y2 >= y) {\r\n            return {\r\n                x: x,\r\n                y: y,\r\n                width: x2 - x,\r\n                height: y2 - y\r\n            };\r\n        }\r\n    }\r\n    function createIcon(iconStr, opt, rect) {\r\n        var innerOpts = extend({ rectHover: true }, opt);\r\n        var style = innerOpts.style = { strokeNoScale: true };\r\n        rect = rect || { x: -1, y: -1, width: 2, height: 2 };\r\n        if (iconStr) {\r\n            return iconStr.indexOf('image://') === 0\r\n                ? (style.image = iconStr.slice(8),\r\n                    defaults(style, rect),\r\n                    new ZRImage(innerOpts))\r\n                : (makePath(iconStr.replace('path://', ''), innerOpts, rect, 'center'));\r\n        }\r\n    }\r\n    function linePolygonIntersect(a1x, a1y, a2x, a2y, points) {\r\n        for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\r\n            var p = points[i];\r\n            if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {\r\n                return true;\r\n            }\r\n            p2 = p;\r\n        }\r\n    }\r\n    function lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\r\n        var mx = a2x - a1x;\r\n        var my = a2y - a1y;\r\n        var nx = b2x - b1x;\r\n        var ny = b2y - b1y;\r\n        var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\r\n        if (nearZero(nmCrossProduct)) {\r\n            return false;\r\n        }\r\n        var b1a1x = a1x - b1x;\r\n        var b1a1y = a1y - b1y;\r\n        var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;\r\n        if (q < 0 || q > 1) {\r\n            return false;\r\n        }\r\n        var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\r\n        if (p < 0 || p > 1) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    function crossProduct2d(x1, y1, x2, y2) {\r\n        return x1 * y2 - x2 * y1;\r\n    }\r\n    function nearZero(val) {\r\n        return val <= (1e-6) && val >= -(1e-6);\r\n    }\r\n    registerShape('circle', Circle);\r\n    registerShape('ellipse', Ellipse);\r\n    registerShape('sector', Sector);\r\n    registerShape('ring', Ring);\r\n    registerShape('polygon', Polygon);\r\n    registerShape('polyline', Polyline);\r\n    registerShape('rect', Rect);\r\n    registerShape('line', Line);\r\n    registerShape('bezierCurve', BezierCurve);\r\n    registerShape('arc', Arc);\n\n    var graphic = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        extendShape: extendShape,\n        extendPath: extendPath,\n        registerShape: registerShape,\n        getShapeClass: getShapeClass,\n        makePath: makePath,\n        makeImage: makeImage,\n        mergePath: mergePath$1,\n        resizePath: resizePath,\n        subPixelOptimizeLine: subPixelOptimizeLine$1,\n        subPixelOptimizeRect: subPixelOptimizeRect$1,\n        subPixelOptimize: subPixelOptimize$1,\n        updateProps: updateProps,\n        initProps: initProps,\n        removeElement: removeElement,\n        removeElementWithFadeOut: removeElementWithFadeOut,\n        isElementRemoved: isElementRemoved,\n        updateLabel: updateLabel,\n        initLabel: initLabel,\n        getTransform: getTransform,\n        applyTransform: applyTransform$1,\n        transformDirection: transformDirection,\n        groupTransition: groupTransition,\n        clipPointsByRect: clipPointsByRect,\n        clipRectByRect: clipRectByRect,\n        createIcon: createIcon,\n        linePolygonIntersect: linePolygonIntersect,\n        lineLineIntersect: lineLineIntersect,\n        Group: Group,\n        Image: ZRImage,\n        Text: ZRText,\n        Circle: Circle,\n        Ellipse: Ellipse,\n        Sector: Sector,\n        Ring: Ring,\n        Polygon: Polygon,\n        Polyline: Polyline,\n        Rect: Rect,\n        Line: Line,\n        BezierCurve: BezierCurve,\n        Arc: Arc,\n        IncrementalDisplayable: IncrementalDisplayble,\n        CompoundPath: CompoundPath,\n        LinearGradient: LinearGradient,\n        RadialGradient: RadialGradient,\n        BoundingRect: BoundingRect,\n        OrientedBoundingRect: OrientedBoundingRect,\n        Point: Point,\n        Path: Path\n    });\n\n    function getTextRect(text, font, align, verticalAlign, padding, rich, truncate, lineHeight) {\r\n        deprecateLog('getTextRect is deprecated.');\r\n        var textEl = new ZRText({\r\n            style: {\r\n                text: text,\r\n                font: font,\r\n                align: align,\r\n                verticalAlign: verticalAlign,\r\n                padding: padding,\r\n                rich: rich,\r\n                overflow: truncate ? 'truncate' : null,\r\n                lineHeight: lineHeight\r\n            }\r\n        });\r\n        return textEl.getBoundingRect();\r\n    }\n\n    function addCommas(x) {\r\n        if (isNaN(x)) {\r\n            return '-';\r\n        }\r\n        var parts = (x + '').split('.');\r\n        return parts[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,')\r\n            + (parts.length > 1 ? ('.' + parts[1]) : '');\r\n    }\r\n    function toCamelCase(str, upperCaseFirst) {\r\n        str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\r\n            return group1.toUpperCase();\r\n        });\r\n        if (upperCaseFirst && str) {\r\n            str = str.charAt(0).toUpperCase() + str.slice(1);\r\n        }\r\n        return str;\r\n    }\r\n    var normalizeCssArray$1 = normalizeCssArray;\r\n    var replaceReg = /([&<>\"'])/g;\r\n    var replaceMap = {\r\n        '&': '&amp;',\r\n        '<': '&lt;',\r\n        '>': '&gt;',\r\n        '\"': '&quot;',\r\n        '\\'': '&#39;'\r\n    };\r\n    function encodeHTML(source) {\r\n        return source == null\r\n            ? ''\r\n            : (source + '').replace(replaceReg, function (str, c) {\r\n                return replaceMap[c];\r\n            });\r\n    }\r\n    function concatTooltipHtml(html, value, dontEncodeHtml) {\r\n        return (dontEncodeHtml ? html : \"<span style=\\\"font-size:12px;color:#6e7079;\\\">\" + encodeHTML(html) + \"</span>\")\r\n            + (value ? '<span style=\"float:right;margin-left:20px;color:#464646;font-weight:900;font-size:14px;\">' : '')\r\n            + encodeHTML(value)\r\n            + (value ? '</span>' : '');\r\n    }\r\n    var TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\r\n    var wrapVar = function (varName, seriesIdx) {\r\n        return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\r\n    };\r\n    function formatTpl(tpl, paramsList, encode) {\r\n        if (!isArray(paramsList)) {\r\n            paramsList = [paramsList];\r\n        }\r\n        var seriesLen = paramsList.length;\r\n        if (!seriesLen) {\r\n            return '';\r\n        }\r\n        var isTimeAxis = paramsList[0].axisType && paramsList[0].axisType.indexOf('time') >= 0;\r\n        if (isTimeAxis) {\r\n            var axisValue = paramsList[0].data[paramsList[0].axisIndex];\r\n            var date = parseDate(axisValue);\r\n            return format(date, tpl);\r\n        }\r\n        else {\r\n            var $vars = paramsList[0].$vars || [];\r\n            for (var i = 0; i < $vars.length; i++) {\r\n                var alias = TPL_VAR_ALIAS[i];\r\n                tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\r\n            }\r\n            for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\r\n                for (var k = 0; k < $vars.length; k++) {\r\n                    var val = paramsList[seriesIdx][$vars[k]];\r\n                    tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\r\n                }\r\n            }\r\n        }\r\n        return tpl;\r\n    }\r\n    function formatTplSimple(tpl, param, encode) {\r\n        each(param, function (value, key) {\r\n            tpl = tpl.replace('{' + key + '}', encode ? encodeHTML(value) : value);\r\n        });\r\n        return tpl;\r\n    }\r\n    function getTooltipMarker(inOpt, extraCssText) {\r\n        var opt = isString(inOpt) ? {\r\n            color: inOpt,\r\n            extraCssText: extraCssText\r\n        } : (inOpt || {});\r\n        var color = opt.color;\r\n        var type = opt.type;\r\n        extraCssText = opt.extraCssText;\r\n        var renderMode = opt.renderMode || 'html';\r\n        var markerId = opt.markerId || 'X';\r\n        if (!color) {\r\n            return '';\r\n        }\r\n        if (renderMode === 'html') {\r\n            return type === 'subItem'\r\n                ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;'\r\n                    + 'border-radius:4px;width:4px;height:4px;background-color:'\r\n                    + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>'\r\n                : '<span style=\"display:inline-block;margin-right:4px;'\r\n                    + 'border-radius:10px;width:10px;height:10px;background-color:'\r\n                    + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\r\n        }\r\n        else {\r\n            return {\r\n                renderMode: renderMode,\r\n                content: '{marker' + markerId + '|}  ',\r\n                style: {\r\n                    color: color\r\n                }\r\n            };\r\n        }\r\n    }\r\n    function formatTime(tpl, value, isUTC) {\r\n        if (tpl === 'week'\r\n            || tpl === 'month'\r\n            || tpl === 'quarter'\r\n            || tpl === 'half-year'\r\n            || tpl === 'year') {\r\n            tpl = 'MM-dd\\nyyyy';\r\n        }\r\n        var date = parseDate(value);\r\n        var utc = isUTC ? 'UTC' : '';\r\n        var y = date['get' + utc + 'FullYear']();\r\n        var M = date['get' + utc + 'Month']() + 1;\r\n        var d = date['get' + utc + 'Date']();\r\n        var h = date['get' + utc + 'Hours']();\r\n        var m = date['get' + utc + 'Minutes']();\r\n        var s = date['get' + utc + 'Seconds']();\r\n        var S = date['get' + utc + 'Milliseconds']();\r\n        tpl = tpl.replace('MM', pad(M, 2))\r\n            .replace('M', M)\r\n            .replace('yyyy', y)\r\n            .replace('yy', y % 100 + '')\r\n            .replace('dd', pad(d, 2))\r\n            .replace('d', d)\r\n            .replace('hh', pad(h, 2))\r\n            .replace('h', h)\r\n            .replace('mm', pad(m, 2))\r\n            .replace('m', m)\r\n            .replace('ss', pad(s, 2))\r\n            .replace('s', s)\r\n            .replace('SSS', pad(S, 3));\r\n        return tpl;\r\n    }\r\n    function capitalFirst(str) {\r\n        return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\r\n    }\r\n    function windowOpen(link, target) {\r\n        if (target === '_blank' || target === 'blank') {\r\n            var blank = window.open();\r\n            blank.opener = null;\r\n            blank.location.href = link;\r\n        }\r\n        else {\r\n            window.open(link, target);\r\n        }\r\n    }\n\n    var format$1 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        addCommas: addCommas,\n        toCamelCase: toCamelCase,\n        normalizeCssArray: normalizeCssArray$1,\n        encodeHTML: encodeHTML,\n        concatTooltipHtml: concatTooltipHtml,\n        formatTpl: formatTpl,\n        formatTplSimple: formatTplSimple,\n        getTooltipMarker: getTooltipMarker,\n        formatTime: formatTime,\n        capitalFirst: capitalFirst,\n        windowOpen: windowOpen,\n        truncateText: truncateText,\n        getTextRect: getTextRect\n    });\n\n    var each$1 = each;\r\n    var LOCATION_PARAMS = [\r\n        'left', 'right', 'top', 'bottom', 'width', 'height'\r\n    ];\r\n    var HV_NAMES = [\r\n        ['width', 'left', 'right'],\r\n        ['height', 'top', 'bottom']\r\n    ];\r\n    function boxLayout(orient, group, gap, maxWidth, maxHeight) {\r\n        var x = 0;\r\n        var y = 0;\r\n        if (maxWidth == null) {\r\n            maxWidth = Infinity;\r\n        }\r\n        if (maxHeight == null) {\r\n            maxHeight = Infinity;\r\n        }\r\n        var currentLineMaxSize = 0;\r\n        group.eachChild(function (child, idx) {\r\n            var rect = child.getBoundingRect();\r\n            var nextChild = group.childAt(idx + 1);\r\n            var nextChildRect = nextChild && nextChild.getBoundingRect();\r\n            var nextX;\r\n            var nextY;\r\n            if (orient === 'horizontal') {\r\n                var moveX = rect.width + (nextChildRect ? (-nextChildRect.x + rect.x) : 0);\r\n                nextX = x + moveX;\r\n                if (nextX > maxWidth || child.newline) {\r\n                    x = 0;\r\n                    nextX = moveX;\r\n                    y += currentLineMaxSize + gap;\r\n                    currentLineMaxSize = rect.height;\r\n                }\r\n                else {\r\n                    currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\r\n                }\r\n            }\r\n            else {\r\n                var moveY = rect.height + (nextChildRect ? (-nextChildRect.y + rect.y) : 0);\r\n                nextY = y + moveY;\r\n                if (nextY > maxHeight || child.newline) {\r\n                    x += currentLineMaxSize + gap;\r\n                    y = 0;\r\n                    nextY = moveY;\r\n                    currentLineMaxSize = rect.width;\r\n                }\r\n                else {\r\n                    currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\r\n                }\r\n            }\r\n            if (child.newline) {\r\n                return;\r\n            }\r\n            child.x = x;\r\n            child.y = y;\r\n            child.markRedraw();\r\n            orient === 'horizontal'\r\n                ? (x = nextX + gap)\r\n                : (y = nextY + gap);\r\n        });\r\n    }\r\n    var box = boxLayout;\r\n    var vbox = curry(boxLayout, 'vertical');\r\n    var hbox = curry(boxLayout, 'horizontal');\r\n    function getLayoutRect(positionInfo, containerRect, margin) {\r\n        margin = normalizeCssArray$1(margin || 0);\r\n        var containerWidth = containerRect.width;\r\n        var containerHeight = containerRect.height;\r\n        var left = parsePercent$2(positionInfo.left, containerWidth);\r\n        var top = parsePercent$2(positionInfo.top, containerHeight);\r\n        var right = parsePercent$2(positionInfo.right, containerWidth);\r\n        var bottom = parsePercent$2(positionInfo.bottom, containerHeight);\r\n        var width = parsePercent$2(positionInfo.width, containerWidth);\r\n        var height = parsePercent$2(positionInfo.height, containerHeight);\r\n        var verticalMargin = margin[2] + margin[0];\r\n        var horizontalMargin = margin[1] + margin[3];\r\n        var aspect = positionInfo.aspect;\r\n        if (isNaN(width)) {\r\n            width = containerWidth - right - horizontalMargin - left;\r\n        }\r\n        if (isNaN(height)) {\r\n            height = containerHeight - bottom - verticalMargin - top;\r\n        }\r\n        if (aspect != null) {\r\n            if (isNaN(width) && isNaN(height)) {\r\n                if (aspect > containerWidth / containerHeight) {\r\n                    width = containerWidth * 0.8;\r\n                }\r\n                else {\r\n                    height = containerHeight * 0.8;\r\n                }\r\n            }\r\n            if (isNaN(width)) {\r\n                width = aspect * height;\r\n            }\r\n            if (isNaN(height)) {\r\n                height = width / aspect;\r\n            }\r\n        }\r\n        if (isNaN(left)) {\r\n            left = containerWidth - right - width - horizontalMargin;\r\n        }\r\n        if (isNaN(top)) {\r\n            top = containerHeight - bottom - height - verticalMargin;\r\n        }\r\n        switch (positionInfo.left || positionInfo.right) {\r\n            case 'center':\r\n                left = containerWidth / 2 - width / 2 - margin[3];\r\n                break;\r\n            case 'right':\r\n                left = containerWidth - width - horizontalMargin;\r\n                break;\r\n        }\r\n        switch (positionInfo.top || positionInfo.bottom) {\r\n            case 'middle':\r\n            case 'center':\r\n                top = containerHeight / 2 - height / 2 - margin[0];\r\n                break;\r\n            case 'bottom':\r\n                top = containerHeight - height - verticalMargin;\r\n                break;\r\n        }\r\n        left = left || 0;\r\n        top = top || 0;\r\n        if (isNaN(width)) {\r\n            width = containerWidth - horizontalMargin - left - (right || 0);\r\n        }\r\n        if (isNaN(height)) {\r\n            height = containerHeight - verticalMargin - top - (bottom || 0);\r\n        }\r\n        var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\r\n        rect.margin = margin;\r\n        return rect;\r\n    }\r\n    function positionElement(el, positionInfo, containerRect, margin, opt) {\r\n        var h = !opt || !opt.hv || opt.hv[0];\r\n        var v = !opt || !opt.hv || opt.hv[1];\r\n        var boundingMode = opt && opt.boundingMode || 'all';\r\n        if (!h && !v) {\r\n            return;\r\n        }\r\n        var rect;\r\n        if (boundingMode === 'raw') {\r\n            rect = el.type === 'group'\r\n                ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0)\r\n                : el.getBoundingRect();\r\n        }\r\n        else {\r\n            rect = el.getBoundingRect();\r\n            if (el.needLocalTransform()) {\r\n                var transform = el.getLocalTransform();\r\n                rect = rect.clone();\r\n                rect.applyTransform(transform);\r\n            }\r\n        }\r\n        var layoutRect = getLayoutRect(defaults({ width: rect.width, height: rect.height }, positionInfo), containerRect, margin);\r\n        var dx = h ? layoutRect.x - rect.x : 0;\r\n        var dy = v ? layoutRect.y - rect.y : 0;\r\n        if (boundingMode === 'raw') {\r\n            el.x = dx;\r\n            el.y = dy;\r\n        }\r\n        else {\r\n            el.x += dx;\r\n            el.y += dy;\r\n        }\r\n        el.markRedraw();\r\n    }\r\n    function fetchLayoutMode(ins) {\r\n        var layoutMode = ins.layoutMode || ins.constructor.layoutMode;\r\n        return isObject(layoutMode)\r\n            ? layoutMode\r\n            : layoutMode\r\n                ? { type: layoutMode }\r\n                : null;\r\n    }\r\n    function mergeLayoutParam(targetOption, newOption, opt) {\r\n        var ignoreSize = opt && opt.ignoreSize;\r\n        !isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\r\n        var hResult = merge(HV_NAMES[0], 0);\r\n        var vResult = merge(HV_NAMES[1], 1);\r\n        copy(HV_NAMES[0], targetOption, hResult);\r\n        copy(HV_NAMES[1], targetOption, vResult);\r\n        function merge(names, hvIdx) {\r\n            var newParams = {};\r\n            var newValueCount = 0;\r\n            var merged = {};\r\n            var mergedValueCount = 0;\r\n            var enoughParamNumber = 2;\r\n            each$1(names, function (name) {\r\n                merged[name] = targetOption[name];\r\n            });\r\n            each$1(names, function (name) {\r\n                hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\r\n                hasValue(newParams, name) && newValueCount++;\r\n                hasValue(merged, name) && mergedValueCount++;\r\n            });\r\n            if (ignoreSize[hvIdx]) {\r\n                if (hasValue(newOption, names[1])) {\r\n                    merged[names[2]] = null;\r\n                }\r\n                else if (hasValue(newOption, names[2])) {\r\n                    merged[names[1]] = null;\r\n                }\r\n                return merged;\r\n            }\r\n            if (mergedValueCount === enoughParamNumber || !newValueCount) {\r\n                return merged;\r\n            }\r\n            else if (newValueCount >= enoughParamNumber) {\r\n                return newParams;\r\n            }\r\n            else {\r\n                for (var i = 0; i < names.length; i++) {\r\n                    var name_1 = names[i];\r\n                    if (!hasProp(newParams, name_1) && hasProp(targetOption, name_1)) {\r\n                        newParams[name_1] = targetOption[name_1];\r\n                        break;\r\n                    }\r\n                }\r\n                return newParams;\r\n            }\r\n        }\r\n        function hasProp(obj, name) {\r\n            return obj.hasOwnProperty(name);\r\n        }\r\n        function hasValue(obj, name) {\r\n            return obj[name] != null && obj[name] !== 'auto';\r\n        }\r\n        function copy(names, target, source) {\r\n            each$1(names, function (name) {\r\n                target[name] = source[name];\r\n            });\r\n        }\r\n    }\r\n    function getLayoutParams(source) {\r\n        return copyLayoutParams({}, source);\r\n    }\r\n    function copyLayoutParams(target, source) {\r\n        source && target && each$1(LOCATION_PARAMS, function (name) {\r\n            source.hasOwnProperty(name) && (target[name] = source[name]);\r\n        });\r\n        return target;\r\n    }\n\n    var inner = makeInner();\r\n    var ComponentModel = (function (_super) {\r\n        __extends(ComponentModel, _super);\r\n        function ComponentModel(option, parentModel, ecModel) {\r\n            var _this = _super.call(this, option, parentModel, ecModel) || this;\r\n            _this.uid = getUID('ec_cpt_model');\r\n            return _this;\r\n        }\r\n        ComponentModel.prototype.init = function (option, parentModel, ecModel) {\r\n            this.mergeDefaultAndTheme(option, ecModel);\r\n        };\r\n        ComponentModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\r\n            var layoutMode = fetchLayoutMode(this);\r\n            var inputPositionParams = layoutMode\r\n                ? getLayoutParams(option) : {};\r\n            var themeModel = ecModel.getTheme();\r\n            merge(option, themeModel.get(this.mainType));\r\n            merge(option, this.getDefaultOption());\r\n            if (layoutMode) {\r\n                mergeLayoutParam(option, inputPositionParams, layoutMode);\r\n            }\r\n        };\r\n        ComponentModel.prototype.mergeOption = function (option, ecModel) {\r\n            merge(this.option, option, true);\r\n            var layoutMode = fetchLayoutMode(this);\r\n            if (layoutMode) {\r\n                mergeLayoutParam(this.option, option, layoutMode);\r\n            }\r\n        };\r\n        ComponentModel.prototype.optionUpdated = function (newCptOption, isInit) { };\r\n        ComponentModel.prototype.getDefaultOption = function () {\r\n            var ctor = this.constructor;\r\n            if (!isExtendedClass(ctor)) {\r\n                return ctor.defaultOption;\r\n            }\r\n            var fields = inner(this);\r\n            if (!fields.defaultOption) {\r\n                var optList = [];\r\n                var clz = ctor;\r\n                while (clz) {\r\n                    var opt = clz.prototype.defaultOption;\r\n                    opt && optList.push(opt);\r\n                    clz = clz.superClass;\r\n                }\r\n                var defaultOption = {};\r\n                for (var i = optList.length - 1; i >= 0; i--) {\r\n                    defaultOption = merge(defaultOption, optList[i], true);\r\n                }\r\n                fields.defaultOption = defaultOption;\r\n            }\r\n            return fields.defaultOption;\r\n        };\r\n        ComponentModel.prototype.getReferringComponents = function (mainType, opt) {\r\n            var indexKey = (mainType + 'Index');\r\n            var idKey = (mainType + 'Id');\r\n            return queryReferringComponents(this.ecModel, mainType, {\r\n                index: this.get(indexKey, true),\r\n                id: this.get(idKey, true)\r\n            }, opt);\r\n        };\r\n        ComponentModel.prototype.getBoxLayoutParams = function () {\r\n            var boxLayoutModel = this;\r\n            return {\r\n                left: boxLayoutModel.get('left'),\r\n                top: boxLayoutModel.get('top'),\r\n                right: boxLayoutModel.get('right'),\r\n                bottom: boxLayoutModel.get('bottom'),\r\n                width: boxLayoutModel.get('width'),\r\n                height: boxLayoutModel.get('height')\r\n            };\r\n        };\r\n        ComponentModel.protoInitialize = (function () {\r\n            var proto = ComponentModel.prototype;\r\n            proto.type = 'component';\r\n            proto.id = '';\r\n            proto.name = '';\r\n            proto.mainType = '';\r\n            proto.subType = '';\r\n            proto.componentIndex = 0;\r\n        })();\r\n        return ComponentModel;\r\n    }(Model));\r\n    mountExtend(ComponentModel, Model);\r\n    enableClassManagement(ComponentModel, { registerWhenExtend: true });\r\n    enableSubTypeDefaulter(ComponentModel);\r\n    enableTopologicalTravel(ComponentModel, getDependencies);\r\n    function getDependencies(componentType) {\r\n        var deps = [];\r\n        each(ComponentModel.getClassesByMainType(componentType), function (clz) {\r\n            deps = deps.concat(clz.dependencies || clz.prototype.dependencies || []);\r\n        });\r\n        deps = map(deps, function (type) {\r\n            return parseClassType(type).main;\r\n        });\r\n        if (componentType !== 'dataset' && indexOf(deps, 'dataset') <= 0) {\r\n            deps.unshift('dataset');\r\n        }\r\n        return deps;\r\n    }\n\n    var platform = '';\r\n    if (typeof navigator !== 'undefined') {\r\n        platform = navigator.platform || '';\r\n    }\r\n    var globalDefault = {\r\n        darkMode: 'auto',\r\n        color: [\r\n            '#5470c6',\r\n            '#91cc75',\r\n            '#fac858',\r\n            '#ee6666',\r\n            '#73c0de',\r\n            '#3ba272',\r\n            '#fc8452',\r\n            '#9a60b4',\r\n            '#ea7ccc'\r\n        ],\r\n        gradientColor: ['#f6efa6', '#d88273', '#bf444c'],\r\n        textStyle: {\r\n            fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\r\n            fontSize: 12,\r\n            fontStyle: 'normal',\r\n            fontWeight: 'normal'\r\n        },\r\n        blendMode: null,\r\n        stateAnimation: {\r\n            duration: 300,\r\n            easing: 'cubicOut'\r\n        },\r\n        animation: 'auto',\r\n        animationDuration: 1000,\r\n        animationDurationUpdate: 500,\r\n        animationEasing: 'cubicInOut',\r\n        animationEasingUpdate: 'cubicInOut',\r\n        animationThreshold: 2000,\r\n        progressiveThreshold: 3000,\r\n        progressive: 400,\r\n        hoverLayerThreshold: 3000,\r\n        useUTC: false\r\n    };\n\n    var inner$1 = makeInner();\r\n    function getNearestColorPalette(colors, requestColorNum) {\r\n        var paletteNum = colors.length;\r\n        for (var i = 0; i < paletteNum; i++) {\r\n            if (colors[i].length > requestColorNum) {\r\n                return colors[i];\r\n            }\r\n        }\r\n        return colors[paletteNum - 1];\r\n    }\r\n    var ColorPaletteMixin = (function () {\r\n        function ColorPaletteMixin() {\r\n        }\r\n        ColorPaletteMixin.prototype.clearColorPalette = function () {\r\n            inner$1(this).colorIdx = 0;\r\n            inner$1(this).colorNameMap = {};\r\n        };\r\n        ColorPaletteMixin.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\r\n            scope = scope || this;\r\n            var scopeFields = inner$1(scope);\r\n            var colorIdx = scopeFields.colorIdx || 0;\r\n            var colorNameMap = scopeFields.colorNameMap = scopeFields.colorNameMap || {};\r\n            if (colorNameMap.hasOwnProperty(name)) {\r\n                return colorNameMap[name];\r\n            }\r\n            var defaultColorPalette = normalizeToArray(this.get('color', true));\r\n            var layeredColorPalette = this.get('colorLayer', true);\r\n            var colorPalette = ((requestColorNum == null || !layeredColorPalette)\r\n                ? defaultColorPalette : getNearestColorPalette(layeredColorPalette, requestColorNum));\r\n            colorPalette = colorPalette || defaultColorPalette;\r\n            if (!colorPalette || !colorPalette.length) {\r\n                return;\r\n            }\r\n            var color = colorPalette[colorIdx];\r\n            if (name) {\r\n                colorNameMap[name] = color;\r\n            }\r\n            scopeFields.colorIdx = (colorIdx + 1) % colorPalette.length;\r\n            return color;\r\n        };\r\n        return ColorPaletteMixin;\r\n    }());\n\n    var VISUAL_DIMENSIONS = createHashMap([\r\n        'tooltip', 'label', 'itemName', 'itemId', 'seriesName'\r\n    ]);\r\n    var SOURCE_FORMAT_ORIGINAL = 'original';\r\n    var SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\r\n    var SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\r\n    var SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\r\n    var SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\r\n    var SOURCE_FORMAT_UNKNOWN = 'unknown';\r\n    var SERIES_LAYOUT_BY_COLUMN = 'column';\r\n    var SERIES_LAYOUT_BY_ROW = 'row';\n\n    var Source = (function () {\r\n        function Source(fields) {\r\n            this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\r\n            this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN;\r\n            this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\r\n            this.startIndex = fields.startIndex || 0;\r\n            this.dimensionsDefine = fields.dimensionsDefine;\r\n            this.dimensionsDetectCount = fields.dimensionsDetectCount;\r\n            this.encodeDefine = fields.encodeDefine;\r\n            this.metaRawOption = fields.metaRawOption;\r\n        }\r\n        Source.seriesDataToSource = function (data) {\r\n            return new Source({\r\n                data: data,\r\n                sourceFormat: isTypedArray(data)\r\n                    ? SOURCE_FORMAT_TYPED_ARRAY\r\n                    : SOURCE_FORMAT_ORIGINAL\r\n            });\r\n        };\r\n        return Source;\r\n    }());\n\n    var BE_ORDINAL = {\r\n        Must: 1,\r\n        Might: 2,\r\n        Not: 3\r\n    };\r\n    var innerGlobalModel = makeInner();\r\n    function detectSourceFormat(data) {\r\n        var sourceFormat = SOURCE_FORMAT_UNKNOWN;\r\n        if (isTypedArray(data)) {\r\n            sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\r\n        }\r\n        else if (isArray(data)) {\r\n            if (data.length === 0) {\r\n                sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\r\n            }\r\n            for (var i = 0, len = data.length; i < len; i++) {\r\n                var item = data[i];\r\n                if (item == null) {\r\n                    continue;\r\n                }\r\n                else if (isArray(item)) {\r\n                    sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\r\n                    break;\r\n                }\r\n                else if (isObject(item)) {\r\n                    sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else if (isObject(data)) {\r\n            for (var key in data) {\r\n                if (hasOwn(data, key) && isArrayLike(data[key])) {\r\n                    sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else if (data != null) {\r\n            throw new Error('Invalid data');\r\n        }\r\n        return sourceFormat;\r\n    }\r\n    function resetSourceDefaulter(ecModel) {\r\n        innerGlobalModel(ecModel).datasetMap = createHashMap();\r\n    }\r\n    function createSource(sourceData, thisMetaRawOption, sourceFormat, encodeDefine) {\r\n        sourceFormat = sourceFormat || detectSourceFormat(sourceData);\r\n        var dimInfo = determineSourceDimensions(sourceData, sourceFormat, thisMetaRawOption.seriesLayoutBy, thisMetaRawOption.sourceHeader, thisMetaRawOption.dimensions);\r\n        var source = new Source({\r\n            data: sourceData,\r\n            sourceFormat: sourceFormat,\r\n            seriesLayoutBy: thisMetaRawOption.seriesLayoutBy,\r\n            dimensionsDefine: dimInfo.dimensionsDefine,\r\n            startIndex: dimInfo.startIndex,\r\n            dimensionsDetectCount: dimInfo.dimensionsDetectCount,\r\n            encodeDefine: makeEncodeDefine(encodeDefine),\r\n            metaRawOption: clone(thisMetaRawOption)\r\n        });\r\n        return source;\r\n    }\r\n    function inheritSourceMetaRawOption(opt) {\r\n        return defaults(opt.thisNew, opt.parent);\r\n    }\r\n    function cloneSourceShallow(source) {\r\n        return new Source({\r\n            data: source.data,\r\n            sourceFormat: source.sourceFormat,\r\n            seriesLayoutBy: source.seriesLayoutBy,\r\n            dimensionsDefine: clone(source.dimensionsDefine),\r\n            startIndex: source.startIndex,\r\n            dimensionsDetectCount: source.dimensionsDetectCount,\r\n            encodeDefine: makeEncodeDefine(source.encodeDefine)\r\n        });\r\n    }\r\n    function makeEncodeDefine(encodeDefine) {\r\n        return encodeDefine\r\n            ? createHashMap(encodeDefine)\r\n            : null;\r\n    }\r\n    function determineSourceDimensions(data, sourceFormat, seriesLayoutBy, sourceHeader, dimensionsDefine) {\r\n        var dimensionsDetectCount;\r\n        var startIndex;\r\n        if (!data) {\r\n            return {\r\n                dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\r\n                startIndex: startIndex,\r\n                dimensionsDetectCount: dimensionsDetectCount\r\n            };\r\n        }\r\n        if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\r\n            var dataArrayRows = data;\r\n            if (sourceHeader === 'auto' || sourceHeader == null) {\r\n                arrayRowsTravelFirst(function (val) {\r\n                    if (val != null && val !== '-') {\r\n                        if (isString(val)) {\r\n                            startIndex == null && (startIndex = 1);\r\n                        }\r\n                        else {\r\n                            startIndex = 0;\r\n                        }\r\n                    }\r\n                }, seriesLayoutBy, dataArrayRows, 10);\r\n            }\r\n            else {\r\n                startIndex = isNumber(sourceHeader) ? sourceHeader : sourceHeader ? 1 : 0;\r\n            }\r\n            if (!dimensionsDefine && startIndex === 1) {\r\n                dimensionsDefine = [];\r\n                arrayRowsTravelFirst(function (val, index) {\r\n                    dimensionsDefine[index] = (val != null ? val + '' : '');\r\n                }, seriesLayoutBy, dataArrayRows, Infinity);\r\n            }\r\n            dimensionsDetectCount = dimensionsDefine\r\n                ? dimensionsDefine.length\r\n                : seriesLayoutBy === SERIES_LAYOUT_BY_ROW\r\n                    ? dataArrayRows.length\r\n                    : dataArrayRows[0]\r\n                        ? dataArrayRows[0].length\r\n                        : null;\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\r\n            if (!dimensionsDefine) {\r\n                dimensionsDefine = objectRowsCollectDimensions(data);\r\n            }\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\r\n            if (!dimensionsDefine) {\r\n                dimensionsDefine = [];\r\n                each(data, function (colArr, key) {\r\n                    dimensionsDefine.push(key);\r\n                });\r\n            }\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\r\n            var value0 = getDataItemValue(data[0]);\r\n            dimensionsDetectCount = isArray(value0) && value0.length || 1;\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\r\n            if (__DEV__) {\r\n                assert(!!dimensionsDefine, 'dimensions must be given if data is TypedArray.');\r\n            }\r\n        }\r\n        return {\r\n            startIndex: startIndex,\r\n            dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\r\n            dimensionsDetectCount: dimensionsDetectCount\r\n        };\r\n    }\r\n    function normalizeDimensionsOption(dimensionsDefine) {\r\n        if (!dimensionsDefine) {\r\n            return;\r\n        }\r\n        var nameMap = createHashMap();\r\n        return map(dimensionsDefine, function (item, index) {\r\n            item = extend({}, isObject(item) ? item : { name: item });\r\n            if (item.name == null) {\r\n                return item;\r\n            }\r\n            item.name += '';\r\n            if (item.displayName == null) {\r\n                item.displayName = item.name;\r\n            }\r\n            var exist = nameMap.get(item.name);\r\n            if (!exist) {\r\n                nameMap.set(item.name, { count: 1 });\r\n            }\r\n            else {\r\n                item.name += '-' + exist.count++;\r\n            }\r\n            return item;\r\n        });\r\n    }\r\n    function arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\r\n        if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\r\n            for (var i = 0; i < data.length && i < maxLoop; i++) {\r\n                cb(data[i] ? data[i][0] : null, i);\r\n            }\r\n        }\r\n        else {\r\n            var value0 = data[0] || [];\r\n            for (var i = 0; i < value0.length && i < maxLoop; i++) {\r\n                cb(value0[i], i);\r\n            }\r\n        }\r\n    }\r\n    function objectRowsCollectDimensions(data) {\r\n        var firstIndex = 0;\r\n        var obj;\r\n        while (firstIndex < data.length && !(obj = data[firstIndex++])) { }\r\n        if (obj) {\r\n            var dimensions_1 = [];\r\n            each(obj, function (value, key) {\r\n                dimensions_1.push(key);\r\n            });\r\n            return dimensions_1;\r\n        }\r\n    }\r\n    function makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\r\n        var encode = {};\r\n        var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\r\n        if (!datasetModel || !coordDimensions) {\r\n            return encode;\r\n        }\r\n        var encodeItemName = [];\r\n        var encodeSeriesName = [];\r\n        var ecModel = seriesModel.ecModel;\r\n        var datasetMap = innerGlobalModel(ecModel).datasetMap;\r\n        var key = datasetModel.uid + '_' + source.seriesLayoutBy;\r\n        var baseCategoryDimIndex;\r\n        var categoryWayValueDimStart;\r\n        coordDimensions = coordDimensions.slice();\r\n        each(coordDimensions, function (coordDimInfoLoose, coordDimIdx) {\r\n            var coordDimInfo = isObject(coordDimInfoLoose)\r\n                ? coordDimInfoLoose\r\n                : (coordDimensions[coordDimIdx] = { name: coordDimInfoLoose });\r\n            if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\r\n                baseCategoryDimIndex = coordDimIdx;\r\n                categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimInfo);\r\n            }\r\n            encode[coordDimInfo.name] = [];\r\n        });\r\n        var datasetRecord = datasetMap.get(key)\r\n            || datasetMap.set(key, { categoryWayDim: categoryWayValueDimStart, valueWayDim: 0 });\r\n        each(coordDimensions, function (coordDimInfo, coordDimIdx) {\r\n            var coordDimName = coordDimInfo.name;\r\n            var count = getDataDimCountOnCoordDim(coordDimInfo);\r\n            if (baseCategoryDimIndex == null) {\r\n                var start = datasetRecord.valueWayDim;\r\n                pushDim(encode[coordDimName], start, count);\r\n                pushDim(encodeSeriesName, start, count);\r\n                datasetRecord.valueWayDim += count;\r\n            }\r\n            else if (baseCategoryDimIndex === coordDimIdx) {\r\n                pushDim(encode[coordDimName], 0, count);\r\n                pushDim(encodeItemName, 0, count);\r\n            }\r\n            else {\r\n                var start = datasetRecord.categoryWayDim;\r\n                pushDim(encode[coordDimName], start, count);\r\n                pushDim(encodeSeriesName, start, count);\r\n                datasetRecord.categoryWayDim += count;\r\n            }\r\n        });\r\n        function pushDim(dimIdxArr, idxFrom, idxCount) {\r\n            for (var i = 0; i < idxCount; i++) {\r\n                dimIdxArr.push(idxFrom + i);\r\n            }\r\n        }\r\n        function getDataDimCountOnCoordDim(coordDimInfo) {\r\n            var dimsDef = coordDimInfo.dimsDef;\r\n            return dimsDef ? dimsDef.length : 1;\r\n        }\r\n        encodeItemName.length && (encode.itemName = encodeItemName);\r\n        encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\r\n        return encode;\r\n    }\r\n    function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\r\n        var encode = {};\r\n        var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\r\n        if (!datasetModel) {\r\n            return encode;\r\n        }\r\n        var sourceFormat = source.sourceFormat;\r\n        var dimensionsDefine = source.dimensionsDefine;\r\n        var potentialNameDimIndex;\r\n        if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\r\n            each(dimensionsDefine, function (dim, idx) {\r\n                if ((isObject(dim) ? dim.name : dim) === 'name') {\r\n                    potentialNameDimIndex = idx;\r\n                }\r\n            });\r\n        }\r\n        var idxResult = (function () {\r\n            var idxRes0 = {};\r\n            var idxRes1 = {};\r\n            var guessRecords = [];\r\n            for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\r\n                var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\r\n                guessRecords.push(guessResult);\r\n                var isPureNumber = guessResult === BE_ORDINAL.Not;\r\n                if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\r\n                    idxRes0.v = i;\r\n                }\r\n                if (idxRes0.n == null\r\n                    || (idxRes0.n === idxRes0.v)\r\n                    || (!isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not)) {\r\n                    idxRes0.n = i;\r\n                }\r\n                if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\r\n                    return idxRes0;\r\n                }\r\n                if (!isPureNumber) {\r\n                    if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\r\n                        idxRes1.v = i;\r\n                    }\r\n                    if (idxRes1.n == null || (idxRes1.n === idxRes1.v)) {\r\n                        idxRes1.n = i;\r\n                    }\r\n                }\r\n            }\r\n            function fulfilled(idxResult) {\r\n                return idxResult.v != null && idxResult.n != null;\r\n            }\r\n            return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\r\n        })();\r\n        if (idxResult) {\r\n            encode.value = [idxResult.v];\r\n            var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n;\r\n            encode.itemName = [nameDimIndex];\r\n            encode.seriesName = [nameDimIndex];\r\n        }\r\n        return encode;\r\n    }\r\n    function querySeriesUpstreamDatasetModel(seriesModel) {\r\n        var thisData = seriesModel.get('data', true);\r\n        if (!thisData) {\r\n            return queryReferringComponents(seriesModel.ecModel, 'dataset', {\r\n                index: seriesModel.get('datasetIndex', true),\r\n                id: seriesModel.get('datasetId', true)\r\n            }, SINGLE_REFERRING).models[0];\r\n        }\r\n    }\r\n    function queryDatasetUpstreamDatasetModels(datasetModel) {\r\n        if (!datasetModel.get('transform', true)\r\n            && !datasetModel.get('fromTransformResult', true)) {\r\n            return [];\r\n        }\r\n        return queryReferringComponents(datasetModel.ecModel, 'dataset', {\r\n            index: datasetModel.get('fromDatasetIndex', true),\r\n            id: datasetModel.get('fromDatasetId', true)\r\n        }, SINGLE_REFERRING).models;\r\n    }\r\n    function guessOrdinal(source, dimIndex) {\r\n        return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\r\n    }\r\n    function doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\r\n        var result;\r\n        var maxLoop = 5;\r\n        if (isTypedArray(data)) {\r\n            return BE_ORDINAL.Not;\r\n        }\r\n        var dimName;\r\n        var dimType;\r\n        if (dimensionsDefine) {\r\n            var dimDefItem = dimensionsDefine[dimIndex];\r\n            if (isObject(dimDefItem)) {\r\n                dimName = dimDefItem.name;\r\n                dimType = dimDefItem.type;\r\n            }\r\n            else if (isString(dimDefItem)) {\r\n                dimName = dimDefItem;\r\n            }\r\n        }\r\n        if (dimType != null) {\r\n            return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\r\n        }\r\n        if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\r\n            var dataArrayRows = data;\r\n            if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\r\n                var sample = dataArrayRows[dimIndex];\r\n                for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\r\n                    if ((result = detectValue(sample[startIndex + i])) != null) {\r\n                        return result;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {\r\n                    var row = dataArrayRows[startIndex + i];\r\n                    if (row && (result = detectValue(row[dimIndex])) != null) {\r\n                        return result;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\r\n            var dataObjectRows = data;\r\n            if (!dimName) {\r\n                return BE_ORDINAL.Not;\r\n            }\r\n            for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {\r\n                var item = dataObjectRows[i];\r\n                if (item && (result = detectValue(item[dimName])) != null) {\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\r\n            var dataKeyedColumns = data;\r\n            if (!dimName) {\r\n                return BE_ORDINAL.Not;\r\n            }\r\n            var sample = dataKeyedColumns[dimName];\r\n            if (!sample || isTypedArray(sample)) {\r\n                return BE_ORDINAL.Not;\r\n            }\r\n            for (var i = 0; i < sample.length && i < maxLoop; i++) {\r\n                if ((result = detectValue(sample[i])) != null) {\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\r\n            var dataOriginal = data;\r\n            for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {\r\n                var item = dataOriginal[i];\r\n                var val = getDataItemValue(item);\r\n                if (!isArray(val)) {\r\n                    return BE_ORDINAL.Not;\r\n                }\r\n                if ((result = detectValue(val[dimIndex])) != null) {\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        function detectValue(val) {\r\n            var beStr = isString(val);\r\n            if (val != null && isFinite(val) && val !== '') {\r\n                return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\r\n            }\r\n            else if (beStr && val !== '-') {\r\n                return BE_ORDINAL.Must;\r\n            }\r\n        }\r\n        return BE_ORDINAL.Not;\r\n    }\n\n    var internalOptionCreatorMap = createHashMap();\r\n    function registerInternalOptionCreator(mainType, creator) {\r\n        assert(internalOptionCreatorMap.get(mainType) == null && creator);\r\n        internalOptionCreatorMap.set(mainType, creator);\r\n    }\r\n    function concatInternalOptions(ecModel, mainType, newCmptOptionList) {\r\n        var internalOptionCreator = internalOptionCreatorMap.get(mainType);\r\n        if (!internalOptionCreator) {\r\n            return newCmptOptionList;\r\n        }\r\n        var internalOptions = internalOptionCreator(ecModel);\r\n        if (!internalOptions) {\r\n            return newCmptOptionList;\r\n        }\r\n        if (__DEV__) {\r\n            for (var i = 0; i < internalOptions.length; i++) {\r\n                assert(isComponentIdInternal(internalOptions[i]));\r\n            }\r\n        }\r\n        return newCmptOptionList.concat(internalOptions);\r\n    }\n\n    var reCreateSeriesIndices;\r\n    var assertSeriesInitialized;\r\n    var initBase;\r\n    var OPTION_INNER_KEY = '\\0_ec_inner';\r\n    var GlobalModel = (function (_super) {\r\n        __extends(GlobalModel, _super);\r\n        function GlobalModel() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GlobalModel.prototype.init = function (option, parentModel, ecModel, theme, locale, optionManager) {\r\n            theme = theme || {};\r\n            this.option = null;\r\n            this._theme = new Model(theme);\r\n            this._locale = new Model(locale);\r\n            this._optionManager = optionManager;\r\n        };\r\n        GlobalModel.prototype.setOption = function (option, opts, optionPreprocessorFuncs) {\r\n            assert(!(OPTION_INNER_KEY in option), 'please use chart.getOption()');\r\n            var innerOpt = normalizeReplaceMergeInput(opts);\r\n            this._optionManager.setOption(option, optionPreprocessorFuncs, innerOpt);\r\n            this._resetOption(null, innerOpt);\r\n        };\r\n        GlobalModel.prototype.resetOption = function (type, opt) {\r\n            return this._resetOption(type, normalizeReplaceMergeInput(opt));\r\n        };\r\n        GlobalModel.prototype._resetOption = function (type, opt) {\r\n            var optionChanged = false;\r\n            var optionManager = this._optionManager;\r\n            if (!type || type === 'recreate') {\r\n                var baseOption = optionManager.mountOption(type === 'recreate');\r\n                if (!this.option || type === 'recreate') {\r\n                    initBase(this, baseOption);\r\n                }\r\n                else {\r\n                    this.restoreData();\r\n                    this._mergeOption(baseOption, opt);\r\n                }\r\n                optionChanged = true;\r\n            }\r\n            if (type === 'timeline' || type === 'media') {\r\n                this.restoreData();\r\n            }\r\n            if (!type || type === 'recreate' || type === 'timeline') {\r\n                var timelineOption = optionManager.getTimelineOption(this);\r\n                if (timelineOption) {\r\n                    optionChanged = true;\r\n                    this._mergeOption(timelineOption, opt);\r\n                }\r\n            }\r\n            if (!type || type === 'recreate' || type === 'media') {\r\n                var mediaOptions = optionManager.getMediaOption(this);\r\n                if (mediaOptions.length) {\r\n                    each(mediaOptions, function (mediaOption) {\r\n                        optionChanged = true;\r\n                        this._mergeOption(mediaOption, opt);\r\n                    }, this);\r\n                }\r\n            }\r\n            return optionChanged;\r\n        };\r\n        GlobalModel.prototype.mergeOption = function (option) {\r\n            this._mergeOption(option, null);\r\n        };\r\n        GlobalModel.prototype._mergeOption = function (newOption, opt) {\r\n            var option = this.option;\r\n            var componentsMap = this._componentsMap;\r\n            var componentsCount = this._componentsCount;\r\n            var newCmptTypes = [];\r\n            var newCmptTypeMap = createHashMap();\r\n            var replaceMergeMainTypeMap = opt && opt.replaceMergeMainTypeMap;\r\n            resetSourceDefaulter(this);\r\n            each(newOption, function (componentOption, mainType) {\r\n                if (componentOption == null) {\r\n                    return;\r\n                }\r\n                if (!ComponentModel.hasClass(mainType)) {\r\n                    option[mainType] = option[mainType] == null\r\n                        ? clone(componentOption)\r\n                        : merge(option[mainType], componentOption, true);\r\n                }\r\n                else if (mainType) {\r\n                    newCmptTypes.push(mainType);\r\n                    newCmptTypeMap.set(mainType, true);\r\n                }\r\n            });\r\n            if (replaceMergeMainTypeMap) {\r\n                replaceMergeMainTypeMap.each(function (val, mainTypeInReplaceMerge) {\r\n                    if (!newCmptTypeMap.get(mainTypeInReplaceMerge)) {\r\n                        newCmptTypes.push(mainTypeInReplaceMerge);\r\n                        newCmptTypeMap.set(mainTypeInReplaceMerge, true);\r\n                    }\r\n                });\r\n            }\r\n            ComponentModel.topologicalTravel(newCmptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\r\n            function visitComponent(mainType) {\r\n                var newCmptOptionList = concatInternalOptions(this, mainType, normalizeToArray(newOption[mainType]));\r\n                var oldCmptList = componentsMap.get(mainType);\r\n                var mergeMode = !oldCmptList ? 'replaceAll'\r\n                    : (replaceMergeMainTypeMap && replaceMergeMainTypeMap.get(mainType)) ? 'replaceMerge'\r\n                        : 'normalMerge';\r\n                var mappingResult = mappingToExists(oldCmptList, newCmptOptionList, mergeMode);\r\n                setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel);\r\n                option[mainType] = null;\r\n                componentsMap.set(mainType, null);\r\n                componentsCount.set(mainType, 0);\r\n                var optionsByMainType = [];\r\n                var cmptsByMainType = [];\r\n                var cmptsCountByMainType = 0;\r\n                each(mappingResult, function (resultItem, index) {\r\n                    var componentModel = resultItem.existing;\r\n                    var newCmptOption = resultItem.newOption;\r\n                    if (!newCmptOption) {\r\n                        if (componentModel) {\r\n                            componentModel.mergeOption({}, this);\r\n                            componentModel.optionUpdated({}, false);\r\n                        }\r\n                    }\r\n                    else {\r\n                        var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, true);\r\n                        if (componentModel && componentModel.constructor === ComponentModelClass) {\r\n                            componentModel.name = resultItem.keyInfo.name;\r\n                            componentModel.mergeOption(newCmptOption, this);\r\n                            componentModel.optionUpdated(newCmptOption, false);\r\n                        }\r\n                        else {\r\n                            var extraOpt = extend({\r\n                                componentIndex: index\r\n                            }, resultItem.keyInfo);\r\n                            componentModel = new ComponentModelClass(newCmptOption, this, this, extraOpt);\r\n                            extend(componentModel, extraOpt);\r\n                            if (resultItem.brandNew) {\r\n                                componentModel.__requireNewView = true;\r\n                            }\r\n                            componentModel.init(newCmptOption, this, this);\r\n                            componentModel.optionUpdated(null, true);\r\n                        }\r\n                    }\r\n                    if (componentModel) {\r\n                        optionsByMainType.push(componentModel.option);\r\n                        cmptsByMainType.push(componentModel);\r\n                        cmptsCountByMainType++;\r\n                    }\r\n                    else {\r\n                        optionsByMainType.push(void 0);\r\n                        cmptsByMainType.push(void 0);\r\n                    }\r\n                }, this);\r\n                option[mainType] = optionsByMainType;\r\n                componentsMap.set(mainType, cmptsByMainType);\r\n                componentsCount.set(mainType, cmptsCountByMainType);\r\n                if (mainType === 'series') {\r\n                    reCreateSeriesIndices(this);\r\n                }\r\n            }\r\n            if (!this._seriesIndices) {\r\n                reCreateSeriesIndices(this);\r\n            }\r\n        };\r\n        GlobalModel.prototype.getOption = function () {\r\n            var option = clone(this.option);\r\n            each(option, function (optInMainType, mainType) {\r\n                if (ComponentModel.hasClass(mainType)) {\r\n                    var opts = normalizeToArray(optInMainType);\r\n                    var realLen = opts.length;\r\n                    var metNonInner = false;\r\n                    for (var i = realLen - 1; i >= 0; i--) {\r\n                        if (opts[i] && !isComponentIdInternal(opts[i])) {\r\n                            metNonInner = true;\r\n                        }\r\n                        else {\r\n                            opts[i] = null;\r\n                            !metNonInner && realLen--;\r\n                        }\r\n                    }\r\n                    opts.length = realLen;\r\n                    option[mainType] = opts;\r\n                }\r\n            });\r\n            delete option[OPTION_INNER_KEY];\r\n            return option;\r\n        };\r\n        GlobalModel.prototype.getTheme = function () {\r\n            return this._theme;\r\n        };\r\n        GlobalModel.prototype.getLocaleModel = function () {\r\n            return this._locale;\r\n        };\r\n        GlobalModel.prototype.getLocale = function (localePosition) {\r\n            var locale = this.getLocaleModel();\r\n            return locale.get(localePosition);\r\n        };\r\n        GlobalModel.prototype.setUpdatePayload = function (payload) {\r\n            this._payload = payload;\r\n        };\r\n        GlobalModel.prototype.getUpdatePayload = function () {\r\n            return this._payload;\r\n        };\r\n        GlobalModel.prototype.getComponent = function (mainType, idx) {\r\n            var list = this._componentsMap.get(mainType);\r\n            if (list) {\r\n                var cmpt = list[idx || 0];\r\n                if (cmpt) {\r\n                    return cmpt;\r\n                }\r\n                else if (idx == null) {\r\n                    for (var i = 0; i < list.length; i++) {\r\n                        if (list[i]) {\r\n                            return list[i];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        GlobalModel.prototype.queryComponents = function (condition) {\r\n            var mainType = condition.mainType;\r\n            if (!mainType) {\r\n                return [];\r\n            }\r\n            var index = condition.index;\r\n            var id = condition.id;\r\n            var name = condition.name;\r\n            var cmpts = this._componentsMap.get(mainType);\r\n            if (!cmpts || !cmpts.length) {\r\n                return [];\r\n            }\r\n            var result;\r\n            if (index != null) {\r\n                result = [];\r\n                each(normalizeToArray(index), function (idx) {\r\n                    cmpts[idx] && result.push(cmpts[idx]);\r\n                });\r\n            }\r\n            else if (id != null) {\r\n                result = queryByIdOrName('id', id, cmpts);\r\n            }\r\n            else if (name != null) {\r\n                result = queryByIdOrName('name', name, cmpts);\r\n            }\r\n            else {\r\n                result = filter(cmpts, function (cmpt) { return !!cmpt; });\r\n            }\r\n            return filterBySubType(result, condition);\r\n        };\r\n        GlobalModel.prototype.findComponents = function (condition) {\r\n            var query = condition.query;\r\n            var mainType = condition.mainType;\r\n            var queryCond = getQueryCond(query);\r\n            var result = queryCond\r\n                ? this.queryComponents(queryCond)\r\n                : filter(this._componentsMap.get(mainType), function (cmpt) { return !!cmpt; });\r\n            return doFilter(filterBySubType(result, condition));\r\n            function getQueryCond(q) {\r\n                var indexAttr = mainType + 'Index';\r\n                var idAttr = mainType + 'Id';\r\n                var nameAttr = mainType + 'Name';\r\n                return q && (q[indexAttr] != null\r\n                    || q[idAttr] != null\r\n                    || q[nameAttr] != null)\r\n                    ? {\r\n                        mainType: mainType,\r\n                        index: q[indexAttr],\r\n                        id: q[idAttr],\r\n                        name: q[nameAttr]\r\n                    }\r\n                    : null;\r\n            }\r\n            function doFilter(res) {\r\n                return condition.filter\r\n                    ? filter(res, condition.filter)\r\n                    : res;\r\n            }\r\n        };\r\n        GlobalModel.prototype.eachComponent = function (mainType, cb, context) {\r\n            var componentsMap = this._componentsMap;\r\n            if (isFunction(mainType)) {\r\n                var ctxForAll_1 = cb;\r\n                var cbForAll_1 = mainType;\r\n                componentsMap.each(function (cmpts, componentType) {\r\n                    for (var i = 0; cmpts && i < cmpts.length; i++) {\r\n                        var cmpt = cmpts[i];\r\n                        cmpt && cbForAll_1.call(ctxForAll_1, componentType, cmpt, cmpt.componentIndex);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                var cmpts = isString(mainType)\r\n                    ? componentsMap.get(mainType)\r\n                    : isObject(mainType)\r\n                        ? this.findComponents(mainType)\r\n                        : null;\r\n                for (var i = 0; cmpts && i < cmpts.length; i++) {\r\n                    var cmpt = cmpts[i];\r\n                    cmpt && cb.call(context, cmpt, cmpt.componentIndex);\r\n                }\r\n            }\r\n        };\r\n        GlobalModel.prototype.getSeriesByName = function (name) {\r\n            return filter(this._componentsMap.get('series'), function (oneSeries) { return !!oneSeries && oneSeries.name === name; });\r\n        };\r\n        GlobalModel.prototype.getSeriesByIndex = function (seriesIndex) {\r\n            return this._componentsMap.get('series')[seriesIndex];\r\n        };\r\n        GlobalModel.prototype.getSeriesByType = function (subType) {\r\n            return filter(this._componentsMap.get('series'), function (oneSeries) { return !!oneSeries && oneSeries.subType === subType; });\r\n        };\r\n        GlobalModel.prototype.getSeries = function () {\r\n            return filter(this._componentsMap.get('series').slice(), function (oneSeries) { return !!oneSeries; });\r\n        };\r\n        GlobalModel.prototype.getSeriesCount = function () {\r\n            return this._componentsCount.get('series');\r\n        };\r\n        GlobalModel.prototype.eachSeries = function (cb, context) {\r\n            assertSeriesInitialized(this);\r\n            each(this._seriesIndices, function (rawSeriesIndex) {\r\n                var series = this._componentsMap.get('series')[rawSeriesIndex];\r\n                cb.call(context, series, rawSeriesIndex);\r\n            }, this);\r\n        };\r\n        GlobalModel.prototype.eachRawSeries = function (cb, context) {\r\n            each(this._componentsMap.get('series'), function (series) {\r\n                series && cb.call(context, series, series.componentIndex);\r\n            });\r\n        };\r\n        GlobalModel.prototype.eachSeriesByType = function (subType, cb, context) {\r\n            assertSeriesInitialized(this);\r\n            each(this._seriesIndices, function (rawSeriesIndex) {\r\n                var series = this._componentsMap.get('series')[rawSeriesIndex];\r\n                if (series.subType === subType) {\r\n                    cb.call(context, series, rawSeriesIndex);\r\n                }\r\n            }, this);\r\n        };\r\n        GlobalModel.prototype.eachRawSeriesByType = function (subType, cb, context) {\r\n            return each(this.getSeriesByType(subType), cb, context);\r\n        };\r\n        GlobalModel.prototype.isSeriesFiltered = function (seriesModel) {\r\n            assertSeriesInitialized(this);\r\n            return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\r\n        };\r\n        GlobalModel.prototype.getCurrentSeriesIndices = function () {\r\n            return (this._seriesIndices || []).slice();\r\n        };\r\n        GlobalModel.prototype.filterSeries = function (cb, context) {\r\n            assertSeriesInitialized(this);\r\n            var newSeriesIndices = [];\r\n            each(this._seriesIndices, function (seriesRawIdx) {\r\n                var series = this._componentsMap.get('series')[seriesRawIdx];\r\n                cb.call(context, series, seriesRawIdx) && newSeriesIndices.push(seriesRawIdx);\r\n            }, this);\r\n            this._seriesIndices = newSeriesIndices;\r\n            this._seriesIndicesMap = createHashMap(newSeriesIndices);\r\n        };\r\n        GlobalModel.prototype.restoreData = function (payload) {\r\n            reCreateSeriesIndices(this);\r\n            var componentsMap = this._componentsMap;\r\n            var componentTypes = [];\r\n            componentsMap.each(function (components, componentType) {\r\n                componentTypes.push(componentType);\r\n            });\r\n            ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType) {\r\n                each(componentsMap.get(componentType), function (component) {\r\n                    if (component\r\n                        && (componentType !== 'series'\r\n                            || !isNotTargetSeries(component, payload))) {\r\n                        component.restoreData();\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GlobalModel.internalField = (function () {\r\n            reCreateSeriesIndices = function (ecModel) {\r\n                var seriesIndices = ecModel._seriesIndices = [];\r\n                each(ecModel._componentsMap.get('series'), function (series) {\r\n                    series && seriesIndices.push(series.componentIndex);\r\n                });\r\n                ecModel._seriesIndicesMap = createHashMap(seriesIndices);\r\n            };\r\n            assertSeriesInitialized = function (ecModel) {\r\n                if (__DEV__) {\r\n                    if (!ecModel._seriesIndices) {\r\n                        throw new Error('Option should contains series.');\r\n                    }\r\n                }\r\n            };\r\n            initBase = function (ecModel, baseOption) {\r\n                ecModel.option = {};\r\n                ecModel.option[OPTION_INNER_KEY] = 1;\r\n                ecModel._componentsMap = createHashMap({ series: [] });\r\n                ecModel._componentsCount = createHashMap();\r\n                mergeTheme(baseOption, ecModel._theme.option);\r\n                merge(baseOption, globalDefault, false);\r\n                ecModel._mergeOption(baseOption, null);\r\n            };\r\n        })();\r\n        return GlobalModel;\r\n    }(Model));\r\n    function isNotTargetSeries(seriesModel, payload) {\r\n        if (payload) {\r\n            var index = payload.seriesIndex;\r\n            var id = payload.seriesId;\r\n            var name_1 = payload.seriesName;\r\n            return (index != null && seriesModel.componentIndex !== index)\r\n                || (id != null && seriesModel.id !== id)\r\n                || (name_1 != null && seriesModel.name !== name_1);\r\n        }\r\n    }\r\n    function mergeTheme(option, theme) {\r\n        var notMergeColorLayer = option.color && !option.colorLayer;\r\n        each(theme, function (themeItem, name) {\r\n            if (name === 'colorLayer' && notMergeColorLayer) {\r\n                return;\r\n            }\r\n            if (!ComponentModel.hasClass(name)) {\r\n                if (typeof themeItem === 'object') {\r\n                    option[name] = !option[name]\r\n                        ? clone(themeItem)\r\n                        : merge(option[name], themeItem, false);\r\n                }\r\n                else {\r\n                    if (option[name] == null) {\r\n                        option[name] = themeItem;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    function queryByIdOrName(attr, idOrName, cmpts) {\r\n        if (isArray(idOrName)) {\r\n            var keyMap_1 = createHashMap(idOrName);\r\n            each(idOrName, function (idOrNameItem) {\r\n                if (idOrNameItem != null) {\r\n                    validateIdOrName(idOrNameItem);\r\n                    keyMap_1.set(idOrNameItem, true);\r\n                }\r\n            });\r\n            return filter(cmpts, function (cmpt) { return cmpt && keyMap_1.get(cmpt[attr]); });\r\n        }\r\n        else {\r\n            validateIdOrName(idOrName);\r\n            return filter(cmpts, function (cmpt) { return cmpt && cmpt[attr] === idOrName + ''; });\r\n        }\r\n    }\r\n    function filterBySubType(components, condition) {\r\n        return condition.hasOwnProperty('subType')\r\n            ? filter(components, function (cmpt) { return cmpt && cmpt.subType === condition.subType; })\r\n            : components;\r\n    }\r\n    function normalizeReplaceMergeInput(opts) {\r\n        var replaceMergeMainTypeMap = createHashMap();\r\n        opts && each(normalizeToArray(opts.replaceMerge), function (mainType) {\r\n            if (__DEV__) {\r\n                assert(ComponentModel.hasClass(mainType), '\"' + mainType + '\" is not valid component main type in \"replaceMerge\"');\r\n            }\r\n            replaceMergeMainTypeMap.set(mainType, true);\r\n        });\r\n        return {\r\n            replaceMergeMainTypeMap: replaceMergeMainTypeMap\r\n        };\r\n    }\r\n    mixin(GlobalModel, ColorPaletteMixin);\n\n    var availableMethods = [\r\n        'getDom',\r\n        'getZr',\r\n        'getWidth',\r\n        'getHeight',\r\n        'getDevicePixelRatio',\r\n        'dispatchAction',\r\n        'isDisposed',\r\n        'on',\r\n        'off',\r\n        'getDataURL',\r\n        'getConnectedDataURL',\r\n        'getModel',\r\n        'getOption',\r\n        'getViewOfComponentModel',\r\n        'getViewOfSeriesModel',\r\n        'getId',\r\n        'updateLabelLayout'\r\n    ];\r\n    var ExtensionAPI = (function () {\r\n        function ExtensionAPI(ecInstance) {\r\n            each(availableMethods, function (methodName) {\r\n                this[methodName] = bind(ecInstance[methodName], ecInstance);\r\n            }, this);\r\n        }\r\n        return ExtensionAPI;\r\n    }());\n\n    var coordinateSystemCreators = {};\r\n    var CoordinateSystemManager = (function () {\r\n        function CoordinateSystemManager() {\r\n            this._coordinateSystems = [];\r\n        }\r\n        CoordinateSystemManager.prototype.create = function (ecModel, api) {\r\n            var coordinateSystems = [];\r\n            each(coordinateSystemCreators, function (creater, type) {\r\n                var list = creater.create(ecModel, api);\r\n                coordinateSystems = coordinateSystems.concat(list || []);\r\n            });\r\n            this._coordinateSystems = coordinateSystems;\r\n        };\r\n        CoordinateSystemManager.prototype.update = function (ecModel, api) {\r\n            each(this._coordinateSystems, function (coordSys) {\r\n                coordSys.update && coordSys.update(ecModel, api);\r\n            });\r\n        };\r\n        CoordinateSystemManager.prototype.getCoordinateSystems = function () {\r\n            return this._coordinateSystems.slice();\r\n        };\r\n        CoordinateSystemManager.register = function (type, creator) {\r\n            coordinateSystemCreators[type] = creator;\r\n        };\r\n        CoordinateSystemManager.get = function (type) {\r\n            return coordinateSystemCreators[type];\r\n        };\r\n        return CoordinateSystemManager;\r\n    }());\n\n    var QUERY_REG = /^(min|max)?(.+)$/;\r\n    var OptionManager = (function () {\r\n        function OptionManager(api) {\r\n            this._timelineOptions = [];\r\n            this._mediaList = [];\r\n            this._currentMediaIndices = [];\r\n            this._api = api;\r\n        }\r\n        OptionManager.prototype.setOption = function (rawOption, optionPreprocessorFuncs, opt) {\r\n            if (rawOption) {\r\n                each(normalizeToArray(rawOption.series), function (series) {\r\n                    series && series.data && isTypedArray(series.data) && setAsPrimitive(series.data);\r\n                });\r\n                each(normalizeToArray(rawOption.dataset), function (dataset) {\r\n                    dataset && dataset.source && isTypedArray(dataset.source) && setAsPrimitive(dataset.source);\r\n                });\r\n            }\r\n            rawOption = clone(rawOption);\r\n            var optionBackup = this._optionBackup;\r\n            var newParsedOption = parseRawOption(rawOption, optionPreprocessorFuncs, !optionBackup);\r\n            this._newBaseOption = newParsedOption.baseOption;\r\n            if (optionBackup) {\r\n                if (newParsedOption.timelineOptions.length) {\r\n                    optionBackup.timelineOptions = newParsedOption.timelineOptions;\r\n                }\r\n                if (newParsedOption.mediaList.length) {\r\n                    optionBackup.mediaList = newParsedOption.mediaList;\r\n                }\r\n                if (newParsedOption.mediaDefault) {\r\n                    optionBackup.mediaDefault = newParsedOption.mediaDefault;\r\n                }\r\n            }\r\n            else {\r\n                this._optionBackup = newParsedOption;\r\n            }\r\n        };\r\n        OptionManager.prototype.mountOption = function (isRecreate) {\r\n            var optionBackup = this._optionBackup;\r\n            this._timelineOptions = optionBackup.timelineOptions;\r\n            this._mediaList = optionBackup.mediaList;\r\n            this._mediaDefault = optionBackup.mediaDefault;\r\n            this._currentMediaIndices = [];\r\n            return clone(isRecreate\r\n                ? optionBackup.baseOption : this._newBaseOption);\r\n        };\r\n        OptionManager.prototype.getTimelineOption = function (ecModel) {\r\n            var option;\r\n            var timelineOptions = this._timelineOptions;\r\n            if (timelineOptions.length) {\r\n                var timelineModel = ecModel.getComponent('timeline');\r\n                if (timelineModel) {\r\n                    option = clone(timelineOptions[timelineModel.getCurrentIndex()]);\r\n                }\r\n            }\r\n            return option;\r\n        };\r\n        OptionManager.prototype.getMediaOption = function (ecModel) {\r\n            var ecWidth = this._api.getWidth();\r\n            var ecHeight = this._api.getHeight();\r\n            var mediaList = this._mediaList;\r\n            var mediaDefault = this._mediaDefault;\r\n            var indices = [];\r\n            var result = [];\r\n            if (!mediaList.length && !mediaDefault) {\r\n                return result;\r\n            }\r\n            for (var i = 0, len = mediaList.length; i < len; i++) {\r\n                if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\r\n                    indices.push(i);\r\n                }\r\n            }\r\n            if (!indices.length && mediaDefault) {\r\n                indices = [-1];\r\n            }\r\n            if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\r\n                result = map(indices, function (index) {\r\n                    return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\r\n                });\r\n            }\r\n            this._currentMediaIndices = indices;\r\n            return result;\r\n        };\r\n        return OptionManager;\r\n    }());\r\n    function parseRawOption(rawOption, optionPreprocessorFuncs, isNew) {\r\n        var timelineOptions = [];\r\n        var mediaList = [];\r\n        var mediaDefault;\r\n        var baseOption;\r\n        var timelineOpt = rawOption.timeline;\r\n        if (rawOption.baseOption) {\r\n            baseOption = rawOption.baseOption;\r\n        }\r\n        if (timelineOpt || rawOption.options) {\r\n            baseOption = baseOption || {};\r\n            timelineOptions = (rawOption.options || []).slice();\r\n        }\r\n        if (rawOption.media) {\r\n            baseOption = baseOption || {};\r\n            var media = rawOption.media;\r\n            each(media, function (singleMedia) {\r\n                if (singleMedia && singleMedia.option) {\r\n                    if (singleMedia.query) {\r\n                        mediaList.push(singleMedia);\r\n                    }\r\n                    else if (!mediaDefault) {\r\n                        mediaDefault = singleMedia;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (!baseOption) {\r\n            baseOption = rawOption;\r\n        }\r\n        if (!baseOption.timeline) {\r\n            baseOption.timeline = timelineOpt;\r\n        }\r\n        each([baseOption].concat(timelineOptions)\r\n            .concat(map(mediaList, function (media) {\r\n            return media.option;\r\n        })), function (option) {\r\n            each(optionPreprocessorFuncs, function (preProcess) {\r\n                preProcess(option, isNew);\r\n            });\r\n        });\r\n        return {\r\n            baseOption: baseOption,\r\n            timelineOptions: timelineOptions,\r\n            mediaDefault: mediaDefault,\r\n            mediaList: mediaList\r\n        };\r\n    }\r\n    function applyMediaQuery(query, ecWidth, ecHeight) {\r\n        var realMap = {\r\n            width: ecWidth,\r\n            height: ecHeight,\r\n            aspectratio: ecWidth / ecHeight\r\n        };\r\n        var applicatable = true;\r\n        each(query, function (value, attr) {\r\n            var matched = attr.match(QUERY_REG);\r\n            if (!matched || !matched[1] || !matched[2]) {\r\n                return;\r\n            }\r\n            var operator = matched[1];\r\n            var realAttr = matched[2].toLowerCase();\r\n            if (!compare(realMap[realAttr], value, operator)) {\r\n                applicatable = false;\r\n            }\r\n        });\r\n        return applicatable;\r\n    }\r\n    function compare(real, expect, operator) {\r\n        if (operator === 'min') {\r\n            return real >= expect;\r\n        }\r\n        else if (operator === 'max') {\r\n            return real <= expect;\r\n        }\r\n        else {\r\n            return real === expect;\r\n        }\r\n    }\r\n    function indicesEquals(indices1, indices2) {\r\n        return indices1.join(',') === indices2.join(',');\r\n    }\n\n    var each$2 = each;\r\n    var isObject$1 = isObject;\r\n    var POSSIBLE_STYLES = [\r\n        'areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle',\r\n        'chordStyle', 'label', 'labelLine'\r\n    ];\r\n    function compatEC2ItemStyle(opt) {\r\n        var itemStyleOpt = opt && opt.itemStyle;\r\n        if (!itemStyleOpt) {\r\n            return;\r\n        }\r\n        for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\r\n            var styleName = POSSIBLE_STYLES[i];\r\n            var normalItemStyleOpt = itemStyleOpt.normal;\r\n            var emphasisItemStyleOpt = itemStyleOpt.emphasis;\r\n            if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\r\n                if (__DEV__) {\r\n                    deprecateReplaceLog(\"itemStyle.normal.\" + styleName, styleName);\r\n                }\r\n                opt[styleName] = opt[styleName] || {};\r\n                if (!opt[styleName].normal) {\r\n                    opt[styleName].normal = normalItemStyleOpt[styleName];\r\n                }\r\n                else {\r\n                    merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\r\n                }\r\n                normalItemStyleOpt[styleName] = null;\r\n            }\r\n            if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\r\n                if (__DEV__) {\r\n                    deprecateReplaceLog(\"itemStyle.emphasis.\" + styleName, \"emphasis.\" + styleName);\r\n                }\r\n                opt[styleName] = opt[styleName] || {};\r\n                if (!opt[styleName].emphasis) {\r\n                    opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\r\n                }\r\n                else {\r\n                    merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\r\n                }\r\n                emphasisItemStyleOpt[styleName] = null;\r\n            }\r\n        }\r\n    }\r\n    function convertNormalEmphasis(opt, optType, useExtend) {\r\n        if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\r\n            var normalOpt = opt[optType].normal;\r\n            var emphasisOpt = opt[optType].emphasis;\r\n            if (normalOpt) {\r\n                if (__DEV__) {\r\n                    deprecateLog(\"'normal' hierarchy in \" + optType + \" has been removed since 4.0. All style properties are configured in \" + optType + \" directly now.\");\r\n                }\r\n                if (useExtend) {\r\n                    opt[optType].normal = opt[optType].emphasis = null;\r\n                    defaults(opt[optType], normalOpt);\r\n                }\r\n                else {\r\n                    opt[optType] = normalOpt;\r\n                }\r\n            }\r\n            if (emphasisOpt) {\r\n                if (__DEV__) {\r\n                    deprecateLog(optType + \".emphasis has been changed to emphasis.\" + optType + \" since 4.0\");\r\n                }\r\n                opt.emphasis = opt.emphasis || {};\r\n                opt.emphasis[optType] = emphasisOpt;\r\n                if (emphasisOpt.focus) {\r\n                    opt.emphasis.focus = emphasisOpt.focus;\r\n                }\r\n                if (emphasisOpt.blurScope) {\r\n                    opt.emphasis.blurScope = emphasisOpt.blurScope;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function removeEC3NormalStatus(opt) {\r\n        convertNormalEmphasis(opt, 'itemStyle');\r\n        convertNormalEmphasis(opt, 'lineStyle');\r\n        convertNormalEmphasis(opt, 'areaStyle');\r\n        convertNormalEmphasis(opt, 'label');\r\n        convertNormalEmphasis(opt, 'labelLine');\r\n        convertNormalEmphasis(opt, 'upperLabel');\r\n        convertNormalEmphasis(opt, 'edgeLabel');\r\n    }\r\n    function compatTextStyle(opt, propName) {\r\n        var labelOptSingle = isObject$1(opt) && opt[propName];\r\n        var textStyle = isObject$1(labelOptSingle) && labelOptSingle.textStyle;\r\n        if (textStyle) {\r\n            if (__DEV__) {\r\n                deprecateLog(\"textStyle hierarchy in \" + propName + \" has been removed since 4.0. All textStyle properties are configured in \" + propName + \" directly now.\");\r\n            }\r\n            for (var i = 0, len = TEXT_STYLE_OPTIONS.length; i < len; i++) {\r\n                var textPropName = TEXT_STYLE_OPTIONS[i];\r\n                if (textStyle.hasOwnProperty(textPropName)) {\r\n                    labelOptSingle[textPropName] = textStyle[textPropName];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function compatEC3CommonStyles(opt) {\r\n        if (opt) {\r\n            removeEC3NormalStatus(opt);\r\n            compatTextStyle(opt, 'label');\r\n            opt.emphasis && compatTextStyle(opt.emphasis, 'label');\r\n        }\r\n    }\r\n    function processSeries(seriesOpt) {\r\n        if (!isObject$1(seriesOpt)) {\r\n            return;\r\n        }\r\n        compatEC2ItemStyle(seriesOpt);\r\n        removeEC3NormalStatus(seriesOpt);\r\n        compatTextStyle(seriesOpt, 'label');\r\n        compatTextStyle(seriesOpt, 'upperLabel');\r\n        compatTextStyle(seriesOpt, 'edgeLabel');\r\n        if (seriesOpt.emphasis) {\r\n            compatTextStyle(seriesOpt.emphasis, 'label');\r\n            compatTextStyle(seriesOpt.emphasis, 'upperLabel');\r\n            compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\r\n        }\r\n        var markPoint = seriesOpt.markPoint;\r\n        if (markPoint) {\r\n            compatEC2ItemStyle(markPoint);\r\n            compatEC3CommonStyles(markPoint);\r\n        }\r\n        var markLine = seriesOpt.markLine;\r\n        if (markLine) {\r\n            compatEC2ItemStyle(markLine);\r\n            compatEC3CommonStyles(markLine);\r\n        }\r\n        var markArea = seriesOpt.markArea;\r\n        if (markArea) {\r\n            compatEC3CommonStyles(markArea);\r\n        }\r\n        var data = seriesOpt.data;\r\n        if (seriesOpt.type === 'graph') {\r\n            data = data || seriesOpt.nodes;\r\n            var edgeData = seriesOpt.links || seriesOpt.edges;\r\n            if (edgeData && !isTypedArray(edgeData)) {\r\n                for (var i = 0; i < edgeData.length; i++) {\r\n                    compatEC3CommonStyles(edgeData[i]);\r\n                }\r\n            }\r\n            each(seriesOpt.categories, function (opt) {\r\n                removeEC3NormalStatus(opt);\r\n            });\r\n        }\r\n        if (data && !isTypedArray(data)) {\r\n            for (var i = 0; i < data.length; i++) {\r\n                compatEC3CommonStyles(data[i]);\r\n            }\r\n        }\r\n        markPoint = seriesOpt.markPoint;\r\n        if (markPoint && markPoint.data) {\r\n            var mpData = markPoint.data;\r\n            for (var i = 0; i < mpData.length; i++) {\r\n                compatEC3CommonStyles(mpData[i]);\r\n            }\r\n        }\r\n        markLine = seriesOpt.markLine;\r\n        if (markLine && markLine.data) {\r\n            var mlData = markLine.data;\r\n            for (var i = 0; i < mlData.length; i++) {\r\n                if (isArray(mlData[i])) {\r\n                    compatEC3CommonStyles(mlData[i][0]);\r\n                    compatEC3CommonStyles(mlData[i][1]);\r\n                }\r\n                else {\r\n                    compatEC3CommonStyles(mlData[i]);\r\n                }\r\n            }\r\n        }\r\n        if (seriesOpt.type === 'gauge') {\r\n            compatTextStyle(seriesOpt, 'axisLabel');\r\n            compatTextStyle(seriesOpt, 'title');\r\n            compatTextStyle(seriesOpt, 'detail');\r\n        }\r\n        else if (seriesOpt.type === 'treemap') {\r\n            convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\r\n            each(seriesOpt.levels, function (opt) {\r\n                removeEC3NormalStatus(opt);\r\n            });\r\n        }\r\n        else if (seriesOpt.type === 'tree') {\r\n            removeEC3NormalStatus(seriesOpt.leaves);\r\n        }\r\n    }\r\n    function toArr(o) {\r\n        return isArray(o) ? o : o ? [o] : [];\r\n    }\r\n    function toObj(o) {\r\n        return (isArray(o) ? o[0] : o) || {};\r\n    }\r\n    function compatStyle (option, isTheme) {\r\n        each$2(toArr(option.series), function (seriesOpt) {\r\n            isObject$1(seriesOpt) && processSeries(seriesOpt);\r\n        });\r\n        var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\r\n        isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\r\n        each$2(axes, function (axisName) {\r\n            each$2(toArr(option[axisName]), function (axisOpt) {\r\n                if (axisOpt) {\r\n                    compatTextStyle(axisOpt, 'axisLabel');\r\n                    compatTextStyle(axisOpt.axisPointer, 'label');\r\n                }\r\n            });\r\n        });\r\n        each$2(toArr(option.parallel), function (parallelOpt) {\r\n            var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\r\n            compatTextStyle(parallelAxisDefault, 'axisLabel');\r\n            compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\r\n        });\r\n        each$2(toArr(option.calendar), function (calendarOpt) {\r\n            convertNormalEmphasis(calendarOpt, 'itemStyle');\r\n            compatTextStyle(calendarOpt, 'dayLabel');\r\n            compatTextStyle(calendarOpt, 'monthLabel');\r\n            compatTextStyle(calendarOpt, 'yearLabel');\r\n        });\r\n        each$2(toArr(option.radar), function (radarOpt) {\r\n            compatTextStyle(radarOpt, 'name');\r\n            if (radarOpt.name && radarOpt.axisName == null) {\r\n                radarOpt.axisName = radarOpt.name;\r\n                delete radarOpt.name;\r\n                if (__DEV__) {\r\n                    deprecateLog('name property in radar component has been changed to axisName');\r\n                }\r\n            }\r\n            if (radarOpt.nameGap != null && radarOpt.axisNameGap == null) {\r\n                radarOpt.axisNameGap = radarOpt.nameGap;\r\n                delete radarOpt.nameGap;\r\n                if (__DEV__) {\r\n                    deprecateLog('nameGap property in radar component has been changed to axisNameGap');\r\n                }\r\n            }\r\n        });\r\n        each$2(toArr(option.geo), function (geoOpt) {\r\n            if (isObject$1(geoOpt)) {\r\n                compatEC3CommonStyles(geoOpt);\r\n                each$2(toArr(geoOpt.regions), function (regionObj) {\r\n                    compatEC3CommonStyles(regionObj);\r\n                });\r\n            }\r\n        });\r\n        each$2(toArr(option.timeline), function (timelineOpt) {\r\n            compatEC3CommonStyles(timelineOpt);\r\n            convertNormalEmphasis(timelineOpt, 'label');\r\n            convertNormalEmphasis(timelineOpt, 'itemStyle');\r\n            convertNormalEmphasis(timelineOpt, 'controlStyle', true);\r\n            var data = timelineOpt.data;\r\n            isArray(data) && each(data, function (item) {\r\n                if (isObject(item)) {\r\n                    convertNormalEmphasis(item, 'label');\r\n                    convertNormalEmphasis(item, 'itemStyle');\r\n                }\r\n            });\r\n        });\r\n        each$2(toArr(option.toolbox), function (toolboxOpt) {\r\n            convertNormalEmphasis(toolboxOpt, 'iconStyle');\r\n            each$2(toolboxOpt.feature, function (featureOpt) {\r\n                convertNormalEmphasis(featureOpt, 'iconStyle');\r\n            });\r\n        });\r\n        compatTextStyle(toObj(option.axisPointer), 'label');\r\n        compatTextStyle(toObj(option.tooltip).axisPointer, 'label');\r\n    }\n\n    function get(opt, path) {\r\n        var pathArr = path.split(',');\r\n        var obj = opt;\r\n        for (var i = 0; i < pathArr.length; i++) {\r\n            obj = obj && obj[pathArr[i]];\r\n            if (obj == null) {\r\n                break;\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    function set$1(opt, path, val, overwrite) {\r\n        var pathArr = path.split(',');\r\n        var obj = opt;\r\n        var key;\r\n        var i = 0;\r\n        for (; i < pathArr.length - 1; i++) {\r\n            key = pathArr[i];\r\n            if (obj[key] == null) {\r\n                obj[key] = {};\r\n            }\r\n            obj = obj[key];\r\n        }\r\n        if (overwrite || obj[pathArr[i]] == null) {\r\n            obj[pathArr[i]] = val;\r\n        }\r\n    }\r\n    function compatLayoutProperties(option) {\r\n        option && each(LAYOUT_PROPERTIES, function (prop) {\r\n            if (prop[0] in option && !(prop[1] in option)) {\r\n                option[prop[1]] = option[prop[0]];\r\n            }\r\n        });\r\n    }\r\n    var LAYOUT_PROPERTIES = [\r\n        ['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']\r\n    ];\r\n    var COMPATITABLE_COMPONENTS = [\r\n        'grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'\r\n    ];\r\n    var BAR_ITEM_STYLE_MAP = [\r\n        ['borderRadius', 'barBorderRadius'],\r\n        ['borderColor', 'barBorderColor'],\r\n        ['borderWidth', 'barBorderWidth']\r\n    ];\r\n    function compatBarItemStyle(option) {\r\n        var itemStyle = option && option.itemStyle;\r\n        if (itemStyle) {\r\n            for (var i = 0; i < BAR_ITEM_STYLE_MAP.length; i++) {\r\n                var oldName = BAR_ITEM_STYLE_MAP[i][1];\r\n                var newName = BAR_ITEM_STYLE_MAP[i][0];\r\n                if (itemStyle[oldName] != null) {\r\n                    itemStyle[newName] = itemStyle[oldName];\r\n                    if (__DEV__) {\r\n                        deprecateReplaceLog(oldName, newName);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function compatPieLabel(option) {\r\n        if (!option) {\r\n            return;\r\n        }\r\n        if (option.alignTo === 'edge' && option.margin != null && option.edgeDistance == null) {\r\n            if (__DEV__) {\r\n                deprecateReplaceLog('label.margin', 'label.edgeDistance', 'pie');\r\n            }\r\n            option.edgeDistance = option.margin;\r\n        }\r\n    }\r\n    function compatSunburstState(option) {\r\n        if (!option) {\r\n            return;\r\n        }\r\n        if (option.downplay && !option.blur) {\r\n            option.blur = option.downplay;\r\n            if (__DEV__) {\r\n                deprecateReplaceLog('downplay', 'blur', 'sunburst');\r\n            }\r\n        }\r\n    }\r\n    function compatGraphFocus(option) {\r\n        if (!option) {\r\n            return;\r\n        }\r\n        if (option.focusNodeAdjacency != null) {\r\n            option.emphasis = option.emphasis || {};\r\n            if (option.emphasis.focus == null) {\r\n                if (__DEV__) {\r\n                    deprecateReplaceLog('focusNodeAdjacency', 'emphasis: { focus: \\'adjacency\\'}', 'graph/sankey');\r\n                }\r\n                option.emphasis.focus = 'adjacency';\r\n            }\r\n        }\r\n    }\r\n    function traverseTree(data, cb) {\r\n        if (data) {\r\n            for (var i = 0; i < data.length; i++) {\r\n                cb(data[i]);\r\n                data[i] && traverseTree(data[i].children, cb);\r\n            }\r\n        }\r\n    }\r\n    function backwardCompat (option, isTheme) {\r\n        compatStyle(option, isTheme);\r\n        option.series = normalizeToArray(option.series);\r\n        each(option.series, function (seriesOpt) {\r\n            if (!isObject(seriesOpt)) {\r\n                return;\r\n            }\r\n            var seriesType = seriesOpt.type;\r\n            if (seriesType === 'line') {\r\n                if (seriesOpt.clipOverflow != null) {\r\n                    seriesOpt.clip = seriesOpt.clipOverflow;\r\n                    if (__DEV__) {\r\n                        deprecateReplaceLog('clipOverflow', 'clip', 'line');\r\n                    }\r\n                }\r\n            }\r\n            else if (seriesType === 'pie' || seriesType === 'gauge') {\r\n                if (seriesOpt.clockWise != null) {\r\n                    seriesOpt.clockwise = seriesOpt.clockWise;\r\n                    if (__DEV__) {\r\n                        deprecateReplaceLog('clockWise', 'clockwise');\r\n                    }\r\n                }\r\n                compatPieLabel(seriesOpt.label);\r\n                var data = seriesOpt.data;\r\n                if (data && !isTypedArray(data)) {\r\n                    for (var i = 0; i < data.length; i++) {\r\n                        compatPieLabel(data[i]);\r\n                    }\r\n                }\r\n                if (seriesOpt.hoverOffset != null) {\r\n                    seriesOpt.emphasis = seriesOpt.emphasis || {};\r\n                    if (seriesOpt.emphasis.scaleSize = null) {\r\n                        if (__DEV__) {\r\n                            deprecateReplaceLog('hoverOffset', 'emphasis.scaleSize');\r\n                        }\r\n                        seriesOpt.emphasis.scaleSize = seriesOpt.hoverOffset;\r\n                    }\r\n                }\r\n            }\r\n            else if (seriesType === 'gauge') {\r\n                var pointerColor = get(seriesOpt, 'pointer.color');\r\n                pointerColor != null\r\n                    && set$1(seriesOpt, 'itemStyle.color', pointerColor);\r\n            }\r\n            else if (seriesType === 'bar') {\r\n                compatBarItemStyle(seriesOpt);\r\n                compatBarItemStyle(seriesOpt.backgroundStyle);\r\n                compatBarItemStyle(seriesOpt.emphasis);\r\n                var data = seriesOpt.data;\r\n                if (data && !isTypedArray(data)) {\r\n                    for (var i = 0; i < data.length; i++) {\r\n                        if (typeof data[i] === 'object') {\r\n                            compatBarItemStyle(data[i]);\r\n                            compatBarItemStyle(data[i] && data[i].emphasis);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (seriesType === 'sunburst') {\r\n                var highlightPolicy = seriesOpt.highlightPolicy;\r\n                if (highlightPolicy) {\r\n                    seriesOpt.emphasis = seriesOpt.emphasis || {};\r\n                    if (!seriesOpt.emphasis.focus) {\r\n                        seriesOpt.emphasis.focus = highlightPolicy;\r\n                        if (__DEV__) {\r\n                            deprecateReplaceLog('highlightPolicy', 'emphasis.focus', 'sunburst');\r\n                        }\r\n                    }\r\n                }\r\n                compatSunburstState(seriesOpt);\r\n                traverseTree(seriesOpt.data, compatSunburstState);\r\n            }\r\n            else if (seriesType === 'graph' || seriesType === 'sankey') {\r\n                compatGraphFocus(seriesOpt);\r\n            }\r\n            else if (seriesType === 'map') {\r\n                if (seriesOpt.mapType && !seriesOpt.map) {\r\n                    if (__DEV__) {\r\n                        deprecateReplaceLog('mapType', 'map', 'map');\r\n                    }\r\n                    seriesOpt.map = seriesOpt.mapType;\r\n                }\r\n                if (seriesOpt.mapLocation) {\r\n                    if (__DEV__) {\r\n                        deprecateLog('`mapLocation` is not used anymore.');\r\n                    }\r\n                    defaults(seriesOpt, seriesOpt.mapLocation);\r\n                }\r\n            }\r\n            if (seriesOpt.hoverAnimation != null) {\r\n                seriesOpt.emphasis = seriesOpt.emphasis || {};\r\n                if (seriesOpt.emphasis && seriesOpt.emphasis.scale == null) {\r\n                    if (__DEV__) {\r\n                        deprecateReplaceLog('hoverAnimation', 'emphasis.scale');\r\n                    }\r\n                    seriesOpt.emphasis.scale = seriesOpt.hoverAnimation;\r\n                }\r\n            }\r\n            compatLayoutProperties(seriesOpt);\r\n        });\r\n        if (option.dataRange) {\r\n            option.visualMap = option.dataRange;\r\n        }\r\n        each(COMPATITABLE_COMPONENTS, function (componentName) {\r\n            var options = option[componentName];\r\n            if (options) {\r\n                if (!isArray(options)) {\r\n                    options = [options];\r\n                }\r\n                each(options, function (option) {\r\n                    compatLayoutProperties(option);\r\n                });\r\n            }\r\n        });\r\n    }\n\n    function dataStack (ecModel) {\r\n        var stackInfoMap = createHashMap();\r\n        ecModel.eachSeries(function (seriesModel) {\r\n            var stack = seriesModel.get('stack');\r\n            if (stack) {\r\n                var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\r\n                var data = seriesModel.getData();\r\n                var stackInfo = {\r\n                    stackResultDimension: data.getCalculationInfo('stackResultDimension'),\r\n                    stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\r\n                    stackedDimension: data.getCalculationInfo('stackedDimension'),\r\n                    stackedByDimension: data.getCalculationInfo('stackedByDimension'),\r\n                    isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\r\n                    data: data,\r\n                    seriesModel: seriesModel\r\n                };\r\n                if (!stackInfo.stackedDimension\r\n                    || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\r\n                    return;\r\n                }\r\n                stackInfoList.length && data.setCalculationInfo('stackedOnSeries', stackInfoList[stackInfoList.length - 1].seriesModel);\r\n                stackInfoList.push(stackInfo);\r\n            }\r\n        });\r\n        stackInfoMap.each(calculateStack);\r\n    }\r\n    function calculateStack(stackInfoList) {\r\n        each(stackInfoList, function (targetStackInfo, idxInStack) {\r\n            var resultVal = [];\r\n            var resultNaN = [NaN, NaN];\r\n            var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\r\n            var targetData = targetStackInfo.data;\r\n            var isStackedByIndex = targetStackInfo.isStackedByIndex;\r\n            var newData = targetData.map(dims, function (v0, v1, dataIndex) {\r\n                var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex);\r\n                if (isNaN(sum)) {\r\n                    return resultNaN;\r\n                }\r\n                var byValue;\r\n                var stackedDataRawIndex;\r\n                if (isStackedByIndex) {\r\n                    stackedDataRawIndex = targetData.getRawIndex(dataIndex);\r\n                }\r\n                else {\r\n                    byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\r\n                }\r\n                var stackedOver = NaN;\r\n                for (var j = idxInStack - 1; j >= 0; j--) {\r\n                    var stackInfo = stackInfoList[j];\r\n                    if (!isStackedByIndex) {\r\n                        stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\r\n                    }\r\n                    if (stackedDataRawIndex >= 0) {\r\n                        var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex);\r\n                        if ((sum >= 0 && val > 0)\r\n                            || (sum <= 0 && val < 0)) {\r\n                            sum += val;\r\n                            stackedOver = val;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                resultVal[0] = sum;\r\n                resultVal[1] = stackedOver;\r\n                return resultVal;\r\n            });\r\n            targetData.hostModel.setData(newData);\r\n            targetStackInfo.data = newData;\r\n        });\r\n    }\n\n    var _a, _b, _c;\r\n    var providerMethods;\r\n    var mountMethods;\r\n    var DefaultDataProvider = (function () {\r\n        function DefaultDataProvider(sourceParam, dimSize) {\r\n            var source = !(sourceParam instanceof Source)\r\n                ? Source.seriesDataToSource(sourceParam)\r\n                : sourceParam;\r\n            this._source = source;\r\n            var data = this._data = source.data;\r\n            if (source.sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\r\n                if (__DEV__) {\r\n                    if (dimSize == null) {\r\n                        throw new Error('Typed array data must specify dimension size');\r\n                    }\r\n                }\r\n                this._offset = 0;\r\n                this._dimSize = dimSize;\r\n                this._data = data;\r\n            }\r\n            mountMethods(this, data, source);\r\n        }\r\n        DefaultDataProvider.prototype.getSource = function () {\r\n            return this._source;\r\n        };\r\n        DefaultDataProvider.prototype.count = function () {\r\n            return 0;\r\n        };\r\n        DefaultDataProvider.prototype.getItem = function (idx, out) {\r\n            return;\r\n        };\r\n        DefaultDataProvider.prototype.appendData = function (newData) {\r\n        };\r\n        DefaultDataProvider.prototype.clean = function () {\r\n        };\r\n        DefaultDataProvider.protoInitialize = (function () {\r\n            var proto = DefaultDataProvider.prototype;\r\n            proto.pure = false;\r\n            proto.persistent = true;\r\n        })();\r\n        DefaultDataProvider.internalField = (function () {\r\n            var _a;\r\n            mountMethods = function (provider, data, source) {\r\n                var sourceFormat = source.sourceFormat;\r\n                var seriesLayoutBy = source.seriesLayoutBy;\r\n                var startIndex = source.startIndex;\r\n                var dimsDef = source.dimensionsDefine;\r\n                var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];\r\n                if (__DEV__) {\r\n                    assert(methods, 'Invalide sourceFormat: ' + sourceFormat);\r\n                }\r\n                extend(provider, methods);\r\n                if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\r\n                    provider.getItem = getItemForTypedArray;\r\n                    provider.count = countForTypedArray;\r\n                }\r\n                else {\r\n                    var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);\r\n                    provider.getItem = bind(rawItemGetter, null, data, startIndex, dimsDef);\r\n                    var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);\r\n                    provider.count = bind(rawCounter, null, data, startIndex, dimsDef);\r\n                }\r\n            };\r\n            var getItemForTypedArray = function (idx, out) {\r\n                idx = idx - this._offset;\r\n                out = out || [];\r\n                var offset = this._dimSize * idx;\r\n                for (var i = 0; i < this._dimSize; i++) {\r\n                    out[i] = this._data[offset + i];\r\n                }\r\n                return out;\r\n            };\r\n            var countForTypedArray = function () {\r\n                return this._data ? (this._data.length / this._dimSize) : 0;\r\n            };\r\n            providerMethods = (_a = {},\r\n                _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = {\r\n                    pure: true,\r\n                    appendData: appendDataSimply\r\n                },\r\n                _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = {\r\n                    pure: true,\r\n                    appendData: function () {\r\n                        throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\r\n                    }\r\n                },\r\n                _a[SOURCE_FORMAT_OBJECT_ROWS] = {\r\n                    pure: true,\r\n                    appendData: appendDataSimply\r\n                },\r\n                _a[SOURCE_FORMAT_KEYED_COLUMNS] = {\r\n                    pure: true,\r\n                    appendData: function (newData) {\r\n                        var data = this._data;\r\n                        each(newData, function (newCol, key) {\r\n                            var oldCol = data[key] || (data[key] = []);\r\n                            for (var i = 0; i < (newCol || []).length; i++) {\r\n                                oldCol.push(newCol[i]);\r\n                            }\r\n                        });\r\n                    }\r\n                },\r\n                _a[SOURCE_FORMAT_ORIGINAL] = {\r\n                    appendData: appendDataSimply\r\n                },\r\n                _a[SOURCE_FORMAT_TYPED_ARRAY] = {\r\n                    persistent: false,\r\n                    pure: true,\r\n                    appendData: function (newData) {\r\n                        if (__DEV__) {\r\n                            assert(isTypedArray(newData), 'Added data must be TypedArray if data in initialization is TypedArray');\r\n                        }\r\n                        this._data = newData;\r\n                    },\r\n                    clean: function () {\r\n                        this._offset += this.count();\r\n                        this._data = null;\r\n                    }\r\n                },\r\n                _a);\r\n            function appendDataSimply(newData) {\r\n                for (var i = 0; i < newData.length; i++) {\r\n                    this._data.push(newData[i]);\r\n                }\r\n            }\r\n        })();\r\n        return DefaultDataProvider;\r\n    }());\r\n    var getItemSimply = function (rawData, startIndex, dimsDef, idx) {\r\n        return rawData[idx];\r\n    };\r\n    var rawSourceItemGetterMap = (_a = {},\r\n        _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef, idx) {\r\n            return rawData[idx + startIndex];\r\n        },\r\n        _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef, idx) {\r\n            idx += startIndex;\r\n            var item = [];\r\n            var data = rawData;\r\n            for (var i = 0; i < data.length; i++) {\r\n                var row = data[i];\r\n                item.push(row ? row[idx] : null);\r\n            }\r\n            return item;\r\n        },\r\n        _a[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply,\r\n        _a[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef, idx) {\r\n            var item = [];\r\n            for (var i = 0; i < dimsDef.length; i++) {\r\n                var col = rawData[dimsDef[i].name];\r\n                item.push(col ? col[idx] : null);\r\n            }\r\n            return item;\r\n        },\r\n        _a[SOURCE_FORMAT_ORIGINAL] = getItemSimply,\r\n        _a);\r\n    function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {\r\n        var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\r\n        if (__DEV__) {\r\n            assert(method, 'Do not suppport get item on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\r\n        }\r\n        return method;\r\n    }\r\n    var countSimply = function (rawData, startIndex, dimsDef) {\r\n        return rawData.length;\r\n    };\r\n    var rawSourceDataCounterMap = (_b = {},\r\n        _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef) {\r\n            return Math.max(0, rawData.length - startIndex);\r\n        },\r\n        _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef) {\r\n            var row = rawData[0];\r\n            return row ? Math.max(0, row.length - startIndex) : 0;\r\n        },\r\n        _b[SOURCE_FORMAT_OBJECT_ROWS] = countSimply,\r\n        _b[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef) {\r\n            var dimName = dimsDef[0].name;\r\n            var col = rawData[dimName];\r\n            return col ? col.length : 0;\r\n        },\r\n        _b[SOURCE_FORMAT_ORIGINAL] = countSimply,\r\n        _b);\r\n    function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {\r\n        var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\r\n        if (__DEV__) {\r\n            assert(method, 'Do not suppport count on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\r\n        }\r\n        return method;\r\n    }\r\n    var getRawValueSimply = function (dataItem, dimIndex, dimName) {\r\n        return dimIndex != null ? dataItem[dimIndex] : dataItem;\r\n    };\r\n    var rawSourceValueGetterMap = (_c = {},\r\n        _c[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply,\r\n        _c[SOURCE_FORMAT_OBJECT_ROWS] = function (dataItem, dimIndex, dimName) {\r\n            return dimIndex != null ? dataItem[dimName] : dataItem;\r\n        },\r\n        _c[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply,\r\n        _c[SOURCE_FORMAT_ORIGINAL] = function (dataItem, dimIndex, dimName) {\r\n            var value = getDataItemValue(dataItem);\r\n            return (dimIndex == null || !(value instanceof Array))\r\n                ? value\r\n                : value[dimIndex];\r\n        },\r\n        _c[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply,\r\n        _c);\r\n    function getRawSourceValueGetter(sourceFormat) {\r\n        var method = rawSourceValueGetterMap[sourceFormat];\r\n        if (__DEV__) {\r\n            assert(method, 'Do not suppport get value on \"' + sourceFormat + '\".');\r\n        }\r\n        return method;\r\n    }\r\n    function getMethodMapKey(sourceFormat, seriesLayoutBy) {\r\n        return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS\r\n            ? sourceFormat + '_' + seriesLayoutBy\r\n            : sourceFormat;\r\n    }\r\n    function retrieveRawValue(data, dataIndex, dim) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n        var dataItem = data.getRawDataItem(dataIndex);\r\n        if (dataItem == null) {\r\n            return;\r\n        }\r\n        var sourceFormat = data.getProvider().getSource().sourceFormat;\r\n        var dimName;\r\n        var dimIndex;\r\n        var dimInfo = data.getDimensionInfo(dim);\r\n        if (dimInfo) {\r\n            dimName = dimInfo.name;\r\n            dimIndex = dimInfo.index;\r\n        }\r\n        return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, dimName);\r\n    }\n\n    var DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g;\r\n    var DataFormatMixin = (function () {\r\n        function DataFormatMixin() {\r\n        }\r\n        DataFormatMixin.prototype.getDataParams = function (dataIndex, dataType) {\r\n            var data = this.getData(dataType);\r\n            var rawValue = this.getRawValue(dataIndex, dataType);\r\n            var rawDataIndex = data.getRawIndex(dataIndex);\r\n            var name = data.getName(dataIndex);\r\n            var itemOpt = data.getRawDataItem(dataIndex);\r\n            var style = data.getItemVisual(dataIndex, 'style');\r\n            var color = style && style[data.getItemVisual(dataIndex, 'drawType') || 'fill'];\r\n            var borderColor = style && style.stroke;\r\n            var mainType = this.mainType;\r\n            var isSeries = mainType === 'series';\r\n            var userOutput = data.userOutput;\r\n            return {\r\n                componentType: mainType,\r\n                componentSubType: this.subType,\r\n                componentIndex: this.componentIndex,\r\n                seriesType: isSeries ? this.subType : null,\r\n                seriesIndex: this.seriesIndex,\r\n                seriesId: isSeries ? this.id : null,\r\n                seriesName: isSeries ? this.name : null,\r\n                name: name,\r\n                dataIndex: rawDataIndex,\r\n                data: itemOpt,\r\n                dataType: dataType,\r\n                value: rawValue,\r\n                color: color,\r\n                borderColor: borderColor,\r\n                dimensionNames: userOutput ? userOutput.dimensionNames : null,\r\n                encode: userOutput ? userOutput.encode : null,\r\n                $vars: ['seriesName', 'name', 'value']\r\n            };\r\n        };\r\n        DataFormatMixin.prototype.getFormattedLabel = function (dataIndex, status, dataType, labelDimIndex, formatter, extendParams) {\r\n            status = status || 'normal';\r\n            var data = this.getData(dataType);\r\n            var params = this.getDataParams(dataIndex, dataType);\r\n            if (extendParams) {\r\n                extend(params, extendParams);\r\n            }\r\n            if (labelDimIndex != null && (params.value instanceof Array)) {\r\n                params.value = params.value[labelDimIndex];\r\n            }\r\n            if (!formatter) {\r\n                var itemModel = data.getItemModel(dataIndex);\r\n                formatter = itemModel.get(status === 'normal'\r\n                    ? ['label', 'formatter']\r\n                    : [status, 'label', 'formatter']);\r\n            }\r\n            if (typeof formatter === 'function') {\r\n                params.status = status;\r\n                params.dimensionIndex = labelDimIndex;\r\n                return formatter(params);\r\n            }\r\n            else if (typeof formatter === 'string') {\r\n                var str = formatTpl(formatter, params);\r\n                return str.replace(DIMENSION_LABEL_REG, function (origin, dim) {\r\n                    var len = dim.length;\r\n                    if (dim.charAt(0) === '[' && dim.charAt(len - 1) === ']') {\r\n                        dim = +dim.slice(1, len - 1);\r\n                    }\r\n                    return retrieveRawValue(data, dataIndex, dim);\r\n                });\r\n            }\r\n        };\r\n        DataFormatMixin.prototype.getRawValue = function (idx, dataType) {\r\n            return retrieveRawValue(this.getData(dataType), idx);\r\n        };\r\n        DataFormatMixin.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType, renderMode, order) {\r\n            return;\r\n        };\r\n        return DataFormatMixin;\r\n    }());\n\n    function createTask(define) {\r\n        return new Task(define);\r\n    }\r\n    var Task = (function () {\r\n        function Task(define) {\r\n            define = define || {};\r\n            this._reset = define.reset;\r\n            this._plan = define.plan;\r\n            this._count = define.count;\r\n            this._onDirty = define.onDirty;\r\n            this._dirty = true;\r\n        }\r\n        Task.prototype.perform = function (performArgs) {\r\n            var upTask = this._upstream;\r\n            var skip = performArgs && performArgs.skip;\r\n            if (this._dirty && upTask) {\r\n                var context = this.context;\r\n                context.data = context.outputData = upTask.context.outputData;\r\n            }\r\n            if (this.__pipeline) {\r\n                this.__pipeline.currentTask = this;\r\n            }\r\n            var planResult;\r\n            if (this._plan && !skip) {\r\n                planResult = this._plan(this.context);\r\n            }\r\n            var lastModBy = normalizeModBy(this._modBy);\r\n            var lastModDataCount = this._modDataCount || 0;\r\n            var modBy = normalizeModBy(performArgs && performArgs.modBy);\r\n            var modDataCount = performArgs && performArgs.modDataCount || 0;\r\n            if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\r\n                planResult = 'reset';\r\n            }\r\n            function normalizeModBy(val) {\r\n                !(val >= 1) && (val = 1);\r\n                return val;\r\n            }\r\n            var forceFirstProgress;\r\n            if (this._dirty || planResult === 'reset') {\r\n                this._dirty = false;\r\n                forceFirstProgress = this._doReset(skip);\r\n            }\r\n            this._modBy = modBy;\r\n            this._modDataCount = modDataCount;\r\n            var step = performArgs && performArgs.step;\r\n            if (upTask) {\r\n                if (__DEV__) {\r\n                    assert(upTask._outputDueEnd != null);\r\n                }\r\n                this._dueEnd = upTask._outputDueEnd;\r\n            }\r\n            else {\r\n                if (__DEV__) {\r\n                    assert(!this._progress || this._count);\r\n                }\r\n                this._dueEnd = this._count ? this._count(this.context) : Infinity;\r\n            }\r\n            if (this._progress) {\r\n                var start = this._dueIndex;\r\n                var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\r\n                if (!skip && (forceFirstProgress || start < end)) {\r\n                    var progress = this._progress;\r\n                    if (isArray(progress)) {\r\n                        for (var i = 0; i < progress.length; i++) {\r\n                            this._doProgress(progress[i], start, end, modBy, modDataCount);\r\n                        }\r\n                    }\r\n                    else {\r\n                        this._doProgress(progress, start, end, modBy, modDataCount);\r\n                    }\r\n                }\r\n                this._dueIndex = end;\r\n                var outputDueEnd = this._settedOutputEnd != null\r\n                    ? this._settedOutputEnd : end;\r\n                if (__DEV__) {\r\n                    assert(outputDueEnd >= this._outputDueEnd);\r\n                }\r\n                this._outputDueEnd = outputDueEnd;\r\n            }\r\n            else {\r\n                this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null\r\n                    ? this._settedOutputEnd : this._dueEnd;\r\n            }\r\n            return this.unfinished();\r\n        };\r\n        Task.prototype.dirty = function () {\r\n            this._dirty = true;\r\n            this._onDirty && this._onDirty(this.context);\r\n        };\r\n        Task.prototype._doProgress = function (progress, start, end, modBy, modDataCount) {\r\n            iterator.reset(start, end, modBy, modDataCount);\r\n            this._callingProgress = progress;\r\n            this._callingProgress({\r\n                start: start, end: end, count: end - start, next: iterator.next\r\n            }, this.context);\r\n        };\r\n        Task.prototype._doReset = function (skip) {\r\n            this._dueIndex = this._outputDueEnd = this._dueEnd = 0;\r\n            this._settedOutputEnd = null;\r\n            var progress;\r\n            var forceFirstProgress;\r\n            if (!skip && this._reset) {\r\n                progress = this._reset(this.context);\r\n                if (progress && progress.progress) {\r\n                    forceFirstProgress = progress.forceFirstProgress;\r\n                    progress = progress.progress;\r\n                }\r\n                if (isArray(progress) && !progress.length) {\r\n                    progress = null;\r\n                }\r\n            }\r\n            this._progress = progress;\r\n            this._modBy = this._modDataCount = null;\r\n            var downstream = this._downstream;\r\n            downstream && downstream.dirty();\r\n            return forceFirstProgress;\r\n        };\r\n        Task.prototype.unfinished = function () {\r\n            return this._progress && this._dueIndex < this._dueEnd;\r\n        };\r\n        Task.prototype.pipe = function (downTask) {\r\n            if (__DEV__) {\r\n                assert(downTask && !downTask._disposed && downTask !== this);\r\n            }\r\n            if (this._downstream !== downTask || this._dirty) {\r\n                this._downstream = downTask;\r\n                downTask._upstream = this;\r\n                downTask.dirty();\r\n            }\r\n        };\r\n        Task.prototype.dispose = function () {\r\n            if (this._disposed) {\r\n                return;\r\n            }\r\n            this._upstream && (this._upstream._downstream = null);\r\n            this._downstream && (this._downstream._upstream = null);\r\n            this._dirty = false;\r\n            this._disposed = true;\r\n        };\r\n        Task.prototype.getUpstream = function () {\r\n            return this._upstream;\r\n        };\r\n        Task.prototype.getDownstream = function () {\r\n            return this._downstream;\r\n        };\r\n        Task.prototype.setOutputEnd = function (end) {\r\n            this._outputDueEnd = this._settedOutputEnd = end;\r\n        };\r\n        return Task;\r\n    }());\r\n    var iterator = (function () {\r\n        var end;\r\n        var current;\r\n        var modBy;\r\n        var modDataCount;\r\n        var winCount;\r\n        var it = {\r\n            reset: function (s, e, sStep, sCount) {\r\n                current = s;\r\n                end = e;\r\n                modBy = sStep;\r\n                modDataCount = sCount;\r\n                winCount = Math.ceil(modDataCount / modBy);\r\n                it.next = (modBy > 1 && modDataCount > 0) ? modNext : sequentialNext;\r\n            }\r\n        };\r\n        return it;\r\n        function sequentialNext() {\r\n            return current < end ? current++ : null;\r\n        }\r\n        function modNext() {\r\n            var dataIndex = (current % winCount) * modBy + Math.ceil(current / winCount);\r\n            var result = current >= end\r\n                ? null\r\n                : dataIndex < modDataCount\r\n                    ? dataIndex\r\n                    : current;\r\n            current++;\r\n            return result;\r\n        }\r\n    })();\n\n    function parseDataValue(value, opt) {\r\n        var dimType = opt && opt.type;\r\n        if (dimType === 'ordinal') {\r\n            var ordinalMeta = opt && opt.ordinalMeta;\r\n            return ordinalMeta\r\n                ? ordinalMeta.parseAndCollect(value)\r\n                : value;\r\n        }\r\n        if (dimType === 'time'\r\n            && typeof value !== 'number'\r\n            && value != null\r\n            && value !== '-') {\r\n            value = +parseDate(value);\r\n        }\r\n        return (value == null || value === '')\r\n            ? NaN\r\n            : +value;\r\n    }\r\n    var valueParserMap = createHashMap({\r\n        'number': function (val) {\r\n            return parseFloat(val);\r\n        },\r\n        'time': function (val) {\r\n            return +parseDate(val);\r\n        },\r\n        'trim': function (val) {\r\n            return typeof val === 'string' ? trim(val) : val;\r\n        }\r\n    });\n\n    var ExternalSource = (function () {\r\n        function ExternalSource() {\r\n        }\r\n        ExternalSource.prototype.getDimensionInfo = function (dim) {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.getDimensionInfoAll = function () {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.getRawDataItem = function (dataIndex) {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.getRawHeaderItem = function (dataIndex) {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.count = function () {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.retrieveItemValue = function (rawItem, dimIndex) {\r\n            return;\r\n        };\r\n        ExternalSource.prototype.convertDataValue = function (rawVal, dimInfo) {\r\n            return parseDataValue(rawVal, dimInfo);\r\n        };\r\n        return ExternalSource;\r\n    }());\r\n    function createExternalSource(data, sourceFormat, dimsDef, sourceHeaderCount) {\r\n        var extSource = new ExternalSource();\r\n        extSource.data = data;\r\n        extSource.sourceFormat = sourceFormat;\r\n        extSource.sourceHeaderCount = sourceHeaderCount;\r\n        var dimensions = [];\r\n        var dimsByName = {};\r\n        each(dimsDef, function (dimDef, idx) {\r\n            var name = dimDef.name;\r\n            var dimDefExt = {\r\n                index: idx,\r\n                name: name,\r\n                displayName: dimDef.displayName\r\n            };\r\n            dimensions.push(dimDefExt);\r\n            if (name != null) {\r\n                assert(!hasOwn(dimsByName, name), 'dimension name \"' + name + '\" duplicated.');\r\n                dimsByName[name] = dimDefExt;\r\n            }\r\n        });\r\n        var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\r\n        extSource.getRawDataItem = bind(rawItemGetter, null, data, sourceHeaderCount, dimensions);\r\n        extSource.getRawHeaderItem = function (dataIndex) {\r\n            if (dataIndex < sourceHeaderCount) {\r\n                return rawItemGetter(data, 0, dimensions, dataIndex);\r\n            }\r\n        };\r\n        var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\r\n        extSource.count = bind(rawCounter, null, data, sourceHeaderCount, dimensions);\r\n        var rawValueGetter = getRawSourceValueGetter(sourceFormat);\r\n        extSource.retrieveItemValue = function (rawItem, dimIndex) {\r\n            if (rawItem == null) {\r\n                return;\r\n            }\r\n            var dimDef = dimensions[dimIndex];\r\n            if (dimDef) {\r\n                return rawValueGetter(rawItem, dimIndex, dimDef.name);\r\n            }\r\n        };\r\n        extSource.getDimensionInfo = bind(getDimensionInfo, null, dimensions, dimsByName);\r\n        extSource.getDimensionInfoAll = bind(getDimensionInfoAll, null, dimensions);\r\n        return extSource;\r\n    }\r\n    function getDimensionInfo(dimensions, dimsByName, dim) {\r\n        if (dim == null) {\r\n            return;\r\n        }\r\n        if (typeof dim === 'number'\r\n            || (!isNaN(dim) && !hasOwn(dimsByName, dim))) {\r\n            return dimensions[dim];\r\n        }\r\n        else if (hasOwn(dimsByName, dim)) {\r\n            return dimsByName[dim];\r\n        }\r\n    }\r\n    function getDimensionInfoAll(dimensions) {\r\n        return dimensions;\r\n    }\r\n    var externalTransformMap = createHashMap();\r\n    function registerExternalTransform(externalTransform) {\r\n        externalTransform = clone(externalTransform);\r\n        var type = externalTransform.type;\r\n        assert(type, 'Must have a `type` when `registerTransform`.');\r\n        var typeParsed = type.split(':');\r\n        assert(typeParsed.length === 2, 'Name must include namespace like \"ns:regression\".');\r\n        if (typeParsed[0] === 'echarts') {\r\n            type = typeParsed[1];\r\n        }\r\n        externalTransformMap.set(type, externalTransform);\r\n    }\r\n    function applyDataTransform(rawTransOption, sourceList, infoForPrint) {\r\n        var pipedTransOption = normalizeToArray(rawTransOption);\r\n        for (var i = 0, len = pipedTransOption.length; i < len; i++) {\r\n            var transOption = pipedTransOption[i];\r\n            var isFinal = i === len - 1;\r\n            sourceList = applySingleDataTransform(transOption, sourceList, infoForPrint, isFinal);\r\n            if (!isFinal) {\r\n                sourceList.length = Math.max(sourceList.length, 1);\r\n            }\r\n        }\r\n        return sourceList;\r\n    }\r\n    function applySingleDataTransform(rawTransOption, upSourceList, infoForPrint, isFinal) {\r\n        assert(upSourceList.length, 'Must have at least one upstream dataset.');\r\n        var transOption = rawTransOption;\r\n        var transType = transOption.type;\r\n        var externalTransform = externalTransformMap.get(transType);\r\n        assert(externalTransform, 'Can not find transform on type \"' + transType + '\".');\r\n        var sourceList = map(upSourceList, function (source) {\r\n            return createExternalSource(source.data, source.sourceFormat, source.dimensionsDefine, source.startIndex);\r\n        });\r\n        var resultList = normalizeToArray(externalTransform.transform({\r\n            source: sourceList[0],\r\n            sourceList: sourceList,\r\n            config: clone(transOption.config)\r\n        }));\r\n        if (__DEV__) {\r\n            if (isFinal && transOption.print) {\r\n                var printStrArr = map(resultList, function (extSource) {\r\n                    return [\r\n                        '--- datasetIndex: ' + infoForPrint.datasetIndex + '---',\r\n                        '- transform result data:',\r\n                        makePrintable(extSource.data),\r\n                        '- transform result dimensions:',\r\n                        makePrintable(extSource.dimensions),\r\n                        '- transform result sourceHeader: ' + extSource.sourceHeader,\r\n                        '------'\r\n                    ].join('\\n');\r\n                }).join('\\n');\r\n                consoleLog(printStrArr);\r\n            }\r\n        }\r\n        return map(resultList, function (result) {\r\n            assert(isObject(result), 'A transform should not return some empty results.');\r\n            assert(isObject(result.data) || isArrayLike(result.data), 'Result data should be object or array in data transform.');\r\n            var resultMetaRawOption = inheritSourceMetaRawOption({\r\n                parent: upSourceList[0].metaRawOption,\r\n                thisNew: {\r\n                    seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\r\n                    sourceHeader: result.sourceHeader,\r\n                    dimensions: result.dimensions\r\n                }\r\n            });\r\n            return createSource(result.data, resultMetaRawOption, null, null);\r\n        });\r\n    }\n\n    var SourceManager = (function () {\r\n        function SourceManager(sourceHost) {\r\n            this._sourceList = [];\r\n            this._upstreamSignList = [];\r\n            this._versionSignBase = 0;\r\n            this._sourceHost = sourceHost;\r\n        }\r\n        SourceManager.prototype.dirty = function () {\r\n            this._setLocalSource([], []);\r\n        };\r\n        SourceManager.prototype._setLocalSource = function (sourceList, upstreamSignList) {\r\n            this._sourceList = sourceList;\r\n            this._upstreamSignList = upstreamSignList;\r\n            this._versionSignBase++;\r\n            if (this._versionSignBase > 9e10) {\r\n                this._versionSignBase = 0;\r\n            }\r\n        };\r\n        SourceManager.prototype._getVersionSign = function () {\r\n            return this._sourceHost.uid + '_' + this._versionSignBase;\r\n        };\r\n        SourceManager.prototype.prepareSource = function () {\r\n            if (this._isDirty()) {\r\n                this._createSource();\r\n            }\r\n        };\r\n        SourceManager.prototype._createSource = function () {\r\n            this._setLocalSource([], []);\r\n            var sourceHost = this._sourceHost;\r\n            var upSourceMgrList = this._getUpstreamSourceManagers();\r\n            var hasUpstream = !!upSourceMgrList.length;\r\n            var resultSourceList;\r\n            var upstreamSignList;\r\n            if (isSeries(sourceHost)) {\r\n                var seriesModel = sourceHost;\r\n                var data = void 0;\r\n                var sourceFormat = void 0;\r\n                var upSource = void 0;\r\n                if (hasUpstream) {\r\n                    var upSourceMgr = upSourceMgrList[0];\r\n                    upSourceMgr.prepareSource();\r\n                    upSource = upSourceMgr.getSource();\r\n                    data = upSource.data;\r\n                    sourceFormat = upSource.sourceFormat;\r\n                    upstreamSignList = [upSourceMgr._getVersionSign()];\r\n                }\r\n                else {\r\n                    data = seriesModel.get('data', true);\r\n                    sourceFormat = isTypedArray(data)\r\n                        ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\r\n                    upstreamSignList = [];\r\n                }\r\n                var thisMetaRawOption = inheritSourceMetaRawOption({\r\n                    parent: upSource ? upSource.metaRawOption : null,\r\n                    thisNew: this._createSourceMetaRawOption()\r\n                });\r\n                resultSourceList = [createSource(data, thisMetaRawOption, sourceFormat, seriesModel.get('encode', true))];\r\n            }\r\n            else {\r\n                var datasetModel = sourceHost;\r\n                if (hasUpstream) {\r\n                    var result = this._applyTransform(upSourceMgrList);\r\n                    resultSourceList = result.sourceList;\r\n                    upstreamSignList = result.upstreamSignList;\r\n                }\r\n                else {\r\n                    var sourceData = datasetModel.get('source', true);\r\n                    resultSourceList = [createSource(sourceData, this._createSourceMetaRawOption(), null, null)];\r\n                    upstreamSignList = [];\r\n                }\r\n            }\r\n            if (__DEV__) {\r\n                assert(resultSourceList && upstreamSignList);\r\n            }\r\n            this._setLocalSource(resultSourceList, upstreamSignList);\r\n        };\r\n        SourceManager.prototype._applyTransform = function (upMgrList) {\r\n            var datasetModel = this._sourceHost;\r\n            var transformOption = datasetModel.get('transform', true);\r\n            var fromTransformResult = datasetModel.get('fromTransformResult', true);\r\n            var sourceList;\r\n            var upstreamSignList;\r\n            if (transformOption) {\r\n                var upSourceList_1 = [];\r\n                upstreamSignList = [];\r\n                each(upMgrList, function (upMgr) {\r\n                    upMgr.prepareSource();\r\n                    upSourceList_1.push(upMgr.getSource());\r\n                    upstreamSignList.push(upMgr._getVersionSign());\r\n                });\r\n                sourceList = applyDataTransform(transformOption, upSourceList_1, { datasetIndex: datasetModel.componentIndex });\r\n            }\r\n            else if (fromTransformResult != null) {\r\n                if (upMgrList.length !== 1) {\r\n                    var errMsg = '';\r\n                    if (__DEV__) {\r\n                        errMsg = 'When using `fromTransformResult`, there should be only one upstream dataset';\r\n                    }\r\n                    doThrow(errMsg);\r\n                }\r\n                var upMgr = upMgrList[0];\r\n                upMgr.prepareSource();\r\n                var upSource = upMgr.getSource(fromTransformResult);\r\n                upstreamSignList = [upMgr._getVersionSign()];\r\n                sourceList = [cloneSourceShallow(upSource)];\r\n            }\r\n            return { sourceList: sourceList, upstreamSignList: upstreamSignList };\r\n        };\r\n        SourceManager.prototype._isDirty = function () {\r\n            var sourceList = this._sourceList;\r\n            if (!sourceList.length) {\r\n                return true;\r\n            }\r\n            var upSourceMgrList = this._getUpstreamSourceManagers();\r\n            for (var i = 0; i < upSourceMgrList.length; i++) {\r\n                var upSrcMgr = upSourceMgrList[i];\r\n                if (upSrcMgr._isDirty()\r\n                    || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {\r\n                    return true;\r\n                }\r\n            }\r\n        };\r\n        SourceManager.prototype.getSource = function (sourceIndex) {\r\n            return this._sourceList[sourceIndex || 0];\r\n        };\r\n        SourceManager.prototype._getUpstreamSourceManagers = function () {\r\n            var sourceHost = this._sourceHost;\r\n            if (isSeries(sourceHost)) {\r\n                var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);\r\n                return !datasetModel ? [] : [datasetModel.getSourceManager()];\r\n            }\r\n            else {\r\n                return map(queryDatasetUpstreamDatasetModels(sourceHost), function (datasetModel) { return datasetModel.getSourceManager(); });\r\n            }\r\n        };\r\n        SourceManager.prototype._createSourceMetaRawOption = function () {\r\n            var sourceHost = this._sourceHost;\r\n            var seriesLayoutBy;\r\n            var sourceHeader;\r\n            var dimensions;\r\n            if (isSeries(sourceHost)) {\r\n                seriesLayoutBy = sourceHost.get('seriesLayoutBy', true);\r\n                sourceHeader = sourceHost.get('sourceHeader', true);\r\n                dimensions = sourceHost.get('dimensions', true);\r\n            }\r\n            else if (!this._getUpstreamSourceManagers().length) {\r\n                var model = sourceHost;\r\n                seriesLayoutBy = model.get('seriesLayoutBy', true);\r\n                sourceHeader = model.get('sourceHeader', true);\r\n                dimensions = model.get('dimensions', true);\r\n            }\r\n            return { seriesLayoutBy: seriesLayoutBy, sourceHeader: sourceHeader, dimensions: dimensions };\r\n        };\r\n        return SourceManager;\r\n    }());\r\n    function disableTransformOptionMerge(datasetModel) {\r\n        var transformOption = datasetModel.option.transform;\r\n        transformOption && setAsPrimitive(datasetModel.option.transform);\r\n    }\r\n    function isSeries(sourceHost) {\r\n        return sourceHost.mainType === 'series';\r\n    }\r\n    function doThrow(errMsg) {\r\n        throw new Error(errMsg);\r\n    }\n\n    var inner$2 = makeInner();\r\n    function getSelectionKey(data, dataIndex) {\r\n        return data.getName(dataIndex) || data.getId(dataIndex);\r\n    }\r\n    var SeriesModel = (function (_super) {\r\n        __extends(SeriesModel, _super);\r\n        function SeriesModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this._selectedDataIndicesMap = {};\r\n            return _this;\r\n        }\r\n        SeriesModel.prototype.init = function (option, parentModel, ecModel) {\r\n            this.seriesIndex = this.componentIndex;\r\n            this.dataTask = createTask({\r\n                count: dataTaskCount,\r\n                reset: dataTaskReset\r\n            });\r\n            this.dataTask.context = { model: this };\r\n            this.mergeDefaultAndTheme(option, ecModel);\r\n            var sourceManager = inner$2(this).sourceManager = new SourceManager(this);\r\n            sourceManager.prepareSource();\r\n            var data = this.getInitialData(option, ecModel);\r\n            wrapData(data, this);\r\n            this.dataTask.context.data = data;\r\n            if (__DEV__) {\r\n                assert(data, 'getInitialData returned invalid data.');\r\n            }\r\n            inner$2(this).dataBeforeProcessed = data;\r\n            autoSeriesName(this);\r\n            this._initSelectedMapFromData(data);\r\n        };\r\n        SeriesModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\r\n            var layoutMode = fetchLayoutMode(this);\r\n            var inputPositionParams = layoutMode\r\n                ? getLayoutParams(option) : {};\r\n            var themeSubType = this.subType;\r\n            if (ComponentModel.hasClass(themeSubType)) {\r\n                themeSubType += 'Series';\r\n            }\r\n            merge(option, ecModel.getTheme().get(this.subType));\r\n            merge(option, this.getDefaultOption());\r\n            defaultEmphasis(option, 'label', ['show']);\r\n            this.fillDataTextStyle(option.data);\r\n            if (layoutMode) {\r\n                mergeLayoutParam(option, inputPositionParams, layoutMode);\r\n            }\r\n        };\r\n        SeriesModel.prototype.mergeOption = function (newSeriesOption, ecModel) {\r\n            newSeriesOption = merge(this.option, newSeriesOption, true);\r\n            this.fillDataTextStyle(newSeriesOption.data);\r\n            var layoutMode = fetchLayoutMode(this);\r\n            if (layoutMode) {\r\n                mergeLayoutParam(this.option, newSeriesOption, layoutMode);\r\n            }\r\n            var sourceManager = inner$2(this).sourceManager;\r\n            sourceManager.dirty();\r\n            sourceManager.prepareSource();\r\n            var data = this.getInitialData(newSeriesOption, ecModel);\r\n            wrapData(data, this);\r\n            this.dataTask.dirty();\r\n            this.dataTask.context.data = data;\r\n            inner$2(this).dataBeforeProcessed = data;\r\n            autoSeriesName(this);\r\n            this._initSelectedMapFromData(data);\r\n        };\r\n        SeriesModel.prototype.fillDataTextStyle = function (data) {\r\n            if (data && !isTypedArray(data)) {\r\n                var props = ['show'];\r\n                for (var i = 0; i < data.length; i++) {\r\n                    if (data[i] && data[i].label) {\r\n                        defaultEmphasis(data[i], 'label', props);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        SeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n            return;\r\n        };\r\n        SeriesModel.prototype.appendData = function (params) {\r\n            var data = this.getRawData();\r\n            data.appendData(params.data);\r\n        };\r\n        SeriesModel.prototype.getData = function (dataType) {\r\n            var task = getCurrentTask(this);\r\n            if (task) {\r\n                var data = task.context.data;\r\n                return (dataType == null ? data : data.getLinkedData(dataType));\r\n            }\r\n            else {\r\n                return inner$2(this).data;\r\n            }\r\n        };\r\n        SeriesModel.prototype.getAllData = function () {\r\n            var mainData = this.getData();\r\n            return (mainData && mainData.getLinkedDataAll)\r\n                ? mainData.getLinkedDataAll()\r\n                : [{ data: mainData }];\r\n        };\r\n        SeriesModel.prototype.setData = function (data) {\r\n            var task = getCurrentTask(this);\r\n            if (task) {\r\n                var context = task.context;\r\n                context.outputData = data;\r\n                if (task !== this.dataTask) {\r\n                    context.data = data;\r\n                }\r\n            }\r\n            inner$2(this).data = data;\r\n        };\r\n        SeriesModel.prototype.getSource = function () {\r\n            return inner$2(this).sourceManager.getSource();\r\n        };\r\n        SeriesModel.prototype.getRawData = function () {\r\n            return inner$2(this).dataBeforeProcessed;\r\n        };\r\n        SeriesModel.prototype.getBaseAxis = function () {\r\n            var coordSys = this.coordinateSystem;\r\n            return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\r\n        };\r\n        SeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType, renderMode) {\r\n            var series = this;\r\n            renderMode = renderMode || 'html';\r\n            var newLine = renderMode === 'html' ? '' : '\\n';\r\n            var isRichText = renderMode === 'richText';\r\n            var markers = {};\r\n            var markerId = 0;\r\n            function formatArrayValue(value) {\r\n                var vertially = reduce(value, function (vertially, val, idx) {\r\n                    var dimItem = data.getDimensionInfo(idx);\r\n                    return vertially |= (dimItem && dimItem.tooltip !== false && dimItem.displayName != null);\r\n                }, 0);\r\n                var result = [];\r\n                tooltipDims.length\r\n                    ? each(tooltipDims, function (dim) {\r\n                        setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\r\n                    })\r\n                    : each(value, setEachItem);\r\n                function setEachItem(val, dim) {\r\n                    var dimInfo = data.getDimensionInfo(dim);\r\n                    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\r\n                        return;\r\n                    }\r\n                    var dimType = dimInfo.type;\r\n                    var markName = 'sub' + series.seriesIndex + 'at' + markerId;\r\n                    var dimHead = getTooltipMarker({\r\n                        color: colorStr,\r\n                        type: 'subItem',\r\n                        renderMode: renderMode,\r\n                        markerId: markName\r\n                    });\r\n                    var dimHeadStr = typeof dimHead === 'string' ? dimHead : dimHead.content;\r\n                    var valStr = (vertially\r\n                        ? '<span style=\"font-size:12px;color:#6e7079;\">'\r\n                            + dimHeadStr + encodeHTML(dimInfo.displayName || '-')\r\n                            + '</span>'\r\n                        : '')\r\n                        + '<span style=\"float:right;margin-left:20px;color:#000;font-weight:900\">'\r\n                        + encodeHTML(dimType === 'ordinal'\r\n                            ? val + ''\r\n                            : dimType === 'time'\r\n                                ? (multipleSeries ? '' : formatTime('yyyy/MM/dd hh:mm:ss', val))\r\n                                : addCommas(val))\r\n                        + '</span>';\r\n                    valStr && result.push(\"<div style=\\\"margin: 11px 0 0;line-height:1;\\\">\" + valStr + \"</div>\");\r\n                    if (isRichText) {\r\n                        markers[markName] = colorStr;\r\n                        ++markerId;\r\n                    }\r\n                }\r\n                var newLine = vertially ? (isRichText ? '\\n' : '') : '';\r\n                var content = newLine + result.join(newLine || '');\r\n                return {\r\n                    renderMode: renderMode,\r\n                    content: content,\r\n                    style: markers\r\n                };\r\n            }\r\n            function formatSingleValue(val) {\r\n                return {\r\n                    renderMode: renderMode,\r\n                    content: encodeHTML(addCommas(val)),\r\n                    style: markers\r\n                };\r\n            }\r\n            var data = this.getData();\r\n            var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\r\n            var tooltipDimLen = tooltipDims.length;\r\n            var value = this.getRawValue(dataIndex);\r\n            var isValueArr = isArray(value);\r\n            var style = data.getItemVisual(dataIndex, 'style');\r\n            var color = style[this.visualDrawType];\r\n            var colorStr;\r\n            if (isString(color)) {\r\n                colorStr = color;\r\n            }\r\n            else if (color && color.colorStops) {\r\n                colorStr = (color.colorStops[0] || {}).color;\r\n            }\r\n            colorStr = colorStr || 'transparent';\r\n            var formattedValue = (tooltipDimLen > 1 || (isValueArr && !tooltipDimLen))\r\n                ? formatArrayValue(value)\r\n                : tooltipDimLen\r\n                    ? formatSingleValue(retrieveRawValue(data, dataIndex, tooltipDims[0]))\r\n                    : formatSingleValue(isValueArr ? value[0] : value);\r\n            var content = isRichText\r\n                ? formattedValue.content\r\n                : (tooltipDimLen > 1 || (isValueArr && !tooltipDimLen))\r\n                    ? '<div>'\r\n                        + formattedValue.content + '</div>'\r\n                    : '<span style=\"float:right;margin-left:20px;color:#464646;font-weight:bold\">'\r\n                        + formattedValue.content + '</span>';\r\n            var markName = series.seriesIndex + 'at' + markerId;\r\n            var colorEl = getTooltipMarker({\r\n                color: colorStr,\r\n                type: 'item',\r\n                renderMode: renderMode,\r\n                markerId: markName\r\n            });\r\n            markers[markName] = colorStr;\r\n            ++markerId;\r\n            var name = data.getName(dataIndex);\r\n            var seriesName = this.name;\r\n            if (!isNameSpecified(this)) {\r\n                seriesName = '';\r\n            }\r\n            seriesName = seriesName\r\n                ? encodeHTML(seriesName) + (!multipleSeries ? newLine : ' ')\r\n                : '';\r\n            colorStr = isString(colorEl) ? colorEl : colorEl.content;\r\n            var html = '';\r\n            if (!isRichText) {\r\n                seriesName = seriesName\r\n                    ? !multipleSeries\r\n                        ? \"<div style=\\\"font-size:12px;color:#6e7079;line-height:1;margin-top:-4px;\\\">\" + seriesName + \"</div>\"\r\n                        : \"<span style=\\\"font-size:12px;color:#6e7079;line-height:1\\\">\" + seriesName + \"</span>\"\r\n                    : '';\r\n                html = !multipleSeries\r\n                    ? seriesName + (\"<div style=\\\"margin: \" + (seriesName ? 8 : 0) + \"px 0 0;line-height:1\\\">\")\r\n                        + colorStr\r\n                        + (name\r\n                            ? \"<span style=\\\"font-size:12px;color:#6e7079;\\\">\" + encodeHTML(name) + \"</span>\" + content\r\n                            : content) + '</div>'\r\n                    : \"<div style=\\\"margin: 11px 0 0;line-height:1;\\\">\" + colorStr + seriesName + content + \"</div>\";\r\n            }\r\n            else {\r\n                html = !multipleSeries\r\n                    ? seriesName + (seriesName ? '\\n' : '') + ''\r\n                        + colorStr\r\n                        + (name\r\n                            ? encodeHTML(name) + \": \" + content\r\n                            : content) + ''\r\n                    : \"\" + colorStr + seriesName + \": \" + content;\r\n            }\r\n            return { html: html, markers: markers };\r\n        };\r\n        SeriesModel.prototype.isAnimationEnabled = function () {\r\n            if (env.node) {\r\n                return false;\r\n            }\r\n            var animationEnabled = this.getShallow('animation');\r\n            if (animationEnabled) {\r\n                if (this.getData().count() > this.getShallow('animationThreshold')) {\r\n                    animationEnabled = false;\r\n                }\r\n            }\r\n            return !!animationEnabled;\r\n        };\r\n        SeriesModel.prototype.restoreData = function () {\r\n            this.dataTask.dirty();\r\n        };\r\n        SeriesModel.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\r\n            var ecModel = this.ecModel;\r\n            var color = ColorPaletteMixin.prototype.getColorFromPalette.call(this, name, scope, requestColorNum);\r\n            if (!color) {\r\n                color = ecModel.getColorFromPalette(name, scope, requestColorNum);\r\n            }\r\n            return color;\r\n        };\r\n        SeriesModel.prototype.coordDimToDataDim = function (coordDim) {\r\n            return this.getRawData().mapDimensionsAll(coordDim);\r\n        };\r\n        SeriesModel.prototype.getProgressive = function () {\r\n            return this.get('progressive');\r\n        };\r\n        SeriesModel.prototype.getProgressiveThreshold = function () {\r\n            return this.get('progressiveThreshold');\r\n        };\r\n        SeriesModel.prototype.select = function (innerDataIndices, dataType) {\r\n            this._innerSelect(this.getData(dataType), innerDataIndices);\r\n        };\r\n        SeriesModel.prototype.unselect = function (innerDataIndices, dataType) {\r\n            var selectedMap = this.option.selectedMap;\r\n            if (!selectedMap) {\r\n                return;\r\n            }\r\n            var data = this.getData(dataType);\r\n            for (var i = 0; i < innerDataIndices.length; i++) {\r\n                var dataIndex = innerDataIndices[i];\r\n                var nameOrId = getSelectionKey(data, dataIndex);\r\n                selectedMap[nameOrId] = false;\r\n                this._selectedDataIndicesMap[nameOrId] = -1;\r\n            }\r\n        };\r\n        SeriesModel.prototype.toggleSelect = function (innerDataIndices, dataType) {\r\n            var tmpArr = [];\r\n            for (var i = 0; i < innerDataIndices.length; i++) {\r\n                tmpArr[0] = innerDataIndices[i];\r\n                this.isSelected(innerDataIndices[i], dataType)\r\n                    ? this.unselect(tmpArr, dataType)\r\n                    : this.select(tmpArr, dataType);\r\n            }\r\n        };\r\n        SeriesModel.prototype.getSelectedDataIndices = function () {\r\n            var selectedDataIndicesMap = this._selectedDataIndicesMap;\r\n            var nameOrIds = keys(selectedDataIndicesMap);\r\n            var dataIndices = [];\r\n            for (var i = 0; i < nameOrIds.length; i++) {\r\n                var dataIndex = selectedDataIndicesMap[nameOrIds[i]];\r\n                if (dataIndex >= 0) {\r\n                    dataIndices.push(dataIndex);\r\n                }\r\n            }\r\n            return dataIndices;\r\n        };\r\n        SeriesModel.prototype.isSelected = function (dataIndex, dataType) {\r\n            var selectedMap = this.option.selectedMap;\r\n            if (!selectedMap) {\r\n                return false;\r\n            }\r\n            var data = this.getData(dataType);\r\n            var nameOrId = getSelectionKey(data, dataIndex);\r\n            return selectedMap[nameOrId] || false;\r\n        };\r\n        SeriesModel.prototype._innerSelect = function (data, innerDataIndices) {\r\n            var _a, _b;\r\n            var selectedMode = this.option.selectedMode;\r\n            var len = innerDataIndices.length;\r\n            if (!selectedMode || !len) {\r\n                return;\r\n            }\r\n            if (selectedMode === 'multiple') {\r\n                var selectedMap = this.option.selectedMap || (this.option.selectedMap = {});\r\n                for (var i = 0; i < len; i++) {\r\n                    var dataIndex = innerDataIndices[i];\r\n                    var nameOrId = getSelectionKey(data, dataIndex);\r\n                    selectedMap[nameOrId] = true;\r\n                    this._selectedDataIndicesMap[nameOrId] = data.getRawIndex(dataIndex);\r\n                }\r\n            }\r\n            else if (selectedMode === 'single' || selectedMode === true) {\r\n                var lastDataIndex = innerDataIndices[len - 1];\r\n                var nameOrId = getSelectionKey(data, lastDataIndex);\r\n                this.option.selectedMap = (_a = {},\r\n                    _a[nameOrId] = true,\r\n                    _a);\r\n                this._selectedDataIndicesMap = (_b = {},\r\n                    _b[nameOrId] = data.getRawIndex(lastDataIndex),\r\n                    _b);\r\n            }\r\n        };\r\n        SeriesModel.prototype._initSelectedMapFromData = function (data) {\r\n            if (this.option.selectedMap) {\r\n                return;\r\n            }\r\n            var dataIndices = [];\r\n            if (data.hasItemOption) {\r\n                data.each(function (idx) {\r\n                    var rawItem = data.getRawDataItem(idx);\r\n                    if (typeof rawItem === 'object'\r\n                        && rawItem.selected) {\r\n                        dataIndices.push(idx);\r\n                    }\r\n                });\r\n            }\r\n            if (dataIndices.length > 0) {\r\n                this._innerSelect(data, dataIndices);\r\n            }\r\n        };\r\n        SeriesModel.registerClass = function (clz) {\r\n            return ComponentModel.registerClass(clz);\r\n        };\r\n        SeriesModel.protoInitialize = (function () {\r\n            var proto = SeriesModel.prototype;\r\n            proto.type = 'series.__base__';\r\n            proto.seriesIndex = 0;\r\n            proto.useColorPaletteOnData = false;\r\n            proto.ignoreStyleOnData = false;\r\n            proto.hasSymbolVisual = false;\r\n            proto.defaultSymbol = 'circle';\r\n            proto.visualStyleAccessPath = 'itemStyle';\r\n            proto.visualDrawType = 'fill';\r\n        })();\r\n        return SeriesModel;\r\n    }(ComponentModel));\r\n    mixin(SeriesModel, DataFormatMixin);\r\n    mixin(SeriesModel, ColorPaletteMixin);\r\n    mountExtend(SeriesModel, ComponentModel);\r\n    function autoSeriesName(seriesModel) {\r\n        var name = seriesModel.name;\r\n        if (!isNameSpecified(seriesModel)) {\r\n            seriesModel.name = getSeriesAutoName(seriesModel) || name;\r\n        }\r\n    }\r\n    function getSeriesAutoName(seriesModel) {\r\n        var data = seriesModel.getRawData();\r\n        var dataDims = data.mapDimensionsAll('seriesName');\r\n        var nameArr = [];\r\n        each(dataDims, function (dataDim) {\r\n            var dimInfo = data.getDimensionInfo(dataDim);\r\n            dimInfo.displayName && nameArr.push(dimInfo.displayName);\r\n        });\r\n        return nameArr.join(' ');\r\n    }\r\n    function dataTaskCount(context) {\r\n        return context.model.getRawData().count();\r\n    }\r\n    function dataTaskReset(context) {\r\n        var seriesModel = context.model;\r\n        seriesModel.setData(seriesModel.getRawData().cloneShallow());\r\n        return dataTaskProgress;\r\n    }\r\n    function dataTaskProgress(param, context) {\r\n        if (context.outputData && param.end > context.outputData.count()) {\r\n            context.model.getRawData().cloneShallow(context.outputData);\r\n        }\r\n    }\r\n    function wrapData(data, seriesModel) {\r\n        each(data.CHANGABLE_METHODS, function (methodName) {\r\n            data.wrapMethod(methodName, curry(onDataSelfChange, seriesModel));\r\n        });\r\n    }\r\n    function onDataSelfChange(seriesModel) {\r\n        var task = getCurrentTask(seriesModel);\r\n        if (task) {\r\n            task.setOutputEnd(this.count());\r\n        }\r\n    }\r\n    function getCurrentTask(seriesModel) {\r\n        var scheduler = (seriesModel.ecModel || {}).scheduler;\r\n        var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\r\n        if (pipeline) {\r\n            var task = pipeline.currentTask;\r\n            if (task) {\r\n                var agentStubMap = task.agentStubMap;\r\n                if (agentStubMap) {\r\n                    task = agentStubMap.get(seriesModel.uid);\r\n                }\r\n            }\r\n            return task;\r\n        }\r\n    }\n\n    var ComponentView = (function () {\r\n        function ComponentView() {\r\n            this.group = new Group();\r\n            this.uid = getUID('viewComponent');\r\n        }\r\n        ComponentView.prototype.init = function (ecModel, api) { };\r\n        ComponentView.prototype.render = function (model, ecModel, api, payload) { };\r\n        ComponentView.prototype.dispose = function (ecModel, api) { };\r\n        ComponentView.prototype.updateView = function (model, ecModel, api, payload) {\r\n        };\r\n        ComponentView.prototype.updateLayout = function (model, ecModel, api, payload) {\r\n        };\r\n        ComponentView.prototype.updateVisual = function (model, ecModel, api, payload) {\r\n        };\r\n        ComponentView.prototype.blurSeries = function (seriesModels, ecModel) {\r\n        };\r\n        return ComponentView;\r\n    }());\r\n    enableClassExtend(ComponentView);\r\n    enableClassManagement(ComponentView, { registerWhenExtend: true });\n\n    function createRenderPlanner () {\r\n        var inner = makeInner();\r\n        return function (seriesModel) {\r\n            var fields = inner(seriesModel);\r\n            var pipelineContext = seriesModel.pipelineContext;\r\n            var originalLarge = fields.large;\r\n            var originalProgressive = fields.progressiveRender;\r\n            var large = fields.large = pipelineContext && pipelineContext.large;\r\n            var progressive = fields.progressiveRender = pipelineContext && pipelineContext.progressiveRender;\r\n            return (!!((originalLarge ^ large) || (originalProgressive ^ progressive)) && 'reset');\r\n        };\r\n    }\n\n    var inner$3 = makeInner();\r\n    var renderPlanner = createRenderPlanner();\r\n    var ChartView = (function () {\r\n        function ChartView() {\r\n            this.group = new Group();\r\n            this.uid = getUID('viewChart');\r\n            this.renderTask = createTask({\r\n                plan: renderTaskPlan,\r\n                reset: renderTaskReset\r\n            });\r\n            this.renderTask.context = { view: this };\r\n        }\r\n        ChartView.prototype.init = function (ecModel, api) { };\r\n        ChartView.prototype.render = function (seriesModel, ecModel, api, payload) { };\r\n        ChartView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\r\n            toggleHighlight(seriesModel.getData(), payload, 'emphasis');\r\n        };\r\n        ChartView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\r\n            toggleHighlight(seriesModel.getData(), payload, 'normal');\r\n        };\r\n        ChartView.prototype.remove = function (ecModel, api) {\r\n            this.group.removeAll();\r\n        };\r\n        ChartView.prototype.dispose = function (ecModel, api) { };\r\n        ChartView.prototype.updateView = function (seriesModel, ecModel, api, payload) {\r\n            this.render(seriesModel, ecModel, api, payload);\r\n        };\r\n        ChartView.prototype.updateLayout = function (seriesModel, ecModel, api, payload) {\r\n            this.render(seriesModel, ecModel, api, payload);\r\n        };\r\n        ChartView.prototype.updateVisual = function (seriesModel, ecModel, api, payload) {\r\n            this.render(seriesModel, ecModel, api, payload);\r\n        };\r\n        ChartView.markUpdateMethod = function (payload, methodName) {\r\n            inner$3(payload).updateMethod = methodName;\r\n        };\r\n        ChartView.protoInitialize = (function () {\r\n            var proto = ChartView.prototype;\r\n            proto.type = 'chart';\r\n        })();\r\n        return ChartView;\r\n    }());\r\n    function elSetState(el, state, highlightDigit) {\r\n        if (el) {\r\n            (state === 'emphasis' ? enterEmphasis : leaveEmphasis)(el, highlightDigit);\r\n        }\r\n    }\r\n    function toggleHighlight(data, payload, state) {\r\n        var dataIndex = queryDataIndex(data, payload);\r\n        var highlightDigit = (payload && payload.highlightKey != null)\r\n            ? getHighlightDigit(payload.highlightKey)\r\n            : null;\r\n        if (dataIndex != null) {\r\n            each(normalizeToArray(dataIndex), function (dataIdx) {\r\n                elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\r\n            });\r\n        }\r\n        else {\r\n            data.eachItemGraphicEl(function (el) {\r\n                elSetState(el, state, highlightDigit);\r\n            });\r\n        }\r\n    }\r\n    enableClassExtend(ChartView, ['dispose']);\r\n    enableClassManagement(ChartView, { registerWhenExtend: true });\r\n    function renderTaskPlan(context) {\r\n        return renderPlanner(context.model);\r\n    }\r\n    function renderTaskReset(context) {\r\n        var seriesModel = context.model;\r\n        var ecModel = context.ecModel;\r\n        var api = context.api;\r\n        var payload = context.payload;\r\n        var progressiveRender = seriesModel.pipelineContext.progressiveRender;\r\n        var view = context.view;\r\n        var updateMethod = payload && inner$3(payload).updateMethod;\r\n        var methodName = progressiveRender\r\n            ? 'incrementalPrepareRender'\r\n            : (updateMethod && view[updateMethod])\r\n                ? updateMethod\r\n                : 'render';\r\n        if (methodName !== 'render') {\r\n            view[methodName](seriesModel, ecModel, api, payload);\r\n        }\r\n        return progressMethodMap[methodName];\r\n    }\r\n    var progressMethodMap = {\r\n        incrementalPrepareRender: {\r\n            progress: function (params, context) {\r\n                context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\r\n            }\r\n        },\r\n        render: {\r\n            forceFirstProgress: true,\r\n            progress: function (params, context) {\r\n                context.view.render(context.model, context.ecModel, context.api, context.payload);\r\n            }\r\n        }\r\n    };\n\n    var ORIGIN_METHOD = '\\0__throttleOriginMethod';\r\n    var RATE = '\\0__throttleRate';\r\n    var THROTTLE_TYPE = '\\0__throttleType';\r\n    function throttle(fn, delay, debounce) {\r\n        var currCall;\r\n        var lastCall = 0;\r\n        var lastExec = 0;\r\n        var timer = null;\r\n        var diff;\r\n        var scope;\r\n        var args;\r\n        var debounceNextCall;\r\n        delay = delay || 0;\r\n        function exec() {\r\n            lastExec = (new Date()).getTime();\r\n            timer = null;\r\n            fn.apply(scope, args || []);\r\n        }\r\n        var cb = function () {\r\n            var cbArgs = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                cbArgs[_i] = arguments[_i];\r\n            }\r\n            currCall = (new Date()).getTime();\r\n            scope = this;\r\n            args = cbArgs;\r\n            var thisDelay = debounceNextCall || delay;\r\n            var thisDebounce = debounceNextCall || debounce;\r\n            debounceNextCall = null;\r\n            diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\r\n            clearTimeout(timer);\r\n            if (thisDebounce) {\r\n                timer = setTimeout(exec, thisDelay);\r\n            }\r\n            else {\r\n                if (diff >= 0) {\r\n                    exec();\r\n                }\r\n                else {\r\n                    timer = setTimeout(exec, -diff);\r\n                }\r\n            }\r\n            lastCall = currCall;\r\n        };\r\n        cb.clear = function () {\r\n            if (timer) {\r\n                clearTimeout(timer);\r\n                timer = null;\r\n            }\r\n        };\r\n        cb.debounceNextCall = function (debounceDelay) {\r\n            debounceNextCall = debounceDelay;\r\n        };\r\n        return cb;\r\n    }\r\n    function createOrUpdate(obj, fnAttr, rate, throttleType) {\r\n        var fn = obj[fnAttr];\r\n        if (!fn) {\r\n            return;\r\n        }\r\n        var originFn = fn[ORIGIN_METHOD] || fn;\r\n        var lastThrottleType = fn[THROTTLE_TYPE];\r\n        var lastRate = fn[RATE];\r\n        if (lastRate !== rate || lastThrottleType !== throttleType) {\r\n            if (rate == null || !throttleType) {\r\n                return (obj[fnAttr] = originFn);\r\n            }\r\n            fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\r\n            fn[ORIGIN_METHOD] = originFn;\r\n            fn[THROTTLE_TYPE] = throttleType;\r\n            fn[RATE] = rate;\r\n        }\r\n        return fn;\r\n    }\r\n    function clear(obj, fnAttr) {\r\n        var fn = obj[fnAttr];\r\n        if (fn && fn[ORIGIN_METHOD]) {\r\n            obj[fnAttr] = fn[ORIGIN_METHOD];\r\n        }\r\n    }\n\n    var inner$4 = makeInner();\r\n    var defaultStyleMappers = {\r\n        itemStyle: makeStyleMapper(ITEM_STYLE_KEY_MAP, true),\r\n        lineStyle: makeStyleMapper(LINE_STYLE_KEY_MAP, true)\r\n    };\r\n    var defaultColorKey = {\r\n        lineStyle: 'stroke',\r\n        itemStyle: 'fill'\r\n    };\r\n    function getStyleMapper(seriesModel, stylePath) {\r\n        var styleMapper = seriesModel.visualStyleMapper\r\n            || defaultStyleMappers[stylePath];\r\n        if (!styleMapper) {\r\n            console.warn(\"Unkown style type '\" + stylePath + \"'.\");\r\n            return defaultStyleMappers.itemStyle;\r\n        }\r\n        return styleMapper;\r\n    }\r\n    function getDefaultColorKey(seriesModel, stylePath) {\r\n        var colorKey = seriesModel.visualDrawType\r\n            || defaultColorKey[stylePath];\r\n        if (!colorKey) {\r\n            console.warn(\"Unkown style type '\" + stylePath + \"'.\");\r\n            return 'fill';\r\n        }\r\n        return colorKey;\r\n    }\r\n    var seriesStyleTask = {\r\n        createOnAllSeries: true,\r\n        performRawSeries: true,\r\n        reset: function (seriesModel, ecModel) {\r\n            var data = seriesModel.getData();\r\n            var stylePath = seriesModel.visualStyleAccessPath\r\n                || 'itemStyle';\r\n            var styleModel = seriesModel.getModel(stylePath);\r\n            var getStyle = getStyleMapper(seriesModel, stylePath);\r\n            var globalStyle = getStyle(styleModel);\r\n            var colorKey = getDefaultColorKey(seriesModel, stylePath);\r\n            var color = globalStyle[colorKey];\r\n            var colorCallback = isFunction(color) ? color : null;\r\n            if (!globalStyle[colorKey] || colorCallback) {\r\n                globalStyle[colorKey] = seriesModel.getColorFromPalette(seriesModel.name, null, ecModel.getSeriesCount());\r\n                data.setVisual('colorFromPalette', true);\r\n            }\r\n            data.setVisual('style', globalStyle);\r\n            data.setVisual('drawType', colorKey);\r\n            if (!ecModel.isSeriesFiltered(seriesModel) && colorCallback) {\r\n                data.setVisual('colorFromPalette', false);\r\n                return {\r\n                    dataEach: function (data, idx) {\r\n                        var dataParams = seriesModel.getDataParams(idx);\r\n                        var itemStyle = extend({}, globalStyle);\r\n                        itemStyle[colorKey] = colorCallback(dataParams);\r\n                        data.setItemVisual(idx, 'style', itemStyle);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n    };\r\n    var sharedModel = new Model();\r\n    var dataStyleTask = {\r\n        createOnAllSeries: true,\r\n        performRawSeries: true,\r\n        reset: function (seriesModel, ecModel) {\r\n            if (seriesModel.ignoreStyleOnData || ecModel.isSeriesFiltered(seriesModel)) {\r\n                return;\r\n            }\r\n            var data = seriesModel.getData();\r\n            var stylePath = seriesModel.visualStyleAccessPath\r\n                || 'itemStyle';\r\n            var getStyle = getStyleMapper(seriesModel, stylePath);\r\n            var colorKey = data.getVisual('drawType');\r\n            return {\r\n                dataEach: data.hasItemOption ? function (data, idx) {\r\n                    var rawItem = data.getRawDataItem(idx);\r\n                    if (rawItem && rawItem[stylePath]) {\r\n                        sharedModel.option = rawItem[stylePath];\r\n                        var style = getStyle(sharedModel);\r\n                        var existsStyle = data.ensureUniqueItemVisual(idx, 'style');\r\n                        extend(existsStyle, style);\r\n                        if (colorKey in style) {\r\n                            data.setItemVisual(idx, 'colorFromPalette', false);\r\n                        }\r\n                    }\r\n                } : null\r\n            };\r\n        }\r\n    };\r\n    var dataColorPaletteTask = {\r\n        createOnAllSeries: true,\r\n        performRawSeries: true,\r\n        overallReset: function (ecModel) {\r\n            var paletteScopeGroupByType = createHashMap();\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                if (!seriesModel.useColorPaletteOnData) {\r\n                    return;\r\n                }\r\n                var colorScope = paletteScopeGroupByType.get(seriesModel.type);\r\n                if (!colorScope) {\r\n                    colorScope = {};\r\n                    paletteScopeGroupByType.set(seriesModel.type, colorScope);\r\n                }\r\n                inner$4(seriesModel).scope = colorScope;\r\n            });\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                if (!seriesModel.useColorPaletteOnData || ecModel.isSeriesFiltered(seriesModel)) {\r\n                    return;\r\n                }\r\n                var dataAll = seriesModel.getRawData();\r\n                var idxMap = {};\r\n                var data = seriesModel.getData();\r\n                var colorScope = inner$4(seriesModel).scope;\r\n                var stylePath = seriesModel.visualStyleAccessPath\r\n                    || 'itemStyle';\r\n                var colorKey = getDefaultColorKey(seriesModel, stylePath);\r\n                data.each(function (idx) {\r\n                    var rawIdx = data.getRawIndex(idx);\r\n                    idxMap[rawIdx] = idx;\r\n                });\r\n                dataAll.each(function (rawIdx) {\r\n                    var idx = idxMap[rawIdx];\r\n                    var fromPalette = data.getItemVisual(idx, 'colorFromPalette');\r\n                    if (fromPalette) {\r\n                        var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\r\n                        itemStyle[colorKey] = seriesModel.getColorFromPalette(dataAll.getName(rawIdx) || (rawIdx + ''), colorScope, dataAll.count());\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    };\n\n    function aria (dom, ecModel) {\r\n        var ariaModel = ecModel.getModel('aria');\r\n        if (!ariaModel.get('show')) {\r\n            return;\r\n        }\r\n        else if (ariaModel.get('description')) {\r\n            dom.setAttribute('aria-label', ariaModel.get('description'));\r\n            return;\r\n        }\r\n        var seriesCnt = 0;\r\n        ecModel.eachSeries(function (seriesModel, idx) {\r\n            ++seriesCnt;\r\n        }, this);\r\n        var maxDataCnt = ariaModel.get('data.maxCount') || 10;\r\n        var maxSeriesCnt = ariaModel.get('series.maxCount') || 10;\r\n        var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\r\n        var ariaLabel;\r\n        if (seriesCnt < 1) {\r\n            return;\r\n        }\r\n        else {\r\n            var title = getTitle();\r\n            if (title) {\r\n                ariaLabel = replace(getConfig('general.withTitle'), {\r\n                    title: title\r\n                });\r\n            }\r\n            else {\r\n                ariaLabel = getConfig('general.withoutTitle');\r\n            }\r\n            var seriesLabels_1 = [];\r\n            var prefix = seriesCnt > 1\r\n                ? 'series.multiple.prefix'\r\n                : 'series.single.prefix';\r\n            ariaLabel += replace(getConfig(prefix), { seriesCount: seriesCnt });\r\n            ecModel.eachSeries(function (seriesModel, idx) {\r\n                if (idx < displaySeriesCnt) {\r\n                    var seriesLabel = void 0;\r\n                    var seriesName = seriesModel.get('name');\r\n                    var seriesTpl = 'series.'\r\n                        + (seriesCnt > 1 ? 'multiple' : 'single') + '.';\r\n                    seriesLabel = getConfig(seriesName\r\n                        ? seriesTpl + 'withName'\r\n                        : seriesTpl + 'withoutName');\r\n                    seriesLabel = replace(seriesLabel, {\r\n                        seriesId: seriesModel.seriesIndex,\r\n                        seriesName: seriesModel.get('name'),\r\n                        seriesType: getSeriesTypeName(seriesModel.subType)\r\n                    });\r\n                    var data = seriesModel.getData();\r\n                    window.data = data;\r\n                    if (data.count() > maxDataCnt) {\r\n                        seriesLabel += replace(getConfig('data.partialData'), {\r\n                            displayCnt: maxDataCnt\r\n                        });\r\n                    }\r\n                    else {\r\n                        seriesLabel += getConfig('data.allData');\r\n                    }\r\n                    var dataLabels = [];\r\n                    for (var i = 0; i < data.count(); i++) {\r\n                        if (i < maxDataCnt) {\r\n                            var name_1 = data.getName(i);\r\n                            var value = retrieveRawValue(data, i);\r\n                            dataLabels.push(replace(name_1\r\n                                ? getConfig('data.withName')\r\n                                : getConfig('data.withoutName'), {\r\n                                name: name_1,\r\n                                value: value\r\n                            }));\r\n                        }\r\n                    }\r\n                    seriesLabel += dataLabels\r\n                        .join(getConfig('data.separator.middle'))\r\n                        + getConfig('data.separator.end');\r\n                    seriesLabels_1.push(seriesLabel);\r\n                }\r\n            });\r\n            ariaLabel += seriesLabels_1\r\n                .join(getConfig('series.multiple.separator.middle'))\r\n                + getConfig('series.multiple.separator.end');\r\n            dom.setAttribute('aria-label', ariaLabel);\r\n        }\r\n        function replace(str, keyValues) {\r\n            if (typeof str !== 'string') {\r\n                return str;\r\n            }\r\n            var result = str;\r\n            each(keyValues, function (value, key) {\r\n                result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\r\n            });\r\n            return result;\r\n        }\r\n        function getConfig(path) {\r\n            var userConfig = ariaModel.get(path);\r\n            if (userConfig == null) {\r\n                var pathArr = path.split('.');\r\n                var result = ecModel.getLocale('aria');\r\n                for (var i = 0; i < pathArr.length; ++i) {\r\n                    result = result[pathArr[i]];\r\n                }\r\n                return result;\r\n            }\r\n            else {\r\n                return userConfig;\r\n            }\r\n        }\r\n        function getTitle() {\r\n            var title = ecModel.getModel('title').option;\r\n            if (title && title.length) {\r\n                title = title[0];\r\n            }\r\n            return title && title.text;\r\n        }\r\n        function getSeriesTypeName(type) {\r\n            return ecModel.getLocale(['series', 'typeNames'])[type] || '';\r\n        }\r\n    }\n\n    var PI$4 = Math.PI;\r\n    function loadingDefault (api, opts) {\r\n        opts = opts || {};\r\n        defaults(opts, {\r\n            text: 'loading',\r\n            textColor: '#000',\r\n            fontSize: '12px',\r\n            maskColor: 'rgba(255, 255, 255, 0.8)',\r\n            showSpinner: true,\r\n            color: '#5470c6',\r\n            spinnerRadius: 10,\r\n            lineWidth: 5,\r\n            zlevel: 0\r\n        });\r\n        var group = new Group();\r\n        var mask = new Rect({\r\n            style: {\r\n                fill: opts.maskColor\r\n            },\r\n            zlevel: opts.zlevel,\r\n            z: 10000\r\n        });\r\n        group.add(mask);\r\n        var font = opts.fontSize + ' sans-serif';\r\n        var labelRect = new Rect({\r\n            style: {\r\n                fill: 'none'\r\n            },\r\n            textContent: new ZRText({\r\n                style: {\r\n                    text: opts.text,\r\n                    fill: opts.textColor,\r\n                    font: font\r\n                }\r\n            }),\r\n            textConfig: {\r\n                position: 'right',\r\n                distance: 10\r\n            },\r\n            zlevel: opts.zlevel,\r\n            z: 10001\r\n        });\r\n        group.add(labelRect);\r\n        var arc;\r\n        if (opts.showSpinner) {\r\n            arc = new Arc({\r\n                shape: {\r\n                    startAngle: -PI$4 / 2,\r\n                    endAngle: -PI$4 / 2 + 0.1,\r\n                    r: opts.spinnerRadius\r\n                },\r\n                style: {\r\n                    stroke: opts.color,\r\n                    lineCap: 'round',\r\n                    lineWidth: opts.lineWidth\r\n                },\r\n                zlevel: opts.zlevel,\r\n                z: 10001\r\n            });\r\n            arc.animateShape(true)\r\n                .when(1000, {\r\n                endAngle: PI$4 * 3 / 2\r\n            })\r\n                .start('circularInOut');\r\n            arc.animateShape(true)\r\n                .when(1000, {\r\n                startAngle: PI$4 * 3 / 2\r\n            })\r\n                .delay(300)\r\n                .start('circularInOut');\r\n            group.add(arc);\r\n        }\r\n        group.resize = function () {\r\n            var textWidth = getWidth(opts.text, font);\r\n            var r = opts.showSpinner ? opts.spinnerRadius : 0;\r\n            var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2\r\n                - (opts.showSpinner ? 0 : textWidth / 2);\r\n            var cy = api.getHeight() / 2;\r\n            opts.showSpinner && arc.setShape({\r\n                cx: cx,\r\n                cy: cy\r\n            });\r\n            labelRect.setShape({\r\n                x: cx - r,\r\n                y: cy - r,\r\n                width: r * 2,\r\n                height: r * 2\r\n            });\r\n            mask.setShape({\r\n                x: 0,\r\n                y: 0,\r\n                width: api.getWidth(),\r\n                height: api.getHeight()\r\n            });\r\n        };\r\n        group.resize();\r\n        return group;\r\n    }\n\n    var Scheduler = (function () {\r\n        function Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\r\n            this._stageTaskMap = createHashMap();\r\n            this.ecInstance = ecInstance;\r\n            this.api = api;\r\n            dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\r\n            visualHandlers = this._visualHandlers = visualHandlers.slice();\r\n            this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\r\n        }\r\n        Scheduler.prototype.restoreData = function (ecModel, payload) {\r\n            ecModel.restoreData(payload);\r\n            this._stageTaskMap.each(function (taskRecord) {\r\n                var overallTask = taskRecord.overallTask;\r\n                overallTask && overallTask.dirty();\r\n            });\r\n        };\r\n        Scheduler.prototype.getPerformArgs = function (task, isBlock) {\r\n            if (!task.__pipeline) {\r\n                return;\r\n            }\r\n            var pipeline = this._pipelineMap.get(task.__pipeline.id);\r\n            var pCtx = pipeline.context;\r\n            var incremental = !isBlock\r\n                && pipeline.progressiveEnabled\r\n                && (!pCtx || pCtx.progressiveRender)\r\n                && task.__idxInPipeline > pipeline.blockIndex;\r\n            var step = incremental ? pipeline.step : null;\r\n            var modDataCount = pCtx && pCtx.modDataCount;\r\n            var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\r\n            return { step: step, modBy: modBy, modDataCount: modDataCount };\r\n        };\r\n        Scheduler.prototype.getPipeline = function (pipelineId) {\r\n            return this._pipelineMap.get(pipelineId);\r\n        };\r\n        Scheduler.prototype.updateStreamModes = function (seriesModel, view) {\r\n            var pipeline = this._pipelineMap.get(seriesModel.uid);\r\n            var data = seriesModel.getData();\r\n            var dataLen = data.count();\r\n            var progressiveRender = pipeline.progressiveEnabled\r\n                && view.incrementalPrepareRender\r\n                && dataLen >= pipeline.threshold;\r\n            var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold');\r\n            var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\r\n            seriesModel.pipelineContext = pipeline.context = {\r\n                progressiveRender: progressiveRender,\r\n                modDataCount: modDataCount,\r\n                large: large\r\n            };\r\n        };\r\n        Scheduler.prototype.restorePipelines = function (ecModel) {\r\n            var scheduler = this;\r\n            var pipelineMap = scheduler._pipelineMap = createHashMap();\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                var progressive = seriesModel.getProgressive();\r\n                var pipelineId = seriesModel.uid;\r\n                pipelineMap.set(pipelineId, {\r\n                    id: pipelineId,\r\n                    head: null,\r\n                    tail: null,\r\n                    threshold: seriesModel.getProgressiveThreshold(),\r\n                    progressiveEnabled: progressive\r\n                        && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\r\n                    blockIndex: -1,\r\n                    step: Math.round(progressive || 700),\r\n                    count: 0\r\n                });\r\n                scheduler._pipe(seriesModel, seriesModel.dataTask);\r\n            });\r\n        };\r\n        Scheduler.prototype.prepareStageTasks = function () {\r\n            var stageTaskMap = this._stageTaskMap;\r\n            var ecModel = this.ecInstance.getModel();\r\n            var api = this.api;\r\n            each(this._allHandlers, function (handler) {\r\n                var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});\r\n                handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);\r\n                handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);\r\n            }, this);\r\n        };\r\n        Scheduler.prototype.prepareView = function (view, model, ecModel, api) {\r\n            var renderTask = view.renderTask;\r\n            var context = renderTask.context;\r\n            context.model = model;\r\n            context.ecModel = ecModel;\r\n            context.api = api;\r\n            renderTask.__block = !view.incrementalPrepareRender;\r\n            this._pipe(model, renderTask);\r\n        };\r\n        Scheduler.prototype.performDataProcessorTasks = function (ecModel, payload) {\r\n            this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, { block: true });\r\n        };\r\n        Scheduler.prototype.performVisualTasks = function (ecModel, payload, opt) {\r\n            this._performStageTasks(this._visualHandlers, ecModel, payload, opt);\r\n        };\r\n        Scheduler.prototype._performStageTasks = function (stageHandlers, ecModel, payload, opt) {\r\n            opt = opt || {};\r\n            var unfinished = false;\r\n            var scheduler = this;\r\n            each(stageHandlers, function (stageHandler, idx) {\r\n                if (opt.visualType && opt.visualType !== stageHandler.visualType) {\r\n                    return;\r\n                }\r\n                var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\r\n                var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\r\n                var overallTask = stageHandlerRecord.overallTask;\r\n                if (overallTask) {\r\n                    var overallNeedDirty_1;\r\n                    var agentStubMap = overallTask.agentStubMap;\r\n                    agentStubMap.each(function (stub) {\r\n                        if (needSetDirty(opt, stub)) {\r\n                            stub.dirty();\r\n                            overallNeedDirty_1 = true;\r\n                        }\r\n                    });\r\n                    overallNeedDirty_1 && overallTask.dirty();\r\n                    scheduler.updatePayload(overallTask, payload);\r\n                    var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block);\r\n                    agentStubMap.each(function (stub) {\r\n                        stub.perform(performArgs_1);\r\n                    });\r\n                    if (overallTask.perform(performArgs_1)) {\r\n                        unfinished = true;\r\n                    }\r\n                }\r\n                else if (seriesTaskMap) {\r\n                    seriesTaskMap.each(function (task, pipelineId) {\r\n                        if (needSetDirty(opt, task)) {\r\n                            task.dirty();\r\n                        }\r\n                        var performArgs = scheduler.getPerformArgs(task, opt.block);\r\n                        performArgs.skip = !stageHandler.performRawSeries\r\n                            && ecModel.isSeriesFiltered(task.context.model);\r\n                        scheduler.updatePayload(task, payload);\r\n                        if (task.perform(performArgs)) {\r\n                            unfinished = true;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            function needSetDirty(opt, task) {\r\n                return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\r\n            }\r\n            this.unfinished = unfinished || this.unfinished;\r\n        };\r\n        Scheduler.prototype.performSeriesTasks = function (ecModel) {\r\n            var unfinished;\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                unfinished = seriesModel.dataTask.perform() || unfinished;\r\n            });\r\n            this.unfinished = unfinished || this.unfinished;\r\n        };\r\n        Scheduler.prototype.plan = function () {\r\n            this._pipelineMap.each(function (pipeline) {\r\n                var task = pipeline.tail;\r\n                do {\r\n                    if (task.__block) {\r\n                        pipeline.blockIndex = task.__idxInPipeline;\r\n                        break;\r\n                    }\r\n                    task = task.getUpstream();\r\n                } while (task);\r\n            });\r\n        };\r\n        Scheduler.prototype.updatePayload = function (task, payload) {\r\n            payload !== 'remain' && (task.context.payload = payload);\r\n        };\r\n        Scheduler.prototype._createSeriesStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\r\n            var scheduler = this;\r\n            var seriesTaskMap = stageHandlerRecord.seriesTaskMap\r\n                || (stageHandlerRecord.seriesTaskMap = createHashMap());\r\n            var seriesType = stageHandler.seriesType;\r\n            var getTargetSeries = stageHandler.getTargetSeries;\r\n            if (stageHandler.createOnAllSeries) {\r\n                ecModel.eachRawSeries(create);\r\n            }\r\n            else if (seriesType) {\r\n                ecModel.eachRawSeriesByType(seriesType, create);\r\n            }\r\n            else if (getTargetSeries) {\r\n                getTargetSeries(ecModel, api).each(create);\r\n            }\r\n            function create(seriesModel) {\r\n                var pipelineId = seriesModel.uid;\r\n                var task = seriesTaskMap.get(pipelineId)\r\n                    || seriesTaskMap.set(pipelineId, createTask({\r\n                        plan: seriesTaskPlan,\r\n                        reset: seriesTaskReset,\r\n                        count: seriesTaskCount\r\n                    }));\r\n                task.context = {\r\n                    model: seriesModel,\r\n                    ecModel: ecModel,\r\n                    api: api,\r\n                    useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\r\n                    plan: stageHandler.plan,\r\n                    reset: stageHandler.reset,\r\n                    scheduler: scheduler\r\n                };\r\n                scheduler._pipe(seriesModel, task);\r\n            }\r\n            var pipelineMap = scheduler._pipelineMap;\r\n            seriesTaskMap.each(function (task, pipelineId) {\r\n                if (!pipelineMap.get(pipelineId)) {\r\n                    task.dispose();\r\n                    seriesTaskMap.removeKey(pipelineId);\r\n                }\r\n            });\r\n        };\r\n        Scheduler.prototype._createOverallStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\r\n            var scheduler = this;\r\n            var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask\r\n                || createTask({ reset: overallTaskReset });\r\n            overallTask.context = {\r\n                ecModel: ecModel,\r\n                api: api,\r\n                overallReset: stageHandler.overallReset,\r\n                scheduler: scheduler\r\n            };\r\n            var agentStubMap = overallTask.agentStubMap = overallTask.agentStubMap\r\n                || createHashMap();\r\n            var seriesType = stageHandler.seriesType;\r\n            var getTargetSeries = stageHandler.getTargetSeries;\r\n            var overallProgress = true;\r\n            if (seriesType) {\r\n                ecModel.eachRawSeriesByType(seriesType, createStub);\r\n            }\r\n            else if (getTargetSeries) {\r\n                getTargetSeries(ecModel, api).each(createStub);\r\n            }\r\n            else {\r\n                overallProgress = false;\r\n                each(ecModel.getSeries(), createStub);\r\n            }\r\n            function createStub(seriesModel) {\r\n                var pipelineId = seriesModel.uid;\r\n                var stub = agentStubMap.get(pipelineId);\r\n                if (!stub) {\r\n                    stub = agentStubMap.set(pipelineId, createTask({ reset: stubReset, onDirty: stubOnDirty }));\r\n                    overallTask.dirty();\r\n                }\r\n                stub.context = {\r\n                    model: seriesModel,\r\n                    overallProgress: overallProgress\r\n                };\r\n                stub.agent = overallTask;\r\n                stub.__block = overallProgress;\r\n                scheduler._pipe(seriesModel, stub);\r\n            }\r\n            var pipelineMap = scheduler._pipelineMap;\r\n            agentStubMap.each(function (stub, pipelineId) {\r\n                if (!pipelineMap.get(pipelineId)) {\r\n                    stub.dispose();\r\n                    overallTask.dirty();\r\n                    agentStubMap.removeKey(pipelineId);\r\n                }\r\n            });\r\n        };\r\n        Scheduler.prototype._pipe = function (seriesModel, task) {\r\n            var pipelineId = seriesModel.uid;\r\n            var pipeline = this._pipelineMap.get(pipelineId);\r\n            !pipeline.head && (pipeline.head = task);\r\n            pipeline.tail && pipeline.tail.pipe(task);\r\n            pipeline.tail = task;\r\n            task.__idxInPipeline = pipeline.count++;\r\n            task.__pipeline = pipeline;\r\n        };\r\n        Scheduler.wrapStageHandler = function (stageHandler, visualType) {\r\n            if (isFunction(stageHandler)) {\r\n                stageHandler = {\r\n                    overallReset: stageHandler,\r\n                    seriesType: detectSeriseType(stageHandler)\r\n                };\r\n            }\r\n            stageHandler.uid = getUID('stageHandler');\r\n            visualType && (stageHandler.visualType = visualType);\r\n            return stageHandler;\r\n        };\r\n        return Scheduler;\r\n    }());\r\n    function overallTaskReset(context) {\r\n        context.overallReset(context.ecModel, context.api, context.payload);\r\n    }\r\n    function stubReset(context) {\r\n        return context.overallProgress && stubProgress;\r\n    }\r\n    function stubProgress() {\r\n        this.agent.dirty();\r\n        this.getDownstream().dirty();\r\n    }\r\n    function stubOnDirty() {\r\n        this.agent && this.agent.dirty();\r\n    }\r\n    function seriesTaskPlan(context) {\r\n        return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;\r\n    }\r\n    function seriesTaskReset(context) {\r\n        if (context.useClearVisual) {\r\n            context.data.clearAllVisual();\r\n        }\r\n        var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\r\n        return resetDefines.length > 1\r\n            ? map(resetDefines, function (v, idx) {\r\n                return makeSeriesTaskProgress(idx);\r\n            })\r\n            : singleSeriesTaskProgress;\r\n    }\r\n    var singleSeriesTaskProgress = makeSeriesTaskProgress(0);\r\n    function makeSeriesTaskProgress(resetDefineIdx) {\r\n        return function (params, context) {\r\n            var data = context.data;\r\n            var resetDefine = context.resetDefines[resetDefineIdx];\r\n            if (resetDefine && resetDefine.dataEach) {\r\n                for (var i = params.start; i < params.end; i++) {\r\n                    resetDefine.dataEach(data, i);\r\n                }\r\n            }\r\n            else if (resetDefine && resetDefine.progress) {\r\n                resetDefine.progress(params, data);\r\n            }\r\n        };\r\n    }\r\n    function seriesTaskCount(context) {\r\n        return context.data.count();\r\n    }\r\n    function detectSeriseType(legacyFunc) {\r\n        seriesType = null;\r\n        try {\r\n            legacyFunc(ecModelMock, apiMock);\r\n        }\r\n        catch (e) {\r\n        }\r\n        return seriesType;\r\n    }\r\n    var ecModelMock = {};\r\n    var apiMock = {};\r\n    var seriesType;\r\n    mockMethods(ecModelMock, GlobalModel);\r\n    mockMethods(apiMock, ExtensionAPI);\r\n    ecModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\r\n        seriesType = type;\r\n    };\r\n    ecModelMock.eachComponent = function (cond) {\r\n        if (cond.mainType === 'series' && cond.subType) {\r\n            seriesType = cond.subType;\r\n        }\r\n    };\r\n    function mockMethods(target, Clz) {\r\n        for (var name_1 in Clz.prototype) {\r\n            target[name_1] = noop;\r\n        }\r\n    }\n\n    var colorAll = [\r\n        '#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f',\r\n        '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'\r\n    ];\r\n    var lightTheme = {\r\n        color: colorAll,\r\n        colorLayer: [\r\n            ['#37A2DA', '#ffd85c', '#fd7b5f'],\r\n            ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'],\r\n            ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'],\r\n            colorAll\r\n        ]\r\n    };\n\n    var contrastColor = '#B9B8CE';\r\n    var backgroundColor = '#100C2A';\r\n    var axisCommon = function () {\r\n        return {\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: contrastColor\r\n                }\r\n            },\r\n            splitLine: {\r\n                lineStyle: {\r\n                    color: '#484753'\r\n                }\r\n            },\r\n            splitArea: {\r\n                areaStyle: {\r\n                    color: ['rgba(255,255,255,0.02)', 'rgba(255,255,255,0.05)']\r\n                }\r\n            },\r\n            minorSplitLine: {\r\n                lineStyle: {\r\n                    color: '#20203B'\r\n                }\r\n            }\r\n        };\r\n    };\r\n    var colorPalette = [\r\n        '#4992ff',\r\n        '#7cffb2',\r\n        '#fddd60',\r\n        '#ff6e76',\r\n        '#58d9f9',\r\n        '#05c091',\r\n        '#ff8a45',\r\n        '#8d48e3',\r\n        '#dd79ff'\r\n    ];\r\n    var theme = {\r\n        darkMode: true,\r\n        color: colorPalette,\r\n        backgroundColor: backgroundColor,\r\n        axisPointer: {\r\n            lineStyle: {\r\n                color: '#817f91'\r\n            },\r\n            crossStyle: {\r\n                color: '#817f91'\r\n            },\r\n            label: {\r\n                color: '#fff'\r\n            }\r\n        },\r\n        legend: {\r\n            textStyle: {\r\n                color: contrastColor\r\n            }\r\n        },\r\n        textStyle: {\r\n            color: contrastColor\r\n        },\r\n        title: {\r\n            textStyle: {\r\n                color: '#EEF1FA'\r\n            },\r\n            subtextStyle: {\r\n                color: '#B9B8CE'\r\n            }\r\n        },\r\n        toolbox: {\r\n            iconStyle: {\r\n                normal: {\r\n                    borderColor: contrastColor\r\n                }\r\n            }\r\n        },\r\n        dataZoom: {\r\n            borderColor: '#71708A',\r\n            textStyle: {\r\n                color: contrastColor\r\n            },\r\n            brushStyle: {\r\n                color: 'rgba(135,163,206,0.3)'\r\n            },\r\n            handleStyle: {\r\n                color: '#353450',\r\n                borderColor: '#C5CBE3'\r\n            },\r\n            moveHandleStyle: {\r\n                color: '#B0B6C3',\r\n                opacity: 0.3\r\n            },\r\n            fillerColor: 'rgba(135,163,206,0.2)',\r\n            emphasis: {\r\n                handleStyle: {\r\n                    borderColor: '#91B7F2',\r\n                    color: '#4D587D'\r\n                },\r\n                moveHandleStyle: {\r\n                    color: '#636D9A',\r\n                    opacity: 0.7\r\n                }\r\n            },\r\n            dataBackground: {\r\n                lineStyle: {\r\n                    color: '#71708A',\r\n                    width: 1\r\n                },\r\n                areaStyle: {\r\n                    color: '#71708A'\r\n                }\r\n            },\r\n            selectedDataBackground: {\r\n                lineStyle: {\r\n                    color: '#87A3CE'\r\n                },\r\n                areaStyle: {\r\n                    color: '#87A3CE'\r\n                }\r\n            }\r\n        },\r\n        visualMap: {\r\n            textStyle: {\r\n                color: contrastColor\r\n            }\r\n        },\r\n        timeline: {\r\n            lineStyle: {\r\n                color: contrastColor\r\n            },\r\n            label: {\r\n                textStyle: {\r\n                    color: contrastColor\r\n                }\r\n            },\r\n            controlStyle: {\r\n                color: contrastColor,\r\n                borderColor: contrastColor\r\n            }\r\n        },\r\n        calendar: {\r\n            itemStyle: {\r\n                color: backgroundColor\r\n            },\r\n            dayLabel: {\r\n                color: contrastColor\r\n            },\r\n            monthLabel: {\r\n                color: contrastColor\r\n            },\r\n            yearLabel: {\r\n                color: contrastColor\r\n            }\r\n        },\r\n        timeAxis: axisCommon(),\r\n        logAxis: axisCommon(),\r\n        valueAxis: axisCommon(),\r\n        categoryAxis: axisCommon(),\r\n        line: {\r\n            symbol: 'circle'\r\n        },\r\n        graph: {\r\n            color: colorPalette\r\n        },\r\n        gauge: {\r\n            title: {\r\n                textStyle: {\r\n                    color: contrastColor\r\n                }\r\n            }\r\n        },\r\n        candlestick: {\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#FD1050',\r\n                    color0: '#0CF49B',\r\n                    borderColor: '#FD1050',\r\n                    borderColor0: '#0CF49B'\r\n                }\r\n            }\r\n        }\r\n    };\r\n    theme.categoryAxis.splitLine.show = false;\n\n    var DatasetModel = (function (_super) {\r\n        __extends(DatasetModel, _super);\r\n        function DatasetModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'dataset';\r\n            return _this;\r\n        }\r\n        DatasetModel.prototype.init = function (option, parentModel, ecModel) {\r\n            _super.prototype.init.call(this, option, parentModel, ecModel);\r\n            this._sourceManager = new SourceManager(this);\r\n            disableTransformOptionMerge(this);\r\n        };\r\n        DatasetModel.prototype.mergeOption = function (newOption, ecModel) {\r\n            _super.prototype.mergeOption.call(this, newOption, ecModel);\r\n            disableTransformOptionMerge(this);\r\n        };\r\n        DatasetModel.prototype.optionUpdated = function () {\r\n            this._sourceManager.dirty();\r\n        };\r\n        DatasetModel.prototype.getSourceManager = function () {\r\n            return this._sourceManager;\r\n        };\r\n        DatasetModel.type = 'dataset';\r\n        DatasetModel.defaultOption = {\r\n            seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN\r\n        };\r\n        return DatasetModel;\r\n    }(ComponentModel));\r\n    ComponentModel.registerClass(DatasetModel);\r\n    var DatasetView = (function (_super) {\r\n        __extends(DatasetView, _super);\r\n        function DatasetView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'dataset';\r\n            return _this;\r\n        }\r\n        DatasetView.type = 'dataset';\r\n        return DatasetView;\r\n    }(ComponentView));\r\n    ComponentView.registerClass(DatasetView);\n\n    var storage = createHashMap();\r\n    var mapDataStorage = {\r\n        registerMap: function (mapName, rawDef, rawSpecialAreas) {\r\n            var records;\r\n            if (isArray(rawDef)) {\r\n                records = rawDef;\r\n            }\r\n            else if (rawDef.svg) {\r\n                records = [{\r\n                        type: 'svg',\r\n                        source: rawDef.svg,\r\n                        specialAreas: rawDef.specialAreas\r\n                    }];\r\n            }\r\n            else {\r\n                var geoSource = rawDef.geoJson\r\n                    || rawDef.geoJSON;\r\n                if (geoSource && !rawDef.features) {\r\n                    rawSpecialAreas = rawDef.specialAreas;\r\n                    rawDef = geoSource;\r\n                }\r\n                records = [{\r\n                        type: 'geoJSON',\r\n                        source: rawDef,\r\n                        specialAreas: rawSpecialAreas\r\n                    }];\r\n            }\r\n            each(records, function (record) {\r\n                var type = record.type;\r\n                type === 'geoJson' && (type = record.type = 'geoJSON');\r\n                var parse = parsers[type];\r\n                if (__DEV__) {\r\n                    assert(parse, 'Illegal map type: ' + type);\r\n                }\r\n                parse(record);\r\n            });\r\n            return storage.set(mapName, records);\r\n        },\r\n        retrieveMap: function (mapName) {\r\n            return storage.get(mapName);\r\n        }\r\n    };\r\n    var parsers = {\r\n        geoJSON: function (record) {\r\n            var source = record.source;\r\n            record.geoJSON = !isString(source)\r\n                ? source\r\n                : (typeof JSON !== 'undefined' && JSON.parse)\r\n                    ? JSON.parse(source)\r\n                    : (new Function('return (' + source + ');'))();\r\n        },\r\n        svg: function (record) {\r\n            record.svgXML = parseXML(record.source);\r\n        }\r\n    };\n\n    var ECEventProcessor = (function () {\r\n        function ECEventProcessor() {\r\n        }\r\n        ECEventProcessor.prototype.normalizeQuery = function (query) {\r\n            var cptQuery = {};\r\n            var dataQuery = {};\r\n            var otherQuery = {};\r\n            if (isString(query)) {\r\n                var condCptType = parseClassType(query);\r\n                cptQuery.mainType = condCptType.main || null;\r\n                cptQuery.subType = condCptType.sub || null;\r\n            }\r\n            else {\r\n                var suffixes_1 = ['Index', 'Name', 'Id'];\r\n                var dataKeys_1 = { name: 1, dataIndex: 1, dataType: 1 };\r\n                each(query, function (val, key) {\r\n                    var reserved = false;\r\n                    for (var i = 0; i < suffixes_1.length; i++) {\r\n                        var propSuffix = suffixes_1[i];\r\n                        var suffixPos = key.lastIndexOf(propSuffix);\r\n                        if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\r\n                            var mainType = key.slice(0, suffixPos);\r\n                            if (mainType !== 'data') {\r\n                                cptQuery.mainType = mainType;\r\n                                cptQuery[propSuffix.toLowerCase()] = val;\r\n                                reserved = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (dataKeys_1.hasOwnProperty(key)) {\r\n                        dataQuery[key] = val;\r\n                        reserved = true;\r\n                    }\r\n                    if (!reserved) {\r\n                        otherQuery[key] = val;\r\n                    }\r\n                });\r\n            }\r\n            return {\r\n                cptQuery: cptQuery,\r\n                dataQuery: dataQuery,\r\n                otherQuery: otherQuery\r\n            };\r\n        };\r\n        ECEventProcessor.prototype.filter = function (eventType, query) {\r\n            var eventInfo = this.eventInfo;\r\n            if (!eventInfo) {\r\n                return true;\r\n            }\r\n            var targetEl = eventInfo.targetEl;\r\n            var packedEvent = eventInfo.packedEvent;\r\n            var model = eventInfo.model;\r\n            var view = eventInfo.view;\r\n            if (!model || !view) {\r\n                return true;\r\n            }\r\n            var cptQuery = query.cptQuery;\r\n            var dataQuery = query.dataQuery;\r\n            return check(cptQuery, model, 'mainType')\r\n                && check(cptQuery, model, 'subType')\r\n                && check(cptQuery, model, 'index', 'componentIndex')\r\n                && check(cptQuery, model, 'name')\r\n                && check(cptQuery, model, 'id')\r\n                && check(dataQuery, packedEvent, 'name')\r\n                && check(dataQuery, packedEvent, 'dataIndex')\r\n                && check(dataQuery, packedEvent, 'dataType')\r\n                && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\r\n            function check(query, host, prop, propOnHost) {\r\n                return query[prop] == null || host[propOnHost || prop] === query[prop];\r\n            }\r\n        };\r\n        ECEventProcessor.prototype.afterTrigger = function () {\r\n            this.eventInfo = null;\r\n        };\r\n        return ECEventProcessor;\r\n    }());\n\n    var seriesSymbolTask = {\r\n        createOnAllSeries: true,\r\n        performRawSeries: true,\r\n        reset: function (seriesModel, ecModel) {\r\n            var data = seriesModel.getData();\r\n            if (seriesModel.legendSymbol) {\r\n                data.setVisual('legendSymbol', seriesModel.legendSymbol);\r\n            }\r\n            if (!seriesModel.hasSymbolVisual) {\r\n                return;\r\n            }\r\n            var symbolType = seriesModel.get('symbol');\r\n            var symbolSize = seriesModel.get('symbolSize');\r\n            var keepAspect = seriesModel.get('symbolKeepAspect');\r\n            var symbolRotate = seriesModel.get('symbolRotate');\r\n            var hasSymbolTypeCallback = isFunction(symbolType);\r\n            var hasSymbolSizeCallback = isFunction(symbolSize);\r\n            var hasSymbolRotateCallback = isFunction(symbolRotate);\r\n            var hasCallback = hasSymbolTypeCallback || hasSymbolSizeCallback || hasSymbolRotateCallback;\r\n            var seriesSymbol = (!hasSymbolTypeCallback && symbolType) ? symbolType : seriesModel.defaultSymbol;\r\n            var seriesSymbolSize = !hasSymbolSizeCallback ? symbolSize : null;\r\n            var seriesSymbolRotate = !hasSymbolRotateCallback ? symbolRotate : null;\r\n            data.setVisual({\r\n                legendSymbol: seriesModel.legendSymbol || seriesSymbol,\r\n                symbol: seriesSymbol,\r\n                symbolSize: seriesSymbolSize,\r\n                symbolKeepAspect: keepAspect,\r\n                symbolRotate: seriesSymbolRotate\r\n            });\r\n            if (ecModel.isSeriesFiltered(seriesModel)) {\r\n                return;\r\n            }\r\n            function dataEach(data, idx) {\r\n                var rawValue = seriesModel.getRawValue(idx);\r\n                var params = seriesModel.getDataParams(idx);\r\n                hasSymbolTypeCallback && data.setItemVisual(idx, 'symbol', symbolType(rawValue, params));\r\n                hasSymbolSizeCallback && data.setItemVisual(idx, 'symbolSize', symbolSize(rawValue, params));\r\n                hasSymbolRotateCallback && data.setItemVisual(idx, 'symbolRotate', symbolRotate(rawValue, params));\r\n            }\r\n            return { dataEach: hasCallback ? dataEach : null };\r\n        }\r\n    };\r\n    var dataSymbolTask = {\r\n        createOnAllSeries: true,\r\n        performRawSeries: true,\r\n        reset: function (seriesModel, ecModel) {\r\n            if (!seriesModel.hasSymbolVisual) {\r\n                return;\r\n            }\r\n            if (ecModel.isSeriesFiltered(seriesModel)) {\r\n                return;\r\n            }\r\n            var data = seriesModel.getData();\r\n            function dataEach(data, idx) {\r\n                var itemModel = data.getItemModel(idx);\r\n                var itemSymbolType = itemModel.getShallow('symbol', true);\r\n                var itemSymbolSize = itemModel.getShallow('symbolSize', true);\r\n                var itemSymbolRotate = itemModel.getShallow('symbolRotate', true);\r\n                var itemSymbolKeepAspect = itemModel.getShallow('symbolKeepAspect', true);\r\n                if (itemSymbolType != null) {\r\n                    data.setItemVisual(idx, 'symbol', itemSymbolType);\r\n                }\r\n                if (itemSymbolSize != null) {\r\n                    data.setItemVisual(idx, 'symbolSize', itemSymbolSize);\r\n                }\r\n                if (itemSymbolRotate != null) {\r\n                    data.setItemVisual(idx, 'symbolRotate', itemSymbolRotate);\r\n                }\r\n                if (itemSymbolKeepAspect != null) {\r\n                    data.setItemVisual(idx, 'symbolKeepAspect', itemSymbolKeepAspect);\r\n                }\r\n            }\r\n            return { dataEach: data.hasItemOption ? dataEach : null };\r\n        }\r\n    };\n\n    function getItemVisualFromData(data, dataIndex, key) {\r\n        switch (key) {\r\n            case 'color':\r\n                var style = data.getItemVisual(dataIndex, 'style');\r\n                return style[data.getVisual('drawType')];\r\n            case 'opacity':\r\n                return data.getItemVisual(dataIndex, 'style').opacity;\r\n            case 'symbol':\r\n            case 'symbolSize':\r\n            case 'liftZ':\r\n                return data.getItemVisual(dataIndex, key);\r\n            default:\r\n                if (__DEV__) {\r\n                    console.warn(\"Unknown visual type \" + key);\r\n                }\r\n        }\r\n    }\r\n    function getVisualFromData(data, key) {\r\n        switch (key) {\r\n            case 'color':\r\n                var style = data.getVisual('style');\r\n                return style[data.getVisual('drawType')];\r\n            case 'opacity':\r\n                return data.getVisual('style').opacity;\r\n            case 'symbol':\r\n            case 'symbolSize':\r\n            case 'liftZ':\r\n                return data.getVisual(key);\r\n            default:\r\n                if (__DEV__) {\r\n                    console.warn(\"Unknown visual type \" + key);\r\n                }\r\n        }\r\n    }\n\n    var PI2$5 = Math.PI * 2;\r\n    var CMD$3 = PathProxy.CMD;\r\n    var DEFAULT_SEARCH_SPACE = ['top', 'right', 'bottom', 'left'];\r\n    function getCandidateAnchor(pos, distance, rect, outPt, outDir) {\r\n        var width = rect.width;\r\n        var height = rect.height;\r\n        switch (pos) {\r\n            case 'top':\r\n                outPt.set(rect.x + width / 2, rect.y - distance);\r\n                outDir.set(0, -1);\r\n                break;\r\n            case 'bottom':\r\n                outPt.set(rect.x + width / 2, rect.y + height + distance);\r\n                outDir.set(0, 1);\r\n                break;\r\n            case 'left':\r\n                outPt.set(rect.x - distance, rect.y + height / 2);\r\n                outDir.set(-1, 0);\r\n                break;\r\n            case 'right':\r\n                outPt.set(rect.x + width + distance, rect.y + height / 2);\r\n                outDir.set(1, 0);\r\n                break;\r\n        }\r\n    }\r\n    function projectPointToArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y, out) {\r\n        x -= cx;\r\n        y -= cy;\r\n        var d = Math.sqrt(x * x + y * y);\r\n        x /= d;\r\n        y /= d;\r\n        var ox = x * r + cx;\r\n        var oy = y * r + cy;\r\n        if (Math.abs(startAngle - endAngle) % PI2$5 < 1e-4) {\r\n            out[0] = ox;\r\n            out[1] = oy;\r\n            return d - r;\r\n        }\r\n        if (anticlockwise) {\r\n            var tmp = startAngle;\r\n            startAngle = normalizeRadian(endAngle);\r\n            endAngle = normalizeRadian(tmp);\r\n        }\r\n        else {\r\n            startAngle = normalizeRadian(startAngle);\r\n            endAngle = normalizeRadian(endAngle);\r\n        }\r\n        if (startAngle > endAngle) {\r\n            endAngle += PI2$5;\r\n        }\r\n        var angle = Math.atan2(y, x);\r\n        if (angle < 0) {\r\n            angle += PI2$5;\r\n        }\r\n        if ((angle >= startAngle && angle <= endAngle)\r\n            || (angle + PI2$5 >= startAngle && angle + PI2$5 <= endAngle)) {\r\n            out[0] = ox;\r\n            out[1] = oy;\r\n            return d - r;\r\n        }\r\n        var x1 = r * Math.cos(startAngle) + cx;\r\n        var y1 = r * Math.sin(startAngle) + cy;\r\n        var x2 = r * Math.cos(endAngle) + cx;\r\n        var y2 = r * Math.sin(endAngle) + cy;\r\n        var d1 = (x1 - x) * (x1 - x) + (y1 - y) * (y1 - y);\r\n        var d2 = (x2 - x) * (x2 - x) + (y2 - y) * (y2 - y);\r\n        if (d1 < d2) {\r\n            out[0] = x1;\r\n            out[1] = y1;\r\n            return Math.sqrt(d1);\r\n        }\r\n        else {\r\n            out[0] = x2;\r\n            out[1] = y2;\r\n            return Math.sqrt(d2);\r\n        }\r\n    }\r\n    function projectPointToLine(x1, y1, x2, y2, x, y, out, limitToEnds) {\r\n        var dx = x - x1;\r\n        var dy = y - y1;\r\n        var dx1 = x2 - x1;\r\n        var dy1 = y2 - y1;\r\n        var lineLen = Math.sqrt(dx1 * dx1 + dy1 * dy1);\r\n        dx1 /= lineLen;\r\n        dy1 /= lineLen;\r\n        var projectedLen = dx * dx1 + dy * dy1;\r\n        var t = projectedLen / lineLen;\r\n        if (limitToEnds) {\r\n            t = Math.min(Math.max(t, 0), 1);\r\n        }\r\n        t *= lineLen;\r\n        var ox = out[0] = x1 + t * dx1;\r\n        var oy = out[1] = y1 + t * dy1;\r\n        return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\r\n    }\r\n    function projectPointToRect(x1, y1, width, height, x, y, out) {\r\n        if (width < 0) {\r\n            x1 = x1 + width;\r\n            width = -width;\r\n        }\r\n        if (height < 0) {\r\n            y1 = y1 + height;\r\n            height = -height;\r\n        }\r\n        var x2 = x1 + width;\r\n        var y2 = y1 + height;\r\n        var ox = out[0] = Math.min(Math.max(x, x1), x2);\r\n        var oy = out[1] = Math.min(Math.max(y, y1), y2);\r\n        return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\r\n    }\r\n    var tmpPt = [];\r\n    function nearestPointOnRect(pt, rect, out) {\r\n        var dist = projectPointToRect(rect.x, rect.y, rect.width, rect.height, pt.x, pt.y, tmpPt);\r\n        out.set(tmpPt[0], tmpPt[1]);\r\n        return dist;\r\n    }\r\n    function nearestPointOnPath(pt, path, out) {\r\n        var xi = 0;\r\n        var yi = 0;\r\n        var x0 = 0;\r\n        var y0 = 0;\r\n        var x1;\r\n        var y1;\r\n        var minDist = Infinity;\r\n        var data = path.data;\r\n        var x = pt.x;\r\n        var y = pt.y;\r\n        for (var i = 0; i < data.length;) {\r\n            var cmd = data[i++];\r\n            if (i === 1) {\r\n                xi = data[i];\r\n                yi = data[i + 1];\r\n                x0 = xi;\r\n                y0 = yi;\r\n            }\r\n            var d = minDist;\r\n            switch (cmd) {\r\n                case CMD$3.M:\r\n                    x0 = data[i++];\r\n                    y0 = data[i++];\r\n                    xi = x0;\r\n                    yi = y0;\r\n                    break;\r\n                case CMD$3.L:\r\n                    d = projectPointToLine(xi, yi, data[i], data[i + 1], x, y, tmpPt, true);\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$3.C:\r\n                    d = cubicProjectPoint(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$3.Q:\r\n                    d = quadraticProjectPoint(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\r\n                    xi = data[i++];\r\n                    yi = data[i++];\r\n                    break;\r\n                case CMD$3.A:\r\n                    var cx = data[i++];\r\n                    var cy = data[i++];\r\n                    var rx = data[i++];\r\n                    var ry = data[i++];\r\n                    var theta = data[i++];\r\n                    var dTheta = data[i++];\r\n                    i += 1;\r\n                    var anticlockwise = !!(1 - data[i++]);\r\n                    x1 = Math.cos(theta) * rx + cx;\r\n                    y1 = Math.sin(theta) * ry + cy;\r\n                    if (i <= 1) {\r\n                        x0 = x1;\r\n                        y0 = y1;\r\n                    }\r\n                    var _x = (x - cx) * ry / rx + cx;\r\n                    d = projectPointToArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y, tmpPt);\r\n                    xi = Math.cos(theta + dTheta) * rx + cx;\r\n                    yi = Math.sin(theta + dTheta) * ry + cy;\r\n                    break;\r\n                case CMD$3.R:\r\n                    x0 = xi = data[i++];\r\n                    y0 = yi = data[i++];\r\n                    var width = data[i++];\r\n                    var height = data[i++];\r\n                    d = projectPointToRect(x0, y0, width, height, x, y, tmpPt);\r\n                    break;\r\n                case CMD$3.Z:\r\n                    d = projectPointToLine(xi, yi, x0, y0, x, y, tmpPt, true);\r\n                    xi = x0;\r\n                    yi = y0;\r\n                    break;\r\n            }\r\n            if (d < minDist) {\r\n                minDist = d;\r\n                out.set(tmpPt[0], tmpPt[1]);\r\n            }\r\n        }\r\n        return minDist;\r\n    }\r\n    var pt0 = new Point();\r\n    var pt1 = new Point();\r\n    var pt2 = new Point();\r\n    var dir = new Point();\r\n    var dir2 = new Point();\r\n    function updateLabelLinePoints(target, labelLineModel) {\r\n        if (!target) {\r\n            return;\r\n        }\r\n        var labelLine = target.getTextGuideLine();\r\n        var label = target.getTextContent();\r\n        if (!(label && labelLine)) {\r\n            return;\r\n        }\r\n        var labelGuideConfig = target.textGuideLineConfig || {};\r\n        var points = [[0, 0], [0, 0], [0, 0]];\r\n        var searchSpace = labelGuideConfig.candidates || DEFAULT_SEARCH_SPACE;\r\n        var labelRect = label.getBoundingRect().clone();\r\n        labelRect.applyTransform(label.getComputedTransform());\r\n        var minDist = Infinity;\r\n        var anchorPoint = labelGuideConfig && labelGuideConfig.anchor;\r\n        var targetTransform = target.getComputedTransform();\r\n        var targetInversedTransform = targetTransform && invert([], targetTransform);\r\n        var len = labelLineModel.get('length2') || 0;\r\n        if (anchorPoint) {\r\n            pt2.copy(anchorPoint);\r\n        }\r\n        for (var i = 0; i < searchSpace.length; i++) {\r\n            var candidate = searchSpace[i];\r\n            getCandidateAnchor(candidate, 0, labelRect, pt0, dir);\r\n            Point.scaleAndAdd(pt1, pt0, dir, len);\r\n            pt1.transform(targetInversedTransform);\r\n            var boundingRect = target.getBoundingRect();\r\n            var dist = anchorPoint ? anchorPoint.distance(pt1)\r\n                : (target instanceof Path\r\n                    ? nearestPointOnPath(pt1, target.path, pt2)\r\n                    : nearestPointOnRect(pt1, boundingRect, pt2));\r\n            if (dist < minDist) {\r\n                minDist = dist;\r\n                pt1.transform(targetTransform);\r\n                pt2.transform(targetTransform);\r\n                pt2.toArray(points[0]);\r\n                pt1.toArray(points[1]);\r\n                pt0.toArray(points[2]);\r\n            }\r\n        }\r\n        limitTurnAngle(points, labelLineModel.get('minTurnAngle'));\r\n        labelLine.setShape({ points: points });\r\n    }\r\n    var tmpArr = [];\r\n    var tmpProjPoint = new Point();\r\n    function limitTurnAngle(linePoints, minTurnAngle) {\r\n        if (!(minTurnAngle <= 180 && minTurnAngle > 0)) {\r\n            return;\r\n        }\r\n        minTurnAngle = minTurnAngle / 180 * Math.PI;\r\n        pt0.fromArray(linePoints[0]);\r\n        pt1.fromArray(linePoints[1]);\r\n        pt2.fromArray(linePoints[2]);\r\n        Point.sub(dir, pt0, pt1);\r\n        Point.sub(dir2, pt2, pt1);\r\n        var len1 = dir.len();\r\n        var len2 = dir2.len();\r\n        if (len1 < 1e-3 || len2 < 1e-3) {\r\n            return;\r\n        }\r\n        dir.scale(1 / len1);\r\n        dir2.scale(1 / len2);\r\n        var angleCos = dir.dot(dir2);\r\n        var minTurnAngleCos = Math.cos(minTurnAngle);\r\n        if (minTurnAngleCos < angleCos) {\r\n            var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\r\n            tmpProjPoint.fromArray(tmpArr);\r\n            tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI - minTurnAngle));\r\n            var t = pt2.x !== pt1.x\r\n                ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x)\r\n                : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\r\n            if (isNaN(t)) {\r\n                return;\r\n            }\r\n            if (t < 0) {\r\n                Point.copy(tmpProjPoint, pt1);\r\n            }\r\n            else if (t > 1) {\r\n                Point.copy(tmpProjPoint, pt2);\r\n            }\r\n            tmpProjPoint.toArray(linePoints[1]);\r\n        }\r\n    }\r\n    function limitSurfaceAngle(linePoints, surfaceNormal, maxSurfaceAngle) {\r\n        if (!(maxSurfaceAngle <= 180 && maxSurfaceAngle > 0)) {\r\n            return;\r\n        }\r\n        maxSurfaceAngle = maxSurfaceAngle / 180 * Math.PI;\r\n        pt0.fromArray(linePoints[0]);\r\n        pt1.fromArray(linePoints[1]);\r\n        pt2.fromArray(linePoints[2]);\r\n        Point.sub(dir, pt1, pt0);\r\n        Point.sub(dir2, pt2, pt1);\r\n        var len1 = dir.len();\r\n        var len2 = dir2.len();\r\n        if (len1 < 1e-3 || len2 < 1e-3) {\r\n            return;\r\n        }\r\n        dir.scale(1 / len1);\r\n        dir2.scale(1 / len2);\r\n        var angleCos = dir.dot(surfaceNormal);\r\n        var maxSurfaceAngleCos = Math.cos(maxSurfaceAngle);\r\n        if (angleCos < maxSurfaceAngleCos) {\r\n            var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\r\n            tmpProjPoint.fromArray(tmpArr);\r\n            var HALF_PI = Math.PI / 2;\r\n            var angle2 = Math.acos(dir2.dot(surfaceNormal));\r\n            var newAngle = HALF_PI + angle2 - maxSurfaceAngle;\r\n            if (newAngle >= HALF_PI) {\r\n                Point.copy(tmpProjPoint, pt2);\r\n            }\r\n            else {\r\n                tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI / 2 - newAngle));\r\n                var t = pt2.x !== pt1.x\r\n                    ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x)\r\n                    : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\r\n                if (isNaN(t)) {\r\n                    return;\r\n                }\r\n                if (t < 0) {\r\n                    Point.copy(tmpProjPoint, pt1);\r\n                }\r\n                else if (t > 1) {\r\n                    Point.copy(tmpProjPoint, pt2);\r\n                }\r\n            }\r\n            tmpProjPoint.toArray(linePoints[1]);\r\n        }\r\n    }\r\n    function setLabelLineState(labelLine, ignore, stateName, stateModel) {\r\n        var isNormal = stateName === 'normal';\r\n        var stateObj = isNormal ? labelLine : labelLine.ensureState(stateName);\r\n        stateObj.ignore = ignore;\r\n        var smooth = stateModel.get('smooth');\r\n        if (smooth && smooth === true) {\r\n            smooth = 0.3;\r\n        }\r\n        stateObj.shape = stateObj.shape || {};\r\n        if (smooth > 0) {\r\n            stateObj.shape.smooth = smooth;\r\n        }\r\n        var styleObj = stateModel.getModel('lineStyle').getLineStyle();\r\n        isNormal ? labelLine.useStyle(styleObj) : stateObj.style = styleObj;\r\n    }\r\n    function buildLabelLinePath(path, shape) {\r\n        var smooth = shape.smooth;\r\n        var points = shape.points;\r\n        if (!points) {\r\n            return;\r\n        }\r\n        path.moveTo(points[0][0], points[0][1]);\r\n        if (smooth > 0 && points.length >= 3) {\r\n            var len1 = dist(points[0], points[1]);\r\n            var len2 = dist(points[1], points[2]);\r\n            if (!len1 || !len2) {\r\n                path.lineTo(points[1][0], points[1][1]);\r\n                path.lineTo(points[2][0], points[2][1]);\r\n                return;\r\n            }\r\n            var moveLen = Math.min(len1, len2) * smooth;\r\n            var midPoint0 = lerp([], points[1], points[0], moveLen / len1);\r\n            var midPoint2 = lerp([], points[1], points[2], moveLen / len2);\r\n            var midPoint1 = lerp([], midPoint0, midPoint2, 0.5);\r\n            path.bezierCurveTo(midPoint0[0], midPoint0[1], midPoint0[0], midPoint0[1], midPoint1[0], midPoint1[1]);\r\n            path.bezierCurveTo(midPoint2[0], midPoint2[1], midPoint2[0], midPoint2[1], points[2][0], points[2][1]);\r\n        }\r\n        else {\r\n            for (var i = 1; i < points.length; i++) {\r\n                path.lineTo(points[i][0], points[i][1]);\r\n            }\r\n        }\r\n    }\r\n    function setLabelLineStyle(targetEl, statesModels, defaultStyle) {\r\n        var labelLine = targetEl.getTextGuideLine();\r\n        var label = targetEl.getTextContent();\r\n        if (!label) {\r\n            if (labelLine) {\r\n                targetEl.removeTextGuideLine();\r\n            }\r\n            return;\r\n        }\r\n        var normalModel = statesModels.normal;\r\n        var showNormal = normalModel.get('show');\r\n        var labelIgnoreNormal = label.ignore;\r\n        for (var i = 0; i < DISPLAY_STATES.length; i++) {\r\n            var stateName = DISPLAY_STATES[i];\r\n            var stateModel = statesModels[stateName];\r\n            var isNormal = stateName === 'normal';\r\n            if (stateModel) {\r\n                var stateShow = stateModel.get('show');\r\n                var isLabelIgnored = isNormal\r\n                    ? labelIgnoreNormal\r\n                    : retrieve2(label.states[stateName] && label.states[stateName].ignore, labelIgnoreNormal);\r\n                if (isLabelIgnored\r\n                    || !retrieve2(stateShow, showNormal)) {\r\n                    var stateObj = isNormal ? labelLine : (labelLine && labelLine.states.normal);\r\n                    if (stateObj) {\r\n                        stateObj.ignore = true;\r\n                    }\r\n                    continue;\r\n                }\r\n                if (!labelLine) {\r\n                    labelLine = new Polyline();\r\n                    targetEl.setTextGuideLine(labelLine);\r\n                    if (!isNormal && (labelIgnoreNormal || !showNormal)) {\r\n                        setLabelLineState(labelLine, true, 'normal', statesModels.normal);\r\n                    }\r\n                    if (targetEl.stateProxy) {\r\n                        labelLine.stateProxy = targetEl.stateProxy;\r\n                    }\r\n                }\r\n                setLabelLineState(labelLine, false, stateName, stateModel);\r\n            }\r\n        }\r\n        if (labelLine) {\r\n            defaults(labelLine.style, defaultStyle);\r\n            labelLine.style.fill = null;\r\n            labelLine.buildPath = buildLabelLinePath;\r\n        }\r\n    }\r\n    function getLabelLineStatesModels(itemModel, labelLineName) {\r\n        labelLineName = (labelLineName || 'labelLine');\r\n        var statesModels = {\r\n            normal: itemModel.getModel(labelLineName)\r\n        };\r\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n            var stateName = SPECIAL_STATES[i];\r\n            statesModels[stateName] = itemModel.getModel([stateName, labelLineName]);\r\n        }\r\n        return statesModels;\r\n    }\n\n    function prepareLayoutList(input) {\r\n        var list = [];\r\n        for (var i = 0; i < input.length; i++) {\r\n            var rawItem = input[i];\r\n            if (rawItem.defaultAttr.ignore) {\r\n                continue;\r\n            }\r\n            var label = rawItem.label;\r\n            var transform = label.getComputedTransform();\r\n            var localRect = label.getBoundingRect();\r\n            var isAxisAligned = !transform || (transform[1] < 1e-5 && transform[2] < 1e-5);\r\n            var minMargin = label.style.margin || 0;\r\n            var globalRect = localRect.clone();\r\n            globalRect.applyTransform(transform);\r\n            globalRect.x -= minMargin / 2;\r\n            globalRect.y -= minMargin / 2;\r\n            globalRect.width += minMargin;\r\n            globalRect.height += minMargin;\r\n            var obb = isAxisAligned ? new OrientedBoundingRect(localRect, transform) : null;\r\n            list.push({\r\n                label: label,\r\n                labelLine: rawItem.labelLine,\r\n                rect: globalRect,\r\n                localRect: localRect,\r\n                obb: obb,\r\n                priority: rawItem.priority,\r\n                defaultAttr: rawItem.defaultAttr,\r\n                layoutOption: rawItem.computedLayoutOption,\r\n                axisAligned: isAxisAligned,\r\n                transform: transform\r\n            });\r\n        }\r\n        return list;\r\n    }\r\n    function shiftLayout(list, xyDim, sizeDim, minBound, maxBound, balanceShift) {\r\n        var len = list.length;\r\n        if (len < 2) {\r\n            return;\r\n        }\r\n        list.sort(function (a, b) {\r\n            return a.rect[xyDim] - b.rect[xyDim];\r\n        });\r\n        var lastPos = 0;\r\n        var delta;\r\n        var adjusted = false;\r\n        var totalShifts = 0;\r\n        for (var i = 0; i < len; i++) {\r\n            var item = list[i];\r\n            var rect = item.rect;\r\n            delta = rect[xyDim] - lastPos;\r\n            if (delta < 0) {\r\n                rect[xyDim] -= delta;\r\n                item.label[xyDim] -= delta;\r\n                adjusted = true;\r\n            }\r\n            var shift = Math.max(-delta, 0);\r\n            totalShifts += shift;\r\n            lastPos = rect[xyDim] + rect[sizeDim];\r\n        }\r\n        if (totalShifts > 0 && balanceShift) {\r\n            shiftList(-totalShifts / len, 0, len);\r\n        }\r\n        var first = list[0];\r\n        var last = list[len - 1];\r\n        var minGap;\r\n        var maxGap;\r\n        updateMinMaxGap();\r\n        minGap < 0 && squeezeGaps(-minGap, 0.8);\r\n        maxGap < 0 && squeezeGaps(maxGap, 0.8);\r\n        updateMinMaxGap();\r\n        takeBoundsGap(minGap, maxGap, 1);\r\n        takeBoundsGap(maxGap, minGap, -1);\r\n        updateMinMaxGap();\r\n        if (minGap < 0) {\r\n            squeezeWhenBailout(-minGap);\r\n        }\r\n        if (maxGap < 0) {\r\n            squeezeWhenBailout(maxGap);\r\n        }\r\n        function updateMinMaxGap() {\r\n            minGap = first.rect[xyDim] - minBound;\r\n            maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];\r\n        }\r\n        function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {\r\n            if (gapThisBound < 0) {\r\n                var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);\r\n                if (moveFromMaxGap > 0) {\r\n                    shiftList(moveFromMaxGap * moveDir, 0, len);\r\n                    var remained = moveFromMaxGap + gapThisBound;\r\n                    if (remained < 0) {\r\n                        squeezeGaps(-remained * moveDir, 1);\r\n                    }\r\n                }\r\n                else {\r\n                    squeezeGaps(-gapThisBound * moveDir, 1);\r\n                }\r\n            }\r\n        }\r\n        function shiftList(delta, start, end) {\r\n            if (delta !== 0) {\r\n                adjusted = true;\r\n            }\r\n            for (var i = start; i < end; i++) {\r\n                var item = list[i];\r\n                var rect = item.rect;\r\n                rect[xyDim] += delta;\r\n                item.label[xyDim] += delta;\r\n            }\r\n        }\r\n        function squeezeGaps(delta, maxSqeezePercent) {\r\n            var gaps = [];\r\n            var totalGaps = 0;\r\n            for (var i = 1; i < len; i++) {\r\n                var prevItemRect = list[i - 1].rect;\r\n                var gap = Math.max(list[i].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);\r\n                gaps.push(gap);\r\n                totalGaps += gap;\r\n            }\r\n            if (!totalGaps) {\r\n                return;\r\n            }\r\n            var squeezePercent = Math.min(Math.abs(delta) / totalGaps, maxSqeezePercent);\r\n            if (delta > 0) {\r\n                for (var i = 0; i < len - 1; i++) {\r\n                    var movement = gaps[i] * squeezePercent;\r\n                    shiftList(movement, 0, i + 1);\r\n                }\r\n            }\r\n            else {\r\n                for (var i = len - 1; i > 0; i--) {\r\n                    var movement = gaps[i - 1] * squeezePercent;\r\n                    shiftList(-movement, i, len);\r\n                }\r\n            }\r\n        }\r\n        function squeezeWhenBailout(delta) {\r\n            var dir = delta < 0 ? -1 : 1;\r\n            delta = Math.abs(delta);\r\n            var moveForEachLabel = Math.ceil(delta / (len - 1));\r\n            for (var i = 0; i < len - 1; i++) {\r\n                if (dir > 0) {\r\n                    shiftList(moveForEachLabel, 0, i + 1);\r\n                }\r\n                else {\r\n                    shiftList(-moveForEachLabel, len - i - 1, len);\r\n                }\r\n                delta -= moveForEachLabel;\r\n                if (delta <= 0) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        return adjusted;\r\n    }\r\n    function shiftLayoutOnX(list, leftBound, rightBound, balanceShift) {\r\n        return shiftLayout(list, 'x', 'width', leftBound, rightBound, balanceShift);\r\n    }\r\n    function shiftLayoutOnY(list, topBound, bottomBound, balanceShift) {\r\n        return shiftLayout(list, 'y', 'height', topBound, bottomBound, balanceShift);\r\n    }\r\n    function hideOverlap(labelList) {\r\n        var displayedLabels = [];\r\n        labelList.sort(function (a, b) {\r\n            return b.priority - a.priority;\r\n        });\r\n        var globalRect = new BoundingRect(0, 0, 0, 0);\r\n        for (var i = 0; i < labelList.length; i++) {\r\n            var labelItem = labelList[i];\r\n            var isAxisAligned = labelItem.axisAligned;\r\n            var localRect = labelItem.localRect;\r\n            var transform = labelItem.transform;\r\n            var label = labelItem.label;\r\n            var labelLine = labelItem.labelLine;\r\n            globalRect.copy(labelItem.rect);\r\n            globalRect.width -= 0.1;\r\n            globalRect.height -= 0.1;\r\n            globalRect.x += 0.05;\r\n            globalRect.y += 0.05;\r\n            var obb = labelItem.obb;\r\n            var overlapped = false;\r\n            for (var j = 0; j < displayedLabels.length; j++) {\r\n                var existsTextCfg = displayedLabels[j];\r\n                if (!globalRect.intersect(existsTextCfg.rect)) {\r\n                    continue;\r\n                }\r\n                if (isAxisAligned && existsTextCfg.axisAligned) {\r\n                    overlapped = true;\r\n                    break;\r\n                }\r\n                if (!existsTextCfg.obb) {\r\n                    existsTextCfg.obb = new OrientedBoundingRect(existsTextCfg.localRect, existsTextCfg.transform);\r\n                }\r\n                if (!obb) {\r\n                    obb = new OrientedBoundingRect(localRect, transform);\r\n                }\r\n                if (obb.intersect(existsTextCfg.obb)) {\r\n                    overlapped = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (overlapped) {\r\n                label.hide();\r\n                labelLine && labelLine.hide();\r\n            }\r\n            else {\r\n                label.attr('ignore', labelItem.defaultAttr.ignore);\r\n                labelLine && labelLine.attr('ignore', labelItem.defaultAttr.labelGuideIgnore);\r\n                displayedLabels.push(labelItem);\r\n            }\r\n        }\r\n    }\n\n    function cloneArr(points) {\r\n        if (points) {\r\n            var newPoints = [];\r\n            for (var i = 0; i < points.length; i++) {\r\n                newPoints.push(points[i].slice());\r\n            }\r\n            return newPoints;\r\n        }\r\n    }\r\n    function prepareLayoutCallbackParams(labelItem, hostEl) {\r\n        var labelAttr = labelItem.defaultAttr;\r\n        var label = labelItem.label;\r\n        var labelLine = hostEl && hostEl.getTextGuideLine();\r\n        return {\r\n            dataIndex: labelItem.dataIndex,\r\n            dataType: labelItem.dataType,\r\n            seriesIndex: labelItem.seriesModel.seriesIndex,\r\n            text: labelItem.label.style.text,\r\n            rect: labelItem.hostRect,\r\n            labelRect: labelAttr.rect,\r\n            align: label.style.align,\r\n            verticalAlign: label.style.verticalAlign,\r\n            labelLinePoints: cloneArr(labelLine && labelLine.shape.points)\r\n        };\r\n    }\r\n    var LABEL_OPTION_TO_STYLE_KEYS = ['align', 'verticalAlign', 'width', 'height', 'fontSize'];\r\n    var dummyTransformable = new Transformable();\r\n    var labelLayoutInnerStore = makeInner();\r\n    var labelLineAnimationStore = makeInner();\r\n    function extendWithKeys(target, source, keys) {\r\n        for (var i = 0; i < keys.length; i++) {\r\n            var key = keys[i];\r\n            if (source[key] != null) {\r\n                target[key] = source[key];\r\n            }\r\n        }\r\n    }\r\n    var LABEL_LAYOUT_PROPS = ['x', 'y', 'rotation'];\r\n    var LabelManager = (function () {\r\n        function LabelManager() {\r\n            this._labelList = [];\r\n            this._chartViewList = [];\r\n        }\r\n        LabelManager.prototype.clearLabels = function () {\r\n            this._labelList = [];\r\n            this._chartViewList = [];\r\n        };\r\n        LabelManager.prototype._addLabel = function (dataIndex, dataType, seriesModel, label, layoutOption) {\r\n            var labelStyle = label.style;\r\n            var hostEl = label.__hostTarget;\r\n            var textConfig = hostEl.textConfig || {};\r\n            var labelTransform = label.getComputedTransform();\r\n            var labelRect = label.getBoundingRect().plain();\r\n            BoundingRect.applyTransform(labelRect, labelRect, labelTransform);\r\n            if (labelTransform) {\r\n                dummyTransformable.setLocalTransform(labelTransform);\r\n            }\r\n            else {\r\n                dummyTransformable.x = dummyTransformable.y = dummyTransformable.rotation =\r\n                    dummyTransformable.originX = dummyTransformable.originY = 0;\r\n                dummyTransformable.scaleX = dummyTransformable.scaleY = 1;\r\n            }\r\n            var host = label.__hostTarget;\r\n            var hostRect;\r\n            if (host) {\r\n                hostRect = host.getBoundingRect().plain();\r\n                var transform = host.getComputedTransform();\r\n                BoundingRect.applyTransform(hostRect, hostRect, transform);\r\n            }\r\n            var labelGuide = hostRect && host.getTextGuideLine();\r\n            this._labelList.push({\r\n                label: label,\r\n                labelLine: labelGuide,\r\n                seriesModel: seriesModel,\r\n                dataIndex: dataIndex,\r\n                dataType: dataType,\r\n                layoutOption: layoutOption,\r\n                computedLayoutOption: null,\r\n                hostRect: hostRect,\r\n                priority: hostRect ? hostRect.width * hostRect.height : 0,\r\n                defaultAttr: {\r\n                    ignore: label.ignore,\r\n                    labelGuideIgnore: labelGuide && labelGuide.ignore,\r\n                    x: dummyTransformable.x,\r\n                    y: dummyTransformable.y,\r\n                    rotation: dummyTransformable.rotation,\r\n                    rect: labelRect,\r\n                    style: {\r\n                        x: labelStyle.x,\r\n                        y: labelStyle.y,\r\n                        align: labelStyle.align,\r\n                        verticalAlign: labelStyle.verticalAlign,\r\n                        width: labelStyle.width,\r\n                        height: labelStyle.height,\r\n                        fontSize: labelStyle.fontSize\r\n                    },\r\n                    cursor: label.cursor,\r\n                    attachedPos: textConfig.position,\r\n                    attachedRot: textConfig.rotation\r\n                }\r\n            });\r\n        };\r\n        LabelManager.prototype.addLabelsOfSeries = function (chartView) {\r\n            var _this = this;\r\n            this._chartViewList.push(chartView);\r\n            var seriesModel = chartView.__model;\r\n            var layoutOption = seriesModel.get('labelLayout');\r\n            if (!(isFunction(layoutOption) || keys(layoutOption).length)) {\r\n                return;\r\n            }\r\n            chartView.group.traverse(function (child) {\r\n                if (child.ignore) {\r\n                    return true;\r\n                }\r\n                var textEl = child.getTextContent();\r\n                var ecData = getECData(child);\r\n                var dataIndex = ecData.dataIndex;\r\n                if (textEl && dataIndex != null && !textEl.disableLabelLayout) {\r\n                    _this._addLabel(dataIndex, ecData.dataType, seriesModel, textEl, layoutOption);\r\n                }\r\n            });\r\n        };\r\n        LabelManager.prototype.updateLayoutConfig = function (api) {\r\n            var width = api.getWidth();\r\n            var height = api.getHeight();\r\n            function createDragHandler(el, labelLineModel) {\r\n                return function () {\r\n                    updateLabelLinePoints(el, labelLineModel);\r\n                };\r\n            }\r\n            for (var i = 0; i < this._labelList.length; i++) {\r\n                var labelItem = this._labelList[i];\r\n                var label = labelItem.label;\r\n                var hostEl = label.__hostTarget;\r\n                var defaultLabelAttr = labelItem.defaultAttr;\r\n                var layoutOption = void 0;\r\n                if (typeof labelItem.layoutOption === 'function') {\r\n                    layoutOption = labelItem.layoutOption(prepareLayoutCallbackParams(labelItem, hostEl));\r\n                }\r\n                else {\r\n                    layoutOption = labelItem.layoutOption;\r\n                }\r\n                layoutOption = layoutOption || {};\r\n                labelItem.computedLayoutOption = layoutOption;\r\n                var degreeToRadian = Math.PI / 180;\r\n                if (hostEl) {\r\n                    hostEl.setTextConfig({\r\n                        local: false,\r\n                        position: (layoutOption.x != null || layoutOption.y != null)\r\n                            ? null : defaultLabelAttr.attachedPos,\r\n                        rotation: layoutOption.rotate != null\r\n                            ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.attachedRot,\r\n                        offset: [layoutOption.dx || 0, layoutOption.dy || 0]\r\n                    });\r\n                }\r\n                var needsUpdateLabelLine = false;\r\n                if (layoutOption.x != null) {\r\n                    label.x = parsePercent$2(layoutOption.x, width);\r\n                    label.setStyle('x', 0);\r\n                    needsUpdateLabelLine = true;\r\n                }\r\n                else {\r\n                    label.x = defaultLabelAttr.x;\r\n                    label.setStyle('x', defaultLabelAttr.style.x);\r\n                }\r\n                if (layoutOption.y != null) {\r\n                    label.y = parsePercent$2(layoutOption.y, height);\r\n                    label.setStyle('y', 0);\r\n                    needsUpdateLabelLine = true;\r\n                }\r\n                else {\r\n                    label.y = defaultLabelAttr.y;\r\n                    label.setStyle('y', defaultLabelAttr.style.y);\r\n                }\r\n                if (layoutOption.labelLinePoints) {\r\n                    var guideLine = hostEl.getTextGuideLine();\r\n                    if (guideLine) {\r\n                        guideLine.setShape({ points: layoutOption.labelLinePoints });\r\n                        needsUpdateLabelLine = false;\r\n                    }\r\n                }\r\n                var labelLayoutStore = labelLayoutInnerStore(label);\r\n                labelLayoutStore.needsUpdateLabelLine = needsUpdateLabelLine;\r\n                label.rotation = layoutOption.rotate != null\r\n                    ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.rotation;\r\n                for (var k = 0; k < LABEL_OPTION_TO_STYLE_KEYS.length; k++) {\r\n                    var key = LABEL_OPTION_TO_STYLE_KEYS[k];\r\n                    label.setStyle(key, layoutOption[key] != null ? layoutOption[key] : defaultLabelAttr.style[key]);\r\n                }\r\n                if (layoutOption.draggable) {\r\n                    label.draggable = true;\r\n                    label.cursor = 'move';\r\n                    if (hostEl) {\r\n                        var data = labelItem.seriesModel.getData(labelItem.dataType);\r\n                        var itemModel = data.getItemModel(labelItem.dataIndex);\r\n                        label.on('drag', createDragHandler(hostEl, itemModel.getModel('labelLine')));\r\n                    }\r\n                }\r\n                else {\r\n                    label.off('drag');\r\n                    label.cursor = defaultLabelAttr.cursor;\r\n                }\r\n            }\r\n        };\r\n        LabelManager.prototype.layout = function (api) {\r\n            var width = api.getWidth();\r\n            var height = api.getHeight();\r\n            var labelList = prepareLayoutList(this._labelList);\r\n            var labelsNeedsAdjustOnX = filter(labelList, function (item) {\r\n                return item.layoutOption.moveOverlap === 'shiftX';\r\n            });\r\n            var labelsNeedsAdjustOnY = filter(labelList, function (item) {\r\n                return item.layoutOption.moveOverlap === 'shiftY';\r\n            });\r\n            shiftLayoutOnX(labelsNeedsAdjustOnX, 0, width);\r\n            shiftLayoutOnY(labelsNeedsAdjustOnY, 0, height);\r\n            var labelsNeedsHideOverlap = filter(labelList, function (item) {\r\n                return item.layoutOption.hideOverlap;\r\n            });\r\n            hideOverlap(labelsNeedsHideOverlap);\r\n        };\r\n        LabelManager.prototype.processLabelsOverall = function () {\r\n            var _this = this;\r\n            each(this._chartViewList, function (chartView) {\r\n                var seriesModel = chartView.__model;\r\n                var ignoreLabelLineUpdate = chartView.ignoreLabelLineUpdate;\r\n                var animationEnabled = seriesModel.isAnimationEnabled();\r\n                chartView.group.traverse(function (child) {\r\n                    if (child.ignore) {\r\n                        return true;\r\n                    }\r\n                    var needsUpdateLabelLine = !ignoreLabelLineUpdate;\r\n                    var label = child.getTextContent();\r\n                    if (!needsUpdateLabelLine && label) {\r\n                        needsUpdateLabelLine = labelLayoutInnerStore(label).needsUpdateLabelLine;\r\n                    }\r\n                    if (needsUpdateLabelLine) {\r\n                        _this._updateLabelLine(child, seriesModel);\r\n                    }\r\n                    if (animationEnabled) {\r\n                        _this._animateLabels(child, seriesModel);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LabelManager.prototype._updateLabelLine = function (el, seriesModel) {\r\n            var textEl = el.getTextContent();\r\n            var ecData = getECData(el);\r\n            var dataIndex = ecData.dataIndex;\r\n            if (textEl && dataIndex != null) {\r\n                var data = seriesModel.getData(ecData.dataType);\r\n                var itemModel = data.getItemModel(dataIndex);\r\n                var defaultStyle = {};\r\n                var visualStyle = data.getItemVisual(dataIndex, 'style');\r\n                var visualType = data.getVisual('drawType');\r\n                defaultStyle.stroke = visualStyle[visualType];\r\n                var labelLineModel = itemModel.getModel('labelLine');\r\n                setLabelLineStyle(el, getLabelLineStatesModels(itemModel), defaultStyle);\r\n                updateLabelLinePoints(el, labelLineModel);\r\n            }\r\n        };\r\n        LabelManager.prototype._animateLabels = function (el, seriesModel) {\r\n            var textEl = el.getTextContent();\r\n            var guideLine = el.getTextGuideLine();\r\n            if (textEl && !textEl.ignore && !textEl.invisible && !el.disableLabelAnimation) {\r\n                var layoutStore = labelLayoutInnerStore(textEl);\r\n                var oldLayout = layoutStore.oldLayout;\r\n                var newProps = {\r\n                    x: textEl.x,\r\n                    y: textEl.y,\r\n                    rotation: textEl.rotation\r\n                };\r\n                if (!oldLayout) {\r\n                    textEl.attr(newProps);\r\n                    var oldOpacity = retrieve2(textEl.style.opacity, 1);\r\n                    textEl.style.opacity = 0;\r\n                    initProps(textEl, {\r\n                        style: { opacity: oldOpacity }\r\n                    }, seriesModel);\r\n                }\r\n                else {\r\n                    textEl.attr(oldLayout);\r\n                    var prevStates = el.prevStates;\r\n                    if (prevStates) {\r\n                        if (indexOf(prevStates, 'select') >= 0) {\r\n                            textEl.attr(layoutStore.oldLayoutSelect);\r\n                        }\r\n                        if (indexOf(prevStates, 'emphasis') >= 0) {\r\n                            textEl.attr(layoutStore.oldLayoutEmphasis);\r\n                        }\r\n                    }\r\n                    updateProps(textEl, newProps, seriesModel);\r\n                }\r\n                layoutStore.oldLayout = newProps;\r\n                if (textEl.states.select) {\r\n                    var layoutSelect = layoutStore.oldLayoutSelect = {};\r\n                    extendWithKeys(layoutSelect, newProps, LABEL_LAYOUT_PROPS);\r\n                    extendWithKeys(layoutSelect, textEl.states.select, LABEL_LAYOUT_PROPS);\r\n                }\r\n                if (textEl.states.emphasis) {\r\n                    var layoutEmphasis = layoutStore.oldLayoutEmphasis = {};\r\n                    extendWithKeys(layoutEmphasis, newProps, LABEL_LAYOUT_PROPS);\r\n                    extendWithKeys(layoutEmphasis, textEl.states.emphasis, LABEL_LAYOUT_PROPS);\r\n                }\r\n            }\r\n            if (guideLine && !guideLine.ignore && !guideLine.invisible) {\r\n                var layoutStore = labelLineAnimationStore(guideLine);\r\n                var oldLayout = layoutStore.oldLayout;\r\n                var newLayout = { points: guideLine.shape.points };\r\n                if (!oldLayout) {\r\n                    guideLine.setShape(newLayout);\r\n                    guideLine.style.strokePercent = 0;\r\n                    initProps(guideLine, {\r\n                        style: { strokePercent: 1 }\r\n                    }, seriesModel);\r\n                }\r\n                else {\r\n                    guideLine.attr({ shape: oldLayout });\r\n                    updateProps(guideLine, {\r\n                        shape: newLayout\r\n                    }, seriesModel);\r\n                }\r\n                layoutStore.oldLayout = newLayout;\r\n            }\r\n        };\r\n        return LabelManager;\r\n    }());\n\n    function createLegacyDataSelectAction(seriesType, ecRegisterAction) {\r\n        function getSeriesIndices(ecModel, payload) {\r\n            var seriesIndices = [];\r\n            ecModel.eachComponent({\r\n                mainType: 'series', subType: seriesType, query: payload\r\n            }, function (seriesModel) {\r\n                seriesIndices.push(seriesModel.seriesIndex);\r\n            });\r\n            return seriesIndices;\r\n        }\r\n        each([\r\n            [seriesType + 'ToggleSelect', 'toggleSelect'],\r\n            [seriesType + 'Select', 'select'],\r\n            [seriesType + 'UnSelect', 'unselect']\r\n        ], function (eventsMap) {\r\n            ecRegisterAction(eventsMap[0], function (payload, ecModel, api) {\r\n                payload = extend({}, payload);\r\n                if (__DEV__) {\r\n                    deprecateReplaceLog(payload.type, eventsMap[1]);\r\n                }\r\n                api.dispatchAction(extend(payload, {\r\n                    type: eventsMap[1],\r\n                    seriesIndex: getSeriesIndices(ecModel, payload)\r\n                }));\r\n            });\r\n        });\r\n    }\r\n    function handleSeriesLegacySelectEvents(type, eventPostfix, ecIns, payload) {\r\n        var legacyEventName = type + eventPostfix;\r\n        if (!ecIns.isSilent(legacyEventName)) {\r\n            if (__DEV__) {\r\n                deprecateLog(\"event \" + legacyEventName + \" is deprecated.\");\r\n            }\r\n            var ecModel = ecIns.getModel();\r\n            ecModel.eachComponent({\r\n                mainType: 'series', subType: 'pie'\r\n            }, function (seriesModel) {\r\n                var seriesIndex = seriesModel.seriesIndex;\r\n                var selected = payload.selected;\r\n                for (var i = 0; i < selected.length; i++) {\r\n                    if (selected[i].seriesIndex === seriesIndex) {\r\n                        var data = seriesModel.getData();\r\n                        var dataIndex = queryDataIndex(data, payload.fromActionPayload);\r\n                        ecIns.trigger(legacyEventName, {\r\n                            type: legacyEventName,\r\n                            seriesId: seriesModel.id,\r\n                            name: isArray(dataIndex) ? data.getName(dataIndex[0]) : data.getName(dataIndex),\r\n                            selected: extend({}, seriesModel.option.selectedMap)\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function handleLegacySelectEvents(messageCenter, ecIns) {\r\n        messageCenter.on('selectchanged', function (params) {\r\n            if (params.isFromClick) {\r\n                handleSeriesLegacySelectEvents('map', 'selectchanged', ecIns, params);\r\n                handleSeriesLegacySelectEvents('pie', 'selectchanged', ecIns, params);\r\n            }\r\n            else if (params.fromAction === 'select') {\r\n                handleSeriesLegacySelectEvents('map', 'selected', ecIns, params);\r\n                handleSeriesLegacySelectEvents('pie', 'selected', ecIns, params);\r\n            }\r\n            else if (params.fromAction === 'unselect') {\r\n                handleSeriesLegacySelectEvents('map', 'unselected', ecIns, params);\r\n                handleSeriesLegacySelectEvents('pie', 'unselected', ecIns, params);\r\n            }\r\n        });\r\n    }\n\n    function createLinearGradient(ctx, obj, rect) {\r\n        var x = obj.x == null ? 0 : obj.x;\r\n        var x2 = obj.x2 == null ? 1 : obj.x2;\r\n        var y = obj.y == null ? 0 : obj.y;\r\n        var y2 = obj.y2 == null ? 0 : obj.y2;\r\n        if (!obj.global) {\r\n            x = x * rect.width + rect.x;\r\n            x2 = x2 * rect.width + rect.x;\r\n            y = y * rect.height + rect.y;\r\n            y2 = y2 * rect.height + rect.y;\r\n        }\r\n        x = isNaN(x) ? 0 : x;\r\n        x2 = isNaN(x2) ? 1 : x2;\r\n        y = isNaN(y) ? 0 : y;\r\n        y2 = isNaN(y2) ? 0 : y2;\r\n        var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\r\n        return canvasGradient;\r\n    }\r\n    function createRadialGradient(ctx, obj, rect) {\r\n        var width = rect.width;\r\n        var height = rect.height;\r\n        var min = Math.min(width, height);\r\n        var x = obj.x == null ? 0.5 : obj.x;\r\n        var y = obj.y == null ? 0.5 : obj.y;\r\n        var r = obj.r == null ? 0.5 : obj.r;\r\n        if (!obj.global) {\r\n            x = x * width + rect.x;\r\n            y = y * height + rect.y;\r\n            r = r * min;\r\n        }\r\n        var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\r\n        return canvasGradient;\r\n    }\r\n    function getCanvasGradient(ctx, obj, rect) {\r\n        var canvasGradient = obj.type === 'radial'\r\n            ? createRadialGradient(ctx, obj, rect)\r\n            : createLinearGradient(ctx, obj, rect);\r\n        var colorStops = obj.colorStops;\r\n        for (var i = 0; i < colorStops.length; i++) {\r\n            canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\r\n        }\r\n        return canvasGradient;\r\n    }\n\n    var pathProxyForDraw = new PathProxy(true);\r\n    function styleHasStroke(style) {\r\n        var stroke = style.stroke;\r\n        return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\r\n    }\r\n    function styleHasFill(style) {\r\n        var fill = style.fill;\r\n        return fill != null && fill !== 'none';\r\n    }\r\n    function doFillPath(ctx, style) {\r\n        if (style.fillOpacity != null && style.fillOpacity !== 1) {\r\n            var originalGlobalAlpha = ctx.globalAlpha;\r\n            ctx.globalAlpha = style.fillOpacity * style.opacity;\r\n            ctx.fill();\r\n            ctx.globalAlpha = originalGlobalAlpha;\r\n        }\r\n        else {\r\n            ctx.fill();\r\n        }\r\n    }\r\n    function doStrokePath(ctx, style) {\r\n        if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\r\n            var originalGlobalAlpha = ctx.globalAlpha;\r\n            ctx.globalAlpha = style.strokeOpacity * style.opacity;\r\n            ctx.stroke();\r\n            ctx.globalAlpha = originalGlobalAlpha;\r\n        }\r\n        else {\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    function createCanvasPattern(ctx, pattern, el) {\r\n        var image = createOrUpdateImage(pattern.image, pattern.__image, el);\r\n        if (isImageReady(image)) {\r\n            return ctx.createPattern(image, pattern.repeat || 'repeat');\r\n        }\r\n    }\r\n    function brushPath(ctx, el, style, inBatch) {\r\n        var hasStroke = styleHasStroke(style);\r\n        var hasFill = styleHasFill(style);\r\n        var strokePercent = style.strokePercent;\r\n        var strokePart = strokePercent < 1;\r\n        var firstDraw = !el.path;\r\n        if ((!el.silent || strokePart) && firstDraw) {\r\n            el.createPathProxy();\r\n        }\r\n        var path = el.path || pathProxyForDraw;\r\n        if (!inBatch) {\r\n            var fill = style.fill;\r\n            var stroke = style.stroke;\r\n            var hasFillGradient = hasFill && !!fill.colorStops;\r\n            var hasStrokeGradient = hasStroke && !!stroke.colorStops;\r\n            var hasFillPattern = hasFill && !!fill.image;\r\n            var hasStrokePattern = hasStroke && !!stroke.image;\r\n            var fillGradient = void 0;\r\n            var strokeGradient = void 0;\r\n            var fillPattern = void 0;\r\n            var strokePattern = void 0;\r\n            var rect = void 0;\r\n            if (hasFillGradient || hasStrokeGradient) {\r\n                rect = el.getBoundingRect();\r\n            }\r\n            if (hasFillGradient) {\r\n                fillGradient = el.__dirty\r\n                    ? getCanvasGradient(ctx, fill, rect)\r\n                    : el.__canvasFillGradient;\r\n                el.__canvasFillGradient = fillGradient;\r\n            }\r\n            if (hasStrokeGradient) {\r\n                strokeGradient = el.__dirty\r\n                    ? getCanvasGradient(ctx, stroke, rect)\r\n                    : el.__canvasStrokeGradient;\r\n                el.__canvasStrokeGradient = strokeGradient;\r\n            }\r\n            if (hasFillPattern) {\r\n                fillPattern = (el.__dirty || !el.__canvasFillPattern)\r\n                    ? createCanvasPattern(ctx, fill, el)\r\n                    : el.__canvasFillPattern;\r\n                el.__canvasFillPattern = fillPattern;\r\n            }\r\n            if (hasStrokePattern) {\r\n                strokePattern = (el.__dirty || !el.__canvasStrokePattern)\r\n                    ? createCanvasPattern(ctx, stroke, el)\r\n                    : el.__canvasStrokePattern;\r\n                el.__canvasStrokePattern = fillPattern;\r\n            }\r\n            if (hasFillGradient) {\r\n                ctx.fillStyle = fillGradient;\r\n            }\r\n            else if (hasFillPattern) {\r\n                if (fillPattern) {\r\n                    ctx.fillStyle = fillPattern;\r\n                }\r\n                else {\r\n                    hasFill = false;\r\n                }\r\n            }\r\n            if (hasStrokeGradient) {\r\n                ctx.strokeStyle = strokeGradient;\r\n            }\r\n            else if (hasStrokePattern) {\r\n                if (strokePattern) {\r\n                    ctx.strokeStyle = strokePattern;\r\n                }\r\n                else {\r\n                    hasStroke = false;\r\n                }\r\n            }\r\n        }\r\n        var lineDash = style.lineDash;\r\n        var lineDashOffset = style.lineDashOffset;\r\n        var ctxLineDash = !!ctx.setLineDash;\r\n        var scale = el.getGlobalScale();\r\n        path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\r\n        if (lineDash) {\r\n            var lineScale_1 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\r\n            if (lineScale_1 && lineScale_1 !== 1) {\r\n                lineDash = map(lineDash, function (rawVal) {\r\n                    return rawVal / lineScale_1;\r\n                });\r\n                lineDashOffset /= lineScale_1;\r\n            }\r\n        }\r\n        var needsRebuild = true;\r\n        if (firstDraw || (el.__dirty & Path.SHAPE_CHANGED_BIT)\r\n            || (lineDash && !ctxLineDash && hasStroke)) {\r\n            path.setDPR(ctx.dpr);\r\n            if (strokePart) {\r\n                path.setContext(null);\r\n            }\r\n            else {\r\n                path.setContext(ctx);\r\n                needsRebuild = false;\r\n            }\r\n            path.reset();\r\n            if (lineDash && !ctxLineDash) {\r\n                path.setLineDash(lineDash);\r\n                path.setLineDashOffset(lineDashOffset);\r\n            }\r\n            el.buildPath(path, el.shape, inBatch);\r\n            path.toStatic();\r\n            el.pathUpdated();\r\n        }\r\n        if (needsRebuild) {\r\n            path.rebuildPath(ctx, strokePart ? strokePercent : 1);\r\n        }\r\n        if (lineDash && ctxLineDash) {\r\n            ctx.setLineDash(lineDash);\r\n            ctx.lineDashOffset = lineDashOffset;\r\n        }\r\n        if (!inBatch) {\r\n            if (style.strokeFirst) {\r\n                if (hasStroke) {\r\n                    doStrokePath(ctx, style);\r\n                }\r\n                if (hasFill) {\r\n                    doFillPath(ctx, style);\r\n                }\r\n            }\r\n            else {\r\n                if (hasFill) {\r\n                    doFillPath(ctx, style);\r\n                }\r\n                if (hasStroke) {\r\n                    doStrokePath(ctx, style);\r\n                }\r\n            }\r\n        }\r\n        if (lineDash && ctxLineDash) {\r\n            ctx.setLineDash([]);\r\n        }\r\n    }\r\n    function brushImage(ctx, el, style) {\r\n        var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\r\n        if (!image || !isImageReady(image)) {\r\n            return;\r\n        }\r\n        var x = style.x || 0;\r\n        var y = style.y || 0;\r\n        var width = style.width;\r\n        var height = style.height;\r\n        var aspect = image.width / image.height;\r\n        if (width == null && height != null) {\r\n            width = height * aspect;\r\n        }\r\n        else if (height == null && width != null) {\r\n            height = width / aspect;\r\n        }\r\n        else if (width == null && height == null) {\r\n            width = image.width;\r\n            height = image.height;\r\n        }\r\n        if (style.sWidth && style.sHeight) {\r\n            var sx = style.sx || 0;\r\n            var sy = style.sy || 0;\r\n            ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\r\n        }\r\n        else if (style.sx && style.sy) {\r\n            var sx = style.sx;\r\n            var sy = style.sy;\r\n            var sWidth = width - sx;\r\n            var sHeight = height - sy;\r\n            ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\r\n        }\r\n        else {\r\n            ctx.drawImage(image, x, y, width, height);\r\n        }\r\n    }\r\n    function brushText(ctx, el, style) {\r\n        var text = style.text;\r\n        text != null && (text += '');\r\n        if (text) {\r\n            ctx.font = style.font || DEFAULT_FONT;\r\n            ctx.textAlign = style.textAlign;\r\n            ctx.textBaseline = style.textBaseline;\r\n            if (ctx.setLineDash) {\r\n                var lineDash = style.lineDash;\r\n                var lineDashOffset = style.lineDashOffset;\r\n                if (lineDash) {\r\n                    var lineScale_2 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\r\n                    if (lineScale_2 && lineScale_2 !== 1) {\r\n                        lineDash = map(lineDash, function (rawVal) {\r\n                            return rawVal / lineScale_2;\r\n                        });\r\n                        lineDashOffset /= lineScale_2;\r\n                    }\r\n                }\r\n                ctx.setLineDash(lineDash || []);\r\n                ctx.lineDashOffset = lineDashOffset;\r\n            }\r\n            if (style.strokeFirst) {\r\n                if (styleHasStroke(style)) {\r\n                    ctx.strokeText(text, style.x, style.y);\r\n                }\r\n                if (styleHasFill(style)) {\r\n                    ctx.fillText(text, style.x, style.y);\r\n                }\r\n            }\r\n            else {\r\n                if (styleHasFill(style)) {\r\n                    ctx.fillText(text, style.x, style.y);\r\n                }\r\n                if (styleHasStroke(style)) {\r\n                    ctx.strokeText(text, style.x, style.y);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    var SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\r\n    var STROKE_PROPS = [\r\n        ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]\r\n    ];\r\n    function bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\r\n        var styleChanged = false;\r\n        if (!forceSetAll) {\r\n            prevStyle = prevStyle || {};\r\n            if (style === prevStyle) {\r\n                return false;\r\n            }\r\n        }\r\n        if (forceSetAll || style.opacity !== prevStyle.opacity) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.globalAlpha = style.opacity == null ? DEFAULT_COMMON_STYLE.opacity : style.opacity;\r\n        }\r\n        if (forceSetAll || style.blend !== prevStyle.blend) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\r\n        }\r\n        for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\r\n            var propName = SHADOW_NUMBER_PROPS[i];\r\n            if (forceSetAll || style[propName] !== prevStyle[propName]) {\r\n                if (!styleChanged) {\r\n                    flushPathDrawn(ctx, scope);\r\n                    styleChanged = true;\r\n                }\r\n                ctx[propName] = ctx.dpr * (style[propName] || 0);\r\n            }\r\n        }\r\n        if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\r\n        }\r\n        return styleChanged;\r\n    }\r\n    function bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\r\n        var style = getStyle(el, scope.inHover);\r\n        var prevStyle = forceSetAll\r\n            ? null\r\n            : (prevEl && getStyle(prevEl, scope.inHover) || {});\r\n        if (style === prevStyle) {\r\n            return false;\r\n        }\r\n        var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\r\n        if (forceSetAll || style.fill !== prevStyle.fill) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.fillStyle = style.fill;\r\n        }\r\n        if (forceSetAll || style.stroke !== prevStyle.stroke) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.strokeStyle = style.stroke;\r\n        }\r\n        if (forceSetAll || style.opacity !== prevStyle.opacity) {\r\n            if (!styleChanged) {\r\n                flushPathDrawn(ctx, scope);\r\n                styleChanged = true;\r\n            }\r\n            ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\r\n        }\r\n        if (el.hasStroke()) {\r\n            var lineWidth = style.lineWidth;\r\n            var newLineWidth = lineWidth / ((style.strokeNoScale && el && el.getLineScale) ? el.getLineScale() : 1);\r\n            if (ctx.lineWidth !== newLineWidth) {\r\n                if (!styleChanged) {\r\n                    flushPathDrawn(ctx, scope);\r\n                    styleChanged = true;\r\n                }\r\n                ctx.lineWidth = newLineWidth;\r\n            }\r\n        }\r\n        for (var i = 0; i < STROKE_PROPS.length; i++) {\r\n            var prop = STROKE_PROPS[i];\r\n            var propName = prop[0];\r\n            if (forceSetAll || style[propName] !== prevStyle[propName]) {\r\n                if (!styleChanged) {\r\n                    flushPathDrawn(ctx, scope);\r\n                    styleChanged = true;\r\n                }\r\n                ctx[propName] = style[propName] || prop[1];\r\n            }\r\n        }\r\n        return styleChanged;\r\n    }\r\n    function bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\r\n        return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\r\n    }\r\n    function setContextTransform(ctx, el) {\r\n        var m = el.transform;\r\n        var dpr = ctx.dpr || 1;\r\n        if (m) {\r\n            ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\r\n        }\r\n        else {\r\n            ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\r\n        }\r\n    }\r\n    var tmpRect = new BoundingRect(0, 0, 0, 0);\r\n    var viewRect = new BoundingRect(0, 0, 0, 0);\r\n    function isDisplayableCulled(el, width, height) {\r\n        tmpRect.copy(el.getBoundingRect());\r\n        if (el.transform) {\r\n            tmpRect.applyTransform(el.transform);\r\n        }\r\n        viewRect.width = width;\r\n        viewRect.height = height;\r\n        return !tmpRect.intersect(viewRect);\r\n    }\r\n    function isClipPathChanged(clipPaths, prevClipPaths) {\r\n        if (clipPaths === prevClipPaths || (!clipPaths && !prevClipPaths)) {\r\n            return false;\r\n        }\r\n        if (!clipPaths || !prevClipPaths || (clipPaths.length !== prevClipPaths.length)) {\r\n            return true;\r\n        }\r\n        for (var i = 0; i < clipPaths.length; i++) {\r\n            if (clipPaths[i] !== prevClipPaths[i]) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function updateClipStatus(clipPaths, ctx, scope) {\r\n        var allClipped = false;\r\n        for (var i = 0; i < clipPaths.length; i++) {\r\n            var clipPath = clipPaths[i];\r\n            allClipped = allClipped || clipPath.isZeroArea();\r\n            setContextTransform(ctx, clipPath);\r\n            ctx.beginPath();\r\n            clipPath.buildPath(ctx, clipPath.shape);\r\n            ctx.clip();\r\n        }\r\n        scope.allClipped = allClipped;\r\n    }\r\n    function isTransformChanged(m0, m1) {\r\n        if (m0 && m1) {\r\n            return m0[0] !== m1[0]\r\n                || m0[1] !== m1[1]\r\n                || m0[2] !== m1[2]\r\n                || m0[3] !== m1[3]\r\n                || m0[4] !== m1[4]\r\n                || m0[5] !== m1[5];\r\n        }\r\n        else if (!m0 && !m1) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    var DRAW_TYPE_PATH = 1;\r\n    var DRAW_TYPE_IMAGE = 2;\r\n    var DRAW_TYPE_TEXT = 3;\r\n    var DRAW_TYPE_INCREMENTAL = 4;\r\n    function canPathBatch(style) {\r\n        var hasFill = styleHasFill(style);\r\n        var hasStroke = styleHasStroke(style);\r\n        return !(style.lineDash\r\n            || !(+hasFill ^ +hasStroke)\r\n            || (hasFill && typeof style.fill !== 'string')\r\n            || (hasStroke && typeof style.stroke !== 'string')\r\n            || style.strokePercent < 1\r\n            || style.strokeOpacity < 1\r\n            || style.fillOpacity < 1);\r\n    }\r\n    function flushPathDrawn(ctx, scope) {\r\n        scope.batchFill && ctx.fill();\r\n        scope.batchStroke && ctx.stroke();\r\n        scope.batchFill = '';\r\n        scope.batchStroke = '';\r\n    }\r\n    function getStyle(el, inHover) {\r\n        return inHover ? (el.__hoverStyle || el.style) : el.style;\r\n    }\r\n    function brush(ctx, el, scope, isLast) {\r\n        var m = el.transform;\r\n        if (el.invisible\r\n            || el.style.opacity === 0\r\n            || (el.culling && isDisplayableCulled(el, scope.viewWidth, scope.viewHeight))\r\n            || (m && !m[0] && !m[3])) {\r\n            el.__dirty = 0;\r\n            return;\r\n        }\r\n        var clipPaths = el.__clipPaths;\r\n        var prevElClipPaths = scope.prevElClipPaths;\r\n        var forceSetTransform = false;\r\n        var forceSetStyle = false;\r\n        if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\r\n            if (prevElClipPaths && prevElClipPaths.length) {\r\n                flushPathDrawn(ctx, scope);\r\n                ctx.restore();\r\n                forceSetStyle = forceSetTransform = true;\r\n                scope.prevElClipPaths = null;\r\n                scope.allClipped = false;\r\n                scope.prevEl = null;\r\n            }\r\n            if (clipPaths && clipPaths.length) {\r\n                flushPathDrawn(ctx, scope);\r\n                ctx.save();\r\n                updateClipStatus(clipPaths, ctx, scope);\r\n                forceSetTransform = true;\r\n            }\r\n            scope.prevElClipPaths = clipPaths;\r\n        }\r\n        if (scope.allClipped) {\r\n            return;\r\n        }\r\n        el.beforeBrush && el.beforeBrush();\r\n        el.innerBeforeBrush();\r\n        var prevEl = scope.prevEl;\r\n        if (!prevEl) {\r\n            forceSetStyle = forceSetTransform = true;\r\n        }\r\n        var canBatchPath = el instanceof Path\r\n            && el.autoBatch\r\n            && canPathBatch(el.style);\r\n        if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\r\n            flushPathDrawn(ctx, scope);\r\n            setContextTransform(ctx, el);\r\n        }\r\n        else if (!canBatchPath) {\r\n            flushPathDrawn(ctx, scope);\r\n        }\r\n        var style = getStyle(el, scope.inHover);\r\n        if (el instanceof Path) {\r\n            if (scope.lastDrawType !== DRAW_TYPE_PATH) {\r\n                forceSetStyle = true;\r\n                scope.lastDrawType = DRAW_TYPE_PATH;\r\n            }\r\n            bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\r\n            if (!canBatchPath || (!scope.batchFill && !scope.batchStroke)) {\r\n                ctx.beginPath();\r\n            }\r\n            brushPath(ctx, el, style, canBatchPath);\r\n            if (canBatchPath) {\r\n                scope.batchFill = style.fill || '';\r\n                scope.batchStroke = style.stroke || '';\r\n            }\r\n        }\r\n        else {\r\n            if (el instanceof TSpan) {\r\n                if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\r\n                    forceSetStyle = true;\r\n                    scope.lastDrawType = DRAW_TYPE_TEXT;\r\n                }\r\n                bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\r\n                brushText(ctx, el, style);\r\n            }\r\n            else if (el instanceof ZRImage) {\r\n                if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\r\n                    forceSetStyle = true;\r\n                    scope.lastDrawType = DRAW_TYPE_IMAGE;\r\n                }\r\n                bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\r\n                brushImage(ctx, el, style);\r\n            }\r\n            else if (el instanceof IncrementalDisplayble) {\r\n                if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\r\n                    forceSetStyle = true;\r\n                    scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\r\n                }\r\n                brushIncremental(ctx, el, scope);\r\n            }\r\n        }\r\n        if (canBatchPath && isLast) {\r\n            flushPathDrawn(ctx, scope);\r\n        }\r\n        el.innerAfterBrush();\r\n        el.afterBrush && el.afterBrush();\r\n        scope.prevEl = el;\r\n        el.__dirty = 0;\r\n    }\r\n    function brushIncremental(ctx, el, scope) {\r\n        var displayables = el.getDisplayables();\r\n        var temporalDisplayables = el.getTemporalDisplayables();\r\n        ctx.save();\r\n        var innerScope = {\r\n            prevElClipPaths: null,\r\n            prevEl: null,\r\n            allClipped: false,\r\n            viewWidth: scope.viewWidth,\r\n            viewHeight: scope.viewHeight,\r\n            inHover: scope.inHover\r\n        };\r\n        var i;\r\n        var len;\r\n        for (i = el.getCursor(), len = displayables.length; i < len; i++) {\r\n            var displayable = displayables[i];\r\n            displayable.beforeBrush && displayable.beforeBrush();\r\n            displayable.innerBeforeBrush();\r\n            brush(ctx, displayable, innerScope, i === len - 1);\r\n            displayable.innerAfterBrush();\r\n            displayable.afterBrush && displayable.afterBrush();\r\n            innerScope.prevEl = displayable;\r\n        }\r\n        for (var i_1 = 0, len_1 = temporalDisplayables.length - 1; i_1 < len_1; i_1++) {\r\n            var displayable = temporalDisplayables[i_1];\r\n            displayable.beforeBrush && displayable.beforeBrush();\r\n            displayable.innerBeforeBrush();\r\n            brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\r\n            displayable.innerAfterBrush();\r\n            displayable.afterBrush && displayable.afterBrush();\r\n            innerScope.prevEl = displayable;\r\n        }\r\n        el.clearTemporalDisplayables();\r\n        el.notClear = true;\r\n        ctx.restore();\r\n    }\n\n    function returnFalse() {\r\n        return false;\r\n    }\r\n    function createDom(id, painter, dpr) {\r\n        var newDom = createCanvas();\r\n        var width = painter.getWidth();\r\n        var height = painter.getHeight();\r\n        var newDomStyle = newDom.style;\r\n        if (newDomStyle) {\r\n            newDomStyle.position = 'absolute';\r\n            newDomStyle.left = '0';\r\n            newDomStyle.top = '0';\r\n            newDomStyle.width = width + 'px';\r\n            newDomStyle.height = height + 'px';\r\n            newDom.setAttribute('data-zr-dom-id', id);\r\n        }\r\n        newDom.width = width * dpr;\r\n        newDom.height = height * dpr;\r\n        return newDom;\r\n    }\r\n    var Layer = (function (_super) {\r\n        __extends(Layer, _super);\r\n        function Layer(id, painter, dpr) {\r\n            var _this = _super.call(this) || this;\r\n            _this.motionBlur = false;\r\n            _this.lastFrameAlpha = 0.7;\r\n            _this.dpr = 1;\r\n            _this.virtual = false;\r\n            _this.config = {};\r\n            _this.incremental = false;\r\n            _this.zlevel = 0;\r\n            _this.__dirty = true;\r\n            _this.__used = false;\r\n            _this.__drawIndex = 0;\r\n            _this.__startIndex = 0;\r\n            _this.__endIndex = 0;\r\n            var dom;\r\n            dpr = dpr || devicePixelRatio;\r\n            if (typeof id === 'string') {\r\n                dom = createDom(id, painter, dpr);\r\n            }\r\n            else if (isObject(id)) {\r\n                dom = id;\r\n                id = dom.id;\r\n            }\r\n            _this.id = id;\r\n            _this.dom = dom;\r\n            var domStyle = dom.style;\r\n            if (domStyle) {\r\n                dom.onselectstart = returnFalse;\r\n                domStyle.webkitUserSelect = 'none';\r\n                domStyle.userSelect = 'none';\r\n                domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\r\n                domStyle['-webkit-touch-callout'] = 'none';\r\n                domStyle.padding = '0';\r\n                domStyle.margin = '0';\r\n                domStyle.borderWidth = '0';\r\n            }\r\n            _this.domBack = null;\r\n            _this.ctxBack = null;\r\n            _this.painter = painter;\r\n            _this.config = null;\r\n            _this.dpr = dpr;\r\n            return _this;\r\n        }\r\n        Layer.prototype.getElementCount = function () {\r\n            return this.__endIndex - this.__startIndex;\r\n        };\r\n        Layer.prototype.initContext = function () {\r\n            this.ctx = this.dom.getContext('2d');\r\n            this.ctx.dpr = this.dpr;\r\n        };\r\n        Layer.prototype.createBackBuffer = function () {\r\n            var dpr = this.dpr;\r\n            this.domBack = createDom('back-' + this.id, this.painter, dpr);\r\n            this.ctxBack = this.domBack.getContext('2d');\r\n            if (dpr !== 1) {\r\n                this.ctxBack.scale(dpr, dpr);\r\n            }\r\n        };\r\n        Layer.prototype.resize = function (width, height) {\r\n            var dpr = this.dpr;\r\n            var dom = this.dom;\r\n            var domStyle = dom.style;\r\n            var domBack = this.domBack;\r\n            if (domStyle) {\r\n                domStyle.width = width + 'px';\r\n                domStyle.height = height + 'px';\r\n            }\r\n            dom.width = width * dpr;\r\n            dom.height = height * dpr;\r\n            if (domBack) {\r\n                domBack.width = width * dpr;\r\n                domBack.height = height * dpr;\r\n                if (dpr !== 1) {\r\n                    this.ctxBack.scale(dpr, dpr);\r\n                }\r\n            }\r\n        };\r\n        Layer.prototype.clear = function (clearAll, clearColor) {\r\n            var dom = this.dom;\r\n            var ctx = this.ctx;\r\n            var width = dom.width;\r\n            var height = dom.height;\r\n            clearColor = clearColor || this.clearColor;\r\n            var haveMotionBLur = this.motionBlur && !clearAll;\r\n            var lastFrameAlpha = this.lastFrameAlpha;\r\n            var dpr = this.dpr;\r\n            var self = this;\r\n            if (haveMotionBLur) {\r\n                if (!this.domBack) {\r\n                    this.createBackBuffer();\r\n                }\r\n                this.ctxBack.globalCompositeOperation = 'copy';\r\n                this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\r\n            }\r\n            ctx.clearRect(0, 0, width, height);\r\n            if (clearColor && clearColor !== 'transparent') {\r\n                var clearColorGradientOrPattern = void 0;\r\n                if (isGradientObject(clearColor)) {\r\n                    clearColorGradientOrPattern = clearColor.__canvasGradient\r\n                        || getCanvasGradient(ctx, clearColor, {\r\n                            x: 0,\r\n                            y: 0,\r\n                            width: width,\r\n                            height: height\r\n                        });\r\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\r\n                }\r\n                else if (isPatternObject(clearColor)) {\r\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\r\n                        dirty: function () {\r\n                            self.__painter.refresh();\r\n                        }\r\n                    });\r\n                }\r\n                ctx.save();\r\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\r\n                ctx.fillRect(0, 0, width, height);\r\n                ctx.restore();\r\n            }\r\n            if (haveMotionBLur) {\r\n                var domBack = this.domBack;\r\n                ctx.save();\r\n                ctx.globalAlpha = lastFrameAlpha;\r\n                ctx.drawImage(domBack, 0, 0, width, height);\r\n                ctx.restore();\r\n            }\r\n        };\r\n        return Layer;\r\n    }(Eventful));\n\n    var HOVER_LAYER_ZLEVEL = 1e5;\r\n    var CANVAS_ZLEVEL = 314159;\r\n    var EL_AFTER_INCREMENTAL_INC = 0.01;\r\n    var INCREMENTAL_INC = 0.001;\r\n    function parseInt10(val) {\r\n        return parseInt(val, 10);\r\n    }\r\n    function isLayerValid(layer) {\r\n        if (!layer) {\r\n            return false;\r\n        }\r\n        if (layer.__builtin__) {\r\n            return true;\r\n        }\r\n        if (typeof (layer.resize) !== 'function'\r\n            || typeof (layer.refresh) !== 'function') {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    function createRoot(width, height) {\r\n        var domRoot = document.createElement('div');\r\n        domRoot.style.cssText = [\r\n            'position:relative',\r\n            'width:' + width + 'px',\r\n            'height:' + height + 'px',\r\n            'padding:0',\r\n            'margin:0',\r\n            'border-width:0'\r\n        ].join(';') + ';';\r\n        return domRoot;\r\n    }\r\n    var CanvasPainter = (function () {\r\n        function CanvasPainter(root, storage, opts, id) {\r\n            this.type = 'canvas';\r\n            this._zlevelList = [];\r\n            this._layers = {};\r\n            this._layerConfig = {};\r\n            this._needsManuallyCompositing = false;\r\n            this.type = 'canvas';\r\n            var singleCanvas = !root.nodeName\r\n                || root.nodeName.toUpperCase() === 'CANVAS';\r\n            this._opts = opts = extend({}, opts || {});\r\n            this.dpr = opts.devicePixelRatio || devicePixelRatio;\r\n            this._singleCanvas = singleCanvas;\r\n            this.root = root;\r\n            var rootStyle = root.style;\r\n            if (rootStyle) {\r\n                rootStyle.webkitTapHighlightColor = 'transparent';\r\n                rootStyle.webkitUserSelect = 'none';\r\n                rootStyle.userSelect = 'none';\r\n                rootStyle['-webkit-touch-callout'] = 'none';\r\n                root.innerHTML = '';\r\n            }\r\n            this.storage = storage;\r\n            var zlevelList = this._zlevelList;\r\n            var layers = this._layers;\r\n            if (!singleCanvas) {\r\n                this._width = this._getSize(0);\r\n                this._height = this._getSize(1);\r\n                var domRoot = this._domRoot = createRoot(this._width, this._height);\r\n                root.appendChild(domRoot);\r\n            }\r\n            else {\r\n                var rootCanvas = root;\r\n                var width = rootCanvas.width;\r\n                var height = rootCanvas.height;\r\n                if (opts.width != null) {\r\n                    width = opts.width;\r\n                }\r\n                if (opts.height != null) {\r\n                    height = opts.height;\r\n                }\r\n                this.dpr = opts.devicePixelRatio || 1;\r\n                rootCanvas.width = width * this.dpr;\r\n                rootCanvas.height = height * this.dpr;\r\n                this._width = width;\r\n                this._height = height;\r\n                var mainLayer = new Layer(rootCanvas, this, this.dpr);\r\n                mainLayer.__builtin__ = true;\r\n                mainLayer.initContext();\r\n                layers[CANVAS_ZLEVEL] = mainLayer;\r\n                mainLayer.zlevel = CANVAS_ZLEVEL;\r\n                zlevelList.push(CANVAS_ZLEVEL);\r\n                this._domRoot = root;\r\n            }\r\n        }\r\n        CanvasPainter.prototype.getType = function () {\r\n            return 'canvas';\r\n        };\r\n        CanvasPainter.prototype.isSingleCanvas = function () {\r\n            return this._singleCanvas;\r\n        };\r\n        CanvasPainter.prototype.getViewportRoot = function () {\r\n            return this._domRoot;\r\n        };\r\n        CanvasPainter.prototype.getViewportRootOffset = function () {\r\n            var viewportRoot = this.getViewportRoot();\r\n            if (viewportRoot) {\r\n                return {\r\n                    offsetLeft: viewportRoot.offsetLeft || 0,\r\n                    offsetTop: viewportRoot.offsetTop || 0\r\n                };\r\n            }\r\n        };\r\n        CanvasPainter.prototype.refresh = function (paintAll) {\r\n            var list = this.storage.getDisplayList(true);\r\n            var zlevelList = this._zlevelList;\r\n            this._redrawId = Math.random();\r\n            this._paintList(list, paintAll, this._redrawId);\r\n            for (var i = 0; i < zlevelList.length; i++) {\r\n                var z = zlevelList[i];\r\n                var layer = this._layers[z];\r\n                if (!layer.__builtin__ && layer.refresh) {\r\n                    var clearColor = i === 0 ? this._backgroundColor : null;\r\n                    layer.refresh(clearColor);\r\n                }\r\n            }\r\n            return this;\r\n        };\r\n        CanvasPainter.prototype.refreshHover = function () {\r\n            this._paintHoverList(this.storage.getDisplayList(false));\r\n        };\r\n        CanvasPainter.prototype._paintHoverList = function (list) {\r\n            var len = list.length;\r\n            var hoverLayer = this._hoverlayer;\r\n            hoverLayer && hoverLayer.clear();\r\n            if (!len) {\r\n                return;\r\n            }\r\n            var scope = {\r\n                inHover: true,\r\n                viewWidth: this._width,\r\n                viewHeight: this._height\r\n            };\r\n            var ctx;\r\n            for (var i = 0; i < len; i++) {\r\n                var el = list[i];\r\n                if (el.__inHover) {\r\n                    if (!hoverLayer) {\r\n                        hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\r\n                    }\r\n                    if (!ctx) {\r\n                        ctx = hoverLayer.ctx;\r\n                        ctx.save();\r\n                    }\r\n                    brush(ctx, el, scope, i === len - 1);\r\n                }\r\n            }\r\n            if (ctx) {\r\n                ctx.restore();\r\n            }\r\n        };\r\n        CanvasPainter.prototype.getHoverLayer = function () {\r\n            return this.getLayer(HOVER_LAYER_ZLEVEL);\r\n        };\r\n        CanvasPainter.prototype._paintList = function (list, paintAll, redrawId) {\r\n            if (this._redrawId !== redrawId) {\r\n                return;\r\n            }\r\n            paintAll = paintAll || false;\r\n            this._updateLayerStatus(list);\r\n            var _a = this._doPaintList(list, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\r\n            if (this._needsManuallyCompositing) {\r\n                this._compositeManually();\r\n            }\r\n            if (needsRefreshHover) {\r\n                this._paintHoverList(list);\r\n            }\r\n            if (!finished) {\r\n                var self_1 = this;\r\n                requestAnimationFrame$1(function () {\r\n                    self_1._paintList(list, paintAll, redrawId);\r\n                });\r\n            }\r\n        };\r\n        CanvasPainter.prototype._compositeManually = function () {\r\n            var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\r\n            var width = this._domRoot.width;\r\n            var height = this._domRoot.height;\r\n            ctx.clearRect(0, 0, width, height);\r\n            this.eachBuiltinLayer(function (layer) {\r\n                if (layer.virtual) {\r\n                    ctx.drawImage(layer.dom, 0, 0, width, height);\r\n                }\r\n            });\r\n        };\r\n        CanvasPainter.prototype._doPaintList = function (list, paintAll) {\r\n            var layerList = [];\r\n            for (var zi = 0; zi < this._zlevelList.length; zi++) {\r\n                var zlevel = this._zlevelList[zi];\r\n                var layer = this._layers[zlevel];\r\n                if (layer.__builtin__\r\n                    && layer !== this._hoverlayer\r\n                    && (layer.__dirty || paintAll)) {\r\n                    layerList.push(layer);\r\n                }\r\n            }\r\n            var finished = true;\r\n            var needsRefreshHover = false;\r\n            for (var k = 0; k < layerList.length; k++) {\r\n                var layer = layerList[k];\r\n                var ctx = layer.ctx;\r\n                var scope = {\r\n                    inHover: false,\r\n                    allClipped: false,\r\n                    prevEl: null,\r\n                    viewWidth: this._width,\r\n                    viewHeight: this._height\r\n                };\r\n                ctx.save();\r\n                var start = paintAll ? layer.__startIndex : layer.__drawIndex;\r\n                var useTimer = !paintAll && layer.incremental && Date.now;\r\n                var startTime = useTimer && Date.now();\r\n                var clearColor = layer.zlevel === this._zlevelList[0]\r\n                    ? this._backgroundColor : null;\r\n                if (layer.__startIndex === layer.__endIndex) {\r\n                    layer.clear(false, clearColor);\r\n                }\r\n                else if (start === layer.__startIndex) {\r\n                    var firstEl = list[start];\r\n                    if (!firstEl.incremental || !firstEl.notClear || paintAll) {\r\n                        layer.clear(false, clearColor);\r\n                    }\r\n                }\r\n                if (start === -1) {\r\n                    console.error('For some unknown reason. drawIndex is -1');\r\n                    start = layer.__startIndex;\r\n                }\r\n                var i = void 0;\r\n                for (i = start; i < layer.__endIndex; i++) {\r\n                    var el = list[i];\r\n                    if (el.__inHover) {\r\n                        needsRefreshHover = true;\r\n                    }\r\n                    brush(ctx, el, scope, i === layer.__endIndex - 1);\r\n                    if (useTimer) {\r\n                        var dTime = Date.now() - startTime;\r\n                        if (dTime > 15) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                layer.__drawIndex = i;\r\n                if (layer.__drawIndex < layer.__endIndex) {\r\n                    finished = false;\r\n                }\r\n                if (scope.prevElClipPaths) {\r\n                    ctx.restore();\r\n                }\r\n                ctx.restore();\r\n            }\r\n            if (env.wxa) {\r\n                each(this._layers, function (layer) {\r\n                    if (layer && layer.ctx && layer.ctx.draw) {\r\n                        layer.ctx.draw();\r\n                    }\r\n                });\r\n            }\r\n            return {\r\n                finished: finished,\r\n                needsRefreshHover: needsRefreshHover\r\n            };\r\n        };\r\n        CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\r\n            if (this._singleCanvas && !this._needsManuallyCompositing) {\r\n                zlevel = CANVAS_ZLEVEL;\r\n            }\r\n            var layer = this._layers[zlevel];\r\n            if (!layer) {\r\n                layer = new Layer('zr_' + zlevel, this, this.dpr);\r\n                layer.zlevel = zlevel;\r\n                layer.__builtin__ = true;\r\n                if (this._layerConfig[zlevel]) {\r\n                    merge(layer, this._layerConfig[zlevel], true);\r\n                }\r\n                else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\r\n                    merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\r\n                }\r\n                if (virtual) {\r\n                    layer.virtual = virtual;\r\n                }\r\n                this.insertLayer(zlevel, layer);\r\n                layer.initContext();\r\n            }\r\n            return layer;\r\n        };\r\n        CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\r\n            var layersMap = this._layers;\r\n            var zlevelList = this._zlevelList;\r\n            var len = zlevelList.length;\r\n            var domRoot = this._domRoot;\r\n            var prevLayer = null;\r\n            var i = -1;\r\n            if (layersMap[zlevel]) {\r\n                logError('ZLevel ' + zlevel + ' has been used already');\r\n                return;\r\n            }\r\n            if (!isLayerValid(layer)) {\r\n                logError('Layer of zlevel ' + zlevel + ' is not valid');\r\n                return;\r\n            }\r\n            if (len > 0 && zlevel > zlevelList[0]) {\r\n                for (i = 0; i < len - 1; i++) {\r\n                    if (zlevelList[i] < zlevel\r\n                        && zlevelList[i + 1] > zlevel) {\r\n                        break;\r\n                    }\r\n                }\r\n                prevLayer = layersMap[zlevelList[i]];\r\n            }\r\n            zlevelList.splice(i + 1, 0, zlevel);\r\n            layersMap[zlevel] = layer;\r\n            if (!layer.virtual) {\r\n                if (prevLayer) {\r\n                    var prevDom = prevLayer.dom;\r\n                    if (prevDom.nextSibling) {\r\n                        domRoot.insertBefore(layer.dom, prevDom.nextSibling);\r\n                    }\r\n                    else {\r\n                        domRoot.appendChild(layer.dom);\r\n                    }\r\n                }\r\n                else {\r\n                    if (domRoot.firstChild) {\r\n                        domRoot.insertBefore(layer.dom, domRoot.firstChild);\r\n                    }\r\n                    else {\r\n                        domRoot.appendChild(layer.dom);\r\n                    }\r\n                }\r\n            }\r\n            layer.__painter = this;\r\n        };\r\n        CanvasPainter.prototype.eachLayer = function (cb, context) {\r\n            var zlevelList = this._zlevelList;\r\n            for (var i = 0; i < zlevelList.length; i++) {\r\n                var z = zlevelList[i];\r\n                cb.call(context, this._layers[z], z);\r\n            }\r\n        };\r\n        CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\r\n            var zlevelList = this._zlevelList;\r\n            for (var i = 0; i < zlevelList.length; i++) {\r\n                var z = zlevelList[i];\r\n                var layer = this._layers[z];\r\n                if (layer.__builtin__) {\r\n                    cb.call(context, layer, z);\r\n                }\r\n            }\r\n        };\r\n        CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\r\n            var zlevelList = this._zlevelList;\r\n            for (var i = 0; i < zlevelList.length; i++) {\r\n                var z = zlevelList[i];\r\n                var layer = this._layers[z];\r\n                if (!layer.__builtin__) {\r\n                    cb.call(context, layer, z);\r\n                }\r\n            }\r\n        };\r\n        CanvasPainter.prototype.getLayers = function () {\r\n            return this._layers;\r\n        };\r\n        CanvasPainter.prototype._updateLayerStatus = function (list) {\r\n            this.eachBuiltinLayer(function (layer, z) {\r\n                layer.__dirty = layer.__used = false;\r\n            });\r\n            function updatePrevLayer(idx) {\r\n                if (prevLayer) {\r\n                    if (prevLayer.__endIndex !== idx) {\r\n                        prevLayer.__dirty = true;\r\n                    }\r\n                    prevLayer.__endIndex = idx;\r\n                }\r\n            }\r\n            if (this._singleCanvas) {\r\n                for (var i_1 = 1; i_1 < list.length; i_1++) {\r\n                    var el = list[i_1];\r\n                    if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\r\n                        this._needsManuallyCompositing = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            var prevLayer = null;\r\n            var incrementalLayerCount = 0;\r\n            var prevZlevel;\r\n            var i;\r\n            for (i = 0; i < list.length; i++) {\r\n                var el = list[i];\r\n                var zlevel = el.zlevel;\r\n                var layer = void 0;\r\n                if (prevZlevel !== zlevel) {\r\n                    prevZlevel = zlevel;\r\n                    incrementalLayerCount = 0;\r\n                }\r\n                if (el.incremental) {\r\n                    layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\r\n                    layer.incremental = true;\r\n                    incrementalLayerCount = 1;\r\n                }\r\n                else {\r\n                    layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\r\n                }\r\n                if (!layer.__builtin__) {\r\n                    logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\r\n                }\r\n                if (layer !== prevLayer) {\r\n                    layer.__used = true;\r\n                    if (layer.__startIndex !== i) {\r\n                        layer.__dirty = true;\r\n                    }\r\n                    layer.__startIndex = i;\r\n                    if (!layer.incremental) {\r\n                        layer.__drawIndex = i;\r\n                    }\r\n                    else {\r\n                        layer.__drawIndex = -1;\r\n                    }\r\n                    updatePrevLayer(i);\r\n                    prevLayer = layer;\r\n                }\r\n                if ((el.__dirty & Element.REDARAW_BIT) && !el.__inHover) {\r\n                    layer.__dirty = true;\r\n                    if (layer.incremental && layer.__drawIndex < 0) {\r\n                        layer.__drawIndex = i;\r\n                    }\r\n                }\r\n            }\r\n            updatePrevLayer(i);\r\n            this.eachBuiltinLayer(function (layer, z) {\r\n                if (!layer.__used && layer.getElementCount() > 0) {\r\n                    layer.__dirty = true;\r\n                    layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\r\n                }\r\n                if (layer.__dirty && layer.__drawIndex < 0) {\r\n                    layer.__drawIndex = layer.__startIndex;\r\n                }\r\n            });\r\n        };\r\n        CanvasPainter.prototype.clear = function () {\r\n            this.eachBuiltinLayer(this._clearLayer);\r\n            return this;\r\n        };\r\n        CanvasPainter.prototype._clearLayer = function (layer) {\r\n            layer.clear();\r\n        };\r\n        CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\r\n            this._backgroundColor = backgroundColor;\r\n        };\r\n        CanvasPainter.prototype.configLayer = function (zlevel, config) {\r\n            if (config) {\r\n                var layerConfig = this._layerConfig;\r\n                if (!layerConfig[zlevel]) {\r\n                    layerConfig[zlevel] = config;\r\n                }\r\n                else {\r\n                    merge(layerConfig[zlevel], config, true);\r\n                }\r\n                for (var i = 0; i < this._zlevelList.length; i++) {\r\n                    var _zlevel = this._zlevelList[i];\r\n                    if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\r\n                        var layer = this._layers[_zlevel];\r\n                        merge(layer, layerConfig[zlevel], true);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        CanvasPainter.prototype.delLayer = function (zlevel) {\r\n            var layers = this._layers;\r\n            var zlevelList = this._zlevelList;\r\n            var layer = layers[zlevel];\r\n            if (!layer) {\r\n                return;\r\n            }\r\n            layer.dom.parentNode.removeChild(layer.dom);\r\n            delete layers[zlevel];\r\n            zlevelList.splice(indexOf(zlevelList, zlevel), 1);\r\n        };\r\n        CanvasPainter.prototype.resize = function (width, height) {\r\n            if (!this._domRoot.style) {\r\n                if (width == null || height == null) {\r\n                    return;\r\n                }\r\n                this._width = width;\r\n                this._height = height;\r\n                this.getLayer(CANVAS_ZLEVEL).resize(width, height);\r\n            }\r\n            else {\r\n                var domRoot = this._domRoot;\r\n                domRoot.style.display = 'none';\r\n                var opts = this._opts;\r\n                width != null && (opts.width = width);\r\n                height != null && (opts.height = height);\r\n                width = this._getSize(0);\r\n                height = this._getSize(1);\r\n                domRoot.style.display = '';\r\n                if (this._width !== width || height !== this._height) {\r\n                    domRoot.style.width = width + 'px';\r\n                    domRoot.style.height = height + 'px';\r\n                    for (var id in this._layers) {\r\n                        if (this._layers.hasOwnProperty(id)) {\r\n                            this._layers[id].resize(width, height);\r\n                        }\r\n                    }\r\n                    this.refresh(true);\r\n                }\r\n                this._width = width;\r\n                this._height = height;\r\n            }\r\n            return this;\r\n        };\r\n        CanvasPainter.prototype.clearLayer = function (zlevel) {\r\n            var layer = this._layers[zlevel];\r\n            if (layer) {\r\n                layer.clear();\r\n            }\r\n        };\r\n        CanvasPainter.prototype.dispose = function () {\r\n            this.root.innerHTML = '';\r\n            this.root =\r\n                this.storage =\r\n                    this._domRoot =\r\n                        this._layers = null;\r\n        };\r\n        CanvasPainter.prototype.getRenderedCanvas = function (opts) {\r\n            opts = opts || {};\r\n            if (this._singleCanvas && !this._compositeManually) {\r\n                return this._layers[CANVAS_ZLEVEL].dom;\r\n            }\r\n            var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\r\n            var ctx = imageLayer.ctx;\r\n            imageLayer.initContext();\r\n            imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\r\n            if (opts.pixelRatio <= this.dpr) {\r\n                this.refresh();\r\n                var width_1 = imageLayer.dom.width;\r\n                var height_1 = imageLayer.dom.height;\r\n                var ctx_1 = imageLayer.ctx;\r\n                this.eachLayer(function (layer) {\r\n                    if (layer.__builtin__) {\r\n                        ctx_1.drawImage(layer.dom, 0, 0, width_1, height_1);\r\n                    }\r\n                    else if (layer.renderToCanvas) {\r\n                        imageLayer.ctx.save();\r\n                        layer.renderToCanvas(imageLayer.ctx);\r\n                        imageLayer.ctx.restore();\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                var scope = {\r\n                    inHover: false,\r\n                    viewWidth: this._width,\r\n                    viewHeight: this._height\r\n                };\r\n                var displayList = this.storage.getDisplayList(true);\r\n                for (var i = 0, len = displayList.length; i < len; i++) {\r\n                    var el = displayList[i];\r\n                    brush(ctx, el, scope, i === len - 1);\r\n                }\r\n            }\r\n            return imageLayer.dom;\r\n        };\r\n        CanvasPainter.prototype.getWidth = function () {\r\n            return this._width;\r\n        };\r\n        CanvasPainter.prototype.getHeight = function () {\r\n            return this._height;\r\n        };\r\n        CanvasPainter.prototype._getSize = function (whIdx) {\r\n            var opts = this._opts;\r\n            var wh = ['width', 'height'][whIdx];\r\n            var cwh = ['clientWidth', 'clientHeight'][whIdx];\r\n            var plt = ['paddingLeft', 'paddingTop'][whIdx];\r\n            var prb = ['paddingRight', 'paddingBottom'][whIdx];\r\n            if (opts[wh] != null && opts[wh] !== 'auto') {\r\n                return parseFloat(opts[wh]);\r\n            }\r\n            var root = this.root;\r\n            var stl = document.defaultView.getComputedStyle(root);\r\n            return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\r\n                - (parseInt10(stl[plt]) || 0)\r\n                - (parseInt10(stl[prb]) || 0)) | 0;\r\n        };\r\n        CanvasPainter.prototype.pathToImage = function (path, dpr) {\r\n            dpr = dpr || this.dpr;\r\n            var canvas = document.createElement('canvas');\r\n            var ctx = canvas.getContext('2d');\r\n            var rect = path.getBoundingRect();\r\n            var style = path.style;\r\n            var shadowBlurSize = style.shadowBlur * dpr;\r\n            var shadowOffsetX = style.shadowOffsetX * dpr;\r\n            var shadowOffsetY = style.shadowOffsetY * dpr;\r\n            var lineWidth = path.hasStroke() ? style.lineWidth : 0;\r\n            var leftMargin = Math.max(lineWidth / 2, -shadowOffsetX + shadowBlurSize);\r\n            var rightMargin = Math.max(lineWidth / 2, shadowOffsetX + shadowBlurSize);\r\n            var topMargin = Math.max(lineWidth / 2, -shadowOffsetY + shadowBlurSize);\r\n            var bottomMargin = Math.max(lineWidth / 2, shadowOffsetY + shadowBlurSize);\r\n            var width = rect.width + leftMargin + rightMargin;\r\n            var height = rect.height + topMargin + bottomMargin;\r\n            canvas.width = width * dpr;\r\n            canvas.height = height * dpr;\r\n            ctx.scale(dpr, dpr);\r\n            ctx.clearRect(0, 0, width, height);\r\n            ctx.dpr = dpr;\r\n            var pathTransform = {\r\n                x: path.x,\r\n                y: path.y,\r\n                scaleX: path.scaleX,\r\n                scaleY: path.scaleY,\r\n                rotation: path.rotation,\r\n                originX: path.originX,\r\n                originY: path.originY\r\n            };\r\n            path.x = leftMargin - rect.x;\r\n            path.y = topMargin - rect.y;\r\n            path.rotation = 0;\r\n            path.scaleX = 1;\r\n            path.scaleY = 1;\r\n            path.updateTransform();\r\n            if (path) {\r\n                brush(ctx, path, {\r\n                    inHover: false,\r\n                    viewWidth: this._width,\r\n                    viewHeight: this._height\r\n                }, true);\r\n            }\r\n            var imgShape = new ZRImage({\r\n                style: {\r\n                    x: 0,\r\n                    y: 0,\r\n                    image: canvas\r\n                }\r\n            });\r\n            extend(path, pathTransform);\r\n            return imgShape;\r\n        };\r\n        return CanvasPainter;\r\n    }());\n\n    registerPainter('canvas', CanvasPainter);\n\n    var assert$1 = assert;\r\n    var each$3 = each;\r\n    var isFunction$1 = isFunction;\r\n    var isObject$2 = isObject;\r\n    var version$1 = '5.0.0-alpha.2';\r\n    var dependencies = {\r\n        zrender: '5.0.0-alpha.2'\r\n    };\r\n    var TEST_FRAME_REMAIN_TIME = 1;\r\n    var PRIORITY_PROCESSOR_SERIES_FILTER = 800;\r\n    var PRIORITY_PROCESSOR_DATASTACK = 900;\r\n    var PRIORITY_PROCESSOR_FILTER = 1000;\r\n    var PRIORITY_PROCESSOR_DEFAULT = 2000;\r\n    var PRIORITY_PROCESSOR_STATISTIC = 5000;\r\n    var PRIORITY_VISUAL_LAYOUT = 1000;\r\n    var PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\r\n    var PRIORITY_VISUAL_GLOBAL = 2000;\r\n    var PRIORITY_VISUAL_CHART = 3000;\r\n    var PRIORITY_VISUAL_POST_CHART_LAYOUT = 3500;\r\n    var PRIORITY_VISUAL_COMPONENT = 4000;\r\n    var PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500;\r\n    var PRIORITY_VISUAL_BRUSH = 5000;\r\n    var PRIORITY = {\r\n        PROCESSOR: {\r\n            FILTER: PRIORITY_PROCESSOR_FILTER,\r\n            SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\r\n            STATISTIC: PRIORITY_PROCESSOR_STATISTIC\r\n        },\r\n        VISUAL: {\r\n            LAYOUT: PRIORITY_VISUAL_LAYOUT,\r\n            PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\r\n            GLOBAL: PRIORITY_VISUAL_GLOBAL,\r\n            CHART: PRIORITY_VISUAL_CHART,\r\n            POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\r\n            COMPONENT: PRIORITY_VISUAL_COMPONENT,\r\n            BRUSH: PRIORITY_VISUAL_BRUSH,\r\n            CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM\r\n        }\r\n    };\r\n    var IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\r\n    var OPTION_UPDATED_KEY = '__optionUpdated';\r\n    var STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\r\n    var ACTION_REG = /^[a-zA-Z0-9_]+$/;\r\n    var CONNECT_STATUS_KEY = '__connectUpdateStatus';\r\n    var CONNECT_STATUS_PENDING = 0;\r\n    var CONNECT_STATUS_UPDATING = 1;\r\n    var CONNECT_STATUS_UPDATED = 2;\r\n    function createRegisterEventWithLowercaseECharts(method) {\r\n        return function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            if (this.isDisposed()) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            return toLowercaseNameAndCallEventful(this, method, args);\r\n        };\r\n    }\r\n    function createRegisterEventWithLowercaseMessageCenter(method) {\r\n        return function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return toLowercaseNameAndCallEventful(this, method, args);\r\n        };\r\n    }\r\n    function toLowercaseNameAndCallEventful(host, method, args) {\r\n        args[0] = args[0] && args[0].toLowerCase();\r\n        return Eventful.prototype[method].apply(host, args);\r\n    }\r\n    var MessageCenter = (function (_super) {\r\n        __extends(MessageCenter, _super);\r\n        function MessageCenter() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return MessageCenter;\r\n    }(Eventful));\r\n    var messageCenterProto = MessageCenter.prototype;\r\n    messageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\r\n    messageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off');\r\n    var prepare;\r\n    var prepareView;\r\n    var updateDirectly;\r\n    var updateMethods;\r\n    var doConvertPixel;\r\n    var updateStreamModes;\r\n    var doDispatchAction;\r\n    var flushPendingActions;\r\n    var triggerUpdatedEvent;\r\n    var bindRenderedEvent;\r\n    var bindMouseEvent;\r\n    var clearColorPalette;\r\n    var render;\r\n    var renderComponents;\r\n    var renderSeries;\r\n    var performPostUpdateFuncs;\r\n    var createExtensionAPI;\r\n    var enableConnect;\r\n    var markStatusToUpdate;\r\n    var applyChangedStates;\r\n    var ECharts = (function (_super) {\r\n        __extends(ECharts, _super);\r\n        function ECharts(dom, theme, opts) {\r\n            var _this = _super.call(this, new ECEventProcessor()) || this;\r\n            _this._chartsViews = [];\r\n            _this._chartsMap = {};\r\n            _this._componentsViews = [];\r\n            _this._componentsMap = {};\r\n            _this._pendingActions = [];\r\n            opts = opts || {};\r\n            if (typeof theme === 'string') {\r\n                theme = themeStorage[theme];\r\n            }\r\n            _this._dom = dom;\r\n            var defaultRenderer = 'canvas';\r\n            if (__DEV__) {\r\n                defaultRenderer = (typeof window === 'undefined' ? global : window).__ECHARTS__DEFAULT__RENDERER__ || defaultRenderer;\r\n            }\r\n            var zr = _this._zr = init(dom, {\r\n                renderer: opts.renderer || defaultRenderer,\r\n                devicePixelRatio: opts.devicePixelRatio,\r\n                width: opts.width,\r\n                height: opts.height\r\n            });\r\n            _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\r\n            theme = clone(theme);\r\n            theme && backwardCompat(theme, true);\r\n            _this._theme = theme;\r\n            _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\r\n            _this._coordSysMgr = new CoordinateSystemManager();\r\n            var api = _this._api = createExtensionAPI(_this);\r\n            function prioritySortFunc(a, b) {\r\n                return a.__prio - b.__prio;\r\n            }\r\n            sort(visualFuncs, prioritySortFunc);\r\n            sort(dataProcessorFuncs, prioritySortFunc);\r\n            _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\r\n            _this._messageCenter = new MessageCenter();\r\n            _this._labelManager = new LabelManager();\r\n            _this._initEvents();\r\n            _this.resize = bind(_this.resize, _this);\r\n            zr.animation.on('frame', _this._onframe, _this);\r\n            bindRenderedEvent(zr, _this);\r\n            bindMouseEvent(zr, _this);\r\n            setAsPrimitive(_this);\r\n            return _this;\r\n        }\r\n        ECharts.prototype._onframe = function () {\r\n            if (this._disposed) {\r\n                return;\r\n            }\r\n            applyChangedStates(this);\r\n            var scheduler = this._scheduler;\r\n            if (this[OPTION_UPDATED_KEY]) {\r\n                var silent = this[OPTION_UPDATED_KEY].silent;\r\n                this[IN_MAIN_PROCESS_KEY] = true;\r\n                prepare(this);\r\n                updateMethods.update.call(this);\r\n                this[IN_MAIN_PROCESS_KEY] = false;\r\n                this[OPTION_UPDATED_KEY] = false;\r\n                flushPendingActions.call(this, silent);\r\n                triggerUpdatedEvent.call(this, silent);\r\n            }\r\n            else if (scheduler.unfinished) {\r\n                var remainTime = TEST_FRAME_REMAIN_TIME;\r\n                var ecModel = this._model;\r\n                var api = this._api;\r\n                scheduler.unfinished = false;\r\n                do {\r\n                    var startTime = +new Date();\r\n                    scheduler.performSeriesTasks(ecModel);\r\n                    scheduler.performDataProcessorTasks(ecModel);\r\n                    updateStreamModes(this, ecModel);\r\n                    scheduler.performVisualTasks(ecModel);\r\n                    renderSeries(this, this._model, api, 'remain');\r\n                    remainTime -= (+new Date() - startTime);\r\n                } while (remainTime > 0 && scheduler.unfinished);\r\n                if (!scheduler.unfinished) {\r\n                    this._zr.flush();\r\n                }\r\n            }\r\n        };\r\n        ECharts.prototype.getDom = function () {\r\n            return this._dom;\r\n        };\r\n        ECharts.prototype.getId = function () {\r\n            return this.id;\r\n        };\r\n        ECharts.prototype.getZr = function () {\r\n            return this._zr;\r\n        };\r\n        ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\r\n            if (__DEV__) {\r\n                assert$1(!this[IN_MAIN_PROCESS_KEY], '`setOption` should not be called during main process.');\r\n            }\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            var silent;\r\n            var replaceMerge;\r\n            if (isObject$2(notMerge)) {\r\n                lazyUpdate = notMerge.lazyUpdate;\r\n                silent = notMerge.silent;\r\n                replaceMerge = notMerge.replaceMerge;\r\n                notMerge = notMerge.notMerge;\r\n            }\r\n            this[IN_MAIN_PROCESS_KEY] = true;\r\n            if (!this._model || notMerge) {\r\n                var optionManager = new OptionManager(this._api);\r\n                var theme = this._theme;\r\n                var ecModel = this._model = new GlobalModel();\r\n                ecModel.scheduler = this._scheduler;\r\n                ecModel.init(null, null, null, theme, this._locale, optionManager);\r\n            }\r\n            this._model.setOption(option, { replaceMerge: replaceMerge }, optionPreprocessorFuncs);\r\n            if (lazyUpdate) {\r\n                this[OPTION_UPDATED_KEY] = { silent: silent };\r\n                this[IN_MAIN_PROCESS_KEY] = false;\r\n            }\r\n            else {\r\n                prepare(this);\r\n                updateMethods.update.call(this);\r\n                this._zr.flush();\r\n                this[OPTION_UPDATED_KEY] = false;\r\n                this[IN_MAIN_PROCESS_KEY] = false;\r\n                flushPendingActions.call(this, silent);\r\n                triggerUpdatedEvent.call(this, silent);\r\n            }\r\n        };\r\n        ECharts.prototype.setTheme = function () {\r\n            console.error('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\r\n        };\r\n        ECharts.prototype.getModel = function () {\r\n            return this._model;\r\n        };\r\n        ECharts.prototype.getOption = function () {\r\n            return this._model && this._model.getOption();\r\n        };\r\n        ECharts.prototype.getWidth = function () {\r\n            return this._zr.getWidth();\r\n        };\r\n        ECharts.prototype.getHeight = function () {\r\n            return this._zr.getHeight();\r\n        };\r\n        ECharts.prototype.getDevicePixelRatio = function () {\r\n            return this._zr.painter.dpr || window.devicePixelRatio || 1;\r\n        };\r\n        ECharts.prototype.getRenderedCanvas = function (opts) {\r\n            if (!env.canvasSupported) {\r\n                return;\r\n            }\r\n            opts = extend({}, opts || {});\r\n            opts.pixelRatio = opts.pixelRatio || 1;\r\n            opts.backgroundColor = opts.backgroundColor\r\n                || this._model.get('backgroundColor');\r\n            var zr = this._zr;\r\n            return zr.painter.getRenderedCanvas(opts);\r\n        };\r\n        ECharts.prototype.getSvgDataURL = function () {\r\n            if (!env.svgSupported) {\r\n                return;\r\n            }\r\n            var zr = this._zr;\r\n            var list = zr.storage.getDisplayList();\r\n            each(list, function (el) {\r\n                el.stopAnimation(null, true);\r\n            });\r\n            return zr.painter.toDataURL();\r\n        };\r\n        ECharts.prototype.getDataURL = function (opts) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            opts = opts || {};\r\n            var excludeComponents = opts.excludeComponents;\r\n            var ecModel = this._model;\r\n            var excludesComponentViews = [];\r\n            var self = this;\r\n            each$3(excludeComponents, function (componentType) {\r\n                ecModel.eachComponent({\r\n                    mainType: componentType\r\n                }, function (component) {\r\n                    var view = self._componentsMap[component.__viewId];\r\n                    if (!view.group.ignore) {\r\n                        excludesComponentViews.push(view);\r\n                        view.group.ignore = true;\r\n                    }\r\n                });\r\n            });\r\n            var url = this._zr.painter.getType() === 'svg'\r\n                ? this.getSvgDataURL()\r\n                : this.getRenderedCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\r\n            each$3(excludesComponentViews, function (view) {\r\n                view.group.ignore = false;\r\n            });\r\n            return url;\r\n        };\r\n        ECharts.prototype.getConnectedDataURL = function (opts) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            if (!env.canvasSupported) {\r\n                return;\r\n            }\r\n            var isSvg = opts.type === 'svg';\r\n            var groupId = this.group;\r\n            var mathMin = Math.min;\r\n            var mathMax = Math.max;\r\n            var MAX_NUMBER = Infinity;\r\n            if (connectedGroups[groupId]) {\r\n                var left_1 = MAX_NUMBER;\r\n                var top_1 = MAX_NUMBER;\r\n                var right_1 = -MAX_NUMBER;\r\n                var bottom_1 = -MAX_NUMBER;\r\n                var canvasList_1 = [];\r\n                var dpr_1 = (opts && opts.pixelRatio) || 1;\r\n                each(instances$1, function (chart, id) {\r\n                    if (chart.group === groupId) {\r\n                        var canvas = isSvg\r\n                            ? chart.getZr().painter.getSvgDom().innerHTML\r\n                            : chart.getRenderedCanvas(clone(opts));\r\n                        var boundingRect = chart.getDom().getBoundingClientRect();\r\n                        left_1 = mathMin(boundingRect.left, left_1);\r\n                        top_1 = mathMin(boundingRect.top, top_1);\r\n                        right_1 = mathMax(boundingRect.right, right_1);\r\n                        bottom_1 = mathMax(boundingRect.bottom, bottom_1);\r\n                        canvasList_1.push({\r\n                            dom: canvas,\r\n                            left: boundingRect.left,\r\n                            top: boundingRect.top\r\n                        });\r\n                    }\r\n                });\r\n                left_1 *= dpr_1;\r\n                top_1 *= dpr_1;\r\n                right_1 *= dpr_1;\r\n                bottom_1 *= dpr_1;\r\n                var width = right_1 - left_1;\r\n                var height = bottom_1 - top_1;\r\n                var targetCanvas = createCanvas();\r\n                var zr_1 = init(targetCanvas, {\r\n                    renderer: isSvg ? 'svg' : 'canvas'\r\n                });\r\n                zr_1.resize({\r\n                    width: width,\r\n                    height: height\r\n                });\r\n                if (isSvg) {\r\n                    var content_1 = '';\r\n                    each$3(canvasList_1, function (item) {\r\n                        var x = item.left - left_1;\r\n                        var y = item.top - top_1;\r\n                        content_1 += '<g transform=\"translate(' + x + ','\r\n                            + y + ')\">' + item.dom + '</g>';\r\n                    });\r\n                    zr_1.painter.getSvgRoot().innerHTML = content_1;\r\n                    if (opts.connectedBackgroundColor) {\r\n                        zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\r\n                    }\r\n                    zr_1.refreshImmediately();\r\n                    return zr_1.painter.toDataURL();\r\n                }\r\n                else {\r\n                    if (opts.connectedBackgroundColor) {\r\n                        zr_1.add(new Rect({\r\n                            shape: {\r\n                                x: 0,\r\n                                y: 0,\r\n                                width: width,\r\n                                height: height\r\n                            },\r\n                            style: {\r\n                                fill: opts.connectedBackgroundColor\r\n                            }\r\n                        }));\r\n                    }\r\n                    each$3(canvasList_1, function (item) {\r\n                        var img = new ZRImage({\r\n                            style: {\r\n                                x: item.left * dpr_1 - left_1,\r\n                                y: item.top * dpr_1 - top_1,\r\n                                image: item.dom\r\n                            }\r\n                        });\r\n                        zr_1.add(img);\r\n                    });\r\n                    zr_1.refreshImmediately();\r\n                    return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\r\n                }\r\n            }\r\n            else {\r\n                return this.getDataURL(opts);\r\n            }\r\n        };\r\n        ECharts.prototype.convertToPixel = function (finder, value) {\r\n            return doConvertPixel(this, 'convertToPixel', finder, value);\r\n        };\r\n        ECharts.prototype.convertFromPixel = function (finder, value) {\r\n            return doConvertPixel(this, 'convertFromPixel', finder, value);\r\n        };\r\n        ECharts.prototype.containPixel = function (finder, value) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            var ecModel = this._model;\r\n            var result;\r\n            var findResult = parseFinder(ecModel, finder);\r\n            each(findResult, function (models, key) {\r\n                key.indexOf('Models') >= 0 && each(models, function (model) {\r\n                    var coordSys = model.coordinateSystem;\r\n                    if (coordSys && coordSys.containPoint) {\r\n                        result = result || !!coordSys.containPoint(value);\r\n                    }\r\n                    else if (key === 'seriesModels') {\r\n                        var view = this._chartsMap[model.__viewId];\r\n                        if (view && view.containPoint) {\r\n                            result = result || view.containPoint(value, model);\r\n                        }\r\n                        else {\r\n                            if (__DEV__) {\r\n                                console.warn(key + ': ' + (view\r\n                                    ? 'The found component do not support containPoint.'\r\n                                    : 'No view mapping to the found component.'));\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (__DEV__) {\r\n                            console.warn(key + ': containPoint is not supported');\r\n                        }\r\n                    }\r\n                }, this);\r\n            }, this);\r\n            return !!result;\r\n        };\r\n        ECharts.prototype.getVisual = function (finder, visualType) {\r\n            var ecModel = this._model;\r\n            var parsedFinder = parseFinder(ecModel, finder, {\r\n                defaultMainType: 'series'\r\n            });\r\n            var seriesModel = parsedFinder.seriesModel;\r\n            if (__DEV__) {\r\n                if (!seriesModel) {\r\n                    console.warn('There is no specified seires model');\r\n                }\r\n            }\r\n            var data = seriesModel.getData();\r\n            var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside')\r\n                ? parsedFinder.dataIndexInside\r\n                : parsedFinder.hasOwnProperty('dataIndex')\r\n                    ? data.indexOfRawIndex(parsedFinder.dataIndex)\r\n                    : null;\r\n            return dataIndexInside != null\r\n                ? getItemVisualFromData(data, dataIndexInside, visualType)\r\n                : getVisualFromData(data, visualType);\r\n        };\r\n        ECharts.prototype.getViewOfComponentModel = function (componentModel) {\r\n            return this._componentsMap[componentModel.__viewId];\r\n        };\r\n        ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\r\n            return this._chartsMap[seriesModel.__viewId];\r\n        };\r\n        ECharts.prototype._initEvents = function () {\r\n            var _this = this;\r\n            each$3(MOUSE_EVENT_NAMES, function (eveName) {\r\n                var handler = function (e) {\r\n                    var ecModel = _this.getModel();\r\n                    var el = e.target;\r\n                    var params;\r\n                    var isGlobalOut = eveName === 'globalout';\r\n                    var ecData = el && getECData(el);\r\n                    if (isGlobalOut) {\r\n                        params = {};\r\n                    }\r\n                    else if (ecData && ecData.dataIndex != null) {\r\n                        var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\r\n                        params = (dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType) || {});\r\n                    }\r\n                    else if (el && ecData.eventData) {\r\n                        params = extend({}, ecData.eventData);\r\n                    }\r\n                    if (params) {\r\n                        var componentType = params.componentType;\r\n                        var componentIndex = params.componentIndex;\r\n                        if (componentType === 'markLine'\r\n                            || componentType === 'markPoint'\r\n                            || componentType === 'markArea') {\r\n                            componentType = 'series';\r\n                            componentIndex = params.seriesIndex;\r\n                        }\r\n                        var model = componentType && componentIndex != null\r\n                            && ecModel.getComponent(componentType, componentIndex);\r\n                        var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\r\n                        if (__DEV__) {\r\n                            if (!isGlobalOut && !(model && view)) {\r\n                                console.warn('model or view can not be found by params');\r\n                            }\r\n                        }\r\n                        params.event = e;\r\n                        params.type = eveName;\r\n                        _this._$eventProcessor.eventInfo = {\r\n                            targetEl: el,\r\n                            packedEvent: params,\r\n                            model: model,\r\n                            view: view\r\n                        };\r\n                        _this.trigger(eveName, params);\r\n                    }\r\n                };\r\n                handler.zrEventfulCallAtLast = true;\r\n                _this._zr.on(eveName, handler, _this);\r\n            });\r\n            each$3(eventActionMap, function (actionType, eventType) {\r\n                _this._messageCenter.on(eventType, function (event) {\r\n                    this.trigger(eventType, event);\r\n                }, _this);\r\n            });\r\n            each$3(['selectchanged'], function (eventType) {\r\n                _this._messageCenter.on(eventType, function (event) {\r\n                    this.trigger(eventType, event);\r\n                }, _this);\r\n            });\r\n            handleLegacySelectEvents(this._messageCenter, this);\r\n        };\r\n        ECharts.prototype.isDisposed = function () {\r\n            return this._disposed;\r\n        };\r\n        ECharts.prototype.clear = function () {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            this.setOption({ series: [] }, true);\r\n        };\r\n        ECharts.prototype.dispose = function () {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            this._disposed = true;\r\n            setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\r\n            var api = this._api;\r\n            var ecModel = this._model;\r\n            each$3(this._componentsViews, function (component) {\r\n                component.dispose(ecModel, api);\r\n            });\r\n            each$3(this._chartsViews, function (chart) {\r\n                chart.dispose(ecModel, api);\r\n            });\r\n            this._zr.dispose();\r\n            delete instances$1[this.id];\r\n        };\r\n        ECharts.prototype.resize = function (opts) {\r\n            if (__DEV__) {\r\n                assert$1(!this[IN_MAIN_PROCESS_KEY], '`resize` should not be called during main process.');\r\n            }\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            this._zr.resize(opts);\r\n            var ecModel = this._model;\r\n            this._loadingFX && this._loadingFX.resize();\r\n            if (!ecModel) {\r\n                return;\r\n            }\r\n            var optionChanged = ecModel.resetOption('media');\r\n            var silent = opts && opts.silent;\r\n            this[IN_MAIN_PROCESS_KEY] = true;\r\n            optionChanged && prepare(this);\r\n            updateMethods.update.call(this, {\r\n                type: 'resize',\r\n                animation: {\r\n                    duration: 0\r\n                }\r\n            });\r\n            this[IN_MAIN_PROCESS_KEY] = false;\r\n            flushPendingActions.call(this, silent);\r\n            triggerUpdatedEvent.call(this, silent);\r\n        };\r\n        ECharts.prototype.showLoading = function (name, cfg) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            if (isObject$2(name)) {\r\n                cfg = name;\r\n                name = '';\r\n            }\r\n            name = name || 'default';\r\n            this.hideLoading();\r\n            if (!loadingEffects[name]) {\r\n                if (__DEV__) {\r\n                    console.warn('Loading effects ' + name + ' not exists.');\r\n                }\r\n                return;\r\n            }\r\n            var el = loadingEffects[name](this._api, cfg);\r\n            var zr = this._zr;\r\n            this._loadingFX = el;\r\n            zr.add(el);\r\n        };\r\n        ECharts.prototype.hideLoading = function () {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            this._loadingFX && this._zr.remove(this._loadingFX);\r\n            this._loadingFX = null;\r\n        };\r\n        ECharts.prototype.makeActionFromEvent = function (eventObj) {\r\n            var payload = extend({}, eventObj);\r\n            payload.type = eventActionMap[eventObj.type];\r\n            return payload;\r\n        };\r\n        ECharts.prototype.dispatchAction = function (payload, opt) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            if (!isObject$2(opt)) {\r\n                opt = { silent: !!opt };\r\n            }\r\n            if (!actions[payload.type]) {\r\n                return;\r\n            }\r\n            if (!this._model) {\r\n                return;\r\n            }\r\n            if (this[IN_MAIN_PROCESS_KEY]) {\r\n                this._pendingActions.push(payload);\r\n                return;\r\n            }\r\n            var silent = opt.silent;\r\n            doDispatchAction.call(this, payload, silent);\r\n            var flush = opt.flush;\r\n            if (flush) {\r\n                this._zr.flush();\r\n            }\r\n            else if (flush !== false && env.browser.weChat) {\r\n                this._throttledZrFlush();\r\n            }\r\n            flushPendingActions.call(this, silent);\r\n            triggerUpdatedEvent.call(this, silent);\r\n        };\r\n        ECharts.prototype.updateLabelLayout = function () {\r\n            var labelManager = this._labelManager;\r\n            labelManager.updateLayoutConfig(this._api);\r\n            labelManager.layout(this._api);\r\n            labelManager.processLabelsOverall();\r\n        };\r\n        ECharts.prototype.appendData = function (params) {\r\n            if (this._disposed) {\r\n                disposedWarning(this.id);\r\n                return;\r\n            }\r\n            var seriesIndex = params.seriesIndex;\r\n            var ecModel = this.getModel();\r\n            var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\r\n            if (__DEV__) {\r\n                assert$1(params.data && seriesModel);\r\n            }\r\n            seriesModel.appendData(params);\r\n            this._scheduler.unfinished = true;\r\n            this.getZr().wakeUp();\r\n        };\r\n        ECharts.internalField = (function () {\r\n            prepare = function (ecIns) {\r\n                var scheduler = ecIns._scheduler;\r\n                scheduler.restorePipelines(ecIns._model);\r\n                scheduler.prepareStageTasks();\r\n                prepareView(ecIns, true);\r\n                prepareView(ecIns, false);\r\n                scheduler.plan();\r\n            };\r\n            prepareView = function (ecIns, isComponent) {\r\n                var ecModel = ecIns._model;\r\n                var scheduler = ecIns._scheduler;\r\n                var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\r\n                var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\r\n                var zr = ecIns._zr;\r\n                var api = ecIns._api;\r\n                for (var i = 0; i < viewList.length; i++) {\r\n                    viewList[i].__alive = false;\r\n                }\r\n                isComponent\r\n                    ? ecModel.eachComponent(function (componentType, model) {\r\n                        componentType !== 'series' && doPrepare(model);\r\n                    })\r\n                    : ecModel.eachSeries(doPrepare);\r\n                function doPrepare(model) {\r\n                    var requireNewView = model.__requireNewView;\r\n                    model.__requireNewView = false;\r\n                    var viewId = '_ec_' + model.id + '_' + model.type;\r\n                    var view = !requireNewView && viewMap[viewId];\r\n                    if (!view) {\r\n                        var classType = parseClassType(model.type);\r\n                        var Clazz = isComponent\r\n                            ? ComponentView.getClass(classType.main, classType.sub)\r\n                            : (ChartView.getClass(classType.sub));\r\n                        if (__DEV__) {\r\n                            assert$1(Clazz, classType.sub + ' does not exist.');\r\n                        }\r\n                        view = new Clazz();\r\n                        view.init(ecModel, api);\r\n                        viewMap[viewId] = view;\r\n                        viewList.push(view);\r\n                        zr.add(view.group);\r\n                    }\r\n                    model.__viewId = view.__id = viewId;\r\n                    view.__alive = true;\r\n                    view.__model = model;\r\n                    view.group.__ecComponentInfo = {\r\n                        mainType: model.mainType,\r\n                        index: model.componentIndex\r\n                    };\r\n                    !isComponent && scheduler.prepareView(view, model, ecModel, api);\r\n                }\r\n                for (var i = 0; i < viewList.length;) {\r\n                    var view = viewList[i];\r\n                    if (!view.__alive) {\r\n                        !isComponent && view.renderTask.dispose();\r\n                        zr.remove(view.group);\r\n                        view.dispose(ecModel, api);\r\n                        viewList.splice(i, 1);\r\n                        if (viewMap[view.__id] === view) {\r\n                            delete viewMap[view.__id];\r\n                        }\r\n                        view.__id = view.group.__ecComponentInfo = null;\r\n                    }\r\n                    else {\r\n                        i++;\r\n                    }\r\n                }\r\n            };\r\n            updateDirectly = function (ecIns, method, payload, mainType, subType) {\r\n                var ecModel = ecIns._model;\r\n                ecModel.setUpdatePayload(payload);\r\n                if (!mainType) {\r\n                    each$3([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\r\n                    return;\r\n                }\r\n                var query = {};\r\n                query[mainType + 'Id'] = payload[mainType + 'Id'];\r\n                query[mainType + 'Index'] = payload[mainType + 'Index'];\r\n                query[mainType + 'Name'] = payload[mainType + 'Name'];\r\n                var condition = { mainType: mainType, query: query };\r\n                subType && (condition.subType = subType);\r\n                var excludeSeriesId = payload.excludeSeriesId;\r\n                var excludeSeriesIdMap;\r\n                if (excludeSeriesId != null) {\r\n                    excludeSeriesIdMap = createHashMap(normalizeToArray(excludeSeriesId));\r\n                }\r\n                ecModel && ecModel.eachComponent(condition, function (model) {\r\n                    if (!excludeSeriesIdMap || excludeSeriesIdMap.get(model.id) == null) {\r\n                        if (isHighDownPayload(payload) && !payload.notBlur) {\r\n                            if (model instanceof SeriesModel) {\r\n                                toggleSeriesBlurStateFromPayload(model, payload, ecIns);\r\n                            }\r\n                        }\r\n                        else if (isSelectChangePayload(payload)) {\r\n                            if (model instanceof SeriesModel) {\r\n                                toggleSelectionFromPayload(model, payload);\r\n                                updateSeriesElementSelection(model);\r\n                                markStatusToUpdate(ecIns);\r\n                            }\r\n                        }\r\n                        callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\r\n                    }\r\n                }, ecIns);\r\n                function callView(view) {\r\n                    view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\r\n                }\r\n            };\r\n            updateMethods = {\r\n                prepareAndUpdate: function (payload) {\r\n                    prepare(this);\r\n                    updateMethods.update.call(this, payload);\r\n                },\r\n                update: function (payload) {\r\n                    var ecModel = this._model;\r\n                    var api = this._api;\r\n                    var zr = this._zr;\r\n                    var coordSysMgr = this._coordSysMgr;\r\n                    var scheduler = this._scheduler;\r\n                    if (!ecModel) {\r\n                        return;\r\n                    }\r\n                    ecModel.setUpdatePayload(payload);\r\n                    scheduler.restoreData(ecModel, payload);\r\n                    scheduler.performSeriesTasks(ecModel);\r\n                    coordSysMgr.create(ecModel, api);\r\n                    scheduler.performDataProcessorTasks(ecModel, payload);\r\n                    updateStreamModes(this, ecModel);\r\n                    coordSysMgr.update(ecModel, api);\r\n                    clearColorPalette(ecModel);\r\n                    scheduler.performVisualTasks(ecModel, payload);\r\n                    render(this, ecModel, api, payload);\r\n                    var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\r\n                    var darkMode = ecModel.get('darkMode');\r\n                    if (!env.canvasSupported) {\r\n                        var colorArr = parse(backgroundColor);\r\n                        backgroundColor = stringify(colorArr, 'rgb');\r\n                        if (colorArr[3] === 0) {\r\n                            backgroundColor = 'transparent';\r\n                        }\r\n                    }\r\n                    else {\r\n                        zr.setBackgroundColor(backgroundColor);\r\n                        if (darkMode != null && darkMode !== 'auto') {\r\n                            zr.setDarkMode(darkMode);\r\n                        }\r\n                    }\r\n                    performPostUpdateFuncs(ecModel, api);\r\n                },\r\n                updateTransform: function (payload) {\r\n                    var _this = this;\r\n                    var ecModel = this._model;\r\n                    var api = this._api;\r\n                    if (!ecModel) {\r\n                        return;\r\n                    }\r\n                    ecModel.setUpdatePayload(payload);\r\n                    var componentDirtyList = [];\r\n                    ecModel.eachComponent(function (componentType, componentModel) {\r\n                        if (componentType === 'series') {\r\n                            return;\r\n                        }\r\n                        var componentView = _this.getViewOfComponentModel(componentModel);\r\n                        if (componentView && componentView.__alive) {\r\n                            if (componentView.updateTransform) {\r\n                                var result = componentView.updateTransform(componentModel, ecModel, api, payload);\r\n                                result && result.update && componentDirtyList.push(componentView);\r\n                            }\r\n                            else {\r\n                                componentDirtyList.push(componentView);\r\n                            }\r\n                        }\r\n                    });\r\n                    var seriesDirtyMap = createHashMap();\r\n                    ecModel.eachSeries(function (seriesModel) {\r\n                        var chartView = _this._chartsMap[seriesModel.__viewId];\r\n                        if (chartView.updateTransform) {\r\n                            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\r\n                            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\r\n                        }\r\n                        else {\r\n                            seriesDirtyMap.set(seriesModel.uid, 1);\r\n                        }\r\n                    });\r\n                    clearColorPalette(ecModel);\r\n                    this._scheduler.performVisualTasks(ecModel, payload, { setDirty: true, dirtyMap: seriesDirtyMap });\r\n                    renderSeries(this, ecModel, api, payload, seriesDirtyMap);\r\n                    performPostUpdateFuncs(ecModel, this._api);\r\n                },\r\n                updateView: function (payload) {\r\n                    var ecModel = this._model;\r\n                    if (!ecModel) {\r\n                        return;\r\n                    }\r\n                    ecModel.setUpdatePayload(payload);\r\n                    ChartView.markUpdateMethod(payload, 'updateView');\r\n                    clearColorPalette(ecModel);\r\n                    this._scheduler.performVisualTasks(ecModel, payload, { setDirty: true });\r\n                    render(this, this._model, this._api, payload);\r\n                    performPostUpdateFuncs(ecModel, this._api);\r\n                },\r\n                updateVisual: function (payload) {\r\n                    var _this = this;\r\n                    var ecModel = this._model;\r\n                    if (!ecModel) {\r\n                        return;\r\n                    }\r\n                    ecModel.setUpdatePayload(payload);\r\n                    ecModel.eachSeries(function (seriesModel) {\r\n                        seriesModel.getData().clearAllVisual();\r\n                    });\r\n                    ChartView.markUpdateMethod(payload, 'updateVisual');\r\n                    clearColorPalette(ecModel);\r\n                    this._scheduler.performVisualTasks(ecModel, payload, { visualType: 'visual', setDirty: true });\r\n                    ecModel.eachComponent(function (componentType, componentModel) {\r\n                        if (componentType !== 'series') {\r\n                            var componentView = _this.getViewOfComponentModel(componentModel);\r\n                            componentView && componentView.__alive\r\n                                && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\r\n                        }\r\n                    });\r\n                    ecModel.eachSeries(function (seriesModel) {\r\n                        var chartView = _this._chartsMap[seriesModel.__viewId];\r\n                        chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\r\n                    });\r\n                    performPostUpdateFuncs(ecModel, this._api);\r\n                },\r\n                updateLayout: function (payload) {\r\n                    updateMethods.update.call(this, payload);\r\n                }\r\n            };\r\n            doConvertPixel = function (ecIns, methodName, finder, value) {\r\n                if (ecIns._disposed) {\r\n                    disposedWarning(ecIns.id);\r\n                    return;\r\n                }\r\n                var ecModel = ecIns._model;\r\n                var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\r\n                var result;\r\n                var parsedFinder = parseFinder(ecModel, finder);\r\n                for (var i = 0; i < coordSysList.length; i++) {\r\n                    var coordSys = coordSysList[i];\r\n                    if (coordSys[methodName]\r\n                        && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\r\n                        return result;\r\n                    }\r\n                }\r\n                if (__DEV__) {\r\n                    console.warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\r\n                }\r\n            };\r\n            updateStreamModes = function (ecIns, ecModel) {\r\n                var chartsMap = ecIns._chartsMap;\r\n                var scheduler = ecIns._scheduler;\r\n                ecModel.eachSeries(function (seriesModel) {\r\n                    scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\r\n                });\r\n            };\r\n            doDispatchAction = function (payload, silent) {\r\n                var _this = this;\r\n                var ecModel = this.getModel();\r\n                var payloadType = payload.type;\r\n                var escapeConnect = payload.escapeConnect;\r\n                var actionWrap = actions[payloadType];\r\n                var actionInfo = actionWrap.actionInfo;\r\n                var cptTypeTmp = (actionInfo.update || 'update').split(':');\r\n                var updateMethod = cptTypeTmp.pop();\r\n                var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\r\n                this[IN_MAIN_PROCESS_KEY] = true;\r\n                var payloads = [payload];\r\n                var batched = false;\r\n                if (payload.batch) {\r\n                    batched = true;\r\n                    payloads = map(payload.batch, function (item) {\r\n                        item = defaults(extend({}, item), payload);\r\n                        item.batch = null;\r\n                        return item;\r\n                    });\r\n                }\r\n                var eventObjBatch = [];\r\n                var eventObj;\r\n                var isSelectChange = isSelectChangePayload(payload);\r\n                var isStatusChange = isHighDownPayload(payload) || isSelectChange;\r\n                each$3(payloads, function (batchItem) {\r\n                    eventObj = actionWrap.action(batchItem, _this._model, _this._api);\r\n                    eventObj = eventObj || extend({}, batchItem);\r\n                    eventObj.type = actionInfo.event || eventObj.type;\r\n                    eventObjBatch.push(eventObj);\r\n                    if (isStatusChange) {\r\n                        updateDirectly(_this, updateMethod, batchItem, 'series');\r\n                        markStatusToUpdate(_this);\r\n                    }\r\n                    else if (cptType) {\r\n                        updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\r\n                    }\r\n                });\r\n                if (payload.statusChanged) {\r\n                    markStatusToUpdate(this);\r\n                }\r\n                if (updateMethod !== 'none' && !isStatusChange && !cptType) {\r\n                    if (this[OPTION_UPDATED_KEY]) {\r\n                        prepare(this);\r\n                        updateMethods.update.call(this, payload);\r\n                        this[OPTION_UPDATED_KEY] = false;\r\n                    }\r\n                    else {\r\n                        updateMethods[updateMethod].call(this, payload);\r\n                    }\r\n                }\r\n                if (batched) {\r\n                    eventObj = {\r\n                        type: actionInfo.event || payloadType,\r\n                        escapeConnect: escapeConnect,\r\n                        batch: eventObjBatch\r\n                    };\r\n                }\r\n                else {\r\n                    eventObj = eventObjBatch[0];\r\n                }\r\n                this[IN_MAIN_PROCESS_KEY] = false;\r\n                if (!silent) {\r\n                    var messageCenter = this._messageCenter;\r\n                    messageCenter.trigger(eventObj.type, eventObj);\r\n                    if (isSelectChange) {\r\n                        var newObj = {\r\n                            type: 'selectchanged',\r\n                            escapeConnect: escapeConnect,\r\n                            selected: getAllSelectedIndices(ecModel),\r\n                            isFromClick: payload.isFromClick || false,\r\n                            fromAction: payload.type,\r\n                            fromActionPayload: payload\r\n                        };\r\n                        messageCenter.trigger(newObj.type, newObj);\r\n                    }\r\n                }\r\n            };\r\n            flushPendingActions = function (silent) {\r\n                var pendingActions = this._pendingActions;\r\n                while (pendingActions.length) {\r\n                    var payload = pendingActions.shift();\r\n                    doDispatchAction.call(this, payload, silent);\r\n                }\r\n            };\r\n            triggerUpdatedEvent = function (silent) {\r\n                !silent && this.trigger('updated');\r\n            };\r\n            bindRenderedEvent = function (zr, ecIns) {\r\n                zr.on('rendered', function (params) {\r\n                    ecIns.trigger('rendered', params);\r\n                    if (zr.animation.isFinished()\r\n                        && !ecIns[OPTION_UPDATED_KEY]\r\n                        && !ecIns._scheduler.unfinished\r\n                        && !ecIns._pendingActions.length) {\r\n                        ecIns.trigger('finished');\r\n                    }\r\n                });\r\n            };\r\n            bindMouseEvent = function (zr, ecIns) {\r\n                function getDispatcher(target, det) {\r\n                    while (target && !det(target)) {\r\n                        if (target.__hostTarget) {\r\n                            target = target.__hostTarget;\r\n                        }\r\n                        else {\r\n                            target = target.parent;\r\n                        }\r\n                    }\r\n                    return target;\r\n                }\r\n                zr.on('mouseover', function (e) {\r\n                    var el = e.target;\r\n                    var dispatcher = getDispatcher(el, isHighDownDispatcher);\r\n                    if (dispatcher) {\r\n                        var ecData = getECData(dispatcher);\r\n                        toggleSeriesBlurState(ecData.seriesIndex, ecData.focus, ecData.blurScope, ecIns, true);\r\n                        enterEmphasisWhenMouseOver(dispatcher, e);\r\n                        markStatusToUpdate(ecIns);\r\n                    }\r\n                }).on('mouseout', function (e) {\r\n                    var el = e.target;\r\n                    var dispatcher = getDispatcher(el, isHighDownDispatcher);\r\n                    if (dispatcher) {\r\n                        var ecData = getECData(dispatcher);\r\n                        toggleSeriesBlurState(ecData.seriesIndex, ecData.focus, ecData.blurScope, ecIns, false);\r\n                        leaveEmphasisWhenMouseOut(dispatcher, e);\r\n                        markStatusToUpdate(ecIns);\r\n                    }\r\n                }).on('click', function (e) {\r\n                    var el = e.target;\r\n                    var dispatcher = getDispatcher(el, function (target) { return getECData(target).dataIndex != null; });\r\n                    if (dispatcher) {\r\n                        var actionType = dispatcher.selected ? 'unselect' : 'select';\r\n                        var ecData = getECData(dispatcher);\r\n                        ecIns._api.dispatchAction({\r\n                            type: actionType,\r\n                            dataType: ecData.dataType,\r\n                            dataIndexInside: ecData.dataIndex,\r\n                            seriesIndex: ecData.seriesIndex,\r\n                            isFromClick: true\r\n                        });\r\n                    }\r\n                });\r\n            };\r\n            clearColorPalette = function (ecModel) {\r\n                ecModel.clearColorPalette();\r\n                ecModel.eachSeries(function (seriesModel) {\r\n                    seriesModel.clearColorPalette();\r\n                });\r\n            };\r\n            render = function (ecIns, ecModel, api, payload) {\r\n                renderComponents(ecIns, ecModel, api, payload);\r\n                each$3(ecIns._chartsViews, function (chart) {\r\n                    chart.__alive = false;\r\n                });\r\n                renderSeries(ecIns, ecModel, api, payload);\r\n                each$3(ecIns._chartsViews, function (chart) {\r\n                    if (!chart.__alive) {\r\n                        chart.remove(ecModel, api);\r\n                    }\r\n                });\r\n            };\r\n            renderComponents = function (ecIns, ecModel, api, payload, dirtyList) {\r\n                each$3(dirtyList || ecIns._componentsViews, function (componentView) {\r\n                    var componentModel = componentView.__model;\r\n                    clearStates(componentModel, componentView);\r\n                    componentView.render(componentModel, ecModel, api, payload);\r\n                    updateZ(componentModel, componentView);\r\n                    updateStates(componentModel, componentView);\r\n                });\r\n            };\r\n            renderSeries = function (ecIns, ecModel, api, payload, dirtyMap) {\r\n                var scheduler = ecIns._scheduler;\r\n                var labelManager = ecIns._labelManager;\r\n                labelManager.clearLabels();\r\n                var unfinished = false;\r\n                ecModel.eachSeries(function (seriesModel) {\r\n                    var chartView = ecIns._chartsMap[seriesModel.__viewId];\r\n                    chartView.__alive = true;\r\n                    var renderTask = chartView.renderTask;\r\n                    scheduler.updatePayload(renderTask, payload);\r\n                    clearStates(seriesModel, chartView);\r\n                    if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\r\n                        renderTask.dirty();\r\n                    }\r\n                    if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\r\n                        unfinished = true;\r\n                    }\r\n                    chartView.group.silent = !!seriesModel.get('silent');\r\n                    updateZ(seriesModel, chartView);\r\n                    updateBlend(seriesModel, chartView);\r\n                    updateSeriesElementSelection(seriesModel);\r\n                    labelManager.addLabelsOfSeries(chartView);\r\n                });\r\n                scheduler.unfinished = unfinished || scheduler.unfinished;\r\n                labelManager.updateLayoutConfig(api);\r\n                labelManager.layout(api);\r\n                labelManager.processLabelsOverall();\r\n                ecModel.eachSeries(function (seriesModel) {\r\n                    var chartView = ecIns._chartsMap[seriesModel.__viewId];\r\n                    updateStates(seriesModel, chartView);\r\n                });\r\n                updateHoverLayerStatus(ecIns, ecModel);\r\n                aria(ecIns._zr.dom, ecModel);\r\n            };\r\n            performPostUpdateFuncs = function (ecModel, api) {\r\n                each$3(postUpdateFuncs, function (func) {\r\n                    func(ecModel, api);\r\n                });\r\n            };\r\n            markStatusToUpdate = function (ecIns) {\r\n                ecIns[STATUS_NEEDS_UPDATE_KEY] = true;\r\n                ecIns.getZr().wakeUp();\r\n            };\r\n            applyChangedStates = function (ecIns) {\r\n                if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\r\n                    return;\r\n                }\r\n                ecIns.getZr().storage.traverse(function (el) {\r\n                    if (isElementRemoved(el)) {\r\n                        return;\r\n                    }\r\n                    applyElementStates(el);\r\n                });\r\n                ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\r\n            };\r\n            function applyElementStates(el) {\r\n                var newStates = [];\r\n                var oldStates = el.currentStates;\r\n                for (var i = 0; i < oldStates.length; i++) {\r\n                    var stateName = oldStates[i];\r\n                    if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\r\n                        newStates.push(stateName);\r\n                    }\r\n                }\r\n                if (el.selected && el.states.select) {\r\n                    newStates.push('select');\r\n                }\r\n                if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\r\n                    newStates.push('emphasis');\r\n                }\r\n                else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\r\n                    newStates.push('blur');\r\n                }\r\n                el.useStates(newStates);\r\n            }\r\n            function updateHoverLayerStatus(ecIns, ecModel) {\r\n                var zr = ecIns._zr;\r\n                var storage = zr.storage;\r\n                var elCount = 0;\r\n                storage.traverse(function (el) {\r\n                    if (!el.isGroup) {\r\n                        elCount++;\r\n                    }\r\n                });\r\n                if (elCount > ecModel.get('hoverLayerThreshold') && !env.node) {\r\n                    ecModel.eachSeries(function (seriesModel) {\r\n                        if (seriesModel.preventUsingHoverLayer) {\r\n                            return;\r\n                        }\r\n                        var chartView = ecIns._chartsMap[seriesModel.__viewId];\r\n                        if (chartView.__alive) {\r\n                            chartView.group.traverse(function (el) {\r\n                                if (el.states.emphasis) {\r\n                                    el.states.emphasis.hoverLayer = true;\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            function updateBlend(seriesModel, chartView) {\r\n                var blendMode = seriesModel.get('blendMode') || null;\r\n                if (__DEV__) {\r\n                    if (!env.canvasSupported && blendMode && blendMode !== 'source-over') {\r\n                        console.warn('Only canvas support blendMode');\r\n                    }\r\n                }\r\n                chartView.group.traverse(function (el) {\r\n                    if (!el.isGroup) {\r\n                        el.style.blend = blendMode;\r\n                    }\r\n                    if (el.eachPendingDisplayable) {\r\n                        el.eachPendingDisplayable(function (displayable) {\r\n                            displayable.style.blend = blendMode;\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            function updateZ(model, view) {\r\n                if (model.preventAutoZ) {\r\n                    return;\r\n                }\r\n                var z = model.get('z');\r\n                var zlevel = model.get('zlevel');\r\n                view.group.traverse(function (el) {\r\n                    if (!el.isGroup) {\r\n                        z != null && (el.z = z);\r\n                        zlevel != null && (el.zlevel = zlevel);\r\n                        var label = el.getTextContent();\r\n                        var labelLine = el.getTextGuideLine();\r\n                        if (label) {\r\n                            label.z = el.z;\r\n                            label.zlevel = el.zlevel;\r\n                            label.z2 = el.z2 + 1;\r\n                        }\r\n                        if (labelLine) {\r\n                            labelLine.z = el.z;\r\n                            labelLine.zlevel = el.zlevel;\r\n                            labelLine.z2 = el.z2 - 1;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            function clearStates(model, view) {\r\n                view.group.traverse(function (el) {\r\n                    if (isElementRemoved(el)) {\r\n                        return;\r\n                    }\r\n                    var textContent = el.getTextContent();\r\n                    var textGuide = el.getTextGuideLine();\r\n                    if (el.stateTransition) {\r\n                        el.stateTransition = null;\r\n                    }\r\n                    if (textContent && textContent.stateTransition) {\r\n                        textContent.stateTransition = null;\r\n                    }\r\n                    if (textGuide && textGuide.stateTransition) {\r\n                        textGuide.stateTransition = null;\r\n                    }\r\n                    if (el.hasState()) {\r\n                        el.prevStates = el.currentStates;\r\n                        el.clearStates();\r\n                    }\r\n                    else if (el.prevStates) {\r\n                        el.prevStates = null;\r\n                    }\r\n                });\r\n            }\r\n            function updateStates(model, view) {\r\n                var stateAnimationModel = model.getModel('stateAnimation');\r\n                var enableAnimation = model.isAnimationEnabled();\r\n                var duration = stateAnimationModel.get('duration');\r\n                var stateTransition = duration > 0 ? {\r\n                    duration: duration,\r\n                    delay: stateAnimationModel.get('delay'),\r\n                    easing: stateAnimationModel.get('easing')\r\n                } : null;\r\n                view.group.traverse(function (el) {\r\n                    if (el.states && el.states.emphasis) {\r\n                        if (isElementRemoved(el)) {\r\n                            return;\r\n                        }\r\n                        if (el instanceof Path) {\r\n                            savePathStates(el);\r\n                        }\r\n                        if (el.__dirty) {\r\n                            var prevStates = el.prevStates;\r\n                            if (prevStates) {\r\n                                el.useStates(prevStates);\r\n                            }\r\n                        }\r\n                        if (enableAnimation) {\r\n                            el.stateTransition = stateTransition;\r\n                            var textContent = el.getTextContent();\r\n                            var textGuide = el.getTextGuideLine();\r\n                            if (textContent) {\r\n                                textContent.stateTransition = stateTransition;\r\n                            }\r\n                            if (textGuide) {\r\n                                textGuide.stateTransition = stateTransition;\r\n                            }\r\n                        }\r\n                        if (el.__dirty) {\r\n                            applyElementStates(el);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            createExtensionAPI = function (ecIns) {\r\n                return new ((function (_super) {\r\n                    __extends(class_1, _super);\r\n                    function class_1() {\r\n                        return _super !== null && _super.apply(this, arguments) || this;\r\n                    }\r\n                    class_1.prototype.getCoordinateSystems = function () {\r\n                        return ecIns._coordSysMgr.getCoordinateSystems();\r\n                    };\r\n                    class_1.prototype.getComponentByElement = function (el) {\r\n                        while (el) {\r\n                            var modelInfo = el.__ecComponentInfo;\r\n                            if (modelInfo != null) {\r\n                                return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\r\n                            }\r\n                            el = el.parent;\r\n                        }\r\n                    };\r\n                    class_1.prototype.enterEmphasis = function (el, highlightDigit) {\r\n                        enterEmphasis(el, highlightDigit);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\r\n                        leaveEmphasis(el, highlightDigit);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    class_1.prototype.enterBlur = function (el) {\r\n                        enterBlur(el);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    class_1.prototype.leaveBlur = function (el) {\r\n                        leaveBlur(el);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    class_1.prototype.enterSelect = function (el) {\r\n                        enterSelect(el);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    class_1.prototype.leaveSelect = function (el) {\r\n                        leaveSelect(el);\r\n                        markStatusToUpdate(ecIns);\r\n                    };\r\n                    return class_1;\r\n                }(ExtensionAPI)))(ecIns);\r\n            };\r\n            enableConnect = function (chart) {\r\n                function updateConnectedChartsStatus(charts, status) {\r\n                    for (var i = 0; i < charts.length; i++) {\r\n                        var otherChart = charts[i];\r\n                        otherChart[CONNECT_STATUS_KEY] = status;\r\n                    }\r\n                }\r\n                each$3(eventActionMap, function (actionType, eventType) {\r\n                    chart._messageCenter.on(eventType, function (event) {\r\n                        if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\r\n                            if (event && event.escapeConnect) {\r\n                                return;\r\n                            }\r\n                            var action_1 = chart.makeActionFromEvent(event);\r\n                            var otherCharts_1 = [];\r\n                            each$3(instances$1, function (otherChart) {\r\n                                if (otherChart !== chart && otherChart.group === chart.group) {\r\n                                    otherCharts_1.push(otherChart);\r\n                                }\r\n                            });\r\n                            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\r\n                            each$3(otherCharts_1, function (otherChart) {\r\n                                if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\r\n                                    otherChart.dispatchAction(action_1);\r\n                                }\r\n                            });\r\n                            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\r\n                        }\r\n                    });\r\n                });\r\n            };\r\n        })();\r\n        return ECharts;\r\n    }(Eventful));\r\n    var echartsProto = ECharts.prototype;\r\n    echartsProto.on = createRegisterEventWithLowercaseECharts('on');\r\n    echartsProto.off = createRegisterEventWithLowercaseECharts('off');\r\n    echartsProto.one = function (eventName, cb, ctx) {\r\n        var self = this;\r\n        deprecateLog('ECharts#one is deprecated.');\r\n        function wrapped() {\r\n            var args2 = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args2[_i] = arguments[_i];\r\n            }\r\n            cb && cb.apply && cb.apply(this, args2);\r\n            self.off(eventName, wrapped);\r\n        }\r\n        this.on.call(this, eventName, wrapped, ctx);\r\n    };\r\n    var MOUSE_EVENT_NAMES = [\r\n        'click', 'dblclick', 'mouseover', 'mouseout', 'mousemove',\r\n        'mousedown', 'mouseup', 'globalout', 'contextmenu'\r\n    ];\r\n    function disposedWarning(id) {\r\n        if (__DEV__) {\r\n            console.warn('Instance ' + id + ' has been disposed');\r\n        }\r\n    }\r\n    var actions = {};\r\n    var eventActionMap = {};\r\n    var dataProcessorFuncs = [];\r\n    var optionPreprocessorFuncs = [];\r\n    var postUpdateFuncs = [];\r\n    var visualFuncs = [];\r\n    var themeStorage = {};\r\n    var loadingEffects = {};\r\n    var instances$1 = {};\r\n    var connectedGroups = {};\r\n    var idBase = +(new Date()) - 0;\r\n    var groupIdBase = +(new Date()) - 0;\r\n    var DOM_ATTRIBUTE_KEY = '_echarts_instance_';\r\n    function init$1(dom, theme, opts) {\r\n        if (__DEV__) {\r\n            if (!dom) {\r\n                throw new Error('Initialize failed: invalid dom.');\r\n            }\r\n        }\r\n        var existInstance = getInstanceByDom(dom);\r\n        if (existInstance) {\r\n            if (__DEV__) {\r\n                console.warn('There is a chart instance already initialized on the dom.');\r\n            }\r\n            return existInstance;\r\n        }\r\n        if (__DEV__) {\r\n            if (isDom(dom)\r\n                && dom.nodeName.toUpperCase() !== 'CANVAS'\r\n                && ((!dom.clientWidth && (!opts || opts.width == null))\r\n                    || (!dom.clientHeight && (!opts || opts.height == null)))) {\r\n                console.warn('Can\\'t get DOM width or height. Please check '\r\n                    + 'dom.clientWidth and dom.clientHeight. They should not be 0.'\r\n                    + 'For example, you may need to call this in the callback '\r\n                    + 'of window.onload.');\r\n            }\r\n        }\r\n        var chart = new ECharts(dom, theme, opts);\r\n        chart.id = 'ec_' + idBase++;\r\n        instances$1[chart.id] = chart;\r\n        setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\r\n        enableConnect(chart);\r\n        return chart;\r\n    }\r\n    function connect(groupId) {\r\n        if (isArray(groupId)) {\r\n            var charts = groupId;\r\n            groupId = null;\r\n            each$3(charts, function (chart) {\r\n                if (chart.group != null) {\r\n                    groupId = chart.group;\r\n                }\r\n            });\r\n            groupId = groupId || ('g_' + groupIdBase++);\r\n            each$3(charts, function (chart) {\r\n                chart.group = groupId;\r\n            });\r\n        }\r\n        connectedGroups[groupId] = true;\r\n        return groupId;\r\n    }\r\n    function disConnect(groupId) {\r\n        connectedGroups[groupId] = false;\r\n    }\r\n    var disconnect = disConnect;\r\n    function dispose$1(chart) {\r\n        if (typeof chart === 'string') {\r\n            chart = instances$1[chart];\r\n        }\r\n        else if (!(chart instanceof ECharts)) {\r\n            chart = getInstanceByDom(chart);\r\n        }\r\n        if ((chart instanceof ECharts) && !chart.isDisposed()) {\r\n            chart.dispose();\r\n        }\r\n    }\r\n    function getInstanceByDom(dom) {\r\n        return instances$1[getAttribute(dom, DOM_ATTRIBUTE_KEY)];\r\n    }\r\n    function getInstanceById(key) {\r\n        return instances$1[key];\r\n    }\r\n    function registerTheme(name, theme) {\r\n        themeStorage[name] = theme;\r\n    }\r\n    function registerPreprocessor(preprocessorFunc) {\r\n        optionPreprocessorFuncs.push(preprocessorFunc);\r\n    }\r\n    function registerProcessor(priority, processor) {\r\n        normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\r\n    }\r\n    function registerPostUpdate(postUpdateFunc) {\r\n        postUpdateFuncs.push(postUpdateFunc);\r\n    }\r\n    function registerAction(actionInfo, eventName, action) {\r\n        if (typeof eventName === 'function') {\r\n            action = eventName;\r\n            eventName = '';\r\n        }\r\n        var actionType = isObject$2(actionInfo)\r\n            ? actionInfo.type\r\n            : ([actionInfo, actionInfo = {\r\n                    event: eventName\r\n                }][0]);\r\n        actionInfo.event = (actionInfo.event || actionType).toLowerCase();\r\n        eventName = actionInfo.event;\r\n        assert$1(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\r\n        if (!actions[actionType]) {\r\n            actions[actionType] = { action: action, actionInfo: actionInfo };\r\n        }\r\n        eventActionMap[eventName] = actionType;\r\n    }\r\n    function registerCoordinateSystem(type, coordSysCreator) {\r\n        CoordinateSystemManager.register(type, coordSysCreator);\r\n    }\r\n    function getCoordinateSystemDimensions(type) {\r\n        var coordSysCreator = CoordinateSystemManager.get(type);\r\n        if (coordSysCreator) {\r\n            return coordSysCreator.getDimensionsInfo\r\n                ? coordSysCreator.getDimensionsInfo()\r\n                : coordSysCreator.dimensions.slice();\r\n        }\r\n    }\r\n    function registerLayout(priority, layoutTask) {\r\n        normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\r\n    }\r\n    function registerVisual(priority, visualTask) {\r\n        normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\r\n    }\r\n    function normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\r\n        if (isFunction$1(priority) || isObject$2(priority)) {\r\n            fn = priority;\r\n            priority = defaultPriority;\r\n        }\r\n        if (__DEV__) {\r\n            if (isNaN(priority) || priority == null) {\r\n                throw new Error('Illegal priority');\r\n            }\r\n            each$3(targetList, function (wrap) {\r\n                assert$1(wrap.__raw !== fn);\r\n            });\r\n        }\r\n        var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\r\n        stageHandler.__prio = priority;\r\n        stageHandler.__raw = fn;\r\n        targetList.push(stageHandler);\r\n    }\r\n    function registerLoading(name, loadingFx) {\r\n        loadingEffects[name] = loadingFx;\r\n    }\r\n    function extendComponentModel(proto) {\r\n        return ComponentModel.extend(proto);\r\n    }\r\n    function extendComponentView(proto) {\r\n        return ComponentView.extend(proto);\r\n    }\r\n    function extendSeriesModel(proto) {\r\n        return SeriesModel.extend(proto);\r\n    }\r\n    function extendChartView(proto) {\r\n        return ChartView.extend(proto);\r\n    }\r\n    function setCanvasCreator(creator) {\r\n        $override('createCanvas', creator);\r\n    }\r\n    function registerMap(mapName, geoJson, specialAreas) {\r\n        mapDataStorage.registerMap(mapName, geoJson, specialAreas);\r\n    }\r\n    function getMap(mapName) {\r\n        var records = mapDataStorage.retrieveMap(mapName);\r\n        return records && records[0] && {\r\n            geoJson: records[0].geoJSON,\r\n            specialAreas: records[0].specialAreas\r\n        };\r\n    }\r\n    var registerTransform = registerExternalTransform;\r\n    registerVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\r\n    registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\r\n    registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\r\n    registerVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\r\n    registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\r\n    registerPreprocessor(backwardCompat);\r\n    registerProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\r\n    registerLoading('default', loadingDefault);\r\n    registerAction({\r\n        type: HIGHLIGHT_ACTION_TYPE,\r\n        event: HIGHLIGHT_ACTION_TYPE,\r\n        update: HIGHLIGHT_ACTION_TYPE\r\n    }, noop);\r\n    registerAction({\r\n        type: DOWNPLAY_ACTION_TYPE,\r\n        event: DOWNPLAY_ACTION_TYPE,\r\n        update: DOWNPLAY_ACTION_TYPE\r\n    }, noop);\r\n    registerAction({\r\n        type: SELECT_ACTION_TYPE,\r\n        event: SELECT_ACTION_TYPE,\r\n        update: SELECT_ACTION_TYPE\r\n    }, noop);\r\n    registerAction({\r\n        type: UNSELECT_ACTION_TYPE,\r\n        event: UNSELECT_ACTION_TYPE,\r\n        update: UNSELECT_ACTION_TYPE\r\n    }, noop);\r\n    registerAction({\r\n        type: TOGGLE_SELECT_ACTION_TYPE,\r\n        event: TOGGLE_SELECT_ACTION_TYPE,\r\n        update: TOGGLE_SELECT_ACTION_TYPE\r\n    }, noop);\r\n    registerTheme('light', lightTheme);\r\n    registerTheme('dark', theme);\r\n    var dataTool = {};\n\n    function defaultKeyGetter(item) {\r\n        return item;\r\n    }\r\n    var DataDiffer = (function () {\r\n        function DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context) {\r\n            this._old = oldArr;\r\n            this._new = newArr;\r\n            this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\r\n            this._newKeyGetter = newKeyGetter || defaultKeyGetter;\r\n            this.context = context;\r\n        }\r\n        DataDiffer.prototype.add = function (func) {\r\n            this._add = func;\r\n            return this;\r\n        };\r\n        DataDiffer.prototype.update = function (func) {\r\n            this._update = func;\r\n            return this;\r\n        };\r\n        DataDiffer.prototype.remove = function (func) {\r\n            this._remove = func;\r\n            return this;\r\n        };\r\n        DataDiffer.prototype.execute = function () {\r\n            var oldArr = this._old;\r\n            var newArr = this._new;\r\n            var oldDataIndexMap = {};\r\n            var newDataIndexMap = {};\r\n            var oldDataKeyArr = [];\r\n            var newDataKeyArr = [];\r\n            var i;\r\n            this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter');\r\n            this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\r\n            for (i = 0; i < oldArr.length; i++) {\r\n                var key = oldDataKeyArr[i];\r\n                var idx = newDataIndexMap[key];\r\n                if (idx != null) {\r\n                    var len = idx.length;\r\n                    if (len) {\r\n                        len === 1 && (newDataIndexMap[key] = null);\r\n                        idx = idx.shift();\r\n                    }\r\n                    else {\r\n                        newDataIndexMap[key] = null;\r\n                    }\r\n                    this._update && this._update(idx, i);\r\n                }\r\n                else {\r\n                    this._remove && this._remove(i);\r\n                }\r\n            }\r\n            for (i = 0; i < newDataKeyArr.length; i++) {\r\n                var key = newDataKeyArr[i];\r\n                if (newDataIndexMap.hasOwnProperty(key)) {\r\n                    var idx = newDataIndexMap[key];\r\n                    if (idx == null) {\r\n                        continue;\r\n                    }\r\n                    if (!idx.length) {\r\n                        this._add && this._add(idx);\r\n                    }\r\n                    else {\r\n                        for (var j = 0, len = idx.length; j < len; j++) {\r\n                            this._add && this._add(idx[j]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        DataDiffer.prototype._initIndexMap = function (arr, map, keyArr, keyGetterName) {\r\n            for (var i = 0; i < arr.length; i++) {\r\n                var key = '_ec_' + this[keyGetterName](arr[i], i);\r\n                var existence = map[key];\r\n                if (existence == null) {\r\n                    keyArr.push(key);\r\n                    map[key] = i;\r\n                }\r\n                else {\r\n                    if (!existence.length) {\r\n                        map[key] = existence = [existence];\r\n                    }\r\n                    existence.push(i);\r\n                }\r\n            }\r\n        };\r\n        return DataDiffer;\r\n    }());\n\n    function summarizeDimensions(data) {\r\n        var summary = {};\r\n        var encode = summary.encode = {};\r\n        var notExtraCoordDimMap = createHashMap();\r\n        var defaultedLabel = [];\r\n        var defaultedTooltip = [];\r\n        var userOutput = summary.userOutput = {\r\n            dimensionNames: data.dimensions.slice(),\r\n            encode: {}\r\n        };\r\n        each(data.dimensions, function (dimName) {\r\n            var dimItem = data.getDimensionInfo(dimName);\r\n            var coordDim = dimItem.coordDim;\r\n            if (coordDim) {\r\n                if (__DEV__) {\r\n                    assert(VISUAL_DIMENSIONS.get(coordDim) == null);\r\n                }\r\n                var coordDimIndex = dimItem.coordDimIndex;\r\n                getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\r\n                if (!dimItem.isExtraCoord) {\r\n                    notExtraCoordDimMap.set(coordDim, 1);\r\n                    if (mayLabelDimType(dimItem.type)) {\r\n                        defaultedLabel[0] = dimName;\r\n                    }\r\n                    getOrCreateEncodeArr(userOutput.encode, coordDim)[coordDimIndex] = dimItem.index;\r\n                }\r\n                if (dimItem.defaultTooltip) {\r\n                    defaultedTooltip.push(dimName);\r\n                }\r\n            }\r\n            VISUAL_DIMENSIONS.each(function (v, otherDim) {\r\n                var encodeArr = getOrCreateEncodeArr(encode, otherDim);\r\n                var dimIndex = dimItem.otherDims[otherDim];\r\n                if (dimIndex != null && dimIndex !== false) {\r\n                    encodeArr[dimIndex] = dimItem.name;\r\n                }\r\n            });\r\n        });\r\n        var dataDimsOnCoord = [];\r\n        var encodeFirstDimNotExtra = {};\r\n        notExtraCoordDimMap.each(function (v, coordDim) {\r\n            var dimArr = encode[coordDim];\r\n            encodeFirstDimNotExtra[coordDim] = dimArr[0];\r\n            dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\r\n        });\r\n        summary.dataDimsOnCoord = dataDimsOnCoord;\r\n        summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\r\n        var encodeLabel = encode.label;\r\n        if (encodeLabel && encodeLabel.length) {\r\n            defaultedLabel = encodeLabel.slice();\r\n        }\r\n        var encodeTooltip = encode.tooltip;\r\n        if (encodeTooltip && encodeTooltip.length) {\r\n            defaultedTooltip = encodeTooltip.slice();\r\n        }\r\n        else if (!defaultedTooltip.length) {\r\n            defaultedTooltip = defaultedLabel.slice();\r\n        }\r\n        encode.defaultedLabel = defaultedLabel;\r\n        encode.defaultedTooltip = defaultedTooltip;\r\n        return summary;\r\n    }\r\n    function getOrCreateEncodeArr(encode, dim) {\r\n        if (!encode.hasOwnProperty(dim)) {\r\n            encode[dim] = [];\r\n        }\r\n        return encode[dim];\r\n    }\r\n    function getDimensionTypeByAxis(axisType) {\r\n        return axisType === 'category'\r\n            ? 'ordinal'\r\n            : axisType === 'time'\r\n                ? 'time'\r\n                : 'float';\r\n    }\r\n    function mayLabelDimType(dimType) {\r\n        return !(dimType === 'ordinal' || dimType === 'time');\r\n    }\n\n    var DataDimensionInfo = (function () {\r\n        function DataDimensionInfo(opt) {\r\n            this.otherDims = {};\r\n            if (opt != null) {\r\n                extend(this, opt);\r\n            }\r\n        }\r\n        return DataDimensionInfo;\r\n    }());\n\n    var isObject$3 = isObject;\r\n    var UNDEFINED = 'undefined';\r\n    var INDEX_NOT_FOUND = -1;\r\n    var ID_PREFIX = 'e\\0\\0';\r\n    var dataCtors = {\r\n        'float': typeof Float64Array === UNDEFINED\r\n            ? Array : Float64Array,\r\n        'int': typeof Int32Array === UNDEFINED\r\n            ? Array : Int32Array,\r\n        'ordinal': Array,\r\n        'number': Array,\r\n        'time': Array\r\n    };\r\n    var CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\r\n    var CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\r\n    var CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\r\n    var TRANSFERABLE_PROPERTIES = [\r\n        'hasItemOption', '_nameList', '_idList', '_invertedIndicesMap',\r\n        '_rawData', '_chunkSize', '_chunkCount', '_dimValueGetter',\r\n        '_count', '_rawCount', '_nameDimIdx', '_idDimIdx'\r\n    ];\r\n    var CLONE_PROPERTIES = [\r\n        '_extent', '_approximateExtent', '_rawExtent'\r\n    ];\r\n    var defaultDimValueGetters;\r\n    var prepareInvertedIndex;\r\n    var getRawValueFromStore;\r\n    var getIndicesCtor;\r\n    var prepareChunks;\r\n    var getRawIndexWithoutIndices;\r\n    var getRawIndexWithIndices;\r\n    var getId;\r\n    var normalizeDimensions;\r\n    var validateDimensions;\r\n    var cloneListForMapAndSample;\r\n    var cloneDimStore;\r\n    var getInitialExtent;\r\n    var setItemDataAndSeriesIndex;\r\n    var transferProperties;\r\n    var List = (function () {\r\n        function List(dimensions, hostModel) {\r\n            this.type = 'list';\r\n            this._count = 0;\r\n            this._rawCount = 0;\r\n            this._storage = {};\r\n            this._nameList = [];\r\n            this._idList = [];\r\n            this._visual = {};\r\n            this._layout = {};\r\n            this._itemVisuals = [];\r\n            this._itemLayouts = [];\r\n            this._graphicEls = [];\r\n            this._chunkSize = 1e5;\r\n            this._chunkCount = 0;\r\n            this._rawExtent = {};\r\n            this._extent = {};\r\n            this._approximateExtent = {};\r\n            this._calculationInfo = {};\r\n            this.hasItemOption = true;\r\n            this.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'map'];\r\n            this.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\r\n            this.getRawIndex = getRawIndexWithoutIndices;\r\n            dimensions = dimensions || ['x', 'y'];\r\n            var dimensionInfos = {};\r\n            var dimensionNames = [];\r\n            var invertedIndicesMap = {};\r\n            for (var i = 0; i < dimensions.length; i++) {\r\n                var dimInfoInput = dimensions[i];\r\n                var dimensionInfo = isString(dimInfoInput)\r\n                    ? new DataDimensionInfo({ name: dimInfoInput })\r\n                    : !(dimInfoInput instanceof DataDimensionInfo)\r\n                        ? new DataDimensionInfo(dimInfoInput)\r\n                        : dimInfoInput;\r\n                var dimensionName = dimensionInfo.name;\r\n                dimensionInfo.type = dimensionInfo.type || 'float';\r\n                if (!dimensionInfo.coordDim) {\r\n                    dimensionInfo.coordDim = dimensionName;\r\n                    dimensionInfo.coordDimIndex = 0;\r\n                }\r\n                dimensionInfo.otherDims = dimensionInfo.otherDims || {};\r\n                dimensionNames.push(dimensionName);\r\n                dimensionInfos[dimensionName] = dimensionInfo;\r\n                dimensionInfo.index = i;\r\n                if (dimensionInfo.createInvertedIndices) {\r\n                    invertedIndicesMap[dimensionName] = [];\r\n                }\r\n            }\r\n            this.dimensions = dimensionNames;\r\n            this._dimensionInfos = dimensionInfos;\r\n            this.hostModel = hostModel;\r\n            this._dimensionsSummary = summarizeDimensions(this);\r\n            this._invertedIndicesMap = invertedIndicesMap;\r\n            this.userOutput = this._dimensionsSummary.userOutput;\r\n        }\r\n        List.prototype.getDimension = function (dim) {\r\n            if (typeof dim === 'number'\r\n                || (!isNaN(dim) && !this._dimensionInfos.hasOwnProperty(dim))) {\r\n                dim = this.dimensions[dim];\r\n            }\r\n            return dim;\r\n        };\r\n        List.prototype.getDimensionInfo = function (dim) {\r\n            return this._dimensionInfos[this.getDimension(dim)];\r\n        };\r\n        List.prototype.getDimensionsOnCoord = function () {\r\n            return this._dimensionsSummary.dataDimsOnCoord.slice();\r\n        };\r\n        List.prototype.mapDimension = function (coordDim, idx) {\r\n            var dimensionsSummary = this._dimensionsSummary;\r\n            if (idx == null) {\r\n                return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\r\n            }\r\n            var dims = dimensionsSummary.encode[coordDim];\r\n            return dims ? dims[idx] : null;\r\n        };\r\n        List.prototype.mapDimensionsAll = function (coordDim) {\r\n            var dimensionsSummary = this._dimensionsSummary;\r\n            var dims = dimensionsSummary.encode[coordDim];\r\n            return (dims || []).slice();\r\n        };\r\n        List.prototype.initData = function (data, nameList, dimValueGetter) {\r\n            var notProvider = data instanceof Source || isArrayLike(data);\r\n            if (notProvider) {\r\n                data = new DefaultDataProvider(data, this.dimensions.length);\r\n            }\r\n            if (__DEV__) {\r\n                if (!notProvider\r\n                    && (typeof data.getItem !== 'function' || typeof data.count !== 'function')) {\r\n                    throw new Error('Inavlid data provider.');\r\n                }\r\n            }\r\n            this._rawData = data;\r\n            this._storage = {};\r\n            this._indices = null;\r\n            this._nameList = nameList || [];\r\n            this._idList = [];\r\n            this._nameRepeatCount = {};\r\n            if (!dimValueGetter) {\r\n                this.hasItemOption = false;\r\n            }\r\n            this.defaultDimValueGetter = defaultDimValueGetters[this._rawData.getSource().sourceFormat];\r\n            this._dimValueGetter = dimValueGetter = dimValueGetter\r\n                || this.defaultDimValueGetter;\r\n            this._dimValueGetterArrayRows = defaultDimValueGetters.arrayRows;\r\n            this._rawExtent = {};\r\n            this._initDataFromProvider(0, data.count());\r\n            if (data.pure) {\r\n                this.hasItemOption = false;\r\n            }\r\n        };\r\n        List.prototype.getProvider = function () {\r\n            return this._rawData;\r\n        };\r\n        List.prototype.appendData = function (data) {\r\n            if (__DEV__) {\r\n                assert(!this._indices, 'appendData can only be called on raw data.');\r\n            }\r\n            var rawData = this._rawData;\r\n            var start = this.count();\r\n            rawData.appendData(data);\r\n            var end = rawData.count();\r\n            if (!rawData.persistent) {\r\n                end += start;\r\n            }\r\n            this._initDataFromProvider(start, end);\r\n        };\r\n        List.prototype.appendValues = function (values, names) {\r\n            var chunkSize = this._chunkSize;\r\n            var storage = this._storage;\r\n            var dimensions = this.dimensions;\r\n            var dimLen = dimensions.length;\r\n            var rawExtent = this._rawExtent;\r\n            var start = this.count();\r\n            var end = start + Math.max(values.length, names ? names.length : 0);\r\n            var originalChunkCount = this._chunkCount;\r\n            for (var i = 0; i < dimLen; i++) {\r\n                var dim = dimensions[i];\r\n                if (!rawExtent[dim]) {\r\n                    rawExtent[dim] = getInitialExtent();\r\n                }\r\n                if (!storage[dim]) {\r\n                    storage[dim] = [];\r\n                }\r\n                prepareChunks(storage, this._dimensionInfos[dim], chunkSize, originalChunkCount, end);\r\n                this._chunkCount = storage[dim].length;\r\n            }\r\n            var emptyDataItem = new Array(dimLen);\r\n            for (var idx = start; idx < end; idx++) {\r\n                var sourceIdx = idx - start;\r\n                var chunkIndex = Math.floor(idx / chunkSize);\r\n                var chunkOffset = idx % chunkSize;\r\n                for (var k = 0; k < dimLen; k++) {\r\n                    var dim = dimensions[k];\r\n                    var val = this._dimValueGetterArrayRows(values[sourceIdx] || emptyDataItem, dim, sourceIdx, k);\r\n                    storage[dim][chunkIndex][chunkOffset] = val;\r\n                    var dimRawExtent = rawExtent[dim];\r\n                    val < dimRawExtent[0] && (dimRawExtent[0] = val);\r\n                    val > dimRawExtent[1] && (dimRawExtent[1] = val);\r\n                }\r\n                if (names) {\r\n                    this._nameList[idx] = names[sourceIdx];\r\n                }\r\n            }\r\n            this._rawCount = this._count = end;\r\n            this._extent = {};\r\n            prepareInvertedIndex(this);\r\n        };\r\n        List.prototype._initDataFromProvider = function (start, end) {\r\n            if (start >= end) {\r\n                return;\r\n            }\r\n            var chunkSize = this._chunkSize;\r\n            var rawData = this._rawData;\r\n            var storage = this._storage;\r\n            var dimensions = this.dimensions;\r\n            var dimLen = dimensions.length;\r\n            var dimensionInfoMap = this._dimensionInfos;\r\n            var nameList = this._nameList;\r\n            var idList = this._idList;\r\n            var rawExtent = this._rawExtent;\r\n            var nameRepeatCount = this._nameRepeatCount = {};\r\n            var nameDimIdx;\r\n            var originalChunkCount = this._chunkCount;\r\n            for (var i = 0; i < dimLen; i++) {\r\n                var dim = dimensions[i];\r\n                if (!rawExtent[dim]) {\r\n                    rawExtent[dim] = getInitialExtent();\r\n                }\r\n                var dimInfo = dimensionInfoMap[dim];\r\n                if (dimInfo.otherDims.itemName === 0) {\r\n                    nameDimIdx = this._nameDimIdx = i;\r\n                }\r\n                if (dimInfo.otherDims.itemId === 0) {\r\n                    this._idDimIdx = i;\r\n                }\r\n                if (!storage[dim]) {\r\n                    storage[dim] = [];\r\n                }\r\n                prepareChunks(storage, dimInfo, chunkSize, originalChunkCount, end);\r\n                this._chunkCount = storage[dim].length;\r\n            }\r\n            var dataItem = new Array(dimLen);\r\n            for (var idx = start; idx < end; idx++) {\r\n                dataItem = rawData.getItem(idx, dataItem);\r\n                var chunkIndex = Math.floor(idx / chunkSize);\r\n                var chunkOffset = idx % chunkSize;\r\n                for (var k = 0; k < dimLen; k++) {\r\n                    var dim = dimensions[k];\r\n                    var dimStorage = storage[dim][chunkIndex];\r\n                    var val = this._dimValueGetter(dataItem, dim, idx, k);\r\n                    dimStorage[chunkOffset] = val;\r\n                    var dimRawExtent = rawExtent[dim];\r\n                    val < dimRawExtent[0] && (dimRawExtent[0] = val);\r\n                    val > dimRawExtent[1] && (dimRawExtent[1] = val);\r\n                }\r\n                if (!rawData.pure) {\r\n                    var name_1 = nameList[idx];\r\n                    if (dataItem && name_1 == null) {\r\n                        if (dataItem.name != null) {\r\n                            nameList[idx] = name_1 = dataItem.name;\r\n                        }\r\n                        else if (nameDimIdx != null) {\r\n                            var nameDim = dimensions[nameDimIdx];\r\n                            var nameDimChunk = storage[nameDim][chunkIndex];\r\n                            if (nameDimChunk) {\r\n                                name_1 = nameDimChunk[chunkOffset];\r\n                                var ordinalMeta = dimensionInfoMap[nameDim].ordinalMeta;\r\n                                if (ordinalMeta && ordinalMeta.categories.length) {\r\n                                    name_1 = ordinalMeta.categories[name_1];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    var id = dataItem == null ? null : dataItem.id;\r\n                    if (id == null && name_1 != null) {\r\n                        nameRepeatCount[name_1] = nameRepeatCount[name_1] || 0;\r\n                        id = name_1;\r\n                        if (nameRepeatCount[name_1] > 0) {\r\n                            id += '__ec__' + nameRepeatCount[name_1];\r\n                        }\r\n                        nameRepeatCount[name_1]++;\r\n                    }\r\n                    id != null && (idList[idx] = id);\r\n                }\r\n            }\r\n            if (!rawData.persistent && rawData.clean) {\r\n                rawData.clean();\r\n            }\r\n            this._rawCount = this._count = end;\r\n            this._extent = {};\r\n            prepareInvertedIndex(this);\r\n        };\r\n        List.prototype.count = function () {\r\n            return this._count;\r\n        };\r\n        List.prototype.getIndices = function () {\r\n            var newIndices;\r\n            var indices = this._indices;\r\n            if (indices) {\r\n                var Ctor = indices.constructor;\r\n                var thisCount = this._count;\r\n                if (Ctor === Array) {\r\n                    newIndices = new Ctor(thisCount);\r\n                    for (var i = 0; i < thisCount; i++) {\r\n                        newIndices[i] = indices[i];\r\n                    }\r\n                }\r\n                else {\r\n                    newIndices = new Ctor(indices.buffer, 0, thisCount);\r\n                }\r\n            }\r\n            else {\r\n                var Ctor = getIndicesCtor(this);\r\n                newIndices = new Ctor(this.count());\r\n                for (var i = 0; i < newIndices.length; i++) {\r\n                    newIndices[i] = i;\r\n                }\r\n            }\r\n            return newIndices;\r\n        };\r\n        List.prototype.get = function (dim, idx) {\r\n            if (!(idx >= 0 && idx < this._count)) {\r\n                return NaN;\r\n            }\r\n            var storage = this._storage;\r\n            if (!storage[dim]) {\r\n                return NaN;\r\n            }\r\n            idx = this.getRawIndex(idx);\r\n            var chunkIndex = Math.floor(idx / this._chunkSize);\r\n            var chunkOffset = idx % this._chunkSize;\r\n            var chunkStore = storage[dim][chunkIndex];\r\n            var value = chunkStore[chunkOffset];\r\n            return value;\r\n        };\r\n        List.prototype.getByRawIndex = function (dim, rawIdx) {\r\n            if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\r\n                return NaN;\r\n            }\r\n            var dimStore = this._storage[dim];\r\n            if (!dimStore) {\r\n                return NaN;\r\n            }\r\n            var chunkIndex = Math.floor(rawIdx / this._chunkSize);\r\n            var chunkOffset = rawIdx % this._chunkSize;\r\n            var chunkStore = dimStore[chunkIndex];\r\n            return chunkStore[chunkOffset];\r\n        };\r\n        List.prototype._getFast = function (dim, rawIdx) {\r\n            var chunkIndex = Math.floor(rawIdx / this._chunkSize);\r\n            var chunkOffset = rawIdx % this._chunkSize;\r\n            var chunkStore = this._storage[dim][chunkIndex];\r\n            return chunkStore[chunkOffset];\r\n        };\r\n        List.prototype.getValues = function (dimensions, idx) {\r\n            var values = [];\r\n            if (!isArray(dimensions)) {\r\n                idx = dimensions;\r\n                dimensions = this.dimensions;\r\n            }\r\n            for (var i = 0, len = dimensions.length; i < len; i++) {\r\n                values.push(this.get(dimensions[i], idx));\r\n            }\r\n            return values;\r\n        };\r\n        List.prototype.hasValue = function (idx) {\r\n            var dataDimsOnCoord = this._dimensionsSummary.dataDimsOnCoord;\r\n            for (var i = 0, len = dataDimsOnCoord.length; i < len; i++) {\r\n                if (isNaN(this.get(dataDimsOnCoord[i], idx))) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        List.prototype.getDataExtent = function (dim) {\r\n            dim = this.getDimension(dim);\r\n            var dimData = this._storage[dim];\r\n            var initialExtent = getInitialExtent();\r\n            if (!dimData) {\r\n                return initialExtent;\r\n            }\r\n            var currEnd = this.count();\r\n            var useRaw = !this._indices;\r\n            var dimExtent;\r\n            if (useRaw) {\r\n                return this._rawExtent[dim].slice();\r\n            }\r\n            dimExtent = this._extent[dim];\r\n            if (dimExtent) {\r\n                return dimExtent.slice();\r\n            }\r\n            dimExtent = initialExtent;\r\n            var min = dimExtent[0];\r\n            var max = dimExtent[1];\r\n            for (var i = 0; i < currEnd; i++) {\r\n                var value = this._getFast(dim, this.getRawIndex(i));\r\n                value < min && (min = value);\r\n                value > max && (max = value);\r\n            }\r\n            dimExtent = [min, max];\r\n            this._extent[dim] = dimExtent;\r\n            return dimExtent;\r\n        };\r\n        List.prototype.getApproximateExtent = function (dim) {\r\n            dim = this.getDimension(dim);\r\n            return this._approximateExtent[dim] || this.getDataExtent(dim);\r\n        };\r\n        List.prototype.setApproximateExtent = function (extent, dim) {\r\n            dim = this.getDimension(dim);\r\n            this._approximateExtent[dim] = extent.slice();\r\n        };\r\n        List.prototype.getCalculationInfo = function (key) {\r\n            return this._calculationInfo[key];\r\n        };\r\n        List.prototype.setCalculationInfo = function (key, value) {\r\n            isObject$3(key)\r\n                ? extend(this._calculationInfo, key)\r\n                : (this._calculationInfo[key] = value);\r\n        };\r\n        List.prototype.getSum = function (dim) {\r\n            var dimData = this._storage[dim];\r\n            var sum = 0;\r\n            if (dimData) {\r\n                for (var i = 0, len = this.count(); i < len; i++) {\r\n                    var value = this.get(dim, i);\r\n                    if (!isNaN(value)) {\r\n                        sum += value;\r\n                    }\r\n                }\r\n            }\r\n            return sum;\r\n        };\r\n        List.prototype.getMedian = function (dim) {\r\n            var dimDataArray = [];\r\n            this.each(dim, function (val) {\r\n                if (!isNaN(val)) {\r\n                    dimDataArray.push(val);\r\n                }\r\n            });\r\n            var sortedDimDataArray = dimDataArray.sort(function (a, b) {\r\n                return a - b;\r\n            });\r\n            var len = this.count();\r\n            return len === 0\r\n                ? 0\r\n                : len % 2 === 1\r\n                    ? sortedDimDataArray[(len - 1) / 2]\r\n                    : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\r\n        };\r\n        List.prototype.rawIndexOf = function (dim, value) {\r\n            var invertedIndices = dim && this._invertedIndicesMap[dim];\r\n            if (__DEV__) {\r\n                if (!invertedIndices) {\r\n                    throw new Error('Do not supported yet');\r\n                }\r\n            }\r\n            var rawIndex = invertedIndices[value];\r\n            if (rawIndex == null || isNaN(rawIndex)) {\r\n                return INDEX_NOT_FOUND;\r\n            }\r\n            return rawIndex;\r\n        };\r\n        List.prototype.indexOfName = function (name) {\r\n            for (var i = 0, len = this.count(); i < len; i++) {\r\n                if (this.getName(i) === name) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        };\r\n        List.prototype.indexOfRawIndex = function (rawIndex) {\r\n            if (rawIndex >= this._rawCount || rawIndex < 0) {\r\n                return -1;\r\n            }\r\n            if (!this._indices) {\r\n                return rawIndex;\r\n            }\r\n            var indices = this._indices;\r\n            var rawDataIndex = indices[rawIndex];\r\n            if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\r\n                return rawIndex;\r\n            }\r\n            var left = 0;\r\n            var right = this._count - 1;\r\n            while (left <= right) {\r\n                var mid = (left + right) / 2 | 0;\r\n                if (indices[mid] < rawIndex) {\r\n                    left = mid + 1;\r\n                }\r\n                else if (indices[mid] > rawIndex) {\r\n                    right = mid - 1;\r\n                }\r\n                else {\r\n                    return mid;\r\n                }\r\n            }\r\n            return -1;\r\n        };\r\n        List.prototype.indicesOfNearest = function (dim, value, maxDistance) {\r\n            var storage = this._storage;\r\n            var dimData = storage[dim];\r\n            var nearestIndices = [];\r\n            if (!dimData) {\r\n                return nearestIndices;\r\n            }\r\n            if (maxDistance == null) {\r\n                maxDistance = Infinity;\r\n            }\r\n            var minDist = Infinity;\r\n            var minDiff = -1;\r\n            var nearestIndicesLen = 0;\r\n            for (var i = 0, len = this.count(); i < len; i++) {\r\n                var diff = value - this.get(dim, i);\r\n                var dist = Math.abs(diff);\r\n                if (dist <= maxDistance) {\r\n                    if (dist < minDist\r\n                        || (dist === minDist && diff >= 0 && minDiff < 0)) {\r\n                        minDist = dist;\r\n                        minDiff = diff;\r\n                        nearestIndicesLen = 0;\r\n                    }\r\n                    if (diff === minDiff) {\r\n                        nearestIndices[nearestIndicesLen++] = i;\r\n                    }\r\n                }\r\n            }\r\n            nearestIndices.length = nearestIndicesLen;\r\n            return nearestIndices;\r\n        };\r\n        List.prototype.getRawDataItem = function (idx) {\r\n            if (!this._rawData.persistent) {\r\n                var val = [];\r\n                for (var i = 0; i < this.dimensions.length; i++) {\r\n                    var dim = this.dimensions[i];\r\n                    val.push(this.get(dim, idx));\r\n                }\r\n                return val;\r\n            }\r\n            else {\r\n                return this._rawData.getItem(this.getRawIndex(idx));\r\n            }\r\n        };\r\n        List.prototype.getName = function (idx) {\r\n            var rawIndex = this.getRawIndex(idx);\r\n            return this._nameList[rawIndex]\r\n                || getRawValueFromStore(this, this._nameDimIdx, rawIndex)\r\n                || '';\r\n        };\r\n        List.prototype.getId = function (idx) {\r\n            return getId(this, this.getRawIndex(idx));\r\n        };\r\n        List.prototype.each = function (dims, cb, ctx, ctxCompat) {\r\n            if (!this._count) {\r\n                return;\r\n            }\r\n            if (typeof dims === 'function') {\r\n                ctxCompat = ctx;\r\n                ctx = cb;\r\n                cb = dims;\r\n                dims = [];\r\n            }\r\n            var fCtx = (ctx || ctxCompat || this);\r\n            var dimNames = map(normalizeDimensions(dims), this.getDimension, this);\r\n            if (__DEV__) {\r\n                validateDimensions(this, dimNames);\r\n            }\r\n            var dimSize = dimNames.length;\r\n            for (var i = 0; i < this.count(); i++) {\r\n                switch (dimSize) {\r\n                    case 0:\r\n                        cb.call(fCtx, i);\r\n                        break;\r\n                    case 1:\r\n                        cb.call(fCtx, this.get(dimNames[0], i), i);\r\n                        break;\r\n                    case 2:\r\n                        cb.call(fCtx, this.get(dimNames[0], i), this.get(dimNames[1], i), i);\r\n                        break;\r\n                    default:\r\n                        var k = 0;\r\n                        var value = [];\r\n                        for (; k < dimSize; k++) {\r\n                            value[k] = this.get(dimNames[k], i);\r\n                        }\r\n                        value[k] = i;\r\n                        cb.apply(fCtx, value);\r\n                }\r\n            }\r\n        };\r\n        List.prototype.filterSelf = function (dims, cb, ctx, ctxCompat) {\r\n            if (!this._count) {\r\n                return;\r\n            }\r\n            if (typeof dims === 'function') {\r\n                ctxCompat = ctx;\r\n                ctx = cb;\r\n                cb = dims;\r\n                dims = [];\r\n            }\r\n            var fCtx = (ctx || ctxCompat || this);\r\n            var dimNames = map(normalizeDimensions(dims), this.getDimension, this);\r\n            if (__DEV__) {\r\n                validateDimensions(this, dimNames);\r\n            }\r\n            var count = this.count();\r\n            var Ctor = getIndicesCtor(this);\r\n            var newIndices = new Ctor(count);\r\n            var value = [];\r\n            var dimSize = dimNames.length;\r\n            var offset = 0;\r\n            var dim0 = dimNames[0];\r\n            for (var i = 0; i < count; i++) {\r\n                var keep = void 0;\r\n                var rawIdx = this.getRawIndex(i);\r\n                if (dimSize === 0) {\r\n                    keep = cb.call(fCtx, i);\r\n                }\r\n                else if (dimSize === 1) {\r\n                    var val = this._getFast(dim0, rawIdx);\r\n                    keep = cb.call(fCtx, val, i);\r\n                }\r\n                else {\r\n                    var k = 0;\r\n                    for (; k < dimSize; k++) {\r\n                        value[k] = this._getFast(dim0, rawIdx);\r\n                    }\r\n                    value[k] = i;\r\n                    keep = cb.apply(fCtx, value);\r\n                }\r\n                if (keep) {\r\n                    newIndices[offset++] = rawIdx;\r\n                }\r\n            }\r\n            if (offset < count) {\r\n                this._indices = newIndices;\r\n            }\r\n            this._count = offset;\r\n            this._extent = {};\r\n            this.getRawIndex = this._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\r\n            return this;\r\n        };\r\n        List.prototype.selectRange = function (range) {\r\n            if (!this._count) {\r\n                return;\r\n            }\r\n            var dimensions = [];\r\n            for (var dim in range) {\r\n                if (range.hasOwnProperty(dim)) {\r\n                    dimensions.push(dim);\r\n                }\r\n            }\r\n            if (__DEV__) {\r\n                validateDimensions(this, dimensions);\r\n            }\r\n            var dimSize = dimensions.length;\r\n            if (!dimSize) {\r\n                return;\r\n            }\r\n            var originalCount = this.count();\r\n            var Ctor = getIndicesCtor(this);\r\n            var newIndices = new Ctor(originalCount);\r\n            var offset = 0;\r\n            var dim0 = dimensions[0];\r\n            var min = range[dim0][0];\r\n            var max = range[dim0][1];\r\n            var quickFinished = false;\r\n            if (!this._indices) {\r\n                var idx = 0;\r\n                if (dimSize === 1) {\r\n                    var dimStorage = this._storage[dimensions[0]];\r\n                    for (var k = 0; k < this._chunkCount; k++) {\r\n                        var chunkStorage = dimStorage[k];\r\n                        var len = Math.min(this._count - k * this._chunkSize, this._chunkSize);\r\n                        for (var i = 0; i < len; i++) {\r\n                            var val = chunkStorage[i];\r\n                            if ((val >= min && val <= max) || isNaN(val)) {\r\n                                newIndices[offset++] = idx;\r\n                            }\r\n                            idx++;\r\n                        }\r\n                    }\r\n                    quickFinished = true;\r\n                }\r\n                else if (dimSize === 2) {\r\n                    var dimStorage = this._storage[dim0];\r\n                    var dimStorage2 = this._storage[dimensions[1]];\r\n                    var min2 = range[dimensions[1]][0];\r\n                    var max2 = range[dimensions[1]][1];\r\n                    for (var k = 0; k < this._chunkCount; k++) {\r\n                        var chunkStorage = dimStorage[k];\r\n                        var chunkStorage2 = dimStorage2[k];\r\n                        var len = Math.min(this._count - k * this._chunkSize, this._chunkSize);\r\n                        for (var i = 0; i < len; i++) {\r\n                            var val = chunkStorage[i];\r\n                            var val2 = chunkStorage2[i];\r\n                            if (((val >= min && val <= max) || isNaN(val))\r\n                                && ((val2 >= min2 && val2 <= max2) || isNaN(val2))) {\r\n                                newIndices[offset++] = idx;\r\n                            }\r\n                            idx++;\r\n                        }\r\n                    }\r\n                    quickFinished = true;\r\n                }\r\n            }\r\n            if (!quickFinished) {\r\n                if (dimSize === 1) {\r\n                    for (var i = 0; i < originalCount; i++) {\r\n                        var rawIndex = this.getRawIndex(i);\r\n                        var val = this._getFast(dim0, rawIndex);\r\n                        if ((val >= min && val <= max) || isNaN(val)) {\r\n                            newIndices[offset++] = rawIndex;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    for (var i = 0; i < originalCount; i++) {\r\n                        var keep = true;\r\n                        var rawIndex = this.getRawIndex(i);\r\n                        for (var k = 0; k < dimSize; k++) {\r\n                            var dimk = dimensions[k];\r\n                            var val = this._getFast(dimk, rawIndex);\r\n                            if (val < range[dimk][0] || val > range[dimk][1]) {\r\n                                keep = false;\r\n                            }\r\n                        }\r\n                        if (keep) {\r\n                            newIndices[offset++] = this.getRawIndex(i);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (offset < originalCount) {\r\n                this._indices = newIndices;\r\n            }\r\n            this._count = offset;\r\n            this._extent = {};\r\n            this.getRawIndex = this._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\r\n            return this;\r\n        };\r\n        List.prototype.mapArray = function (dims, cb, ctx, ctxCompat) {\r\n            if (typeof dims === 'function') {\r\n                ctxCompat = ctx;\r\n                ctx = cb;\r\n                cb = dims;\r\n                dims = [];\r\n            }\r\n            ctx = (ctx || ctxCompat || this);\r\n            var result = [];\r\n            this.each(dims, function () {\r\n                result.push(cb && cb.apply(this, arguments));\r\n            }, ctx);\r\n            return result;\r\n        };\r\n        List.prototype.map = function (dims, cb, ctx, ctxCompat) {\r\n            var fCtx = (ctx || ctxCompat || this);\r\n            var dimNames = map(normalizeDimensions(dims), this.getDimension, this);\r\n            if (__DEV__) {\r\n                validateDimensions(this, dimNames);\r\n            }\r\n            var list = cloneListForMapAndSample(this, dimNames);\r\n            list._indices = this._indices;\r\n            list.getRawIndex = list._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\r\n            var storage = list._storage;\r\n            var tmpRetValue = [];\r\n            var chunkSize = this._chunkSize;\r\n            var dimSize = dimNames.length;\r\n            var dataCount = this.count();\r\n            var values = [];\r\n            var rawExtent = list._rawExtent;\r\n            for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\r\n                for (var dimIndex = 0; dimIndex < dimSize; dimIndex++) {\r\n                    values[dimIndex] = this.get(dimNames[dimIndex], dataIndex);\r\n                }\r\n                values[dimSize] = dataIndex;\r\n                var retValue = cb && cb.apply(fCtx, values);\r\n                if (retValue != null) {\r\n                    if (typeof retValue !== 'object') {\r\n                        tmpRetValue[0] = retValue;\r\n                        retValue = tmpRetValue;\r\n                    }\r\n                    var rawIndex = this.getRawIndex(dataIndex);\r\n                    var chunkIndex = Math.floor(rawIndex / chunkSize);\r\n                    var chunkOffset = rawIndex % chunkSize;\r\n                    for (var i = 0; i < retValue.length; i++) {\r\n                        var dim = dimNames[i];\r\n                        var val = retValue[i];\r\n                        var rawExtentOnDim = rawExtent[dim];\r\n                        var dimStore = storage[dim];\r\n                        if (dimStore) {\r\n                            dimStore[chunkIndex][chunkOffset] = val;\r\n                        }\r\n                        if (val < rawExtentOnDim[0]) {\r\n                            rawExtentOnDim[0] = val;\r\n                        }\r\n                        if (val > rawExtentOnDim[1]) {\r\n                            rawExtentOnDim[1] = val;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return list;\r\n        };\r\n        List.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\r\n            var list = cloneListForMapAndSample(this, [dimension]);\r\n            var targetStorage = list._storage;\r\n            var frameValues = [];\r\n            var frameSize = Math.floor(1 / rate);\r\n            var dimStore = targetStorage[dimension];\r\n            var len = this.count();\r\n            var chunkSize = this._chunkSize;\r\n            var rawExtentOnDim = list._rawExtent[dimension];\r\n            var newIndices = new (getIndicesCtor(this))(len);\r\n            var offset = 0;\r\n            for (var i = 0; i < len; i += frameSize) {\r\n                if (frameSize > len - i) {\r\n                    frameSize = len - i;\r\n                    frameValues.length = frameSize;\r\n                }\r\n                for (var k = 0; k < frameSize; k++) {\r\n                    var dataIdx = this.getRawIndex(i + k);\r\n                    var originalChunkIndex = Math.floor(dataIdx / chunkSize);\r\n                    var originalChunkOffset = dataIdx % chunkSize;\r\n                    frameValues[k] = dimStore[originalChunkIndex][originalChunkOffset];\r\n                }\r\n                var value = sampleValue(frameValues);\r\n                var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1));\r\n                var sampleChunkIndex = Math.floor(sampleFrameIdx / chunkSize);\r\n                var sampleChunkOffset = sampleFrameIdx % chunkSize;\r\n                dimStore[sampleChunkIndex][sampleChunkOffset] = value;\r\n                if (value < rawExtentOnDim[0]) {\r\n                    rawExtentOnDim[0] = value;\r\n                }\r\n                if (value > rawExtentOnDim[1]) {\r\n                    rawExtentOnDim[1] = value;\r\n                }\r\n                newIndices[offset++] = sampleFrameIdx;\r\n            }\r\n            list._count = offset;\r\n            list._indices = newIndices;\r\n            list.getRawIndex = getRawIndexWithIndices;\r\n            return list;\r\n        };\r\n        List.prototype.getItemModel = function (idx) {\r\n            var hostModel = this.hostModel;\r\n            var dataItem = this.getRawDataItem(idx);\r\n            return new Model(dataItem, hostModel, hostModel && hostModel.ecModel);\r\n        };\r\n        List.prototype.diff = function (otherList) {\r\n            var thisList = this;\r\n            return new DataDiffer(otherList ? otherList.getIndices() : [], this.getIndices(), function (idx) {\r\n                return getId(otherList, idx);\r\n            }, function (idx) {\r\n                return getId(thisList, idx);\r\n            });\r\n        };\r\n        List.prototype.getVisual = function (key) {\r\n            var visual = this._visual;\r\n            return visual && visual[key];\r\n        };\r\n        List.prototype.setVisual = function (kvObj, val) {\r\n            this._visual = this._visual || {};\r\n            if (isObject$3(kvObj)) {\r\n                extend(this._visual, kvObj);\r\n            }\r\n            else {\r\n                this._visual[kvObj] = val;\r\n            }\r\n        };\r\n        List.prototype.getItemVisual = function (idx, key) {\r\n            var itemVisual = this._itemVisuals[idx];\r\n            var val = itemVisual && itemVisual[key];\r\n            if (val == null) {\r\n                return this.getVisual(key);\r\n            }\r\n            return val;\r\n        };\r\n        List.prototype.ensureUniqueItemVisual = function (idx, key) {\r\n            var itemVisuals = this._itemVisuals;\r\n            var itemVisual = itemVisuals[idx];\r\n            if (!itemVisual) {\r\n                itemVisual = itemVisuals[idx] = {};\r\n            }\r\n            var val = itemVisual[key];\r\n            if (!val) {\r\n                val = this.getVisual(key);\r\n                if (isArray(val)) {\r\n                    val = val.slice();\r\n                }\r\n                else if (isObject$3(val)) {\r\n                    val = extend({}, val);\r\n                }\r\n                itemVisual[key] = val;\r\n            }\r\n            return val;\r\n        };\r\n        List.prototype.setItemVisual = function (idx, key, value) {\r\n            var itemVisual = this._itemVisuals[idx] || {};\r\n            this._itemVisuals[idx] = itemVisual;\r\n            if (isObject$3(key)) {\r\n                extend(itemVisual, key);\r\n            }\r\n            else {\r\n                itemVisual[key] = value;\r\n            }\r\n        };\r\n        List.prototype.clearAllVisual = function () {\r\n            this._visual = {};\r\n            this._itemVisuals = [];\r\n        };\r\n        List.prototype.setLayout = function (key, val) {\r\n            if (isObject$3(key)) {\r\n                for (var name_2 in key) {\r\n                    if (key.hasOwnProperty(name_2)) {\r\n                        this.setLayout(name_2, key[name_2]);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            this._layout[key] = val;\r\n        };\r\n        List.prototype.getLayout = function (key) {\r\n            return this._layout[key];\r\n        };\r\n        List.prototype.getItemLayout = function (idx) {\r\n            return this._itemLayouts[idx];\r\n        };\r\n        List.prototype.setItemLayout = function (idx, layout, merge) {\r\n            this._itemLayouts[idx] = merge\r\n                ? extend(this._itemLayouts[idx] || {}, layout)\r\n                : layout;\r\n        };\r\n        List.prototype.clearItemLayouts = function () {\r\n            this._itemLayouts.length = 0;\r\n        };\r\n        List.prototype.setItemGraphicEl = function (idx, el) {\r\n            var hostModel = this.hostModel;\r\n            if (el) {\r\n                var ecData = getECData(el);\r\n                ecData.dataIndex = idx;\r\n                ecData.dataType = this.dataType;\r\n                ecData.seriesIndex = hostModel && hostModel.seriesIndex;\r\n                if (el.type === 'group') {\r\n                    el.traverse(setItemDataAndSeriesIndex, el);\r\n                }\r\n            }\r\n            this._graphicEls[idx] = el;\r\n        };\r\n        List.prototype.getItemGraphicEl = function (idx) {\r\n            return this._graphicEls[idx];\r\n        };\r\n        List.prototype.eachItemGraphicEl = function (cb, context) {\r\n            each(this._graphicEls, function (el, idx) {\r\n                if (el) {\r\n                    cb && cb.call(context, el, idx);\r\n                }\r\n            });\r\n        };\r\n        List.prototype.cloneShallow = function (list) {\r\n            if (!list) {\r\n                var dimensionInfoList = map(this.dimensions, this.getDimensionInfo, this);\r\n                list = new List(dimensionInfoList, this.hostModel);\r\n            }\r\n            list._storage = this._storage;\r\n            transferProperties(list, this);\r\n            if (this._indices) {\r\n                var Ctor = this._indices.constructor;\r\n                if (Ctor === Array) {\r\n                    var thisCount = this._indices.length;\r\n                    list._indices = new Ctor(thisCount);\r\n                    for (var i = 0; i < thisCount; i++) {\r\n                        list._indices[i] = this._indices[i];\r\n                    }\r\n                }\r\n                else {\r\n                    list._indices = new Ctor(this._indices);\r\n                }\r\n            }\r\n            else {\r\n                list._indices = null;\r\n            }\r\n            list.getRawIndex = list._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\r\n            return list;\r\n        };\r\n        List.prototype.wrapMethod = function (methodName, injectFunction) {\r\n            var originalMethod = this[methodName];\r\n            if (typeof originalMethod !== 'function') {\r\n                return;\r\n            }\r\n            this.__wrappedMethods = this.__wrappedMethods || [];\r\n            this.__wrappedMethods.push(methodName);\r\n            this[methodName] = function () {\r\n                var res = originalMethod.apply(this, arguments);\r\n                return injectFunction.apply(this, [res].concat(slice(arguments)));\r\n            };\r\n        };\r\n        List.internalField = (function () {\r\n            defaultDimValueGetters = {\r\n                arrayRows: getDimValueSimply,\r\n                objectRows: function (dataItem, dimName, dataIndex, dimIndex) {\r\n                    return parseDataValue(dataItem[dimName], this._dimensionInfos[dimName]);\r\n                },\r\n                keyedColumns: getDimValueSimply,\r\n                original: function (dataItem, dimName, dataIndex, dimIndex) {\r\n                    var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value);\r\n                    if (!this._rawData.pure && isDataItemOption(dataItem)) {\r\n                        this.hasItemOption = true;\r\n                    }\r\n                    return parseDataValue((value instanceof Array)\r\n                        ? value[dimIndex]\r\n                        : value, this._dimensionInfos[dimName]);\r\n                },\r\n                typedArray: function (dataItem, dimName, dataIndex, dimIndex) {\r\n                    return dataItem[dimIndex];\r\n                }\r\n            };\r\n            function getDimValueSimply(dataItem, dimName, dataIndex, dimIndex) {\r\n                return parseDataValue(dataItem[dimIndex], this._dimensionInfos[dimName]);\r\n            }\r\n            prepareInvertedIndex = function (list) {\r\n                var invertedIndicesMap = list._invertedIndicesMap;\r\n                each(invertedIndicesMap, function (invertedIndices, dim) {\r\n                    var dimInfo = list._dimensionInfos[dim];\r\n                    var ordinalMeta = dimInfo.ordinalMeta;\r\n                    if (ordinalMeta) {\r\n                        invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array(ordinalMeta.categories.length);\r\n                        for (var i = 0; i < invertedIndices.length; i++) {\r\n                            invertedIndices[i] = INDEX_NOT_FOUND;\r\n                        }\r\n                        for (var i = 0; i < list._count; i++) {\r\n                            invertedIndices[list.get(dim, i)] = i;\r\n                        }\r\n                    }\r\n                });\r\n            };\r\n            getRawValueFromStore = function (list, dimIndex, rawIndex) {\r\n                var val;\r\n                if (dimIndex != null) {\r\n                    var chunkSize = list._chunkSize;\r\n                    var chunkIndex = Math.floor(rawIndex / chunkSize);\r\n                    var chunkOffset = rawIndex % chunkSize;\r\n                    var dim = list.dimensions[dimIndex];\r\n                    var chunk = list._storage[dim][chunkIndex];\r\n                    if (chunk) {\r\n                        val = chunk[chunkOffset];\r\n                        var ordinalMeta = list._dimensionInfos[dim].ordinalMeta;\r\n                        if (ordinalMeta && ordinalMeta.categories.length) {\r\n                            val = ordinalMeta.categories[val];\r\n                        }\r\n                    }\r\n                }\r\n                return val;\r\n            };\r\n            getIndicesCtor = function (list) {\r\n                return list._rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\r\n            };\r\n            prepareChunks = function (storage, dimInfo, chunkSize, chunkCount, end) {\r\n                var DataCtor = dataCtors[dimInfo.type];\r\n                var lastChunkIndex = chunkCount - 1;\r\n                var dim = dimInfo.name;\r\n                var resizeChunkArray = storage[dim][lastChunkIndex];\r\n                if (resizeChunkArray && resizeChunkArray.length < chunkSize) {\r\n                    var newStore = new DataCtor(Math.min(end - lastChunkIndex * chunkSize, chunkSize));\r\n                    for (var j = 0; j < resizeChunkArray.length; j++) {\r\n                        newStore[j] = resizeChunkArray[j];\r\n                    }\r\n                    storage[dim][lastChunkIndex] = newStore;\r\n                }\r\n                for (var k = chunkCount * chunkSize; k < end; k += chunkSize) {\r\n                    storage[dim].push(new DataCtor(Math.min(end - k, chunkSize)));\r\n                }\r\n            };\r\n            getRawIndexWithoutIndices = function (idx) {\r\n                return idx;\r\n            };\r\n            getRawIndexWithIndices = function (idx) {\r\n                if (idx < this._count && idx >= 0) {\r\n                    return this._indices[idx];\r\n                }\r\n                return -1;\r\n            };\r\n            getId = function (list, rawIndex) {\r\n                var id = list._idList[rawIndex];\r\n                if (id == null) {\r\n                    id = getRawValueFromStore(list, list._idDimIdx, rawIndex);\r\n                }\r\n                if (id == null) {\r\n                    id = ID_PREFIX + rawIndex;\r\n                }\r\n                return id;\r\n            };\r\n            normalizeDimensions = function (dimensions) {\r\n                if (!isArray(dimensions)) {\r\n                    dimensions = [dimensions];\r\n                }\r\n                return dimensions;\r\n            };\r\n            validateDimensions = function (list, dims) {\r\n                for (var i = 0; i < dims.length; i++) {\r\n                    if (!list._dimensionInfos[dims[i]]) {\r\n                        console.error('Unkown dimension ' + dims[i]);\r\n                    }\r\n                }\r\n            };\r\n            cloneListForMapAndSample = function (original, excludeDimensions) {\r\n                var allDimensions = original.dimensions;\r\n                var list = new List(map(allDimensions, original.getDimensionInfo, original), original.hostModel);\r\n                transferProperties(list, original);\r\n                var storage = list._storage = {};\r\n                var originalStorage = original._storage;\r\n                for (var i = 0; i < allDimensions.length; i++) {\r\n                    var dim = allDimensions[i];\r\n                    if (originalStorage[dim]) {\r\n                        if (indexOf(excludeDimensions, dim) >= 0) {\r\n                            storage[dim] = cloneDimStore(originalStorage[dim]);\r\n                            list._rawExtent[dim] = getInitialExtent();\r\n                            list._extent[dim] = null;\r\n                        }\r\n                        else {\r\n                            storage[dim] = originalStorage[dim];\r\n                        }\r\n                    }\r\n                }\r\n                return list;\r\n            };\r\n            cloneDimStore = function (originalDimStore) {\r\n                var newDimStore = new Array(originalDimStore.length);\r\n                for (var j = 0; j < originalDimStore.length; j++) {\r\n                    newDimStore[j] = cloneChunk(originalDimStore[j]);\r\n                }\r\n                return newDimStore;\r\n            };\r\n            function cloneChunk(originalChunk) {\r\n                var Ctor = originalChunk.constructor;\r\n                return Ctor === Array\r\n                    ? originalChunk.slice()\r\n                    : new Ctor(originalChunk);\r\n            }\r\n            getInitialExtent = function () {\r\n                return [Infinity, -Infinity];\r\n            };\r\n            setItemDataAndSeriesIndex = function (child) {\r\n                var childECData = getECData(child);\r\n                var thisECData = getECData(this);\r\n                childECData.seriesIndex = thisECData.seriesIndex;\r\n                childECData.dataIndex = thisECData.dataIndex;\r\n                childECData.dataType = thisECData.dataType;\r\n            };\r\n            transferProperties = function (target, source) {\r\n                each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\r\n                    if (source.hasOwnProperty(propName)) {\r\n                        target[propName] = source[propName];\r\n                    }\r\n                });\r\n                target.__wrappedMethods = source.__wrappedMethods;\r\n                each(CLONE_PROPERTIES, function (propName) {\r\n                    target[propName] = clone(source[propName]);\r\n                });\r\n                target._calculationInfo = extend({}, source._calculationInfo);\r\n            };\r\n        })();\r\n        return List;\r\n    }());\n\n    function completeDimensions(sysDims, source, opt) {\r\n        if (!(source instanceof Source)) {\r\n            source = Source.seriesDataToSource(source);\r\n        }\r\n        opt = opt || {};\r\n        sysDims = (sysDims || []).slice();\r\n        var dimsDef = (opt.dimsDef || []).slice();\r\n        var dataDimNameMap = createHashMap();\r\n        var coordDimNameMap = createHashMap();\r\n        var result = [];\r\n        var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimCount);\r\n        for (var i = 0; i < dimCount; i++) {\r\n            var dimDefItemRaw = dimsDef[i];\r\n            var dimDefItem = dimsDef[i] = extend({}, isObject(dimDefItemRaw) ? dimDefItemRaw : { name: dimDefItemRaw });\r\n            var userDimName = dimDefItem.name;\r\n            var resultItem = result[i] = new DataDimensionInfo();\r\n            if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\r\n                resultItem.name = resultItem.displayName = userDimName;\r\n                dataDimNameMap.set(userDimName, i);\r\n            }\r\n            dimDefItem.type != null && (resultItem.type = dimDefItem.type);\r\n            dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\r\n        }\r\n        var encodeDef = opt.encodeDef;\r\n        if (!encodeDef && opt.encodeDefaulter) {\r\n            encodeDef = opt.encodeDefaulter(source, dimCount);\r\n        }\r\n        var encodeDefMap = createHashMap(encodeDef);\r\n        encodeDefMap.each(function (dataDimsRaw, coordDim) {\r\n            var dataDims = normalizeToArray(dataDimsRaw).slice();\r\n            if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\r\n                encodeDefMap.set(coordDim, false);\r\n                return;\r\n            }\r\n            var validDataDims = encodeDefMap.set(coordDim, []);\r\n            each(dataDims, function (resultDimIdxOrName, idx) {\r\n                var resultDimIdx = isString(resultDimIdxOrName)\r\n                    ? dataDimNameMap.get(resultDimIdxOrName)\r\n                    : resultDimIdxOrName;\r\n                if (resultDimIdx != null && resultDimIdx < dimCount) {\r\n                    validDataDims[idx] = resultDimIdx;\r\n                    applyDim(result[resultDimIdx], coordDim, idx);\r\n                }\r\n            });\r\n        });\r\n        var availDimIdx = 0;\r\n        each(sysDims, function (sysDimItemRaw) {\r\n            var coordDim;\r\n            var sysDimItemDimsDef;\r\n            var sysDimItemOtherDims;\r\n            var sysDimItem;\r\n            if (isString(sysDimItemRaw)) {\r\n                coordDim = sysDimItemRaw;\r\n                sysDimItem = {};\r\n            }\r\n            else {\r\n                sysDimItem = sysDimItemRaw;\r\n                coordDim = sysDimItem.name;\r\n                var ordinalMeta = sysDimItem.ordinalMeta;\r\n                sysDimItem.ordinalMeta = null;\r\n                sysDimItem = clone(sysDimItem);\r\n                sysDimItem.ordinalMeta = ordinalMeta;\r\n                sysDimItemDimsDef = sysDimItem.dimsDef;\r\n                sysDimItemOtherDims = sysDimItem.otherDims;\r\n                sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex =\r\n                    sysDimItem.dimsDef = sysDimItem.otherDims = null;\r\n            }\r\n            var dataDims = encodeDefMap.get(coordDim);\r\n            if (dataDims === false) {\r\n                return;\r\n            }\r\n            dataDims = normalizeToArray(dataDims);\r\n            if (!dataDims.length) {\r\n                for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\r\n                    while (availDimIdx < result.length && result[availDimIdx].coordDim != null) {\r\n                        availDimIdx++;\r\n                    }\r\n                    availDimIdx < result.length && dataDims.push(availDimIdx++);\r\n                }\r\n            }\r\n            each(dataDims, function (resultDimIdx, coordDimIndex) {\r\n                var resultItem = result[resultDimIdx];\r\n                applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\r\n                if (resultItem.name == null && sysDimItemDimsDef) {\r\n                    var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\r\n                    !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = { name: sysDimItemDimsDefItem });\r\n                    resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\r\n                    resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\r\n                }\r\n                sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\r\n            });\r\n        });\r\n        function applyDim(resultItem, coordDim, coordDimIndex) {\r\n            if (VISUAL_DIMENSIONS.get(coordDim) != null) {\r\n                resultItem.otherDims[coordDim] = coordDimIndex;\r\n            }\r\n            else {\r\n                resultItem.coordDim = coordDim;\r\n                resultItem.coordDimIndex = coordDimIndex;\r\n                coordDimNameMap.set(coordDim, true);\r\n            }\r\n        }\r\n        var generateCoord = opt.generateCoord;\r\n        var generateCoordCount = opt.generateCoordCount;\r\n        var fromZero = generateCoordCount != null;\r\n        generateCoordCount = generateCoord ? (generateCoordCount || 1) : 0;\r\n        var extra = generateCoord || 'value';\r\n        for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\r\n            var resultItem = result[resultDimIdx] = result[resultDimIdx] || new DataDimensionInfo();\r\n            var coordDim = resultItem.coordDim;\r\n            if (coordDim == null) {\r\n                resultItem.coordDim = genName(extra, coordDimNameMap, fromZero);\r\n                resultItem.coordDimIndex = 0;\r\n                if (!generateCoord || generateCoordCount <= 0) {\r\n                    resultItem.isExtraCoord = true;\r\n                }\r\n                generateCoordCount--;\r\n            }\r\n            resultItem.name == null && (resultItem.name = genName(resultItem.coordDim, dataDimNameMap, false));\r\n            if (resultItem.type == null\r\n                && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must\r\n                    || (resultItem.isExtraCoord\r\n                        && (resultItem.otherDims.itemName != null\r\n                            || resultItem.otherDims.seriesName != null)))) {\r\n                resultItem.type = 'ordinal';\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function getDimCount(source, sysDims, dimsDef, optDimCount) {\r\n        var dimCount = Math.max(source.dimensionsDetectCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\r\n        each(sysDims, function (sysDimItem) {\r\n            var sysDimItemDimsDef;\r\n            if (isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\r\n                dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\r\n            }\r\n        });\r\n        return dimCount;\r\n    }\r\n    function genName(name, map, fromZero) {\r\n        if (fromZero || map.get(name) != null) {\r\n            var i = 0;\r\n            while (map.get(name + i) != null) {\r\n                i++;\r\n            }\r\n            name += i;\r\n        }\r\n        map.set(name, true);\r\n        return name;\r\n    }\n\n    function createDimensions (source, opt) {\r\n        opt = opt || {};\r\n        return completeDimensions(opt.coordDimensions || [], source, {\r\n            dimsDef: opt.dimensionsDefine || source.dimensionsDefine,\r\n            encodeDef: opt.encodeDefine || source.encodeDefine,\r\n            dimCount: opt.dimensionsCount,\r\n            encodeDefaulter: opt.encodeDefaulter,\r\n            generateCoord: opt.generateCoord,\r\n            generateCoordCount: opt.generateCoordCount\r\n        });\r\n    }\n\n    var CoordSysInfo = (function () {\r\n        function CoordSysInfo(coordSysName) {\r\n            this.coordSysDims = [];\r\n            this.axisMap = createHashMap();\r\n            this.categoryAxisMap = createHashMap();\r\n            this.coordSysName = coordSysName;\r\n        }\r\n        return CoordSysInfo;\r\n    }());\r\n    function getCoordSysInfoBySeries(seriesModel) {\r\n        var coordSysName = seriesModel.get('coordinateSystem');\r\n        var result = new CoordSysInfo(coordSysName);\r\n        var fetch = fetchers[coordSysName];\r\n        if (fetch) {\r\n            fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\r\n            return result;\r\n        }\r\n    }\r\n    var fetchers = {\r\n        cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\r\n            var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\r\n            var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\r\n            if (__DEV__) {\r\n                if (!xAxisModel) {\r\n                    throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\r\n                }\r\n                if (!yAxisModel) {\r\n                    throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\r\n                }\r\n            }\r\n            result.coordSysDims = ['x', 'y'];\r\n            axisMap.set('x', xAxisModel);\r\n            axisMap.set('y', yAxisModel);\r\n            if (isCategory(xAxisModel)) {\r\n                categoryAxisMap.set('x', xAxisModel);\r\n                result.firstCategoryDimIndex = 0;\r\n            }\r\n            if (isCategory(yAxisModel)) {\r\n                categoryAxisMap.set('y', yAxisModel);\r\n                result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\r\n            }\r\n        },\r\n        singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\r\n            var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\r\n            if (__DEV__) {\r\n                if (!singleAxisModel) {\r\n                    throw new Error('singleAxis should be specified.');\r\n                }\r\n            }\r\n            result.coordSysDims = ['single'];\r\n            axisMap.set('single', singleAxisModel);\r\n            if (isCategory(singleAxisModel)) {\r\n                categoryAxisMap.set('single', singleAxisModel);\r\n                result.firstCategoryDimIndex = 0;\r\n            }\r\n        },\r\n        polar: function (seriesModel, result, axisMap, categoryAxisMap) {\r\n            var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\r\n            var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\r\n            var angleAxisModel = polarModel.findAxisModel('angleAxis');\r\n            if (__DEV__) {\r\n                if (!angleAxisModel) {\r\n                    throw new Error('angleAxis option not found');\r\n                }\r\n                if (!radiusAxisModel) {\r\n                    throw new Error('radiusAxis option not found');\r\n                }\r\n            }\r\n            result.coordSysDims = ['radius', 'angle'];\r\n            axisMap.set('radius', radiusAxisModel);\r\n            axisMap.set('angle', angleAxisModel);\r\n            if (isCategory(radiusAxisModel)) {\r\n                categoryAxisMap.set('radius', radiusAxisModel);\r\n                result.firstCategoryDimIndex = 0;\r\n            }\r\n            if (isCategory(angleAxisModel)) {\r\n                categoryAxisMap.set('angle', angleAxisModel);\r\n                result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\r\n            }\r\n        },\r\n        geo: function (seriesModel, result, axisMap, categoryAxisMap) {\r\n            result.coordSysDims = ['lng', 'lat'];\r\n        },\r\n        parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\r\n            var ecModel = seriesModel.ecModel;\r\n            var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\r\n            var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\r\n            each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\r\n                var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\r\n                var axisDim = coordSysDims[index];\r\n                axisMap.set(axisDim, axisModel);\r\n                if (isCategory(axisModel) && result.firstCategoryDimIndex == null) {\r\n                    categoryAxisMap.set(axisDim, axisModel);\r\n                    result.firstCategoryDimIndex = index;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    function isCategory(axisModel) {\r\n        return axisModel.get('type') === 'category';\r\n    }\n\n    function enableDataStack(seriesModel, dimensionInfoList, opt) {\r\n        opt = opt || {};\r\n        var byIndex = opt.byIndex;\r\n        var stackedCoordDimension = opt.stackedCoordDimension;\r\n        var mayStack = !!(seriesModel && seriesModel.get('stack'));\r\n        var stackedByDimInfo;\r\n        var stackedDimInfo;\r\n        var stackResultDimension;\r\n        var stackedOverDimension;\r\n        each(dimensionInfoList, function (dimensionInfo, index) {\r\n            if (isString(dimensionInfo)) {\r\n                dimensionInfoList[index] = dimensionInfo = {\r\n                    name: dimensionInfo\r\n                };\r\n            }\r\n            if (mayStack && !dimensionInfo.isExtraCoord) {\r\n                if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\r\n                    stackedByDimInfo = dimensionInfo;\r\n                }\r\n                if (!stackedDimInfo\r\n                    && dimensionInfo.type !== 'ordinal'\r\n                    && dimensionInfo.type !== 'time'\r\n                    && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\r\n                    stackedDimInfo = dimensionInfo;\r\n                }\r\n            }\r\n        });\r\n        if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\r\n            byIndex = true;\r\n        }\r\n        if (stackedDimInfo) {\r\n            stackResultDimension = '__\\0ecstackresult';\r\n            stackedOverDimension = '__\\0ecstackedover';\r\n            if (stackedByDimInfo) {\r\n                stackedByDimInfo.createInvertedIndices = true;\r\n            }\r\n            var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\r\n            var stackedDimType = stackedDimInfo.type;\r\n            var stackedDimCoordIndex_1 = 0;\r\n            each(dimensionInfoList, function (dimensionInfo) {\r\n                if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\r\n                    stackedDimCoordIndex_1++;\r\n                }\r\n            });\r\n            dimensionInfoList.push({\r\n                name: stackResultDimension,\r\n                coordDim: stackedDimCoordDim_1,\r\n                coordDimIndex: stackedDimCoordIndex_1,\r\n                type: stackedDimType,\r\n                isExtraCoord: true,\r\n                isCalculationCoord: true\r\n            });\r\n            stackedDimCoordIndex_1++;\r\n            dimensionInfoList.push({\r\n                name: stackedOverDimension,\r\n                coordDim: stackedOverDimension,\r\n                coordDimIndex: stackedDimCoordIndex_1,\r\n                type: stackedDimType,\r\n                isExtraCoord: true,\r\n                isCalculationCoord: true\r\n            });\r\n        }\r\n        return {\r\n            stackedDimension: stackedDimInfo && stackedDimInfo.name,\r\n            stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\r\n            isStackedByIndex: byIndex,\r\n            stackedOverDimension: stackedOverDimension,\r\n            stackResultDimension: stackResultDimension\r\n        };\r\n    }\r\n    function isDimensionStacked(data, stackedDim) {\r\n        return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension');\r\n    }\r\n    function getStackedDimension(data, targetDim) {\r\n        return isDimensionStacked(data, targetDim)\r\n            ? data.getCalculationInfo('stackResultDimension')\r\n            : targetDim;\r\n    }\n\n    function createListFromArray(source, seriesModel, opt) {\r\n        opt = opt || {};\r\n        if (!(source instanceof Source)) {\r\n            source = Source.seriesDataToSource(source);\r\n        }\r\n        var coordSysName = seriesModel.get('coordinateSystem');\r\n        var registeredCoordSys = CoordinateSystemManager.get(coordSysName);\r\n        var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\r\n        var coordSysDimDefs;\r\n        if (coordSysInfo && coordSysInfo.coordSysDims) {\r\n            coordSysDimDefs = map(coordSysInfo.coordSysDims, function (dim) {\r\n                var dimInfo = {\r\n                    name: dim\r\n                };\r\n                var axisModel = coordSysInfo.axisMap.get(dim);\r\n                if (axisModel) {\r\n                    var axisType = axisModel.get('type');\r\n                    dimInfo.type = getDimensionTypeByAxis(axisType);\r\n                }\r\n                return dimInfo;\r\n            });\r\n        }\r\n        if (!coordSysDimDefs) {\r\n            coordSysDimDefs = (registeredCoordSys && (registeredCoordSys.getDimensionsInfo\r\n                ? registeredCoordSys.getDimensionsInfo()\r\n                : registeredCoordSys.dimensions.slice())) || ['x', 'y'];\r\n        }\r\n        var useEncodeDefaulter = opt.useEncodeDefaulter;\r\n        var dimInfoList = createDimensions(source, {\r\n            coordDimensions: coordSysDimDefs,\r\n            generateCoord: opt.generateCoord,\r\n            encodeDefaulter: isFunction(useEncodeDefaulter)\r\n                ? useEncodeDefaulter\r\n                : useEncodeDefaulter\r\n                    ? curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel)\r\n                    : null\r\n        });\r\n        var firstCategoryDimIndex;\r\n        var hasNameEncode;\r\n        coordSysInfo && each(dimInfoList, function (dimInfo, dimIndex) {\r\n            var coordDim = dimInfo.coordDim;\r\n            var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\r\n            if (categoryAxisModel) {\r\n                if (firstCategoryDimIndex == null) {\r\n                    firstCategoryDimIndex = dimIndex;\r\n                }\r\n                dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\r\n            }\r\n            if (dimInfo.otherDims.itemName != null) {\r\n                hasNameEncode = true;\r\n            }\r\n        });\r\n        if (!hasNameEncode && firstCategoryDimIndex != null) {\r\n            dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\r\n        }\r\n        var stackCalculationInfo = enableDataStack(seriesModel, dimInfoList);\r\n        var list = new List(dimInfoList, seriesModel);\r\n        list.setCalculationInfo(stackCalculationInfo);\r\n        var dimValueGetter = (firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source))\r\n            ? function (itemOpt, dimName, dataIndex, dimIndex) {\r\n                return dimIndex === firstCategoryDimIndex\r\n                    ? dataIndex\r\n                    : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\r\n            }\r\n            : null;\r\n        list.hasItemOption = false;\r\n        list.initData(source, null, dimValueGetter);\r\n        return list;\r\n    }\r\n    function isNeedCompleteOrdinalData(source) {\r\n        if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\r\n            var sampleItem = firstDataNotNull(source.data || []);\r\n            return sampleItem != null\r\n                && !isArray(getDataItemValue(sampleItem));\r\n        }\r\n    }\r\n    function firstDataNotNull(data) {\r\n        var i = 0;\r\n        while (i < data.length && data[i] == null) {\r\n            i++;\r\n        }\r\n        return data[i];\r\n    }\n\n    var Scale = (function () {\r\n        function Scale(setting) {\r\n            this._setting = setting || {};\r\n            this._extent = [Infinity, -Infinity];\r\n        }\r\n        Scale.prototype.getSetting = function (name) {\r\n            return this._setting[name];\r\n        };\r\n        Scale.prototype.unionExtent = function (other) {\r\n            var extent = this._extent;\r\n            other[0] < extent[0] && (extent[0] = other[0]);\r\n            other[1] > extent[1] && (extent[1] = other[1]);\r\n        };\r\n        Scale.prototype.unionExtentFromData = function (data, dim) {\r\n            this.unionExtent(data.getApproximateExtent(dim));\r\n        };\r\n        Scale.prototype.getExtent = function () {\r\n            return this._extent.slice();\r\n        };\r\n        Scale.prototype.setExtent = function (start, end) {\r\n            var thisExtent = this._extent;\r\n            if (!isNaN(start)) {\r\n                thisExtent[0] = start;\r\n            }\r\n            if (!isNaN(end)) {\r\n                thisExtent[1] = end;\r\n            }\r\n        };\r\n        Scale.prototype.isInExtentRange = function (value) {\r\n            return this._extent[0] <= value && this._extent[1] >= value;\r\n        };\r\n        Scale.prototype.isBlank = function () {\r\n            return this._isBlank;\r\n        };\r\n        Scale.prototype.setBlank = function (isBlank) {\r\n            this._isBlank = isBlank;\r\n        };\r\n        return Scale;\r\n    }());\r\n    enableClassManagement(Scale, {\r\n        registerWhenExtend: true\r\n    });\n\n    var OrdinalMeta = (function () {\r\n        function OrdinalMeta(opt) {\r\n            this.categories = opt.categories || [];\r\n            this._needCollect = opt.needCollect;\r\n            this._deduplication = opt.deduplication;\r\n        }\r\n        OrdinalMeta.createByAxisModel = function (axisModel) {\r\n            var option = axisModel.option;\r\n            var data = option.data;\r\n            var categories = data && map(data, getName);\r\n            return new OrdinalMeta({\r\n                categories: categories,\r\n                needCollect: !categories,\r\n                deduplication: option.dedplication !== false\r\n            });\r\n        };\r\n        OrdinalMeta.prototype.getOrdinal = function (category) {\r\n            return this._getOrCreateMap().get(category);\r\n        };\r\n        OrdinalMeta.prototype.parseAndCollect = function (category) {\r\n            var index;\r\n            var needCollect = this._needCollect;\r\n            if (typeof category !== 'string' && !needCollect) {\r\n                return category;\r\n            }\r\n            if (needCollect && !this._deduplication) {\r\n                index = this.categories.length;\r\n                this.categories[index] = category;\r\n                return index;\r\n            }\r\n            var map = this._getOrCreateMap();\r\n            index = map.get(category);\r\n            if (index == null) {\r\n                if (needCollect) {\r\n                    index = this.categories.length;\r\n                    this.categories[index] = category;\r\n                    map.set(category, index);\r\n                }\r\n                else {\r\n                    index = NaN;\r\n                }\r\n            }\r\n            return index;\r\n        };\r\n        OrdinalMeta.prototype._getOrCreateMap = function () {\r\n            return this._map || (this._map = createHashMap(this.categories));\r\n        };\r\n        return OrdinalMeta;\r\n    }());\r\n    function getName(obj) {\r\n        if (isObject(obj) && obj.value != null) {\r\n            return obj.value;\r\n        }\r\n        else {\r\n            return obj + '';\r\n        }\r\n    }\n\n    var roundNumber = round$1;\r\n    function intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\r\n        var result = {};\r\n        var span = extent[1] - extent[0];\r\n        var interval = result.interval = nice(span / splitNumber, true);\r\n        if (minInterval != null && interval < minInterval) {\r\n            interval = result.interval = minInterval;\r\n        }\r\n        if (maxInterval != null && interval > maxInterval) {\r\n            interval = result.interval = maxInterval;\r\n        }\r\n        var precision = result.intervalPrecision = getIntervalPrecision(interval);\r\n        var niceTickExtent = result.niceTickExtent = [\r\n            roundNumber(Math.ceil(extent[0] / interval) * interval, precision),\r\n            roundNumber(Math.floor(extent[1] / interval) * interval, precision)\r\n        ];\r\n        fixExtent(niceTickExtent, extent);\r\n        return result;\r\n    }\r\n    function getIntervalPrecision(interval) {\r\n        return getPrecisionSafe(interval) + 2;\r\n    }\r\n    function clamp(niceTickExtent, idx, extent) {\r\n        niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\r\n    }\r\n    function fixExtent(niceTickExtent, extent) {\r\n        !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\r\n        !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\r\n        clamp(niceTickExtent, 0, extent);\r\n        clamp(niceTickExtent, 1, extent);\r\n        if (niceTickExtent[0] > niceTickExtent[1]) {\r\n            niceTickExtent[0] = niceTickExtent[1];\r\n        }\r\n    }\r\n    function contain$1(val, extent) {\r\n        return val >= extent[0] && val <= extent[1];\r\n    }\r\n    function normalize$1(val, extent) {\r\n        if (extent[1] === extent[0]) {\r\n            return 0.5;\r\n        }\r\n        return (val - extent[0]) / (extent[1] - extent[0]);\r\n    }\r\n    function scale$2(val, extent) {\r\n        return val * (extent[1] - extent[0]) + extent[0];\r\n    }\n\n    var OrdinalScale = (function (_super) {\r\n        __extends(OrdinalScale, _super);\r\n        function OrdinalScale(setting) {\r\n            var _this = _super.call(this, setting) || this;\r\n            _this.type = 'ordinal';\r\n            var ordinalMeta = _this.getSetting('ordinalMeta');\r\n            if (!ordinalMeta || isArray(ordinalMeta)) {\r\n                ordinalMeta = new OrdinalMeta({ categories: ordinalMeta });\r\n            }\r\n            _this._ordinalMeta = ordinalMeta;\r\n            _this._categorySortInfo = [];\r\n            _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\r\n            return _this;\r\n        }\r\n        OrdinalScale.prototype.parse = function (val) {\r\n            return typeof val === 'string'\r\n                ? this._ordinalMeta.getOrdinal(val)\r\n                : Math.round(val);\r\n        };\r\n        OrdinalScale.prototype.contain = function (rank) {\r\n            rank = this.parse(rank);\r\n            return contain$1(rank, this._extent)\r\n                && this._ordinalMeta.categories[rank] != null;\r\n        };\r\n        OrdinalScale.prototype.normalize = function (val) {\r\n            val = this.getCategoryIndex(this.parse(val));\r\n            return normalize$1(val, this._extent);\r\n        };\r\n        OrdinalScale.prototype.scale = function (val) {\r\n            val = this.getCategoryIndex(val);\r\n            return Math.round(scale$2(val, this._extent));\r\n        };\r\n        OrdinalScale.prototype.getTicks = function () {\r\n            var ticks = [];\r\n            var extent = this._extent;\r\n            var rank = extent[0];\r\n            while (rank <= extent[1]) {\r\n                ticks.push({\r\n                    value: this.getCategoryIndex(rank)\r\n                });\r\n                rank++;\r\n            }\r\n            return ticks;\r\n        };\r\n        OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\r\n            return;\r\n        };\r\n        OrdinalScale.prototype.setCategorySortInfo = function (info) {\r\n            this._categorySortInfo = info;\r\n        };\r\n        OrdinalScale.prototype.getCategorySortInfo = function () {\r\n            return this._categorySortInfo;\r\n        };\r\n        OrdinalScale.prototype.getCategoryIndex = function (n) {\r\n            if (this._categorySortInfo.length) {\r\n                return this._categorySortInfo[n].beforeSortIndex;\r\n            }\r\n            else {\r\n                return n;\r\n            }\r\n        };\r\n        OrdinalScale.prototype.getRawIndex = function (displayIndex) {\r\n            if (this._categorySortInfo.length) {\r\n                return this._categorySortInfo[displayIndex].ordinalNumber;\r\n            }\r\n            else {\r\n                return displayIndex;\r\n            }\r\n        };\r\n        OrdinalScale.prototype.getLabel = function (tick) {\r\n            if (!this.isBlank()) {\r\n                var rawIndex = this.getRawIndex(tick.value);\r\n                var cateogry = this._ordinalMeta.categories[rawIndex];\r\n                return cateogry == null ? '' : cateogry + '';\r\n            }\r\n        };\r\n        OrdinalScale.prototype.count = function () {\r\n            return this._extent[1] - this._extent[0] + 1;\r\n        };\r\n        OrdinalScale.prototype.unionExtentFromData = function (data, dim) {\r\n            this.unionExtent(data.getApproximateExtent(dim));\r\n        };\r\n        OrdinalScale.prototype.isInExtentRange = function (value) {\r\n            value = this.getCategoryIndex(value);\r\n            return this._extent[0] <= value && this._extent[1] >= value;\r\n        };\r\n        OrdinalScale.prototype.getOrdinalMeta = function () {\r\n            return this._ordinalMeta;\r\n        };\r\n        OrdinalScale.prototype.niceTicks = function () { };\r\n        OrdinalScale.prototype.niceExtent = function () { };\r\n        OrdinalScale.type = 'ordinal';\r\n        return OrdinalScale;\r\n    }(Scale));\r\n    Scale.registerClass(OrdinalScale);\n\n    var roundNumber$1 = round$1;\r\n    var IntervalScale = (function (_super) {\r\n        __extends(IntervalScale, _super);\r\n        function IntervalScale() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'interval';\r\n            _this._interval = 0;\r\n            _this._intervalPrecision = 2;\r\n            return _this;\r\n        }\r\n        IntervalScale.prototype.parse = function (val) {\r\n            return val;\r\n        };\r\n        IntervalScale.prototype.contain = function (val) {\r\n            return contain$1(val, this._extent);\r\n        };\r\n        IntervalScale.prototype.normalize = function (val) {\r\n            return normalize$1(val, this._extent);\r\n        };\r\n        IntervalScale.prototype.scale = function (val) {\r\n            return scale$2(val, this._extent);\r\n        };\r\n        IntervalScale.prototype.setExtent = function (start, end) {\r\n            var thisExtent = this._extent;\r\n            if (!isNaN(start)) {\r\n                thisExtent[0] = parseFloat(start);\r\n            }\r\n            if (!isNaN(end)) {\r\n                thisExtent[1] = parseFloat(end);\r\n            }\r\n        };\r\n        IntervalScale.prototype.unionExtent = function (other) {\r\n            var extent = this._extent;\r\n            other[0] < extent[0] && (extent[0] = other[0]);\r\n            other[1] > extent[1] && (extent[1] = other[1]);\r\n            this.setExtent(extent[0], extent[1]);\r\n        };\r\n        IntervalScale.prototype.getInterval = function () {\r\n            return this._interval;\r\n        };\r\n        IntervalScale.prototype.setInterval = function (interval) {\r\n            this._interval = interval;\r\n            this._niceExtent = this._extent.slice();\r\n            this._intervalPrecision = getIntervalPrecision(interval);\r\n        };\r\n        IntervalScale.prototype.getTicks = function (expandToNicedExtent) {\r\n            var interval = this._interval;\r\n            var extent = this._extent;\r\n            var niceTickExtent = this._niceExtent;\r\n            var intervalPrecision = this._intervalPrecision;\r\n            var ticks = [];\r\n            if (!interval) {\r\n                return ticks;\r\n            }\r\n            var safeLimit = 10000;\r\n            if (extent[0] < niceTickExtent[0]) {\r\n                if (expandToNicedExtent) {\r\n                    ticks.push({\r\n                        value: roundNumber$1(niceTickExtent[0] - interval, intervalPrecision)\r\n                    });\r\n                }\r\n                else {\r\n                    ticks.push({\r\n                        value: extent[0]\r\n                    });\r\n                }\r\n            }\r\n            var tick = niceTickExtent[0];\r\n            while (tick <= niceTickExtent[1]) {\r\n                ticks.push({\r\n                    value: tick\r\n                });\r\n                tick = roundNumber$1(tick + interval, intervalPrecision);\r\n                if (tick === ticks[ticks.length - 1].value) {\r\n                    break;\r\n                }\r\n                if (ticks.length > safeLimit) {\r\n                    return [];\r\n                }\r\n            }\r\n            var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\r\n            if (extent[1] > lastNiceTick) {\r\n                if (expandToNicedExtent) {\r\n                    ticks.push({\r\n                        value: roundNumber$1(lastNiceTick + interval, intervalPrecision)\r\n                    });\r\n                }\r\n                else {\r\n                    ticks.push({\r\n                        value: extent[1]\r\n                    });\r\n                }\r\n            }\r\n            return ticks;\r\n        };\r\n        IntervalScale.prototype.getMinorTicks = function (splitNumber) {\r\n            var ticks = this.getTicks(true);\r\n            var minorTicks = [];\r\n            var extent = this.getExtent();\r\n            for (var i = 1; i < ticks.length; i++) {\r\n                var nextTick = ticks[i];\r\n                var prevTick = ticks[i - 1];\r\n                var count = 0;\r\n                var minorTicksGroup = [];\r\n                var interval = nextTick.value - prevTick.value;\r\n                var minorInterval = interval / splitNumber;\r\n                while (count < splitNumber - 1) {\r\n                    var minorTick = roundNumber$1(prevTick.value + (count + 1) * minorInterval);\r\n                    if (minorTick > extent[0] && minorTick < extent[1]) {\r\n                        minorTicksGroup.push(minorTick);\r\n                    }\r\n                    count++;\r\n                }\r\n                minorTicks.push(minorTicksGroup);\r\n            }\r\n            return minorTicks;\r\n        };\r\n        IntervalScale.prototype.getLabel = function (data, opt) {\r\n            if (data == null) {\r\n                return '';\r\n            }\r\n            var precision = opt && opt.precision;\r\n            if (precision == null) {\r\n                precision = getPrecisionSafe(data.value) || 0;\r\n            }\r\n            else if (precision === 'auto') {\r\n                precision = this._intervalPrecision;\r\n            }\r\n            var dataNum = roundNumber$1(data.value, precision, true);\r\n            return addCommas(dataNum);\r\n        };\r\n        IntervalScale.prototype.niceTicks = function (splitNumber, minInterval, maxInterval) {\r\n            splitNumber = splitNumber || 5;\r\n            var extent = this._extent;\r\n            var span = extent[1] - extent[0];\r\n            if (!isFinite(span)) {\r\n                return;\r\n            }\r\n            if (span < 0) {\r\n                span = -span;\r\n                extent.reverse();\r\n            }\r\n            var result = intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\r\n            this._intervalPrecision = result.intervalPrecision;\r\n            this._interval = result.interval;\r\n            this._niceExtent = result.niceTickExtent;\r\n        };\r\n        IntervalScale.prototype.niceExtent = function (opt) {\r\n            var extent = this._extent;\r\n            if (extent[0] === extent[1]) {\r\n                if (extent[0] !== 0) {\r\n                    var expandSize = extent[0];\r\n                    if (!opt.fixMax) {\r\n                        extent[1] += expandSize / 2;\r\n                        extent[0] -= expandSize / 2;\r\n                    }\r\n                    else {\r\n                        extent[0] -= expandSize / 2;\r\n                    }\r\n                }\r\n                else {\r\n                    extent[1] = 1;\r\n                }\r\n            }\r\n            var span = extent[1] - extent[0];\r\n            if (!isFinite(span)) {\r\n                extent[0] = 0;\r\n                extent[1] = 1;\r\n            }\r\n            this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\r\n            var interval = this._interval;\r\n            if (!opt.fixMin) {\r\n                extent[0] = roundNumber$1(Math.floor(extent[0] / interval) * interval);\r\n            }\r\n            if (!opt.fixMax) {\r\n                extent[1] = roundNumber$1(Math.ceil(extent[1] / interval) * interval);\r\n            }\r\n        };\r\n        IntervalScale.type = 'interval';\r\n        return IntervalScale;\r\n    }(Scale));\r\n    Scale.registerClass(IntervalScale);\n\n    var STACK_PREFIX = '__ec_stack_';\r\n    var LARGE_BAR_MIN_WIDTH = 0.5;\r\n    var LargeArr = typeof Float32Array !== 'undefined' ? Float32Array : Array;\r\n    function getSeriesStackId(seriesModel) {\r\n        return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\r\n    }\r\n    function getAxisKey(axis) {\r\n        return axis.dim + axis.index;\r\n    }\r\n    function prepareLayoutBarSeries(seriesType, ecModel) {\r\n        var seriesModels = [];\r\n        ecModel.eachSeriesByType(seriesType, function (seriesModel) {\r\n            if (isOnCartesian(seriesModel) && !isInLargeMode(seriesModel)) {\r\n                seriesModels.push(seriesModel);\r\n            }\r\n        });\r\n        return seriesModels;\r\n    }\r\n    function getValueAxesMinGaps(barSeries) {\r\n        var axisValues = {};\r\n        each(barSeries, function (seriesModel) {\r\n            var cartesian = seriesModel.coordinateSystem;\r\n            var baseAxis = cartesian.getBaseAxis();\r\n            if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\r\n                return;\r\n            }\r\n            var data = seriesModel.getData();\r\n            var key = baseAxis.dim + '_' + baseAxis.index;\r\n            var dim = data.mapDimension(baseAxis.dim);\r\n            for (var i = 0, cnt = data.count(); i < cnt; ++i) {\r\n                var value = data.get(dim, i);\r\n                if (!axisValues[key]) {\r\n                    axisValues[key] = [value];\r\n                }\r\n                else {\r\n                    axisValues[key].push(value);\r\n                }\r\n            }\r\n        });\r\n        var axisMinGaps = {};\r\n        for (var key in axisValues) {\r\n            if (axisValues.hasOwnProperty(key)) {\r\n                var valuesInAxis = axisValues[key];\r\n                if (valuesInAxis) {\r\n                    valuesInAxis.sort(function (a, b) {\r\n                        return a - b;\r\n                    });\r\n                    var min = null;\r\n                    for (var j = 1; j < valuesInAxis.length; ++j) {\r\n                        var delta = valuesInAxis[j] - valuesInAxis[j - 1];\r\n                        if (delta > 0) {\r\n                            min = min === null ? delta : Math.min(min, delta);\r\n                        }\r\n                    }\r\n                    axisMinGaps[key] = min;\r\n                }\r\n            }\r\n        }\r\n        return axisMinGaps;\r\n    }\r\n    function makeColumnLayout(barSeries) {\r\n        var axisMinGaps = getValueAxesMinGaps(barSeries);\r\n        var seriesInfoList = [];\r\n        each(barSeries, function (seriesModel) {\r\n            var cartesian = seriesModel.coordinateSystem;\r\n            var baseAxis = cartesian.getBaseAxis();\r\n            var axisExtent = baseAxis.getExtent();\r\n            var bandWidth;\r\n            if (baseAxis.type === 'category') {\r\n                bandWidth = baseAxis.getBandWidth();\r\n            }\r\n            else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\r\n                var key = baseAxis.dim + '_' + baseAxis.index;\r\n                var minGap = axisMinGaps[key];\r\n                var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\r\n                var scale = baseAxis.scale.getExtent();\r\n                var scaleSpan = Math.abs(scale[1] - scale[0]);\r\n                bandWidth = minGap\r\n                    ? extentSpan / scaleSpan * minGap\r\n                    : extentSpan;\r\n            }\r\n            else {\r\n                var data = seriesModel.getData();\r\n                bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\r\n            }\r\n            var barWidth = parsePercent$2(seriesModel.get('barWidth'), bandWidth);\r\n            var barMaxWidth = parsePercent$2(seriesModel.get('barMaxWidth'), bandWidth);\r\n            var barMinWidth = parsePercent$2(seriesModel.get('barMinWidth') || 1, bandWidth);\r\n            var barGap = seriesModel.get('barGap');\r\n            var barCategoryGap = seriesModel.get('barCategoryGap');\r\n            seriesInfoList.push({\r\n                bandWidth: bandWidth,\r\n                barWidth: barWidth,\r\n                barMaxWidth: barMaxWidth,\r\n                barMinWidth: barMinWidth,\r\n                barGap: barGap,\r\n                barCategoryGap: barCategoryGap,\r\n                axisKey: getAxisKey(baseAxis),\r\n                stackId: getSeriesStackId(seriesModel)\r\n            });\r\n        });\r\n        return doCalBarWidthAndOffset(seriesInfoList);\r\n    }\r\n    function doCalBarWidthAndOffset(seriesInfoList) {\r\n        var columnsMap = {};\r\n        each(seriesInfoList, function (seriesInfo, idx) {\r\n            var axisKey = seriesInfo.axisKey;\r\n            var bandWidth = seriesInfo.bandWidth;\r\n            var columnsOnAxis = columnsMap[axisKey] || {\r\n                bandWidth: bandWidth,\r\n                remainedWidth: bandWidth,\r\n                autoWidthCount: 0,\r\n                categoryGap: null,\r\n                gap: '20%',\r\n                stacks: {}\r\n            };\r\n            var stacks = columnsOnAxis.stacks;\r\n            columnsMap[axisKey] = columnsOnAxis;\r\n            var stackId = seriesInfo.stackId;\r\n            if (!stacks[stackId]) {\r\n                columnsOnAxis.autoWidthCount++;\r\n            }\r\n            stacks[stackId] = stacks[stackId] || {\r\n                width: 0,\r\n                maxWidth: 0\r\n            };\r\n            var barWidth = seriesInfo.barWidth;\r\n            if (barWidth && !stacks[stackId].width) {\r\n                stacks[stackId].width = barWidth;\r\n                barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\r\n                columnsOnAxis.remainedWidth -= barWidth;\r\n            }\r\n            var barMaxWidth = seriesInfo.barMaxWidth;\r\n            barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\r\n            var barMinWidth = seriesInfo.barMinWidth;\r\n            barMinWidth && (stacks[stackId].minWidth = barMinWidth);\r\n            var barGap = seriesInfo.barGap;\r\n            (barGap != null) && (columnsOnAxis.gap = barGap);\r\n            var barCategoryGap = seriesInfo.barCategoryGap;\r\n            (barCategoryGap != null) && (columnsOnAxis.categoryGap = barCategoryGap);\r\n        });\r\n        var result = {};\r\n        each(columnsMap, function (columnsOnAxis, coordSysName) {\r\n            result[coordSysName] = {};\r\n            var stacks = columnsOnAxis.stacks;\r\n            var bandWidth = columnsOnAxis.bandWidth;\r\n            var categoryGapPercent = columnsOnAxis.categoryGap;\r\n            if (categoryGapPercent == null) {\r\n                var columnCount = keys(stacks).length;\r\n                categoryGapPercent = Math.max((35 - columnCount * 4), 15) + '%';\r\n            }\r\n            var categoryGap = parsePercent$2(categoryGapPercent, bandWidth);\r\n            var barGapPercent = parsePercent$2(columnsOnAxis.gap, 1);\r\n            var remainedWidth = columnsOnAxis.remainedWidth;\r\n            var autoWidthCount = columnsOnAxis.autoWidthCount;\r\n            var autoWidth = (remainedWidth - categoryGap)\r\n                / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\r\n            autoWidth = Math.max(autoWidth, 0);\r\n            each(stacks, function (column) {\r\n                var maxWidth = column.maxWidth;\r\n                var minWidth = column.minWidth;\r\n                if (!column.width) {\r\n                    var finalWidth = autoWidth;\r\n                    if (maxWidth && maxWidth < finalWidth) {\r\n                        finalWidth = Math.min(maxWidth, remainedWidth);\r\n                    }\r\n                    if (minWidth && minWidth > finalWidth) {\r\n                        finalWidth = minWidth;\r\n                    }\r\n                    if (finalWidth !== autoWidth) {\r\n                        column.width = finalWidth;\r\n                        remainedWidth -= finalWidth + barGapPercent * finalWidth;\r\n                        autoWidthCount--;\r\n                    }\r\n                }\r\n                else {\r\n                    var finalWidth = column.width;\r\n                    if (maxWidth) {\r\n                        finalWidth = Math.min(finalWidth, maxWidth);\r\n                    }\r\n                    if (minWidth) {\r\n                        finalWidth = Math.max(finalWidth, minWidth);\r\n                    }\r\n                    column.width = finalWidth;\r\n                    remainedWidth -= finalWidth + barGapPercent * finalWidth;\r\n                    autoWidthCount--;\r\n                }\r\n            });\r\n            autoWidth = (remainedWidth - categoryGap)\r\n                / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\r\n            autoWidth = Math.max(autoWidth, 0);\r\n            var widthSum = 0;\r\n            var lastColumn;\r\n            each(stacks, function (column, idx) {\r\n                if (!column.width) {\r\n                    column.width = autoWidth;\r\n                }\r\n                lastColumn = column;\r\n                widthSum += column.width * (1 + barGapPercent);\r\n            });\r\n            if (lastColumn) {\r\n                widthSum -= lastColumn.width * barGapPercent;\r\n            }\r\n            var offset = -widthSum / 2;\r\n            each(stacks, function (column, stackId) {\r\n                result[coordSysName][stackId] = result[coordSysName][stackId] || {\r\n                    bandWidth: bandWidth,\r\n                    offset: offset,\r\n                    width: column.width\r\n                };\r\n                offset += column.width * (1 + barGapPercent);\r\n            });\r\n        });\r\n        return result;\r\n    }\r\n    function retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\r\n        if (barWidthAndOffset && axis) {\r\n            var result = barWidthAndOffset[getAxisKey(axis)];\r\n            if (result != null && seriesModel != null) {\r\n                return result[getSeriesStackId(seriesModel)];\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    function layout(seriesType, ecModel) {\r\n        var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\r\n        var barWidthAndOffset = makeColumnLayout(seriesModels);\r\n        var lastStackCoords = {};\r\n        each(seriesModels, function (seriesModel) {\r\n            var data = seriesModel.getData();\r\n            var cartesian = seriesModel.coordinateSystem;\r\n            var baseAxis = cartesian.getBaseAxis();\r\n            var stackId = getSeriesStackId(seriesModel);\r\n            var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\r\n            var columnOffset = columnLayoutInfo.offset;\r\n            var columnWidth = columnLayoutInfo.width;\r\n            var valueAxis = cartesian.getOtherAxis(baseAxis);\r\n            var barMinHeight = seriesModel.get('barMinHeight') || 0;\r\n            lastStackCoords[stackId] = lastStackCoords[stackId] || [];\r\n            data.setLayout({\r\n                bandWidth: columnLayoutInfo.bandWidth,\r\n                offset: columnOffset,\r\n                size: columnWidth\r\n            });\r\n            var valueDim = data.mapDimension(valueAxis.dim);\r\n            var baseDim = data.mapDimension(baseAxis.dim);\r\n            var stacked = isDimensionStacked(data, valueDim);\r\n            var isValueAxisH = valueAxis.isHorizontal();\r\n            var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\r\n            for (var idx = 0, len = data.count(); idx < len; idx++) {\r\n                var value = data.get(valueDim, idx);\r\n                var baseValue = data.get(baseDim, idx);\r\n                var sign = value >= 0 ? 'p' : 'n';\r\n                var baseCoord = valueAxisStart;\r\n                if (stacked) {\r\n                    if (!lastStackCoords[stackId][baseValue]) {\r\n                        lastStackCoords[stackId][baseValue] = {\r\n                            p: valueAxisStart,\r\n                            n: valueAxisStart\r\n                        };\r\n                    }\r\n                    baseCoord = lastStackCoords[stackId][baseValue][sign];\r\n                }\r\n                var x = void 0;\r\n                var y = void 0;\r\n                var width = void 0;\r\n                var height = void 0;\r\n                if (isValueAxisH) {\r\n                    var coord = cartesian.dataToPoint([value, baseValue]);\r\n                    x = baseCoord;\r\n                    y = coord[1] + columnOffset;\r\n                    width = coord[0] - valueAxisStart;\r\n                    height = columnWidth;\r\n                    if (Math.abs(width) < barMinHeight) {\r\n                        width = (width < 0 ? -1 : 1) * barMinHeight;\r\n                    }\r\n                    if (!isNaN(width)) {\r\n                        stacked && (lastStackCoords[stackId][baseValue][sign] += width);\r\n                    }\r\n                }\r\n                else {\r\n                    var coord = cartesian.dataToPoint([baseValue, value]);\r\n                    x = coord[0] + columnOffset;\r\n                    y = baseCoord;\r\n                    width = columnWidth;\r\n                    height = coord[1] - valueAxisStart;\r\n                    if (Math.abs(height) < barMinHeight) {\r\n                        height = (height <= 0 ? -1 : 1) * barMinHeight;\r\n                    }\r\n                    if (!isNaN(height)) {\r\n                        stacked && (lastStackCoords[stackId][baseValue][sign] += height);\r\n                    }\r\n                }\r\n                data.setItemLayout(idx, {\r\n                    x: x,\r\n                    y: y,\r\n                    width: width,\r\n                    height: height\r\n                });\r\n            }\r\n        });\r\n    }\r\n    var largeLayout = {\r\n        seriesType: 'bar',\r\n        plan: createRenderPlanner(),\r\n        reset: function (seriesModel) {\r\n            if (!isOnCartesian(seriesModel) || !isInLargeMode(seriesModel)) {\r\n                return;\r\n            }\r\n            var data = seriesModel.getData();\r\n            var cartesian = seriesModel.coordinateSystem;\r\n            var coordLayout = cartesian.master.getRect();\r\n            var baseAxis = cartesian.getBaseAxis();\r\n            var valueAxis = cartesian.getOtherAxis(baseAxis);\r\n            var valueDim = data.mapDimension(valueAxis.dim);\r\n            var baseDim = data.mapDimension(baseAxis.dim);\r\n            var valueAxisHorizontal = valueAxis.isHorizontal();\r\n            var valueDimIdx = valueAxisHorizontal ? 0 : 1;\r\n            var barWidth = retrieveColumnLayout(makeColumnLayout([seriesModel]), baseAxis, seriesModel).width;\r\n            if (!(barWidth > LARGE_BAR_MIN_WIDTH)) {\r\n                barWidth = LARGE_BAR_MIN_WIDTH;\r\n            }\r\n            return {\r\n                progress: function (params, data) {\r\n                    var count = params.count;\r\n                    var largePoints = new LargeArr(count * 2);\r\n                    var largeBackgroundPoints = new LargeArr(count * 2);\r\n                    var largeDataIndices = new LargeArr(count);\r\n                    var dataIndex;\r\n                    var coord = [];\r\n                    var valuePair = [];\r\n                    var pointsOffset = 0;\r\n                    var idxOffset = 0;\r\n                    while ((dataIndex = params.next()) != null) {\r\n                        valuePair[valueDimIdx] = data.get(valueDim, dataIndex);\r\n                        valuePair[1 - valueDimIdx] = data.get(baseDim, dataIndex);\r\n                        coord = cartesian.dataToPoint(valuePair, null, coord);\r\n                        largeBackgroundPoints[pointsOffset] =\r\n                            valueAxisHorizontal ? coordLayout.x + coordLayout.width : coord[0];\r\n                        largePoints[pointsOffset++] = coord[0];\r\n                        largeBackgroundPoints[pointsOffset] =\r\n                            valueAxisHorizontal ? coord[1] : coordLayout.y + coordLayout.height;\r\n                        largePoints[pointsOffset++] = coord[1];\r\n                        largeDataIndices[idxOffset++] = dataIndex;\r\n                    }\r\n                    data.setLayout({\r\n                        largePoints: largePoints,\r\n                        largeDataIndices: largeDataIndices,\r\n                        largeBackgroundPoints: largeBackgroundPoints,\r\n                        barWidth: barWidth,\r\n                        valueAxisStart: getValueAxisStart(baseAxis, valueAxis),\r\n                        backgroundStart: valueAxisHorizontal ? coordLayout.x : coordLayout.y,\r\n                        valueAxisHorizontal: valueAxisHorizontal\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    };\r\n    function isOnCartesian(seriesModel) {\r\n        return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\r\n    }\r\n    function isInLargeMode(seriesModel) {\r\n        return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\r\n    }\r\n    function getValueAxisStart(baseAxis, valueAxis, stacked) {\r\n        return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? 1 : 0));\r\n    }\n\n    var bisect = function (a, x, lo, hi) {\r\n        while (lo < hi) {\r\n            var mid = lo + hi >>> 1;\r\n            if (a[mid][1] < x) {\r\n                lo = mid + 1;\r\n            }\r\n            else {\r\n                hi = mid;\r\n            }\r\n        }\r\n        return lo;\r\n    };\r\n    var TimeScale = (function (_super) {\r\n        __extends(TimeScale, _super);\r\n        function TimeScale() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'time';\r\n            return _this;\r\n        }\r\n        TimeScale.prototype.getLabel = function (tick) {\r\n            var useUTC = this.getSetting('useUTC');\r\n            return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC);\r\n        };\r\n        TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\r\n            var isUTC = this.getSetting('useUTC');\r\n            var lang = this.getSetting('locale');\r\n            return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\r\n        };\r\n        TimeScale.prototype.getTicks = function (expandToNicedExtent) {\r\n            var interval = this._interval;\r\n            var extent = this._extent;\r\n            var ticks = [];\r\n            if (!interval) {\r\n                return ticks;\r\n            }\r\n            ticks.push({\r\n                value: extent[0],\r\n                level: 0\r\n            });\r\n            var useUTC = this.getSetting('useUTC');\r\n            var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\r\n            ticks = ticks.concat(innerTicks);\r\n            ticks.push({\r\n                value: extent[1],\r\n                level: 0\r\n            });\r\n            return ticks;\r\n        };\r\n        TimeScale.prototype.niceExtent = function (opt) {\r\n            var extent = this._extent;\r\n            if (extent[0] === extent[1]) {\r\n                extent[0] -= ONE_DAY;\r\n                extent[1] += ONE_DAY;\r\n            }\r\n            if (extent[1] === -Infinity && extent[0] === Infinity) {\r\n                var d = new Date();\r\n                extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\r\n                extent[0] = extent[1] - ONE_DAY;\r\n            }\r\n            this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\r\n        };\r\n        TimeScale.prototype.niceTicks = function (approxTickNum, minInterval, maxInterval) {\r\n            approxTickNum = approxTickNum || 10;\r\n            var extent = this._extent;\r\n            var span = extent[1] - extent[0];\r\n            this._approxInterval = span / approxTickNum;\r\n            if (minInterval != null && this._approxInterval < minInterval) {\r\n                this._approxInterval = minInterval;\r\n            }\r\n            if (maxInterval != null && this._approxInterval > maxInterval) {\r\n                this._approxInterval = maxInterval;\r\n            }\r\n            var scaleIntervalsLen = scaleIntervals.length;\r\n            var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1);\r\n            this._interval = scaleIntervals[idx][1];\r\n            this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\r\n        };\r\n        TimeScale.prototype.parse = function (val) {\r\n            return +parseDate(val);\r\n        };\r\n        TimeScale.prototype.contain = function (val) {\r\n            return contain$1(this.parse(val), this._extent);\r\n        };\r\n        TimeScale.prototype.normalize = function (val) {\r\n            return normalize$1(this.parse(val), this._extent);\r\n        };\r\n        TimeScale.prototype.scale = function (val) {\r\n            return scale$2(val, this._extent);\r\n        };\r\n        TimeScale.type = 'time';\r\n        return TimeScale;\r\n    }(IntervalScale));\r\n    var scaleIntervals = [\r\n        ['second', ONE_SECOND],\r\n        ['minute', ONE_MINUTE],\r\n        ['hour', ONE_HOUR],\r\n        ['quarter-day', ONE_HOUR * 6],\r\n        ['half-day', ONE_HOUR * 12],\r\n        ['day', ONE_DAY * 1.2],\r\n        ['half-week', ONE_DAY * 3.5],\r\n        ['week', ONE_DAY * 7],\r\n        ['month', ONE_DAY * 31],\r\n        ['quarter', ONE_DAY * 95],\r\n        ['half-year', ONE_YEAR / 2],\r\n        ['year', ONE_YEAR]\r\n    ];\r\n    function isUnitValueSame(unit, valueA, valueB, isUTC) {\r\n        var dateA = parseDate(valueA);\r\n        var dateB = parseDate(valueB);\r\n        var isSame = function (unit) {\r\n            return getUnitValue(dateA, unit, isUTC)\r\n                === getUnitValue(dateB, unit, isUTC);\r\n        };\r\n        var isSameYear = function () { return isSame('year'); };\r\n        var isSameMonth = function () { return isSameYear() && isSame('month'); };\r\n        var isSameDay = function () { return isSameMonth() && isSame('day'); };\r\n        var isSameHour = function () { return isSameDay() && isSame('hour'); };\r\n        var isSameMinute = function () { return isSameHour() && isSame('minute'); };\r\n        var isSameSecond = function () { return isSameMinute() && isSame('second'); };\r\n        var isSameMilliSecond = function () { return isSameSecond() && isSame('millisecond'); };\r\n        switch (unit) {\r\n            case 'year':\r\n                return isSameYear();\r\n            case 'month':\r\n                return isSameMonth();\r\n            case 'day':\r\n                return isSameDay();\r\n            case 'hour':\r\n                return isSameHour();\r\n            case 'minute':\r\n                return isSameMinute();\r\n            case 'second':\r\n                return isSameSecond();\r\n            case 'millisecond':\r\n                return isSameMilliSecond();\r\n        }\r\n    }\r\n    function getDateInterval(approxInterval, daysInMonth) {\r\n        approxInterval /= ONE_DAY;\r\n        return approxInterval > 16 ? 16\r\n            : approxInterval > 7.5 ? 7\r\n                : approxInterval > 3.5 ? 4\r\n                    : approxInterval > 1.5 ? 2 : 1;\r\n    }\r\n    function getMonthInterval(approxInterval) {\r\n        var APPROX_ONE_MONTH = 30 * ONE_DAY;\r\n        approxInterval /= APPROX_ONE_MONTH;\r\n        return approxInterval > 6 ? 6\r\n            : approxInterval > 3 ? 3\r\n                : approxInterval > 2 ? 2 : 1;\r\n    }\r\n    function getHourInterval(approxInterval) {\r\n        approxInterval /= ONE_HOUR;\r\n        return approxInterval > 12 ? 12\r\n            : approxInterval > 6 ? 6\r\n                : approxInterval > 3.5 ? 4\r\n                    : approxInterval > 2 ? 2 : 1;\r\n    }\r\n    function getMinutesAndSecondsInterval(approxInterval, isMinutes) {\r\n        approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\r\n        return approxInterval > 30 ? 30\r\n            : approxInterval > 20 ? 20\r\n                : approxInterval > 15 ? 15\r\n                    : approxInterval > 10 ? 10\r\n                        : approxInterval > 5 ? 5\r\n                            : approxInterval > 2 ? 2 : 1;\r\n    }\r\n    function getMillisecondsInterval(approxInterval) {\r\n        return nice(approxInterval, true);\r\n    }\r\n    function getFirstTimestampOfUnit(date, unitName, isUTC) {\r\n        var outDate = new Date(date);\r\n        switch (getPrimaryTimeUnit(unitName)) {\r\n            case 'year':\r\n            case 'month':\r\n                outDate[monthSetterName(isUTC)](0);\r\n            case 'day':\r\n                outDate[dateSetterName(isUTC)](1);\r\n            case 'hour':\r\n                outDate[hoursSetterName(isUTC)](0);\r\n            case 'minute':\r\n                outDate[minutesSetterName(isUTC)](0);\r\n            case 'second':\r\n                outDate[secondsSetterName(isUTC)](0);\r\n                outDate[millisecondsSetterName(isUTC)](0);\r\n        }\r\n        return outDate.getTime();\r\n    }\r\n    function getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\r\n        var safeLimit = 10000;\r\n        var unitNames = timeUnits;\r\n        var iter = 0;\r\n        function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\r\n            var date = new Date(minTimestamp);\r\n            var dateTime = minTimestamp;\r\n            var d = date[getMethodName]();\r\n            while (dateTime < maxTimestamp && dateTime <= extent[1]) {\r\n                out.push({\r\n                    value: dateTime\r\n                });\r\n                d += interval;\r\n                date[setMethodName](d);\r\n                dateTime = date.getTime();\r\n            }\r\n            out.push({\r\n                value: dateTime,\r\n                notAdd: true\r\n            });\r\n        }\r\n        function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\r\n            var newAddedTicks = [];\r\n            var isFirstLevel = !lastLevelTicks.length;\r\n            if (isUnitValueSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\r\n                return;\r\n            }\r\n            if (isFirstLevel) {\r\n                lastLevelTicks = [{\r\n                        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\r\n                    }, {\r\n                        value: extent[1]\r\n                    }];\r\n            }\r\n            for (var i = 0; i < lastLevelTicks.length - 1; i++) {\r\n                var startTick = lastLevelTicks[i].value;\r\n                var endTick = lastLevelTicks[i + 1].value;\r\n                if (startTick === endTick) {\r\n                    continue;\r\n                }\r\n                var interval = void 0;\r\n                var getterName = void 0;\r\n                var setterName = void 0;\r\n                var isDate = false;\r\n                switch (unitName) {\r\n                    case 'year':\r\n                        interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\r\n                        getterName = fullYearGetterName(isUTC);\r\n                        setterName = fullYearSetterName(isUTC);\r\n                        break;\r\n                    case 'half-year':\r\n                    case 'quarter':\r\n                    case 'month':\r\n                        interval = getMonthInterval(approxInterval);\r\n                        getterName = monthGetterName(isUTC);\r\n                        setterName = monthSetterName(isUTC);\r\n                        break;\r\n                    case 'week':\r\n                    case 'half-week':\r\n                    case 'day':\r\n                        interval = getDateInterval(approxInterval);\r\n                        getterName = dateGetterName(isUTC);\r\n                        setterName = dateSetterName(isUTC);\r\n                        isDate = true;\r\n                        break;\r\n                    case 'half-day':\r\n                    case 'quarter-day':\r\n                    case 'hour':\r\n                        interval = getHourInterval(approxInterval);\r\n                        getterName = hoursGetterName(isUTC);\r\n                        setterName = hoursSetterName(isUTC);\r\n                        break;\r\n                    case 'minute':\r\n                        interval = getMinutesAndSecondsInterval(approxInterval, true);\r\n                        getterName = minutesGetterName(isUTC);\r\n                        setterName = minutesSetterName(isUTC);\r\n                        break;\r\n                    case 'second':\r\n                        interval = getMinutesAndSecondsInterval(approxInterval, false);\r\n                        getterName = secondsGetterName(isUTC);\r\n                        setterName = secondsSetterName(isUTC);\r\n                        break;\r\n                    case 'millisecond':\r\n                        interval = getMillisecondsInterval(approxInterval);\r\n                        getterName = millisecondsGetterName(isUTC);\r\n                        setterName = millisecondsSetterName(isUTC);\r\n                        break;\r\n                }\r\n                addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\r\n                if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\r\n                    levelTicks.unshift({\r\n                        value: levelTicks[0].value - interval\r\n                    });\r\n                }\r\n            }\r\n            for (var i = 0; i < newAddedTicks.length; i++) {\r\n                levelTicks.push(newAddedTicks[i]);\r\n            }\r\n            return newAddedTicks;\r\n        }\r\n        var levelsTicks = [];\r\n        var currentLevelTicks = [];\r\n        var tickCount = 0;\r\n        var lastLevelTickCount = 0;\r\n        for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\r\n            var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\r\n            if (!isPrimaryTimeUnit(unitNames[i])) {\r\n                continue;\r\n            }\r\n            addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\r\n            var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\r\n            if (primaryTimeUnit !== nextPrimaryTimeUnit) {\r\n                if (currentLevelTicks.length) {\r\n                    lastLevelTickCount = tickCount;\r\n                    currentLevelTicks.sort(function (a, b) { return a.value - b.value; });\r\n                    var levelTicksRemoveDuplicated = [];\r\n                    for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\r\n                        var tickValue = currentLevelTicks[i_1].value;\r\n                        if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\r\n                            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\r\n                            if (tickValue >= extent[0] && tickValue <= extent[1]) {\r\n                                tickCount++;\r\n                            }\r\n                        }\r\n                    }\r\n                    var targetTickNum = (extent[1] - extent[0]) / approxInterval;\r\n                    if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\r\n                        break;\r\n                    }\r\n                    levelsTicks.push(levelTicksRemoveDuplicated);\r\n                    if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\r\n                        break;\r\n                    }\r\n                }\r\n                currentLevelTicks = [];\r\n            }\r\n        }\r\n        if (__DEV__) {\r\n            if (iter >= safeLimit) {\r\n                warn('Exceed safe limit.');\r\n            }\r\n        }\r\n        var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\r\n            return filter(levelTicks, function (tick) { return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd; });\r\n        }), function (levelTicks) { return levelTicks.length > 0; });\r\n        var ticks = [];\r\n        var maxLevel = levelsTicksInExtent.length - 1;\r\n        for (var i = 0; i < levelsTicksInExtent.length; ++i) {\r\n            var levelTicks = levelsTicksInExtent[i];\r\n            for (var k = 0; k < levelTicks.length; ++k) {\r\n                ticks.push({\r\n                    value: levelTicks[k].value,\r\n                    level: maxLevel - i\r\n                });\r\n            }\r\n        }\r\n        ticks.sort(function (a, b) { return a.value - b.value; });\r\n        var result = [];\r\n        for (var i = 0; i < ticks.length; ++i) {\r\n            if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\r\n                result.push(ticks[i]);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    Scale.registerClass(TimeScale);\n\n    var scaleProto = Scale.prototype;\r\n    var intervalScaleProto = IntervalScale.prototype;\r\n    var getPrecisionSafe$1 = getPrecisionSafe;\r\n    var roundingErrorFix = round$1;\r\n    var mathFloor = Math.floor;\r\n    var mathCeil = Math.ceil;\r\n    var mathPow$1 = Math.pow;\r\n    var mathLog = Math.log;\r\n    var LogScale = (function (_super) {\r\n        __extends(LogScale, _super);\r\n        function LogScale() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'log';\r\n            _this.base = 10;\r\n            _this._originalScale = new IntervalScale();\r\n            _this._interval = 0;\r\n            return _this;\r\n        }\r\n        LogScale.prototype.getTicks = function (expandToNicedExtent) {\r\n            var originalScale = this._originalScale;\r\n            var extent = this._extent;\r\n            var originalExtent = originalScale.getExtent();\r\n            var ticks = intervalScaleProto.getTicks.call(this, expandToNicedExtent);\r\n            return map(ticks, function (tick) {\r\n                var val = tick.value;\r\n                var powVal = round$1(mathPow$1(this.base, val));\r\n                powVal = (val === extent[0] && this._fixMin)\r\n                    ? fixRoundingError(powVal, originalExtent[0])\r\n                    : powVal;\r\n                powVal = (val === extent[1] && this._fixMax)\r\n                    ? fixRoundingError(powVal, originalExtent[1])\r\n                    : powVal;\r\n                return {\r\n                    value: powVal\r\n                };\r\n            }, this);\r\n        };\r\n        LogScale.prototype.setExtent = function (start, end) {\r\n            var base = this.base;\r\n            start = mathLog(start) / mathLog(base);\r\n            end = mathLog(end) / mathLog(base);\r\n            intervalScaleProto.setExtent.call(this, start, end);\r\n        };\r\n        LogScale.prototype.getExtent = function () {\r\n            var base = this.base;\r\n            var extent = scaleProto.getExtent.call(this);\r\n            extent[0] = mathPow$1(base, extent[0]);\r\n            extent[1] = mathPow$1(base, extent[1]);\r\n            var originalScale = this._originalScale;\r\n            var originalExtent = originalScale.getExtent();\r\n            this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\r\n            this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\r\n            return extent;\r\n        };\r\n        LogScale.prototype.unionExtent = function (extent) {\r\n            this._originalScale.unionExtent(extent);\r\n            var base = this.base;\r\n            extent[0] = mathLog(extent[0]) / mathLog(base);\r\n            extent[1] = mathLog(extent[1]) / mathLog(base);\r\n            scaleProto.unionExtent.call(this, extent);\r\n        };\r\n        LogScale.prototype.unionExtentFromData = function (data, dim) {\r\n            this.unionExtent(data.getApproximateExtent(dim));\r\n        };\r\n        LogScale.prototype.niceTicks = function (approxTickNum) {\r\n            approxTickNum = approxTickNum || 10;\r\n            var extent = this._extent;\r\n            var span = extent[1] - extent[0];\r\n            if (span === Infinity || span <= 0) {\r\n                return;\r\n            }\r\n            var interval = quantity(span);\r\n            var err = approxTickNum / span * interval;\r\n            if (err <= 0.5) {\r\n                interval *= 10;\r\n            }\r\n            while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\r\n                interval *= 10;\r\n            }\r\n            var niceExtent = [\r\n                round$1(mathCeil(extent[0] / interval) * interval),\r\n                round$1(mathFloor(extent[1] / interval) * interval)\r\n            ];\r\n            this._interval = interval;\r\n            this._niceExtent = niceExtent;\r\n        };\r\n        LogScale.prototype.niceExtent = function (opt) {\r\n            intervalScaleProto.niceExtent.call(this, opt);\r\n            this._fixMin = opt.fixMin;\r\n            this._fixMax = opt.fixMax;\r\n        };\r\n        LogScale.prototype.parse = function (val) {\r\n            return val;\r\n        };\r\n        LogScale.prototype.contain = function (val) {\r\n            val = mathLog(val) / mathLog(this.base);\r\n            return contain$1(val, this._extent);\r\n        };\r\n        LogScale.prototype.normalize = function (val) {\r\n            val = mathLog(val) / mathLog(this.base);\r\n            return normalize$1(val, this._extent);\r\n        };\r\n        LogScale.prototype.scale = function (val) {\r\n            val = scale$2(val, this._extent);\r\n            return mathPow$1(this.base, val);\r\n        };\r\n        LogScale.type = 'log';\r\n        return LogScale;\r\n    }(Scale));\r\n    var proto = LogScale.prototype;\r\n    proto.getMinorTicks = intervalScaleProto.getMinorTicks;\r\n    proto.getLabel = intervalScaleProto.getLabel;\r\n    function fixRoundingError(val, originalVal) {\r\n        return roundingErrorFix(val, getPrecisionSafe$1(originalVal));\r\n    }\r\n    Scale.registerClass(LogScale);\n\n    var ScaleRawExtentInfo = (function () {\r\n        function ScaleRawExtentInfo(scale, model, originalExtent) {\r\n            this._prepareParams(scale, model, originalExtent);\r\n        }\r\n        ScaleRawExtentInfo.prototype._prepareParams = function (scale, model, dataExtent) {\r\n            if (dataExtent[1] < dataExtent[0]) {\r\n                dataExtent = [NaN, NaN];\r\n            }\r\n            this._dataMin = dataExtent[0];\r\n            this._dataMax = dataExtent[1];\r\n            var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\r\n            this._needCrossZero = model.getNeedCrossZero();\r\n            var modelMinRaw = this._modelMinRaw = model.get('min', true);\r\n            if (isFunction(modelMinRaw)) {\r\n                this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\r\n                    min: dataExtent[0],\r\n                    max: dataExtent[1]\r\n                }));\r\n            }\r\n            else if (modelMinRaw !== 'dataMin') {\r\n                this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\r\n            }\r\n            var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\r\n            if (isFunction(modelMaxRaw)) {\r\n                this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\r\n                    min: dataExtent[0],\r\n                    max: dataExtent[1]\r\n                }));\r\n            }\r\n            else if (modelMaxRaw !== 'dataMax') {\r\n                this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\r\n            }\r\n            if (isOrdinal) {\r\n                this._axisDataLen = model.getCategories().length;\r\n            }\r\n            else {\r\n                var boundaryGap = model.get('boundaryGap');\r\n                var boundaryGapArr = isArray(boundaryGap)\r\n                    ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\r\n                if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\r\n                    if (__DEV__) {\r\n                        console.warn('Boolean type for boundaryGap is only '\r\n                            + 'allowed for ordinal axis. Please use string in '\r\n                            + 'percentage instead, e.g., \"20%\". Currently, '\r\n                            + 'boundaryGap is set to be 0.');\r\n                    }\r\n                    this._boundaryGapInner = [0, 0];\r\n                }\r\n                else {\r\n                    this._boundaryGapInner = [\r\n                        parsePercent(boundaryGapArr[0], 1),\r\n                        parsePercent(boundaryGapArr[1], 1)\r\n                    ];\r\n                }\r\n            }\r\n        };\r\n        ScaleRawExtentInfo.prototype.calculate = function () {\r\n            var isOrdinal = this._isOrdinal;\r\n            var dataMin = this._dataMin;\r\n            var dataMax = this._dataMax;\r\n            var axisDataLen = this._axisDataLen;\r\n            var boundaryGapInner = this._boundaryGapInner;\r\n            var span = !isOrdinal\r\n                ? ((dataMax - dataMin) || Math.abs(dataMin))\r\n                : null;\r\n            var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\r\n            var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum;\r\n            var minFixed = min != null;\r\n            var maxFixed = max != null;\r\n            if (min == null) {\r\n                min = isOrdinal\r\n                    ? (axisDataLen ? 0 : NaN)\r\n                    : dataMin - boundaryGapInner[0] * span;\r\n            }\r\n            if (max == null) {\r\n                max = isOrdinal\r\n                    ? (axisDataLen ? axisDataLen - 1 : NaN)\r\n                    : dataMax + boundaryGapInner[1] * span;\r\n            }\r\n            (min == null || !isFinite(min)) && (min = NaN);\r\n            (max == null || !isFinite(max)) && (max = NaN);\r\n            if (min > max) {\r\n                min = NaN;\r\n                max = NaN;\r\n            }\r\n            var isBlank = eqNaN(min)\r\n                || eqNaN(max)\r\n                || (isOrdinal && !axisDataLen);\r\n            if (this._needCrossZero) {\r\n                if (min > 0 && max > 0 && !minFixed) {\r\n                    min = 0;\r\n                }\r\n                if (min < 0 && max < 0 && !maxFixed) {\r\n                    max = 0;\r\n                }\r\n            }\r\n            var determinedMin = this._determinedMin;\r\n            var determinedMax = this._determinedMax;\r\n            if (determinedMin != null) {\r\n                min = determinedMin;\r\n                minFixed = true;\r\n            }\r\n            if (determinedMax != null) {\r\n                max = determinedMax;\r\n                maxFixed = true;\r\n            }\r\n            return {\r\n                min: min,\r\n                max: max,\r\n                minFixed: minFixed,\r\n                maxFixed: maxFixed,\r\n                isBlank: isBlank\r\n            };\r\n        };\r\n        ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\r\n            if (__DEV__) {\r\n                assert(!this.frozen);\r\n            }\r\n            this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\r\n        };\r\n        ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\r\n            var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\r\n            if (__DEV__) {\r\n                assert(!this.frozen\r\n                    && (this[attr] == null));\r\n            }\r\n            this[attr] = val;\r\n        };\r\n        ScaleRawExtentInfo.prototype.freeze = function () {\r\n            this.frozen = true;\r\n        };\r\n        return ScaleRawExtentInfo;\r\n    }());\r\n    var DETERMINED_MIN_MAX_ATTR = { min: '_determinedMin', max: '_determinedMax' };\r\n    var DATA_MIN_MAX_ATTR = { min: '_dataMin', max: '_dataMax' };\r\n    function ensureScaleRawExtentInfo(scale, model, originalExtent) {\r\n        var rawExtentInfo = scale.rawExtentInfo;\r\n        if (rawExtentInfo) {\r\n            return rawExtentInfo;\r\n        }\r\n        rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent);\r\n        scale.rawExtentInfo = rawExtentInfo;\r\n        return rawExtentInfo;\r\n    }\r\n    function parseAxisModelMinMax(scale, minMax) {\r\n        return minMax == null ? null\r\n            : eqNaN(minMax) ? NaN\r\n                : scale.parse(minMax);\r\n    }\n\n    function getScaleExtent(scale, model) {\r\n        var scaleType = scale.type;\r\n        var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\r\n        scale.setBlank(rawExtentResult.isBlank);\r\n        var min = rawExtentResult.min;\r\n        var max = rawExtentResult.max;\r\n        var ecModel = model.ecModel;\r\n        if (ecModel && (scaleType === 'time')) {\r\n            var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\r\n            var isBaseAxisAndHasBarSeries_1 = false;\r\n            each(barSeriesModels, function (seriesModel) {\r\n                isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\r\n            });\r\n            if (isBaseAxisAndHasBarSeries_1) {\r\n                var barWidthAndOffset = makeColumnLayout(barSeriesModels);\r\n                var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\r\n                min = adjustedScale.min;\r\n                max = adjustedScale.max;\r\n            }\r\n        }\r\n        return {\r\n            extent: [min, max],\r\n            fixMin: rawExtentResult.minFixed,\r\n            fixMax: rawExtentResult.maxFixed\r\n        };\r\n    }\r\n    function adjustScaleForOverflow(min, max, model, barWidthAndOffset) {\r\n        var axisExtent = model.axis.getExtent();\r\n        var axisLength = axisExtent[1] - axisExtent[0];\r\n        var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\r\n        if (barsOnCurrentAxis === undefined) {\r\n            return { min: min, max: max };\r\n        }\r\n        var minOverflow = Infinity;\r\n        each(barsOnCurrentAxis, function (item) {\r\n            minOverflow = Math.min(item.offset, minOverflow);\r\n        });\r\n        var maxOverflow = -Infinity;\r\n        each(barsOnCurrentAxis, function (item) {\r\n            maxOverflow = Math.max(item.offset + item.width, maxOverflow);\r\n        });\r\n        minOverflow = Math.abs(minOverflow);\r\n        maxOverflow = Math.abs(maxOverflow);\r\n        var totalOverFlow = minOverflow + maxOverflow;\r\n        var oldRange = max - min;\r\n        var oldRangePercentOfNew = (1 - (minOverflow + maxOverflow) / axisLength);\r\n        var overflowBuffer = ((oldRange / oldRangePercentOfNew) - oldRange);\r\n        max += overflowBuffer * (maxOverflow / totalOverFlow);\r\n        min -= overflowBuffer * (minOverflow / totalOverFlow);\r\n        return { min: min, max: max };\r\n    }\r\n    function niceScaleExtent(scale, model) {\r\n        var extentInfo = getScaleExtent(scale, model);\r\n        var extent = extentInfo.extent;\r\n        var splitNumber = model.get('splitNumber');\r\n        if (scale instanceof LogScale) {\r\n            scale.base = model.get('logBase');\r\n        }\r\n        var scaleType = scale.type;\r\n        scale.setExtent(extent[0], extent[1]);\r\n        scale.niceExtent({\r\n            splitNumber: splitNumber,\r\n            fixMin: extentInfo.fixMin,\r\n            fixMax: extentInfo.fixMax,\r\n            minInterval: (scaleType === 'interval' || scaleType === 'time')\r\n                ? model.get('minInterval') : null,\r\n            maxInterval: (scaleType === 'interval' || scaleType === 'time')\r\n                ? model.get('maxInterval') : null\r\n        });\r\n        var interval = model.get('interval');\r\n        if (interval != null) {\r\n            scale.setInterval && scale.setInterval(interval);\r\n        }\r\n    }\r\n    function createScaleByModel(model, axisType) {\r\n        axisType = axisType || model.get('type');\r\n        if (axisType) {\r\n            switch (axisType) {\r\n                case 'category':\r\n                    return new OrdinalScale({\r\n                        ordinalMeta: model.getOrdinalMeta\r\n                            ? model.getOrdinalMeta()\r\n                            : model.getCategories(),\r\n                        extent: [Infinity, -Infinity]\r\n                    });\r\n                case 'time':\r\n                    return new TimeScale({\r\n                        locale: model.ecModel.getLocaleModel(),\r\n                        useUTC: model.ecModel.get('useUTC')\r\n                    });\r\n                default:\r\n                    return new (Scale.getClass(axisType) || IntervalScale)();\r\n            }\r\n        }\r\n    }\r\n    function ifAxisCrossZero(axis) {\r\n        var dataExtent = axis.scale.getExtent();\r\n        var min = dataExtent[0];\r\n        var max = dataExtent[1];\r\n        return !((min > 0 && max > 0) || (min < 0 && max < 0));\r\n    }\r\n    function makeLabelFormatter(axis) {\r\n        var labelFormatter = axis.getLabelModel().get('formatter');\r\n        var categoryTickStart = axis.type === 'category' ? axis.scale.getExtent()[0] : null;\r\n        if (axis.scale.type === 'time') {\r\n            return (function (tpl) {\r\n                return function (tick, idx) {\r\n                    return axis.scale.getFormattedLabel(tick, idx, tpl);\r\n                };\r\n            })(labelFormatter);\r\n        }\r\n        else if (typeof labelFormatter === 'string') {\r\n            return (function (tpl) {\r\n                return function (tick) {\r\n                    var label = axis.scale.getLabel(tick);\r\n                    var text = tpl.replace('{value}', label != null ? label : '');\r\n                    return text;\r\n                };\r\n            })(labelFormatter);\r\n        }\r\n        else if (typeof labelFormatter === 'function') {\r\n            return (function (cb) {\r\n                return function (tick, idx) {\r\n                    if (categoryTickStart != null) {\r\n                        idx = tick.value - categoryTickStart;\r\n                    }\r\n                    return cb(getAxisRawValue(axis, tick), idx, tick.level != null ? {\r\n                        level: tick.level\r\n                    } : null);\r\n                };\r\n            })(labelFormatter);\r\n        }\r\n        else {\r\n            return function (tick) {\r\n                return axis.scale.getLabel(tick);\r\n            };\r\n        }\r\n    }\r\n    function getAxisRawValue(axis, tick) {\r\n        return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\r\n    }\r\n    function estimateLabelUnionRect(axis) {\r\n        var axisModel = axis.model;\r\n        var scale = axis.scale;\r\n        if (!axisModel.get(['axisLabel', 'show']) || scale.isBlank()) {\r\n            return;\r\n        }\r\n        var realNumberScaleTicks;\r\n        var tickCount;\r\n        var categoryScaleExtent = scale.getExtent();\r\n        if (scale instanceof OrdinalScale) {\r\n            tickCount = scale.count();\r\n        }\r\n        else {\r\n            realNumberScaleTicks = scale.getTicks();\r\n            tickCount = realNumberScaleTicks.length;\r\n        }\r\n        var axisLabelModel = axis.getLabelModel();\r\n        var labelFormatter = makeLabelFormatter(axis);\r\n        var rect;\r\n        var step = 1;\r\n        if (tickCount > 40) {\r\n            step = Math.ceil(tickCount / 40);\r\n        }\r\n        for (var i = 0; i < tickCount; i += step) {\r\n            var tick = realNumberScaleTicks\r\n                ? realNumberScaleTicks[i]\r\n                : {\r\n                    value: categoryScaleExtent[0] + i\r\n                };\r\n            var label = labelFormatter(tick, i);\r\n            var unrotatedSingleRect = axisLabelModel.getTextRect(label);\r\n            var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\r\n            rect ? rect.union(singleRect) : (rect = singleRect);\r\n        }\r\n        return rect;\r\n    }\r\n    function rotateTextRect(textRect, rotate) {\r\n        var rotateRadians = rotate * Math.PI / 180;\r\n        var beforeWidth = textRect.width;\r\n        var beforeHeight = textRect.height;\r\n        var afterWidth = beforeWidth * Math.cos(rotateRadians) + beforeHeight * Math.sin(rotateRadians);\r\n        var afterHeight = beforeWidth * Math.sin(rotateRadians) + beforeHeight * Math.cos(rotateRadians);\r\n        var rotatedRect = new BoundingRect(textRect.x, textRect.y, afterWidth, afterHeight);\r\n        return rotatedRect;\r\n    }\r\n    function getOptionCategoryInterval(model) {\r\n        var interval = model.get('interval');\r\n        return interval == null ? 'auto' : interval;\r\n    }\r\n    function shouldShowAllLabels(axis) {\r\n        return axis.type === 'category'\r\n            && getOptionCategoryInterval(axis.getLabelModel()) === 0;\r\n    }\r\n    function getDataDimensionsOnAxis(data, axisDim) {\r\n        var dataDimMap = {};\r\n        each(data.mapDimensionsAll(axisDim), function (dataDim) {\r\n            dataDimMap[getStackedDimension(data, dataDim)] = true;\r\n        });\r\n        return keys(dataDimMap);\r\n    }\r\n    function unionAxisExtentFromData(dataExtent, data, axisDim) {\r\n        if (data) {\r\n            each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\r\n                var seriesExtent = data.getApproximateExtent(dim);\r\n                seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\r\n                seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\r\n            });\r\n        }\r\n    }\n\n    var AxisModelCommonMixin = (function () {\r\n        function AxisModelCommonMixin() {\r\n        }\r\n        AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\r\n            var option = this.option;\r\n            return !option.scale;\r\n        };\r\n        AxisModelCommonMixin.prototype.getCoordSysModel = function () {\r\n            return;\r\n        };\r\n        return AxisModelCommonMixin;\r\n    }());\n\n    var Triangle = Path.extend({\r\n        type: 'triangle',\r\n        shape: {\r\n            cx: 0,\r\n            cy: 0,\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        buildPath: function (path, shape) {\r\n            var cx = shape.cx;\r\n            var cy = shape.cy;\r\n            var width = shape.width / 2;\r\n            var height = shape.height / 2;\r\n            path.moveTo(cx, cy - height);\r\n            path.lineTo(cx + width, cy + height);\r\n            path.lineTo(cx - width, cy + height);\r\n            path.closePath();\r\n        }\r\n    });\r\n    var Diamond = Path.extend({\r\n        type: 'diamond',\r\n        shape: {\r\n            cx: 0,\r\n            cy: 0,\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        buildPath: function (path, shape) {\r\n            var cx = shape.cx;\r\n            var cy = shape.cy;\r\n            var width = shape.width / 2;\r\n            var height = shape.height / 2;\r\n            path.moveTo(cx, cy - height);\r\n            path.lineTo(cx + width, cy);\r\n            path.lineTo(cx, cy + height);\r\n            path.lineTo(cx - width, cy);\r\n            path.closePath();\r\n        }\r\n    });\r\n    var Pin = Path.extend({\r\n        type: 'pin',\r\n        shape: {\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        buildPath: function (path, shape) {\r\n            var x = shape.x;\r\n            var y = shape.y;\r\n            var w = shape.width / 5 * 3;\r\n            var h = Math.max(w, shape.height);\r\n            var r = w / 2;\r\n            var dy = r * r / (h - r);\r\n            var cy = y - h + r + dy;\r\n            var angle = Math.asin(dy / r);\r\n            var dx = Math.cos(angle) * r;\r\n            var tanX = Math.sin(angle);\r\n            var tanY = Math.cos(angle);\r\n            var cpLen = r * 0.6;\r\n            var cpLen2 = r * 0.7;\r\n            path.moveTo(x - dx, cy + dy);\r\n            path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\r\n            path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\r\n            path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\r\n            path.closePath();\r\n        }\r\n    });\r\n    var Arrow = Path.extend({\r\n        type: 'arrow',\r\n        shape: {\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        buildPath: function (ctx, shape) {\r\n            var height = shape.height;\r\n            var width = shape.width;\r\n            var x = shape.x;\r\n            var y = shape.y;\r\n            var dx = width / 3 * 2;\r\n            ctx.moveTo(x, y);\r\n            ctx.lineTo(x + dx, y + height);\r\n            ctx.lineTo(x, y + height / 4 * 3);\r\n            ctx.lineTo(x - dx, y + height);\r\n            ctx.lineTo(x, y);\r\n            ctx.closePath();\r\n        }\r\n    });\r\n    var symbolCtors = {\r\n        line: Rect,\r\n        rect: Rect,\r\n        roundRect: Rect,\r\n        square: Rect,\r\n        circle: Circle,\r\n        diamond: Diamond,\r\n        pin: Pin,\r\n        arrow: Arrow,\r\n        triangle: Triangle\r\n    };\r\n    var symbolShapeMakers = {\r\n        line: function (x, y, w, h, shape) {\r\n            var thickness = 2;\r\n            shape.x = x;\r\n            shape.y = y + h / 2 - thickness / 2;\r\n            shape.width = w;\r\n            shape.height = thickness;\r\n        },\r\n        rect: function (x, y, w, h, shape) {\r\n            shape.x = x;\r\n            shape.y = y;\r\n            shape.width = w;\r\n            shape.height = h;\r\n        },\r\n        roundRect: function (x, y, w, h, shape) {\r\n            shape.x = x;\r\n            shape.y = y;\r\n            shape.width = w;\r\n            shape.height = h;\r\n            shape.r = Math.min(w, h) / 4;\r\n        },\r\n        square: function (x, y, w, h, shape) {\r\n            var size = Math.min(w, h);\r\n            shape.x = x;\r\n            shape.y = y;\r\n            shape.width = size;\r\n            shape.height = size;\r\n        },\r\n        circle: function (x, y, w, h, shape) {\r\n            shape.cx = x + w / 2;\r\n            shape.cy = y + h / 2;\r\n            shape.r = Math.min(w, h) / 2;\r\n        },\r\n        diamond: function (x, y, w, h, shape) {\r\n            shape.cx = x + w / 2;\r\n            shape.cy = y + h / 2;\r\n            shape.width = w;\r\n            shape.height = h;\r\n        },\r\n        pin: function (x, y, w, h, shape) {\r\n            shape.x = x + w / 2;\r\n            shape.y = y + h / 2;\r\n            shape.width = w;\r\n            shape.height = h;\r\n        },\r\n        arrow: function (x, y, w, h, shape) {\r\n            shape.x = x + w / 2;\r\n            shape.y = y + h / 2;\r\n            shape.width = w;\r\n            shape.height = h;\r\n        },\r\n        triangle: function (x, y, w, h, shape) {\r\n            shape.cx = x + w / 2;\r\n            shape.cy = y + h / 2;\r\n            shape.width = w;\r\n            shape.height = h;\r\n        }\r\n    };\r\n    var symbolBuildProxies = {};\r\n    each(symbolCtors, function (Ctor, name) {\r\n        symbolBuildProxies[name] = new Ctor();\r\n    });\r\n    var SymbolClz = Path.extend({\r\n        type: 'symbol',\r\n        shape: {\r\n            symbolType: '',\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        calculateTextPosition: function (out, config, rect) {\r\n            var res = calculateTextPosition(out, config, rect);\r\n            var shape = this.shape;\r\n            if (shape && shape.symbolType === 'pin' && config.position === 'inside') {\r\n                res.y = rect.y + rect.height * 0.4;\r\n            }\r\n            return res;\r\n        },\r\n        buildPath: function (ctx, shape, inBundle) {\r\n            var symbolType = shape.symbolType;\r\n            if (symbolType !== 'none') {\r\n                var proxySymbol = symbolBuildProxies[symbolType];\r\n                if (!proxySymbol) {\r\n                    symbolType = 'rect';\r\n                    proxySymbol = symbolBuildProxies[symbolType];\r\n                }\r\n                symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\r\n                proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\r\n            }\r\n        }\r\n    });\r\n    function symbolPathSetColor(color, innerColor) {\r\n        if (this.type !== 'image') {\r\n            var symbolStyle = this.style;\r\n            if (this.__isEmptyBrush) {\r\n                symbolStyle.stroke = color;\r\n                symbolStyle.fill = innerColor || '#fff';\r\n                symbolStyle.lineWidth = 2;\r\n            }\r\n            else {\r\n                symbolStyle.fill = color;\r\n            }\r\n            this.markRedraw();\r\n        }\r\n    }\r\n    function createSymbol(symbolType, x, y, w, h, color, keepAspect) {\r\n        var isEmpty = symbolType.indexOf('empty') === 0;\r\n        if (isEmpty) {\r\n            symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\r\n        }\r\n        var symbolPath;\r\n        if (symbolType.indexOf('image://') === 0) {\r\n            symbolPath = makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\r\n        }\r\n        else if (symbolType.indexOf('path://') === 0) {\r\n            symbolPath = makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\r\n        }\r\n        else {\r\n            symbolPath = new SymbolClz({\r\n                shape: {\r\n                    symbolType: symbolType,\r\n                    x: x,\r\n                    y: y,\r\n                    width: w,\r\n                    height: h\r\n                }\r\n            });\r\n        }\r\n        symbolPath.__isEmptyBrush = isEmpty;\r\n        symbolPath.setColor = symbolPathSetColor;\r\n        if (color) {\r\n            symbolPath.setColor(color);\r\n        }\r\n        return symbolPath;\r\n    }\n\n    function createList(seriesModel) {\r\n        return createListFromArray(seriesModel.getSource(), seriesModel);\r\n    }\r\n    var dataStack$1 = {\r\n        isDimensionStacked: isDimensionStacked,\r\n        enableDataStack: enableDataStack,\r\n        getStackedDimension: getStackedDimension\r\n    };\r\n    function createScale(dataExtent, option) {\r\n        var axisModel = option;\r\n        if (!(option instanceof Model)) {\r\n            axisModel = new Model(option);\r\n        }\r\n        var scale = createScaleByModel(axisModel);\r\n        scale.setExtent(dataExtent[0], dataExtent[1]);\r\n        niceScaleExtent(scale, axisModel);\r\n        return scale;\r\n    }\r\n    function mixinAxisModelCommonMethods(Model) {\r\n        mixin(Model, AxisModelCommonMixin);\r\n    }\n\n    var helper = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        createList: createList,\n        getLayoutRect: getLayoutRect,\n        dataStack: dataStack$1,\n        createScale: createScale,\n        mixinAxisModelCommonMethods: mixinAxisModelCommonMethods,\n        createDimensions: createDimensions,\n        createSymbol: createSymbol\n    });\n\n    var EPSILON$3 = 1e-8;\r\n    function isAroundEqual$1(a, b) {\r\n        return Math.abs(a - b) < EPSILON$3;\r\n    }\r\n    function contain$2(points, x, y) {\r\n        var w = 0;\r\n        var p = points[0];\r\n        if (!p) {\r\n            return false;\r\n        }\r\n        for (var i = 1; i < points.length; i++) {\r\n            var p2 = points[i];\r\n            w += windingLine(p[0], p[1], p2[0], p2[1], x, y);\r\n            p = p2;\r\n        }\r\n        var p0 = points[0];\r\n        if (!isAroundEqual$1(p[0], p0[0]) || !isAroundEqual$1(p[1], p0[1])) {\r\n            w += windingLine(p[0], p[1], p0[0], p0[1], x, y);\r\n        }\r\n        return w !== 0;\r\n    }\n\n    var Region = (function () {\r\n        function Region(name, geometries, cp) {\r\n            this.name = name;\r\n            this.geometries = geometries;\r\n            if (!cp) {\r\n                var rect = this.getBoundingRect();\r\n                cp = [\r\n                    rect.x + rect.width / 2,\r\n                    rect.y + rect.height / 2\r\n                ];\r\n            }\r\n            else {\r\n                cp = [cp[0], cp[1]];\r\n            }\r\n            this.center = cp;\r\n        }\r\n        Region.prototype.getBoundingRect = function () {\r\n            var rect = this._rect;\r\n            if (rect) {\r\n                return rect;\r\n            }\r\n            var MAX_NUMBER = Number.MAX_VALUE;\r\n            var min$1 = [MAX_NUMBER, MAX_NUMBER];\r\n            var max$1 = [-MAX_NUMBER, -MAX_NUMBER];\r\n            var min2 = [];\r\n            var max2 = [];\r\n            var geometries = this.geometries;\r\n            var i = 0;\r\n            for (; i < geometries.length; i++) {\r\n                if (geometries[i].type !== 'polygon') {\r\n                    continue;\r\n                }\r\n                var exterior = geometries[i].exterior;\r\n                fromPoints(exterior, min2, max2);\r\n                min(min$1, min$1, min2);\r\n                max(max$1, max$1, max2);\r\n            }\r\n            if (i === 0) {\r\n                min$1[0] = min$1[1] = max$1[0] = max$1[1] = 0;\r\n            }\r\n            return (this._rect = new BoundingRect(min$1[0], min$1[1], max$1[0] - min$1[0], max$1[1] - min$1[1]));\r\n        };\r\n        Region.prototype.contain = function (coord) {\r\n            var rect = this.getBoundingRect();\r\n            var geometries = this.geometries;\r\n            if (!rect.contain(coord[0], coord[1])) {\r\n                return false;\r\n            }\r\n            loopGeo: for (var i = 0, len = geometries.length; i < len; i++) {\r\n                if (geometries[i].type !== 'polygon') {\r\n                    continue;\r\n                }\r\n                var exterior = geometries[i].exterior;\r\n                var interiors = geometries[i].interiors;\r\n                if (contain$2(exterior, coord[0], coord[1])) {\r\n                    for (var k = 0; k < (interiors ? interiors.length : 0); k++) {\r\n                        if (contain$2(interiors[k], coord[0], coord[1])) {\r\n                            continue loopGeo;\r\n                        }\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        Region.prototype.transformTo = function (x, y, width, height) {\r\n            var rect = this.getBoundingRect();\r\n            var aspect = rect.width / rect.height;\r\n            if (!width) {\r\n                width = aspect * height;\r\n            }\r\n            else if (!height) {\r\n                height = width / aspect;\r\n            }\r\n            var target = new BoundingRect(x, y, width, height);\r\n            var transform = rect.calculateTransform(target);\r\n            var geometries = this.geometries;\r\n            for (var i = 0; i < geometries.length; i++) {\r\n                if (geometries[i].type !== 'polygon') {\r\n                    continue;\r\n                }\r\n                var exterior = geometries[i].exterior;\r\n                var interiors = geometries[i].interiors;\r\n                for (var p = 0; p < exterior.length; p++) {\r\n                    applyTransform(exterior[p], exterior[p], transform);\r\n                }\r\n                for (var h = 0; h < (interiors ? interiors.length : 0); h++) {\r\n                    for (var p = 0; p < interiors[h].length; p++) {\r\n                        applyTransform(interiors[h][p], interiors[h][p], transform);\r\n                    }\r\n                }\r\n            }\r\n            rect = this._rect;\r\n            rect.copy(target);\r\n            this.center = [\r\n                rect.x + rect.width / 2,\r\n                rect.y + rect.height / 2\r\n            ];\r\n        };\r\n        Region.prototype.cloneShallow = function (name) {\r\n            name == null && (name = this.name);\r\n            var newRegion = new Region(name, this.geometries, this.center);\r\n            newRegion._rect = this._rect;\r\n            newRegion.transformTo = null;\r\n            return newRegion;\r\n        };\r\n        return Region;\r\n    }());\n\n    function decode(json) {\r\n        if (!json.UTF8Encoding) {\r\n            return json;\r\n        }\r\n        var jsonCompressed = json;\r\n        var encodeScale = jsonCompressed.UTF8Scale;\r\n        if (encodeScale == null) {\r\n            encodeScale = 1024;\r\n        }\r\n        var features = jsonCompressed.features;\r\n        for (var f = 0; f < features.length; f++) {\r\n            var feature = features[f];\r\n            var geometry = feature.geometry;\r\n            if (geometry.type === 'Polygon') {\r\n                var coordinates = geometry.coordinates;\r\n                for (var c = 0; c < coordinates.length; c++) {\r\n                    coordinates[c] = decodePolygon(coordinates[c], geometry.encodeOffsets[c], encodeScale);\r\n                }\r\n            }\r\n            else if (geometry.type === 'MultiPolygon') {\r\n                var coordinates = geometry.coordinates;\r\n                for (var c = 0; c < coordinates.length; c++) {\r\n                    var coordinate = coordinates[c];\r\n                    for (var c2 = 0; c2 < coordinate.length; c2++) {\r\n                        coordinate[c2] = decodePolygon(coordinate[c2], geometry.encodeOffsets[c][c2], encodeScale);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        jsonCompressed.UTF8Encoding = false;\r\n        return jsonCompressed;\r\n    }\r\n    function decodePolygon(coordinate, encodeOffsets, encodeScale) {\r\n        var result = [];\r\n        var prevX = encodeOffsets[0];\r\n        var prevY = encodeOffsets[1];\r\n        for (var i = 0; i < coordinate.length; i += 2) {\r\n            var x = coordinate.charCodeAt(i) - 64;\r\n            var y = coordinate.charCodeAt(i + 1) - 64;\r\n            x = (x >> 1) ^ (-(x & 1));\r\n            y = (y >> 1) ^ (-(y & 1));\r\n            x += prevX;\r\n            y += prevY;\r\n            prevX = x;\r\n            prevY = y;\r\n            result.push([x / encodeScale, y / encodeScale]);\r\n        }\r\n        return result;\r\n    }\r\n    function parseGeoJSON (geoJson, nameProperty) {\r\n        geoJson = decode(geoJson);\r\n        return map(filter(geoJson.features, function (featureObj) {\r\n            return featureObj.geometry\r\n                && featureObj.properties\r\n                && featureObj.geometry.coordinates.length > 0;\r\n        }), function (featureObj) {\r\n            var properties = featureObj.properties;\r\n            var geo = featureObj.geometry;\r\n            var geometries = [];\r\n            if (geo.type === 'Polygon') {\r\n                var coordinates = geo.coordinates;\r\n                geometries.push({\r\n                    type: 'polygon',\r\n                    exterior: coordinates[0],\r\n                    interiors: coordinates.slice(1)\r\n                });\r\n            }\r\n            if (geo.type === 'MultiPolygon') {\r\n                var coordinates = geo.coordinates;\r\n                each(coordinates, function (item) {\r\n                    if (item[0]) {\r\n                        geometries.push({\r\n                            type: 'polygon',\r\n                            exterior: item[0],\r\n                            interiors: item.slice(1)\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            var region = new Region(properties[nameProperty || 'name'], geometries, properties.cp);\r\n            region.properties = properties;\r\n            return region;\r\n        });\r\n    }\n\n    var inner$5 = makeInner();\r\n    function createAxisLabels(axis) {\r\n        return axis.type === 'category'\r\n            ? makeCategoryLabels(axis)\r\n            : makeRealNumberLabels(axis);\r\n    }\r\n    function createAxisTicks(axis, tickModel) {\r\n        return axis.type === 'category'\r\n            ? makeCategoryTicks(axis, tickModel)\r\n            : { ticks: map(axis.scale.getTicks(), function (tick) { return tick.value; }) };\r\n    }\r\n    function makeCategoryLabels(axis) {\r\n        var labelModel = axis.getLabelModel();\r\n        var result = makeCategoryLabelsActually(axis, labelModel);\r\n        return (!labelModel.get('show') || axis.scale.isBlank())\r\n            ? { labels: [], labelCategoryInterval: result.labelCategoryInterval }\r\n            : result;\r\n    }\r\n    function makeCategoryLabelsActually(axis, labelModel) {\r\n        var labelsCache = getListCache(axis, 'labels');\r\n        var optionLabelInterval = getOptionCategoryInterval(labelModel);\r\n        var result = listCacheGet(labelsCache, optionLabelInterval);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        var labels;\r\n        var numericLabelInterval;\r\n        if (isFunction(optionLabelInterval)) {\r\n            labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\r\n        }\r\n        else {\r\n            numericLabelInterval = optionLabelInterval === 'auto'\r\n                ? makeAutoCategoryInterval(axis) : optionLabelInterval;\r\n            labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\r\n        }\r\n        return listCacheSet(labelsCache, optionLabelInterval, {\r\n            labels: labels, labelCategoryInterval: numericLabelInterval\r\n        });\r\n    }\r\n    function makeCategoryTicks(axis, tickModel) {\r\n        var ticksCache = getListCache(axis, 'ticks');\r\n        var optionTickInterval = getOptionCategoryInterval(tickModel);\r\n        var result = listCacheGet(ticksCache, optionTickInterval);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        var ticks;\r\n        var tickCategoryInterval;\r\n        if (!tickModel.get('show') || axis.scale.isBlank()) {\r\n            ticks = [];\r\n        }\r\n        if (isFunction(optionTickInterval)) {\r\n            ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\r\n        }\r\n        else if (optionTickInterval === 'auto') {\r\n            var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\r\n            tickCategoryInterval = labelsResult.labelCategoryInterval;\r\n            ticks = map(labelsResult.labels, function (labelItem) {\r\n                return labelItem.tickValue;\r\n            });\r\n        }\r\n        else {\r\n            tickCategoryInterval = optionTickInterval;\r\n            ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\r\n        }\r\n        return listCacheSet(ticksCache, optionTickInterval, {\r\n            ticks: ticks, tickCategoryInterval: tickCategoryInterval\r\n        });\r\n    }\r\n    function makeRealNumberLabels(axis) {\r\n        var ticks = axis.scale.getTicks();\r\n        var labelFormatter = makeLabelFormatter(axis);\r\n        return {\r\n            labels: map(ticks, function (tick, idx) {\r\n                return {\r\n                    formattedLabel: labelFormatter(tick, idx),\r\n                    rawLabel: axis.scale.getLabel(tick),\r\n                    tickValue: tick.value\r\n                };\r\n            })\r\n        };\r\n    }\r\n    function getListCache(axis, prop) {\r\n        return inner$5(axis)[prop] || (inner$5(axis)[prop] = []);\r\n    }\r\n    function listCacheGet(cache, key) {\r\n        for (var i = 0; i < cache.length; i++) {\r\n            if (cache[i].key === key) {\r\n                return cache[i].value;\r\n            }\r\n        }\r\n    }\r\n    function listCacheSet(cache, key, value) {\r\n        cache.push({ key: key, value: value });\r\n        return value;\r\n    }\r\n    function makeAutoCategoryInterval(axis) {\r\n        var result = inner$5(axis).autoInterval;\r\n        return result != null\r\n            ? result\r\n            : (inner$5(axis).autoInterval = axis.calculateCategoryInterval());\r\n    }\r\n    function calculateCategoryInterval(axis) {\r\n        var params = fetchAutoCategoryIntervalCalculationParams(axis);\r\n        var labelFormatter = makeLabelFormatter(axis);\r\n        var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\r\n        var ordinalScale = axis.scale;\r\n        var ordinalExtent = ordinalScale.getExtent();\r\n        var tickCount = ordinalScale.count();\r\n        if (ordinalExtent[1] - ordinalExtent[0] < 1) {\r\n            return 0;\r\n        }\r\n        var step = 1;\r\n        if (tickCount > 40) {\r\n            step = Math.max(1, Math.floor(tickCount / 40));\r\n        }\r\n        var tickValue = ordinalExtent[0];\r\n        var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\r\n        var unitW = Math.abs(unitSpan * Math.cos(rotation));\r\n        var unitH = Math.abs(unitSpan * Math.sin(rotation));\r\n        var maxW = 0;\r\n        var maxH = 0;\r\n        for (; tickValue <= ordinalExtent[1]; tickValue += step) {\r\n            var width = 0;\r\n            var height = 0;\r\n            var rect = getBoundingRect(labelFormatter({ value: tickValue }), params.font, 'center', 'top');\r\n            width = rect.width * 1.3;\r\n            height = rect.height * 1.3;\r\n            maxW = Math.max(maxW, width, 7);\r\n            maxH = Math.max(maxH, height, 7);\r\n        }\r\n        var dw = maxW / unitW;\r\n        var dh = maxH / unitH;\r\n        isNaN(dw) && (dw = Infinity);\r\n        isNaN(dh) && (dh = Infinity);\r\n        var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\r\n        var cache = inner$5(axis.model);\r\n        var axisExtent = axis.getExtent();\r\n        var lastAutoInterval = cache.lastAutoInterval;\r\n        var lastTickCount = cache.lastTickCount;\r\n        if (lastAutoInterval != null\r\n            && lastTickCount != null\r\n            && Math.abs(lastAutoInterval - interval) <= 1\r\n            && Math.abs(lastTickCount - tickCount) <= 1\r\n            && lastAutoInterval > interval\r\n            && cache.axisExtent0 === axisExtent[0]\r\n            && cache.axisExtent1 === axisExtent[1]) {\r\n            interval = lastAutoInterval;\r\n        }\r\n        else {\r\n            cache.lastTickCount = tickCount;\r\n            cache.lastAutoInterval = interval;\r\n            cache.axisExtent0 = axisExtent[0];\r\n            cache.axisExtent1 = axisExtent[1];\r\n        }\r\n        return interval;\r\n    }\r\n    function fetchAutoCategoryIntervalCalculationParams(axis) {\r\n        var labelModel = axis.getLabelModel();\r\n        return {\r\n            axisRotate: axis.getRotate\r\n                ? axis.getRotate()\r\n                : (axis.isHorizontal && !axis.isHorizontal())\r\n                    ? 90\r\n                    : 0,\r\n            labelRotate: labelModel.get('rotate') || 0,\r\n            font: labelModel.getFont()\r\n        };\r\n    }\r\n    function makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\r\n        var labelFormatter = makeLabelFormatter(axis);\r\n        var ordinalScale = axis.scale;\r\n        var ordinalExtent = ordinalScale.getExtent();\r\n        var labelModel = axis.getLabelModel();\r\n        var result = [];\r\n        var step = Math.max((categoryInterval || 0) + 1, 1);\r\n        var startTick = ordinalExtent[0];\r\n        var tickCount = ordinalScale.count();\r\n        if (startTick !== 0 && step > 1 && tickCount / step > 2) {\r\n            startTick = Math.round(Math.ceil(startTick / step) * step);\r\n        }\r\n        var showAllLabel = shouldShowAllLabels(axis);\r\n        var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\r\n        var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\r\n        if (includeMinLabel && startTick !== ordinalExtent[0]) {\r\n            addItem(ordinalExtent[0]);\r\n        }\r\n        var tickValue = startTick;\r\n        for (; tickValue <= ordinalExtent[1]; tickValue += step) {\r\n            addItem(tickValue);\r\n        }\r\n        if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\r\n            addItem(ordinalExtent[1]);\r\n        }\r\n        function addItem(tickValue) {\r\n            var tickObj = { value: tickValue };\r\n            result.push(onlyTick\r\n                ? tickValue\r\n                : {\r\n                    formattedLabel: labelFormatter(tickObj),\r\n                    rawLabel: ordinalScale.getLabel(tickObj),\r\n                    tickValue: tickValue\r\n                });\r\n        }\r\n        return result;\r\n    }\r\n    function makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\r\n        var ordinalScale = axis.scale;\r\n        var labelFormatter = makeLabelFormatter(axis);\r\n        var result = [];\r\n        each(ordinalScale.getTicks(), function (tick) {\r\n            var rawLabel = ordinalScale.getLabel(tick);\r\n            var tickValue = tick.value;\r\n            if (categoryInterval(tick.value, rawLabel)) {\r\n                result.push(onlyTick\r\n                    ? tickValue\r\n                    : {\r\n                        formattedLabel: labelFormatter(tick),\r\n                        rawLabel: rawLabel,\r\n                        tickValue: tickValue\r\n                    });\r\n            }\r\n        });\r\n        return result;\r\n    }\n\n    var NORMALIZED_EXTENT = [0, 1];\r\n    var Axis = (function () {\r\n        function Axis(dim, scale, extent) {\r\n            this.onBand = false;\r\n            this.inverse = false;\r\n            this.dim = dim;\r\n            this.scale = scale;\r\n            this._extent = extent || [0, 0];\r\n        }\r\n        Axis.prototype.contain = function (coord) {\r\n            var extent = this._extent;\r\n            var min = Math.min(extent[0], extent[1]);\r\n            var max = Math.max(extent[0], extent[1]);\r\n            return coord >= min && coord <= max;\r\n        };\r\n        Axis.prototype.containData = function (data) {\r\n            return this.scale.contain(data);\r\n        };\r\n        Axis.prototype.getExtent = function () {\r\n            return this._extent.slice();\r\n        };\r\n        Axis.prototype.getPixelPrecision = function (dataExtent) {\r\n            return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\r\n        };\r\n        Axis.prototype.setExtent = function (start, end) {\r\n            var extent = this._extent;\r\n            extent[0] = start;\r\n            extent[1] = end;\r\n        };\r\n        Axis.prototype.dataToCoord = function (data, clamp) {\r\n            var extent = this._extent;\r\n            var scale = this.scale;\r\n            data = scale.normalize(data);\r\n            if (this.onBand && scale.type === 'ordinal') {\r\n                extent = extent.slice();\r\n                fixExtentWithBands(extent, scale.count());\r\n            }\r\n            return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\r\n        };\r\n        Axis.prototype.coordToData = function (coord, clamp) {\r\n            var extent = this._extent;\r\n            var scale = this.scale;\r\n            if (this.onBand && scale.type === 'ordinal') {\r\n                extent = extent.slice();\r\n                fixExtentWithBands(extent, scale.count());\r\n            }\r\n            var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\r\n            return this.scale.scale(t);\r\n        };\r\n        Axis.prototype.pointToData = function (point, clamp) {\r\n            return;\r\n        };\r\n        Axis.prototype.getTicksCoords = function (opt) {\r\n            opt = opt || {};\r\n            var tickModel = opt.tickModel || this.getTickModel();\r\n            var result = createAxisTicks(this, tickModel);\r\n            var ticks = result.ticks;\r\n            var ticksCoords = map(ticks, function (tickVal) {\r\n                return {\r\n                    coord: this.dataToCoord(this.scale.type === 'ordinal'\r\n                        ? this.scale.getRawIndex(tickVal)\r\n                        : tickVal),\r\n                    tickValue: tickVal\r\n                };\r\n            }, this);\r\n            var alignWithLabel = tickModel.get('alignWithLabel');\r\n            fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\r\n            return ticksCoords;\r\n        };\r\n        Axis.prototype.getMinorTicksCoords = function () {\r\n            if (this.scale.type === 'ordinal') {\r\n                return [];\r\n            }\r\n            var minorTickModel = this.model.getModel('minorTick');\r\n            var splitNumber = minorTickModel.get('splitNumber');\r\n            if (!(splitNumber > 0 && splitNumber < 100)) {\r\n                splitNumber = 5;\r\n            }\r\n            var minorTicks = this.scale.getMinorTicks(splitNumber);\r\n            var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\r\n                return map(minorTicksGroup, function (minorTick) {\r\n                    return {\r\n                        coord: this.dataToCoord(minorTick),\r\n                        tickValue: minorTick\r\n                    };\r\n                }, this);\r\n            }, this);\r\n            return minorTicksCoords;\r\n        };\r\n        Axis.prototype.getViewLabels = function () {\r\n            return createAxisLabels(this).labels;\r\n        };\r\n        Axis.prototype.getLabelModel = function () {\r\n            return this.model.getModel('axisLabel');\r\n        };\r\n        Axis.prototype.getTickModel = function () {\r\n            return this.model.getModel('axisTick');\r\n        };\r\n        Axis.prototype.getBandWidth = function () {\r\n            var axisExtent = this._extent;\r\n            var dataExtent = this.scale.getExtent();\r\n            var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0);\r\n            len === 0 && (len = 1);\r\n            var size = Math.abs(axisExtent[1] - axisExtent[0]);\r\n            return Math.abs(size) / len;\r\n        };\r\n        Axis.prototype.calculateCategoryInterval = function () {\r\n            return calculateCategoryInterval(this);\r\n        };\r\n        return Axis;\r\n    }());\r\n    function fixExtentWithBands(extent, nTick) {\r\n        var size = extent[1] - extent[0];\r\n        var len = nTick;\r\n        var margin = size / len / 2;\r\n        extent[0] += margin;\r\n        extent[1] -= margin;\r\n    }\r\n    function fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\r\n        var ticksLen = ticksCoords.length;\r\n        if (!axis.onBand || alignWithLabel || !ticksLen) {\r\n            return;\r\n        }\r\n        var axisExtent = axis.getExtent();\r\n        var last;\r\n        var diffSize;\r\n        if (ticksLen === 1) {\r\n            ticksCoords[0].coord = axisExtent[0];\r\n            last = ticksCoords[1] = { coord: axisExtent[0] };\r\n        }\r\n        else {\r\n            var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\r\n            var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\r\n            each(ticksCoords, function (ticksItem) {\r\n                ticksItem.coord -= shift_1 / 2;\r\n            });\r\n            var dataExtent = axis.scale.getExtent();\r\n            diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\r\n            last = { coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize };\r\n            ticksCoords.push(last);\r\n        }\r\n        var inverse = axisExtent[0] > axisExtent[1];\r\n        if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\r\n            clamp ? (ticksCoords[0].coord = axisExtent[0]) : ticksCoords.shift();\r\n        }\r\n        if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\r\n            ticksCoords.unshift({ coord: axisExtent[0] });\r\n        }\r\n        if (littleThan(axisExtent[1], last.coord)) {\r\n            clamp ? (last.coord = axisExtent[1]) : ticksCoords.pop();\r\n        }\r\n        if (clamp && littleThan(last.coord, axisExtent[1])) {\r\n            ticksCoords.push({ coord: axisExtent[1] });\r\n        }\r\n        function littleThan(a, b) {\r\n            a = round$1(a);\r\n            b = round$1(b);\r\n            return inverse ? a > b : a < b;\r\n        }\r\n    }\n\n    var parseGeoJson = parseGeoJSON;\r\n    var time = {\r\n        parse: parseDate,\r\n        format: format\r\n    };\r\n    var ecUtil = {};\r\n    each([\r\n        'map', 'each', 'filter', 'indexOf', 'inherits', 'reduce', 'filter',\r\n        'bind', 'curry', 'isArray', 'isString', 'isObject', 'isFunction',\r\n        'extend', 'defaults', 'clone', 'merge'\r\n    ], function (name) {\r\n        ecUtil[name] = zrUtil[name];\r\n    });\r\n    var GRAPHIC_KEYS = [\r\n        'extendShape', 'extendPath', 'makePath', 'makeImage',\r\n        'mergePath', 'resizePath', 'createIcon',\r\n        'updateProps', 'initProps', 'getTransform',\r\n        'clipPointsByRect', 'clipRectByRect',\r\n        'registerShape', 'getShapeClass',\r\n        'Group',\r\n        'Image',\r\n        'Text',\r\n        'Circle',\r\n        'Ellipse',\r\n        'Sector',\r\n        'Ring',\r\n        'Polygon',\r\n        'Polyline',\r\n        'Rect',\r\n        'Line',\r\n        'BezierCurve',\r\n        'Arc',\r\n        'IncrementalDisplayable',\r\n        'CompoundPath',\r\n        'LinearGradient',\r\n        'RadialGradient',\r\n        'BoundingRect'\r\n    ];\r\n    var graphic$1 = {};\r\n    each(GRAPHIC_KEYS, function (name) {\r\n        graphic$1[name] = graphic[name];\r\n    });\n\n    var LineSeriesModel = (function (_super) {\r\n        __extends(LineSeriesModel, _super);\r\n        function LineSeriesModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = LineSeriesModel.type;\r\n            _this.hasSymbolVisual = true;\r\n            _this.legendSymbol = 'line';\r\n            return _this;\r\n        }\r\n        LineSeriesModel.prototype.getInitialData = function (option) {\r\n            if (__DEV__) {\r\n                var coordSys = option.coordinateSystem;\r\n                if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\r\n                    throw new Error('Line not support coordinateSystem besides cartesian and polar');\r\n                }\r\n            }\r\n            return createListFromArray(this.getSource(), this, {\r\n                useEncodeDefaulter: true\r\n            });\r\n        };\r\n        LineSeriesModel.type = 'series.line';\r\n        LineSeriesModel.dependencies = ['grid', 'polar'];\r\n        LineSeriesModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 2,\r\n            coordinateSystem: 'cartesian2d',\r\n            legendHoverLink: true,\r\n            clip: true,\r\n            label: {\r\n                position: 'top'\r\n            },\r\n            lineStyle: {\r\n                width: 2,\r\n                type: 'solid'\r\n            },\r\n            emphasis: {\r\n                scale: true,\r\n                lineStyle: {\r\n                    width: 'bolder'\r\n                }\r\n            },\r\n            step: false,\r\n            smooth: false,\r\n            smoothMonotone: null,\r\n            symbol: 'emptyCircle',\r\n            symbolSize: 4,\r\n            symbolRotate: null,\r\n            showSymbol: true,\r\n            showAllSymbol: 'auto',\r\n            connectNulls: false,\r\n            sampling: 'none',\r\n            animationEasing: 'linear',\r\n            progressive: 0,\r\n            hoverLayerThreshold: Infinity\r\n        };\r\n        return LineSeriesModel;\r\n    }(SeriesModel));\r\n    SeriesModel.registerClass(LineSeriesModel);\n\n    function getDefaultLabel(data, dataIndex, interpolatedValues) {\r\n        var labelDims = data.mapDimensionsAll('defaultedLabel');\r\n        var len = labelDims.length;\r\n        if (len === 1) {\r\n            return interpolatedValues == null\r\n                ? retrieveRawValue(data, dataIndex, labelDims[0])\r\n                : interpolatedValues;\r\n        }\r\n        else if (len) {\r\n            var vals = [];\r\n            for (var i = 0; i < labelDims.length; i++) {\r\n                var val = interpolatedValues == null\r\n                    ? retrieveRawValue(data, dataIndex, labelDims[i])\r\n                    : interpolatedValues;\r\n                vals.push(val);\r\n            }\r\n            return vals.join(' ');\r\n        }\r\n    }\n\n    var Symbol = (function (_super) {\r\n        __extends(Symbol, _super);\r\n        function Symbol(data, idx, seriesScope, opts) {\r\n            var _this = _super.call(this) || this;\r\n            _this.updateData(data, idx, seriesScope, opts);\r\n            return _this;\r\n        }\r\n        Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\r\n            this.removeAll();\r\n            var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\r\n            symbolPath.attr({\r\n                z2: 100,\r\n                culling: true,\r\n                scaleX: symbolSize[0] / 2,\r\n                scaleY: symbolSize[1] / 2\r\n            });\r\n            symbolPath.drift = driftSymbol;\r\n            this._symbolType = symbolType;\r\n            this.add(symbolPath);\r\n        };\r\n        Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\r\n            this.childAt(0).stopAnimation(null, toLastFrame);\r\n        };\r\n        Symbol.prototype.getSymbolPath = function () {\r\n            return this.childAt(0);\r\n        };\r\n        Symbol.prototype.highlight = function () {\r\n            enterEmphasis(this.childAt(0));\r\n        };\r\n        Symbol.prototype.downplay = function () {\r\n            leaveEmphasis(this.childAt(0));\r\n        };\r\n        Symbol.prototype.setZ = function (zlevel, z) {\r\n            var symbolPath = this.childAt(0);\r\n            symbolPath.zlevel = zlevel;\r\n            symbolPath.z = z;\r\n        };\r\n        Symbol.prototype.setDraggable = function (draggable) {\r\n            var symbolPath = this.childAt(0);\r\n            symbolPath.draggable = draggable;\r\n            symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\r\n        };\r\n        Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\r\n            this.silent = false;\r\n            var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\r\n            var seriesModel = data.hostModel;\r\n            var symbolSize = Symbol.getSymbolSize(data, idx);\r\n            var isInit = symbolType !== this._symbolType;\r\n            if (isInit) {\r\n                var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\r\n                this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\r\n            }\r\n            else {\r\n                var symbolPath = this.childAt(0);\r\n                symbolPath.silent = false;\r\n                updateProps(symbolPath, {\r\n                    scaleX: symbolSize[0] / 2,\r\n                    scaleY: symbolSize[1] / 2\r\n                }, seriesModel, idx);\r\n            }\r\n            this._updateCommon(data, idx, symbolSize, seriesScope, opts);\r\n            if (isInit) {\r\n                var symbolPath = this.childAt(0);\r\n                var target = {\r\n                    scaleX: this._sizeX,\r\n                    scaleY: this._sizeY,\r\n                    style: {\r\n                        opacity: symbolPath.style.opacity\r\n                    }\r\n                };\r\n                symbolPath.scaleX = symbolPath.scaleY = 0;\r\n                symbolPath.style.opacity = 0;\r\n                initProps(symbolPath, target, seriesModel, idx);\r\n            }\r\n            this._seriesModel = seriesModel;\r\n        };\r\n        Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\r\n            var symbolPath = this.childAt(0);\r\n            var seriesModel = data.hostModel;\r\n            var emphasisItemStyle;\r\n            var blurItemStyle;\r\n            var selectItemStyle;\r\n            var focus;\r\n            var blurScope;\r\n            var symbolOffset;\r\n            var labelStatesModels;\r\n            var hoverScale;\r\n            var cursorStyle;\r\n            if (seriesScope) {\r\n                emphasisItemStyle = seriesScope.emphasisItemStyle;\r\n                blurItemStyle = seriesScope.blurItemStyle;\r\n                selectItemStyle = seriesScope.selectItemStyle;\r\n                focus = seriesScope.focus;\r\n                blurScope = seriesScope.blurScope;\r\n                symbolOffset = seriesScope.symbolOffset;\r\n                labelStatesModels = seriesScope.labelStatesModels;\r\n                hoverScale = seriesScope.hoverScale;\r\n                cursorStyle = seriesScope.cursorStyle;\r\n            }\r\n            if (!seriesScope || data.hasItemOption) {\r\n                var itemModel = (seriesScope && seriesScope.itemModel)\r\n                    ? seriesScope.itemModel : data.getItemModel(idx);\r\n                var emphasisModel = itemModel.getModel('emphasis');\r\n                emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\r\n                selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\r\n                blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\r\n                focus = emphasisModel.get('focus');\r\n                blurScope = emphasisModel.get('blurScope');\r\n                symbolOffset = itemModel.getShallow('symbolOffset');\r\n                labelStatesModels = getLabelStatesModels(itemModel);\r\n                hoverScale = emphasisModel.getShallow('scale');\r\n                cursorStyle = itemModel.getShallow('cursor');\r\n            }\r\n            var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\r\n            symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\r\n            if (symbolOffset) {\r\n                symbolPath.x = parsePercent$2(symbolOffset[0], symbolSize[0]);\r\n                symbolPath.y = parsePercent$2(symbolOffset[1], symbolSize[1]);\r\n            }\r\n            cursorStyle && symbolPath.attr('cursor', cursorStyle);\r\n            var symbolStyle = data.getItemVisual(idx, 'style');\r\n            var visualColor = symbolStyle.fill;\r\n            if (symbolPath instanceof ZRImage) {\r\n                var pathStyle = symbolPath.style;\r\n                symbolPath.useStyle(extend({\r\n                    image: pathStyle.image,\r\n                    x: pathStyle.x, y: pathStyle.y,\r\n                    width: pathStyle.width, height: pathStyle.height\r\n                }, symbolStyle));\r\n            }\r\n            else {\r\n                if (symbolPath.__isEmptyBrush) {\r\n                    symbolPath.useStyle(extend({}, symbolStyle));\r\n                }\r\n                else {\r\n                    symbolPath.useStyle(symbolStyle);\r\n                }\r\n                symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\r\n                symbolPath.style.strokeNoScale = true;\r\n            }\r\n            var liftZ = data.getItemVisual(idx, 'liftZ');\r\n            var z2Origin = this._z2;\r\n            if (liftZ != null) {\r\n                if (z2Origin == null) {\r\n                    this._z2 = symbolPath.z2;\r\n                    symbolPath.z2 += liftZ;\r\n                }\r\n            }\r\n            else if (z2Origin != null) {\r\n                symbolPath.z2 = z2Origin;\r\n                this._z2 = null;\r\n            }\r\n            var useNameLabel = opts && opts.useNameLabel;\r\n            setLabelStyle(symbolPath, labelStatesModels, {\r\n                labelFetcher: seriesModel,\r\n                labelDataIndex: idx,\r\n                defaultText: getLabelDefaultText,\r\n                inheritColor: visualColor\r\n            });\r\n            function getLabelDefaultText(idx) {\r\n                return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\r\n            }\r\n            this._sizeX = symbolSize[0] / 2;\r\n            this._sizeY = symbolSize[1] / 2;\r\n            symbolPath.ensureState('emphasis').style = emphasisItemStyle;\r\n            symbolPath.ensureState('select').style = selectItemStyle;\r\n            symbolPath.ensureState('blur').style = blurItemStyle;\r\n            if (hoverScale) {\r\n                this.ensureState('emphasis');\r\n                this.setSymbolScale(1);\r\n            }\r\n            else {\r\n                this.states.emphasis = null;\r\n            }\r\n            enableHoverEmphasis(this, focus, blurScope);\r\n        };\r\n        Symbol.prototype.setSymbolScale = function (scale) {\r\n            var emphasisState = this.states.emphasis;\r\n            if (emphasisState) {\r\n                var hoverScale = Math.max(scale * 1.1, 3 / this._sizeY + scale);\r\n                emphasisState.scaleX = hoverScale;\r\n                emphasisState.scaleY = hoverScale;\r\n            }\r\n            this.scaleX = this.scaleY = scale;\r\n        };\r\n        Symbol.prototype.fadeOut = function (cb, opt) {\r\n            var symbolPath = this.childAt(0);\r\n            this.silent = symbolPath.silent = true;\r\n            !(opt && opt.keepLabel) && (symbolPath.removeTextContent());\r\n            removeElement(symbolPath, {\r\n                style: {\r\n                    opacity: 0\r\n                },\r\n                scaleX: 0,\r\n                scaleY: 0\r\n            }, this._seriesModel, getECData(this).dataIndex, cb);\r\n        };\r\n        Symbol.getSymbolSize = function (data, idx) {\r\n            var symbolSize = data.getItemVisual(idx, 'symbolSize');\r\n            return symbolSize instanceof Array\r\n                ? symbolSize.slice()\r\n                : [+symbolSize, +symbolSize];\r\n        };\r\n        return Symbol;\r\n    }(Group));\r\n    function driftSymbol(dx, dy) {\r\n        this.parent.drift(dx, dy);\r\n    }\n\n    function symbolNeedsDraw(data, point, idx, opt) {\r\n        return point && !isNaN(point[0]) && !isNaN(point[1])\r\n            && !(opt.isIgnore && opt.isIgnore(idx))\r\n            && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1]))\r\n            && data.getItemVisual(idx, 'symbol') !== 'none';\r\n    }\r\n    function normalizeUpdateOpt(opt) {\r\n        if (opt != null && !isObject(opt)) {\r\n            opt = { isIgnore: opt };\r\n        }\r\n        return opt || {};\r\n    }\r\n    function makeSeriesScope(data) {\r\n        var seriesModel = data.hostModel;\r\n        var emphasisModel = seriesModel.getModel('emphasis');\r\n        return {\r\n            emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\r\n            blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\r\n            selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\r\n            focus: emphasisModel.get('focus'),\r\n            blurScope: emphasisModel.get('blurScope'),\r\n            symbolRotate: seriesModel.get('symbolRotate'),\r\n            symbolOffset: seriesModel.get('symbolOffset'),\r\n            hoverScale: emphasisModel.get('scale'),\r\n            labelStatesModels: getLabelStatesModels(seriesModel),\r\n            cursorStyle: seriesModel.get('cursor')\r\n        };\r\n    }\r\n    var SymbolDraw = (function () {\r\n        function SymbolDraw(SymbolCtor) {\r\n            this.group = new Group();\r\n            this._SymbolCtor = SymbolCtor || Symbol;\r\n        }\r\n        SymbolDraw.prototype.updateData = function (data, opt) {\r\n            opt = normalizeUpdateOpt(opt);\r\n            var group = this.group;\r\n            var seriesModel = data.hostModel;\r\n            var oldData = this._data;\r\n            var SymbolCtor = this._SymbolCtor;\r\n            var seriesScope = makeSeriesScope(data);\r\n            if (!oldData) {\r\n                group.removeAll();\r\n            }\r\n            data.diff(oldData)\r\n                .add(function (newIdx) {\r\n                var point = data.getItemLayout(newIdx);\r\n                if (symbolNeedsDraw(data, point, newIdx, opt)) {\r\n                    var symbolEl = new SymbolCtor(data, newIdx, seriesScope);\r\n                    symbolEl.setPosition(point);\r\n                    data.setItemGraphicEl(newIdx, symbolEl);\r\n                    group.add(symbolEl);\r\n                }\r\n            })\r\n                .update(function (newIdx, oldIdx) {\r\n                var symbolEl = oldData.getItemGraphicEl(oldIdx);\r\n                var point = data.getItemLayout(newIdx);\r\n                if (!symbolNeedsDraw(data, point, newIdx, opt)) {\r\n                    group.remove(symbolEl);\r\n                    return;\r\n                }\r\n                if (!symbolEl) {\r\n                    symbolEl = new SymbolCtor(data, newIdx);\r\n                    symbolEl.setPosition(point);\r\n                }\r\n                else {\r\n                    symbolEl.updateData(data, newIdx, seriesScope);\r\n                    updateProps(symbolEl, {\r\n                        x: point[0],\r\n                        y: point[1]\r\n                    }, seriesModel);\r\n                }\r\n                group.add(symbolEl);\r\n                data.setItemGraphicEl(newIdx, symbolEl);\r\n            })\r\n                .remove(function (oldIdx) {\r\n                var el = oldData.getItemGraphicEl(oldIdx);\r\n                el && el.fadeOut(function () {\r\n                    group.remove(el);\r\n                });\r\n            })\r\n                .execute();\r\n            this._data = data;\r\n        };\r\n        SymbolDraw.prototype.isPersistent = function () {\r\n            return true;\r\n        };\r\n        SymbolDraw.prototype.updateLayout = function () {\r\n            var data = this._data;\r\n            if (data) {\r\n                data.eachItemGraphicEl(function (el, idx) {\r\n                    var point = data.getItemLayout(idx);\r\n                    el.setPosition(point);\r\n                    el.markRedraw();\r\n                });\r\n            }\r\n        };\r\n        SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\r\n            this._seriesScope = makeSeriesScope(data);\r\n            this._data = null;\r\n            this.group.removeAll();\r\n        };\r\n        SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\r\n            opt = normalizeUpdateOpt(opt);\r\n            function updateIncrementalAndHover(el) {\r\n                if (!el.isGroup) {\r\n                    el.incremental = true;\r\n                    el.ensureState('emphasis').hoverLayer = true;\r\n                }\r\n            }\r\n            for (var idx = taskParams.start; idx < taskParams.end; idx++) {\r\n                var point = data.getItemLayout(idx);\r\n                if (symbolNeedsDraw(data, point, idx, opt)) {\r\n                    var el = new this._SymbolCtor(data, idx, this._seriesScope);\r\n                    el.traverse(updateIncrementalAndHover);\r\n                    el.setPosition(point);\r\n                    this.group.add(el);\r\n                    data.setItemGraphicEl(idx, el);\r\n                }\r\n            }\r\n        };\r\n        SymbolDraw.prototype.remove = function (enableAnimation) {\r\n            var group = this.group;\r\n            var data = this._data;\r\n            if (data && enableAnimation) {\r\n                data.eachItemGraphicEl(function (el) {\r\n                    el.fadeOut(function () {\r\n                        group.remove(el);\r\n                    });\r\n                });\r\n            }\r\n            else {\r\n                group.removeAll();\r\n            }\r\n        };\r\n        return SymbolDraw;\r\n    }());\n\n    function prepareDataCoordInfo(coordSys, data, valueOrigin) {\r\n        var baseAxis = coordSys.getBaseAxis();\r\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\r\n        var valueStart = getValueStart(valueAxis, valueOrigin);\r\n        var baseAxisDim = baseAxis.dim;\r\n        var valueAxisDim = valueAxis.dim;\r\n        var valueDim = data.mapDimension(valueAxisDim);\r\n        var baseDim = data.mapDimension(baseAxisDim);\r\n        var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\r\n        var dims = map(coordSys.dimensions, function (coordDim) {\r\n            return data.mapDimension(coordDim);\r\n        });\r\n        var stacked = false;\r\n        var stackResultDim = data.getCalculationInfo('stackResultDimension');\r\n        if (isDimensionStacked(data, dims[0])) {\r\n            stacked = true;\r\n            dims[0] = stackResultDim;\r\n        }\r\n        if (isDimensionStacked(data, dims[1])) {\r\n            stacked = true;\r\n            dims[1] = stackResultDim;\r\n        }\r\n        return {\r\n            dataDimsForPoint: dims,\r\n            valueStart: valueStart,\r\n            valueAxisDim: valueAxisDim,\r\n            baseAxisDim: baseAxisDim,\r\n            stacked: !!stacked,\r\n            valueDim: valueDim,\r\n            baseDim: baseDim,\r\n            baseDataOffset: baseDataOffset,\r\n            stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\r\n        };\r\n    }\r\n    function getValueStart(valueAxis, valueOrigin) {\r\n        var valueStart = 0;\r\n        var extent = valueAxis.scale.getExtent();\r\n        if (valueOrigin === 'start') {\r\n            valueStart = extent[0];\r\n        }\r\n        else if (valueOrigin === 'end') {\r\n            valueStart = extent[1];\r\n        }\r\n        else {\r\n            if (extent[0] > 0) {\r\n                valueStart = extent[0];\r\n            }\r\n            else if (extent[1] < 0) {\r\n                valueStart = extent[1];\r\n            }\r\n        }\r\n        return valueStart;\r\n    }\r\n    function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\r\n        var value = NaN;\r\n        if (dataCoordInfo.stacked) {\r\n            value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\r\n        }\r\n        if (isNaN(value)) {\r\n            value = dataCoordInfo.valueStart;\r\n        }\r\n        var baseDataOffset = dataCoordInfo.baseDataOffset;\r\n        var stackedData = [];\r\n        stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\r\n        stackedData[1 - baseDataOffset] = value;\r\n        return coordSys.dataToPoint(stackedData);\r\n    }\n\n    function diffData(oldData, newData) {\r\n        var diffResult = [];\r\n        newData.diff(oldData)\r\n            .add(function (idx) {\r\n            diffResult.push({ cmd: '+', idx: idx });\r\n        })\r\n            .update(function (newIdx, oldIdx) {\r\n            diffResult.push({ cmd: '=', idx: oldIdx, idx1: newIdx });\r\n        })\r\n            .remove(function (idx) {\r\n            diffResult.push({ cmd: '-', idx: idx });\r\n        })\r\n            .execute();\r\n        return diffResult;\r\n    }\r\n    function lineAnimationDiff (oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\r\n        var diff = diffData(oldData, newData);\r\n        var currPoints = [];\r\n        var nextPoints = [];\r\n        var currStackedPoints = [];\r\n        var nextStackedPoints = [];\r\n        var status = [];\r\n        var sortedIndices = [];\r\n        var rawIndices = [];\r\n        var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin);\r\n        var oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\r\n        for (var i = 0; i < diff.length; i++) {\r\n            var diffItem = diff[i];\r\n            var pointAdded = true;\r\n            switch (diffItem.cmd) {\r\n                case '=':\r\n                    var currentPt = oldData.getItemLayout(diffItem.idx);\r\n                    var nextPt = newData.getItemLayout(diffItem.idx1);\r\n                    if (isNaN(currentPt[0]) || isNaN(currentPt[1])) {\r\n                        currentPt = nextPt.slice();\r\n                    }\r\n                    currPoints.push(currentPt);\r\n                    nextPoints.push(nextPt);\r\n                    currStackedPoints.push(oldStackedOnPoints[diffItem.idx]);\r\n                    nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]);\r\n                    rawIndices.push(newData.getRawIndex(diffItem.idx1));\r\n                    break;\r\n                case '+':\r\n                    var idxAdd = diffItem.idx;\r\n                    currPoints.push(oldCoordSys.dataToPoint([\r\n                        newData.get(newDataOldCoordInfo.dataDimsForPoint[0], idxAdd),\r\n                        newData.get(newDataOldCoordInfo.dataDimsForPoint[1], idxAdd)\r\n                    ]));\r\n                    nextPoints.push(newData.getItemLayout(idxAdd).slice());\r\n                    currStackedPoints.push(getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, idxAdd));\r\n                    nextStackedPoints.push(newStackedOnPoints[idxAdd]);\r\n                    rawIndices.push(newData.getRawIndex(idxAdd));\r\n                    break;\r\n                case '-':\r\n                    var idxMinus = diffItem.idx;\r\n                    var rawIndex = oldData.getRawIndex(idxMinus);\r\n                    if (rawIndex !== idxMinus) {\r\n                        currPoints.push(oldData.getItemLayout(idxMinus));\r\n                        nextPoints.push(newCoordSys.dataToPoint([\r\n                            oldData.get(oldDataNewCoordInfo.dataDimsForPoint[0], idxMinus),\r\n                            oldData.get(oldDataNewCoordInfo.dataDimsForPoint[1], idxMinus)\r\n                        ]));\r\n                        currStackedPoints.push(oldStackedOnPoints[idxMinus]);\r\n                        nextStackedPoints.push(getStackedOnPoint(oldDataNewCoordInfo, newCoordSys, oldData, idxMinus));\r\n                        rawIndices.push(rawIndex);\r\n                    }\r\n                    else {\r\n                        pointAdded = false;\r\n                    }\r\n            }\r\n            if (pointAdded) {\r\n                status.push(diffItem);\r\n                sortedIndices.push(sortedIndices.length);\r\n            }\r\n        }\r\n        sortedIndices.sort(function (a, b) {\r\n            return rawIndices[a] - rawIndices[b];\r\n        });\r\n        var sortedCurrPoints = [];\r\n        var sortedNextPoints = [];\r\n        var sortedCurrStackedPoints = [];\r\n        var sortedNextStackedPoints = [];\r\n        var sortedStatus = [];\r\n        for (var i = 0; i < sortedIndices.length; i++) {\r\n            var idx = sortedIndices[i];\r\n            sortedCurrPoints[i] = currPoints[idx];\r\n            sortedNextPoints[i] = nextPoints[idx];\r\n            sortedCurrStackedPoints[i] = currStackedPoints[idx];\r\n            sortedNextStackedPoints[i] = nextStackedPoints[idx];\r\n            sortedStatus[i] = status[idx];\r\n        }\r\n        return {\r\n            current: sortedCurrPoints,\r\n            next: sortedNextPoints,\r\n            stackedOnCurrent: sortedCurrStackedPoints,\r\n            stackedOnNext: sortedNextStackedPoints,\r\n            status: sortedStatus\r\n        };\r\n    }\n\n    var vec2Min = min;\r\n    var vec2Max = max;\r\n    var scaleAndAdd$1 = scaleAndAdd;\r\n    var v2Copy = copy;\r\n    var v = [];\r\n    var cp0 = [];\r\n    var cp1 = [];\r\n    function isPointNull(p) {\r\n        return isNaN(p[0]) || isNaN(p[1]);\r\n    }\r\n    function drawSegment(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\r\n        return ((smoothMonotone === 'none' || !smoothMonotone) ? drawNonMono : drawMono)(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls);\r\n    }\r\n    function drawMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\r\n        var prevIdx = 0;\r\n        var idx = start;\r\n        var k = 0;\r\n        for (; k < segLen; k++) {\r\n            var p = points[idx];\r\n            if (idx >= allLen || idx < 0) {\r\n                break;\r\n            }\r\n            if (isPointNull(p)) {\r\n                if (connectNulls) {\r\n                    idx += dir;\r\n                    continue;\r\n                }\r\n                break;\r\n            }\r\n            if (idx === start) {\r\n                ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\r\n            }\r\n            else {\r\n                if (smooth > 0) {\r\n                    var prevP = points[prevIdx];\r\n                    var dim = smoothMonotone === 'y' ? 1 : 0;\r\n                    var ctrlLen = (p[dim] - prevP[dim]) * smooth;\r\n                    v2Copy(cp0, prevP);\r\n                    cp0[dim] = prevP[dim] + ctrlLen;\r\n                    v2Copy(cp1, p);\r\n                    cp1[dim] = p[dim] - ctrlLen;\r\n                    ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]);\r\n                }\r\n                else {\r\n                    ctx.lineTo(p[0], p[1]);\r\n                }\r\n            }\r\n            prevIdx = idx;\r\n            idx += dir;\r\n        }\r\n        return k;\r\n    }\r\n    function drawNonMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\r\n        var prevIdx = 0;\r\n        var idx = start;\r\n        var k = 0;\r\n        for (; k < segLen; k++) {\r\n            var p = points[idx];\r\n            if (idx >= allLen || idx < 0) {\r\n                break;\r\n            }\r\n            if (isPointNull(p)) {\r\n                if (connectNulls) {\r\n                    idx += dir;\r\n                    continue;\r\n                }\r\n                break;\r\n            }\r\n            if (idx === start) {\r\n                ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\r\n                v2Copy(cp0, p);\r\n            }\r\n            else {\r\n                if (smooth > 0) {\r\n                    var nextIdx = idx + dir;\r\n                    var nextP = points[nextIdx];\r\n                    if (connectNulls) {\r\n                        while (nextP && isPointNull(points[nextIdx])) {\r\n                            nextIdx += dir;\r\n                            nextP = points[nextIdx];\r\n                        }\r\n                    }\r\n                    var ratioNextSeg = 0.5;\r\n                    var prevP = points[prevIdx];\r\n                    nextP = points[nextIdx];\r\n                    if (!nextP || isPointNull(nextP)) {\r\n                        v2Copy(cp1, p);\r\n                    }\r\n                    else {\r\n                        if (isPointNull(nextP) && !connectNulls) {\r\n                            nextP = p;\r\n                        }\r\n                        sub(v, nextP, prevP);\r\n                        var lenPrevSeg = void 0;\r\n                        var lenNextSeg = void 0;\r\n                        if (smoothMonotone === 'x' || smoothMonotone === 'y') {\r\n                            var dim = smoothMonotone === 'x' ? 0 : 1;\r\n                            lenPrevSeg = Math.abs(p[dim] - prevP[dim]);\r\n                            lenNextSeg = Math.abs(p[dim] - nextP[dim]);\r\n                        }\r\n                        else {\r\n                            lenPrevSeg = dist(p, prevP);\r\n                            lenNextSeg = dist(p, nextP);\r\n                        }\r\n                        ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\r\n                        scaleAndAdd$1(cp1, p, v, -smooth * (1 - ratioNextSeg));\r\n                    }\r\n                    vec2Min(cp0, cp0, smoothMax);\r\n                    vec2Max(cp0, cp0, smoothMin);\r\n                    vec2Min(cp1, cp1, smoothMax);\r\n                    vec2Max(cp1, cp1, smoothMin);\r\n                    ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]);\r\n                    scaleAndAdd$1(cp0, p, v, smooth * ratioNextSeg);\r\n                }\r\n                else {\r\n                    ctx.lineTo(p[0], p[1]);\r\n                }\r\n            }\r\n            prevIdx = idx;\r\n            idx += dir;\r\n        }\r\n        return k;\r\n    }\r\n    function getBoundingBox(points, smoothConstraint) {\r\n        var ptMin = [Infinity, Infinity];\r\n        var ptMax = [-Infinity, -Infinity];\r\n        if (smoothConstraint) {\r\n            for (var i = 0; i < points.length; i++) {\r\n                var pt = points[i];\r\n                if (pt[0] < ptMin[0]) {\r\n                    ptMin[0] = pt[0];\r\n                }\r\n                if (pt[1] < ptMin[1]) {\r\n                    ptMin[1] = pt[1];\r\n                }\r\n                if (pt[0] > ptMax[0]) {\r\n                    ptMax[0] = pt[0];\r\n                }\r\n                if (pt[1] > ptMax[1]) {\r\n                    ptMax[1] = pt[1];\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            min: smoothConstraint ? ptMin : ptMax,\r\n            max: smoothConstraint ? ptMax : ptMin\r\n        };\r\n    }\r\n    var ECPolylineShape = (function () {\r\n        function ECPolylineShape() {\r\n            this.smooth = 0;\r\n            this.smoothConstraint = true;\r\n            this.connectNulls = false;\r\n        }\r\n        return ECPolylineShape;\r\n    }());\r\n    var ECPolyline = (function (_super) {\r\n        __extends(ECPolyline, _super);\r\n        function ECPolyline(opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.type = 'ec-polyline';\r\n            return _this;\r\n        }\r\n        ECPolyline.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        ECPolyline.prototype.getDefaultShape = function () {\r\n            return new ECPolylineShape();\r\n        };\r\n        ECPolyline.prototype.buildPath = function (ctx, shape) {\r\n            var points = shape.points;\r\n            var i = 0;\r\n            var len = points.length;\r\n            var result = getBoundingBox(points, shape.smoothConstraint);\r\n            if (shape.connectNulls) {\r\n                for (; len > 0; len--) {\r\n                    if (!isPointNull(points[len - 1])) {\r\n                        break;\r\n                    }\r\n                }\r\n                for (; i < len; i++) {\r\n                    if (!isPointNull(points[i])) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            while (i < len) {\r\n                i += drawSegment(ctx, points, i, len, len, 1, result.min, result.max, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\r\n            }\r\n        };\r\n        return ECPolyline;\r\n    }(Path));\r\n    var ECPolygonShape = (function (_super) {\r\n        __extends(ECPolygonShape, _super);\r\n        function ECPolygonShape() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return ECPolygonShape;\r\n    }(ECPolylineShape));\r\n    var ECPolygon = (function (_super) {\r\n        __extends(ECPolygon, _super);\r\n        function ECPolygon(opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.type = 'ec-polygon';\r\n            return _this;\r\n        }\r\n        ECPolygon.prototype.getDefaultShape = function () {\r\n            return new ECPolygonShape();\r\n        };\r\n        ECPolygon.prototype.buildPath = function (ctx, shape) {\r\n            var points = shape.points;\r\n            var stackedOnPoints = shape.stackedOnPoints;\r\n            var i = 0;\r\n            var len = points.length;\r\n            var smoothMonotone = shape.smoothMonotone;\r\n            var bbox = getBoundingBox(points, shape.smoothConstraint);\r\n            var stackedOnBBox = getBoundingBox(stackedOnPoints, shape.smoothConstraint);\r\n            if (shape.connectNulls) {\r\n                for (; len > 0; len--) {\r\n                    if (!isPointNull(points[len - 1])) {\r\n                        break;\r\n                    }\r\n                }\r\n                for (; i < len; i++) {\r\n                    if (!isPointNull(points[i])) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            while (i < len) {\r\n                var k = drawSegment(ctx, points, i, len, len, 1, bbox.min, bbox.max, shape.smooth, smoothMonotone, shape.connectNulls);\r\n                drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, stackedOnBBox.min, stackedOnBBox.max, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\r\n                i += k + 1;\r\n                ctx.closePath();\r\n            }\r\n        };\r\n        return ECPolygon;\r\n    }(Path));\n\n    function createGridClipPath(cartesian, hasAnimation, seriesModel) {\r\n        var rect = cartesian.getArea();\r\n        var isHorizontal = cartesian.getBaseAxis().isHorizontal();\r\n        var x = rect.x;\r\n        var y = rect.y;\r\n        var width = rect.width;\r\n        var height = rect.height;\r\n        var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2;\r\n        x -= lineWidth / 2;\r\n        y -= lineWidth / 2;\r\n        width += lineWidth;\r\n        height += lineWidth;\r\n        x = Math.floor(x);\r\n        width = Math.round(width);\r\n        var clipPath = new Rect({\r\n            shape: {\r\n                x: x,\r\n                y: y,\r\n                width: width,\r\n                height: height\r\n            }\r\n        });\r\n        if (hasAnimation) {\r\n            clipPath.shape[isHorizontal ? 'width' : 'height'] = 0;\r\n            initProps(clipPath, {\r\n                shape: {\r\n                    width: width,\r\n                    height: height\r\n                }\r\n            }, seriesModel);\r\n        }\r\n        return clipPath;\r\n    }\r\n    function createPolarClipPath(polar, hasAnimation, seriesModel) {\r\n        var sectorArea = polar.getArea();\r\n        var clipPath = new Sector({\r\n            shape: {\r\n                cx: round$1(polar.cx, 1),\r\n                cy: round$1(polar.cy, 1),\r\n                r0: round$1(sectorArea.r0, 1),\r\n                r: round$1(sectorArea.r, 1),\r\n                startAngle: sectorArea.startAngle,\r\n                endAngle: sectorArea.endAngle,\r\n                clockwise: sectorArea.clockwise\r\n            }\r\n        });\r\n        if (hasAnimation) {\r\n            clipPath.shape.endAngle = sectorArea.startAngle;\r\n            initProps(clipPath, {\r\n                shape: {\r\n                    endAngle: sectorArea.endAngle\r\n                }\r\n            }, seriesModel);\r\n        }\r\n        return clipPath;\r\n    }\r\n    function createClipPath(coordSys, hasAnimation, seriesModel) {\r\n        if (!coordSys) {\r\n            return null;\r\n        }\r\n        else if (coordSys.type === 'polar') {\r\n            return createPolarClipPath(coordSys, hasAnimation, seriesModel);\r\n        }\r\n        else if (coordSys.type === 'cartesian2d') {\r\n            return createGridClipPath(coordSys, hasAnimation, seriesModel);\r\n        }\r\n        return null;\r\n    }\n\n    function isPointsSame(points1, points2) {\r\n        if (points1.length !== points2.length) {\r\n            return;\r\n        }\r\n        for (var i = 0; i < points1.length; i++) {\r\n            var p1 = points1[i];\r\n            var p2 = points2[i];\r\n            if (p1[0] !== p2[0] || p1[1] !== p2[1]) {\r\n                return;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    function getBoundingDiff(points1, points2) {\r\n        var min1 = [];\r\n        var max1 = [];\r\n        var min2 = [];\r\n        var max2 = [];\r\n        fromPoints(points1, min1, max1);\r\n        fromPoints(points2, min2, max2);\r\n        return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\r\n    }\r\n    function getSmooth(smooth) {\r\n        return typeof smooth === 'number' ? smooth : (smooth ? 0.5 : 0);\r\n    }\r\n    function getStackedOnPoints(coordSys, data, dataCoordInfo) {\r\n        if (!dataCoordInfo.valueDim) {\r\n            return [];\r\n        }\r\n        var points = [];\r\n        for (var idx = 0, len = data.count(); idx < len; idx++) {\r\n            points.push(getStackedOnPoint(dataCoordInfo, coordSys, data, idx));\r\n        }\r\n        return points;\r\n    }\r\n    function turnPointsIntoStep(points, coordSys, stepTurnAt) {\r\n        var baseAxis = coordSys.getBaseAxis();\r\n        var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\r\n        var stepPoints = [];\r\n        var i = 0;\r\n        for (; i < points.length - 1; i++) {\r\n            var nextPt = points[i + 1];\r\n            var pt = points[i];\r\n            stepPoints.push(pt);\r\n            var stepPt = [];\r\n            switch (stepTurnAt) {\r\n                case 'end':\r\n                    stepPt[baseIndex] = nextPt[baseIndex];\r\n                    stepPt[1 - baseIndex] = pt[1 - baseIndex];\r\n                    stepPoints.push(stepPt);\r\n                    break;\r\n                case 'middle':\r\n                    var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\r\n                    var stepPt2 = [];\r\n                    stepPt[baseIndex] = stepPt2[baseIndex] = middle;\r\n                    stepPt[1 - baseIndex] = pt[1 - baseIndex];\r\n                    stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\r\n                    stepPoints.push(stepPt);\r\n                    stepPoints.push(stepPt2);\r\n                    break;\r\n                default:\r\n                    stepPt[baseIndex] = pt[baseIndex];\r\n                    stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\r\n                    stepPoints.push(stepPt);\r\n            }\r\n        }\r\n        points[i] && stepPoints.push(points[i]);\r\n        return stepPoints;\r\n    }\r\n    function getVisualGradient(data, coordSys) {\r\n        var visualMetaList = data.getVisual('visualMeta');\r\n        if (!visualMetaList || !visualMetaList.length || !data.count()) {\r\n            return;\r\n        }\r\n        if (coordSys.type !== 'cartesian2d') {\r\n            if (__DEV__) {\r\n                console.warn('Visual map on line style is only supported on cartesian2d.');\r\n            }\r\n            return;\r\n        }\r\n        var coordDim;\r\n        var visualMeta;\r\n        for (var i = visualMetaList.length - 1; i >= 0; i--) {\r\n            var dimIndex = visualMetaList[i].dimension;\r\n            var dimName = data.dimensions[dimIndex];\r\n            var dimInfo = data.getDimensionInfo(dimName);\r\n            coordDim = (dimInfo && dimInfo.coordDim);\r\n            if (coordDim === 'x' || coordDim === 'y') {\r\n                visualMeta = visualMetaList[i];\r\n                break;\r\n            }\r\n        }\r\n        if (!visualMeta) {\r\n            if (__DEV__) {\r\n                console.warn('Visual map on line style only support x or y dimension.');\r\n            }\r\n            return;\r\n        }\r\n        var axis = coordSys.getAxis(coordDim);\r\n        var colorStops = map(visualMeta.stops, function (stop) {\r\n            return {\r\n                offset: 0,\r\n                coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\r\n                color: stop.color\r\n            };\r\n        });\r\n        var stopLen = colorStops.length;\r\n        var outerColors = visualMeta.outerColors.slice();\r\n        if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\r\n            colorStops.reverse();\r\n            outerColors.reverse();\r\n        }\r\n        var tinyExtent = 10;\r\n        var minCoord = colorStops[0].coord - tinyExtent;\r\n        var maxCoord = colorStops[stopLen - 1].coord + tinyExtent;\r\n        var coordSpan = maxCoord - minCoord;\r\n        if (coordSpan < 1e-3) {\r\n            return 'transparent';\r\n        }\r\n        each(colorStops, function (stop) {\r\n            stop.offset = (stop.coord - minCoord) / coordSpan;\r\n        });\r\n        colorStops.push({\r\n            offset: stopLen ? colorStops[stopLen - 1].offset : 0.5,\r\n            color: outerColors[1] || 'transparent'\r\n        });\r\n        colorStops.unshift({\r\n            offset: stopLen ? colorStops[0].offset : 0.5,\r\n            color: outerColors[0] || 'transparent'\r\n        });\r\n        var gradient = new LinearGradient(0, 0, 0, 0, colorStops, true);\r\n        gradient[coordDim] = minCoord;\r\n        gradient[coordDim + '2'] = maxCoord;\r\n        return gradient;\r\n    }\r\n    function getIsIgnoreFunc(seriesModel, data, coordSys) {\r\n        var showAllSymbol = seriesModel.get('showAllSymbol');\r\n        var isAuto = showAllSymbol === 'auto';\r\n        if (showAllSymbol && !isAuto) {\r\n            return;\r\n        }\r\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\r\n        if (!categoryAxis) {\r\n            return;\r\n        }\r\n        if (isAuto\r\n            && canShowAllSymbolForCategory(categoryAxis, data)) {\r\n            return;\r\n        }\r\n        var categoryDataDim = data.mapDimension(categoryAxis.dim);\r\n        var labelMap = {};\r\n        each(categoryAxis.getViewLabels(), function (labelItem) {\r\n            labelMap[labelItem.tickValue] = 1;\r\n        });\r\n        return function (dataIndex) {\r\n            return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\r\n        };\r\n    }\r\n    function canShowAllSymbolForCategory(categoryAxis, data) {\r\n        var axisExtent = categoryAxis.getExtent();\r\n        var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\r\n        isNaN(availSize) && (availSize = 0);\r\n        var dataLen = data.count();\r\n        var step = Math.max(1, Math.round(dataLen / 5));\r\n        for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\r\n            if (Symbol.getSymbolSize(data, dataIndex)[categoryAxis.isHorizontal() ? 1 : 0]\r\n                * 1.5 > availSize) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    function createLineClipPath(coordSys, hasAnimation, seriesModel) {\r\n        if (coordSys.type === 'cartesian2d') {\r\n            var isHorizontal = coordSys.getBaseAxis().isHorizontal();\r\n            var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel);\r\n            if (!seriesModel.get('clip', true)) {\r\n                var rectShape = clipPath.shape;\r\n                var expandSize = Math.max(rectShape.width, rectShape.height);\r\n                if (isHorizontal) {\r\n                    rectShape.y -= expandSize;\r\n                    rectShape.height += expandSize * 2;\r\n                }\r\n                else {\r\n                    rectShape.x -= expandSize;\r\n                    rectShape.width += expandSize * 2;\r\n                }\r\n            }\r\n            return clipPath;\r\n        }\r\n        else {\r\n            return createPolarClipPath(coordSys, hasAnimation, seriesModel);\r\n        }\r\n    }\r\n    var LineView = (function (_super) {\r\n        __extends(LineView, _super);\r\n        function LineView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        LineView.prototype.init = function () {\r\n            var lineGroup = new Group();\r\n            var symbolDraw = new SymbolDraw();\r\n            this.group.add(symbolDraw.group);\r\n            this._symbolDraw = symbolDraw;\r\n            this._lineGroup = lineGroup;\r\n        };\r\n        LineView.prototype.render = function (seriesModel, ecModel, api) {\r\n            var _this = this;\r\n            var coordSys = seriesModel.coordinateSystem;\r\n            var group = this.group;\r\n            var data = seriesModel.getData();\r\n            var lineStyleModel = seriesModel.getModel('lineStyle');\r\n            var areaStyleModel = seriesModel.getModel('areaStyle');\r\n            var points = data.mapArray(data.getItemLayout);\r\n            var isCoordSysPolar = coordSys.type === 'polar';\r\n            var prevCoordSys = this._coordSys;\r\n            var symbolDraw = this._symbolDraw;\r\n            var polyline = this._polyline;\r\n            var polygon = this._polygon;\r\n            var lineGroup = this._lineGroup;\r\n            var hasAnimation = seriesModel.get('animation');\r\n            var isAreaChart = !areaStyleModel.isEmpty();\r\n            var valueOrigin = areaStyleModel.get('origin');\r\n            var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\r\n            var stackedOnPoints = getStackedOnPoints(coordSys, data, dataCoordInfo);\r\n            var showSymbol = seriesModel.get('showSymbol');\r\n            var isIgnoreFunc = showSymbol && !isCoordSysPolar\r\n                && getIsIgnoreFunc(seriesModel, data, coordSys);\r\n            var oldData = this._data;\r\n            oldData && oldData.eachItemGraphicEl(function (el, idx) {\r\n                if (el.__temp) {\r\n                    group.remove(el);\r\n                    oldData.setItemGraphicEl(idx, null);\r\n                }\r\n            });\r\n            if (!showSymbol) {\r\n                symbolDraw.remove();\r\n            }\r\n            group.add(lineGroup);\r\n            var step = !isCoordSysPolar ? seriesModel.get('step') : false;\r\n            var clipShapeForSymbol;\r\n            if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\r\n                clipShapeForSymbol = coordSys.getArea();\r\n                if (clipShapeForSymbol.width != null) {\r\n                    clipShapeForSymbol.x -= 0.1;\r\n                    clipShapeForSymbol.y -= 0.1;\r\n                    clipShapeForSymbol.width += 0.2;\r\n                    clipShapeForSymbol.height += 0.2;\r\n                }\r\n                else if (clipShapeForSymbol.r0) {\r\n                    clipShapeForSymbol.r0 -= 0.5;\r\n                    clipShapeForSymbol.r += 0.5;\r\n                }\r\n            }\r\n            this._clipShapeForSymbol = clipShapeForSymbol;\r\n            if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\r\n                showSymbol && symbolDraw.updateData(data, {\r\n                    isIgnore: isIgnoreFunc,\r\n                    clipShape: clipShapeForSymbol\r\n                });\r\n                if (step) {\r\n                    points = turnPointsIntoStep(points, coordSys, step);\r\n                    stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\r\n                }\r\n                polyline = this._newPolyline(points);\r\n                if (isAreaChart) {\r\n                    polygon = this._newPolygon(points, stackedOnPoints);\r\n                }\r\n                lineGroup.setClipPath(createLineClipPath(coordSys, true, seriesModel));\r\n            }\r\n            else {\r\n                if (isAreaChart && !polygon) {\r\n                    polygon = this._newPolygon(points, stackedOnPoints);\r\n                }\r\n                else if (polygon && !isAreaChart) {\r\n                    lineGroup.remove(polygon);\r\n                    polygon = this._polygon = null;\r\n                }\r\n                lineGroup.setClipPath(createLineClipPath(coordSys, false, seriesModel));\r\n                showSymbol && symbolDraw.updateData(data, {\r\n                    isIgnore: isIgnoreFunc,\r\n                    clipShape: clipShapeForSymbol\r\n                });\r\n                data.eachItemGraphicEl(function (el) {\r\n                    el && el.stopAnimation(null, true);\r\n                });\r\n                if (!isPointsSame(this._stackedOnPoints, stackedOnPoints)\r\n                    || !isPointsSame(this._points, points)) {\r\n                    if (hasAnimation) {\r\n                        this._updateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\r\n                    }\r\n                    else {\r\n                        if (step) {\r\n                            points = turnPointsIntoStep(points, coordSys, step);\r\n                            stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\r\n                        }\r\n                        polyline.setShape({\r\n                            points: points\r\n                        });\r\n                        polygon && polygon.setShape({\r\n                            points: points,\r\n                            stackedOnPoints: stackedOnPoints\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            var visualColor = getVisualGradient(data, coordSys)\r\n                || data.getVisual('style')[data.getVisual('drawType')];\r\n            var focus = seriesModel.get(['emphasis', 'focus']);\r\n            var blurScope = seriesModel.get(['emphasis', 'blurScope']);\r\n            polyline.useStyle(defaults(lineStyleModel.getLineStyle(), {\r\n                fill: 'none',\r\n                stroke: visualColor,\r\n                lineJoin: 'bevel'\r\n            }));\r\n            setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\r\n            var shouldBolderOnEmphasis = seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder';\r\n            if (shouldBolderOnEmphasis) {\r\n                var emphasisLineStyle = polyline.getState('emphasis').style;\r\n                emphasisLineStyle.lineWidth = polyline.style.lineWidth + 1;\r\n            }\r\n            getECData(polyline).seriesIndex = seriesModel.seriesIndex;\r\n            enableHoverEmphasis(polyline, focus, blurScope);\r\n            var smooth = getSmooth(seriesModel.get('smooth'));\r\n            polyline.setShape({\r\n                smooth: smooth,\r\n                smoothMonotone: seriesModel.get('smoothMonotone'),\r\n                connectNulls: seriesModel.get('connectNulls')\r\n            });\r\n            if (polygon) {\r\n                var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\r\n                var stackedOnSmooth = 0;\r\n                polygon.useStyle(defaults(areaStyleModel.getAreaStyle(), {\r\n                    fill: visualColor,\r\n                    opacity: 0.7,\r\n                    lineJoin: 'bevel'\r\n                }));\r\n                if (stackedOnSeries) {\r\n                    stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\r\n                }\r\n                polygon.setShape({\r\n                    smooth: smooth,\r\n                    stackedOnSmooth: stackedOnSmooth,\r\n                    smoothMonotone: seriesModel.get('smoothMonotone'),\r\n                    connectNulls: seriesModel.get('connectNulls')\r\n                });\r\n                setStatesStylesFromModel(polygon, seriesModel, 'areaStyle');\r\n                getECData(polygon).seriesIndex = seriesModel.seriesIndex;\r\n                enableHoverEmphasis(polygon, focus, blurScope);\r\n            }\r\n            var changePolyState = function (toState) {\r\n                _this._changePolyState(toState);\r\n            };\r\n            data.eachItemGraphicEl(function (el) {\r\n                el && (el.onHoverStateChange = changePolyState);\r\n            });\r\n            this._data = data;\r\n            this._coordSys = coordSys;\r\n            this._stackedOnPoints = stackedOnPoints;\r\n            this._points = points;\r\n            this._step = step;\r\n            this._valueOrigin = valueOrigin;\r\n        };\r\n        LineView.prototype.dispose = function () { };\r\n        LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\r\n            var data = seriesModel.getData();\r\n            var dataIndex = queryDataIndex(data, payload);\r\n            this._changePolyState('emphasis');\r\n            if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\r\n                var symbol = data.getItemGraphicEl(dataIndex);\r\n                if (!symbol) {\r\n                    var pt = data.getItemLayout(dataIndex);\r\n                    if (!pt) {\r\n                        return;\r\n                    }\r\n                    if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(pt[0], pt[1])) {\r\n                        return;\r\n                    }\r\n                    symbol = new Symbol(data, dataIndex);\r\n                    symbol.setPosition(pt);\r\n                    symbol.setZ(seriesModel.get('zlevel'), seriesModel.get('z'));\r\n                    symbol.ignore = isNaN(pt[0]) || isNaN(pt[1]);\r\n                    symbol.__temp = true;\r\n                    data.setItemGraphicEl(dataIndex, symbol);\r\n                    symbol.stopSymbolAnimation(true);\r\n                    this.group.add(symbol);\r\n                }\r\n                symbol.highlight();\r\n            }\r\n            else {\r\n                ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\r\n            }\r\n        };\r\n        LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\r\n            var data = seriesModel.getData();\r\n            var dataIndex = queryDataIndex(data, payload);\r\n            this._changePolyState('normal');\r\n            if (dataIndex != null && dataIndex >= 0) {\r\n                var symbol = data.getItemGraphicEl(dataIndex);\r\n                if (symbol) {\r\n                    if (symbol.__temp) {\r\n                        data.setItemGraphicEl(dataIndex, null);\r\n                        this.group.remove(symbol);\r\n                    }\r\n                    else {\r\n                        symbol.downplay();\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\r\n            }\r\n        };\r\n        LineView.prototype._changePolyState = function (toState) {\r\n            var polygon = this._polygon;\r\n            setStatesFlag(this._polyline, toState);\r\n            polygon && setStatesFlag(polygon, toState);\r\n        };\r\n        LineView.prototype._newPolyline = function (points) {\r\n            var polyline = this._polyline;\r\n            if (polyline) {\r\n                this._lineGroup.remove(polyline);\r\n            }\r\n            polyline = new ECPolyline({\r\n                shape: {\r\n                    points: points\r\n                },\r\n                segmentIgnoreThreshold: 2,\r\n                z2: 10\r\n            });\r\n            this._lineGroup.add(polyline);\r\n            this._polyline = polyline;\r\n            return polyline;\r\n        };\r\n        LineView.prototype._newPolygon = function (points, stackedOnPoints) {\r\n            var polygon = this._polygon;\r\n            if (polygon) {\r\n                this._lineGroup.remove(polygon);\r\n            }\r\n            polygon = new ECPolygon({\r\n                shape: {\r\n                    points: points,\r\n                    stackedOnPoints: stackedOnPoints\r\n                },\r\n                segmentIgnoreThreshold: 2\r\n            });\r\n            this._lineGroup.add(polygon);\r\n            this._polygon = polygon;\r\n            return polygon;\r\n        };\r\n        LineView.prototype._updateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin) {\r\n            var polyline = this._polyline;\r\n            var polygon = this._polygon;\r\n            var seriesModel = data.hostModel;\r\n            var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\r\n            var current = diff.current;\r\n            var stackedOnCurrent = diff.stackedOnCurrent;\r\n            var next = diff.next;\r\n            var stackedOnNext = diff.stackedOnNext;\r\n            if (step) {\r\n                current = turnPointsIntoStep(diff.current, coordSys, step);\r\n                stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\r\n                next = turnPointsIntoStep(diff.next, coordSys, step);\r\n                stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\r\n            }\r\n            if (getBoundingDiff(current, next) > 3000\r\n                || (polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000)) {\r\n                polyline.setShape({\r\n                    points: next\r\n                });\r\n                if (polygon) {\r\n                    polygon.setShape({\r\n                        points: next,\r\n                        stackedOnPoints: stackedOnNext\r\n                    });\r\n                }\r\n                return;\r\n            }\r\n            polyline.shape.__points = diff.current;\r\n            polyline.shape.points = current;\r\n            polyline.stopAnimation();\r\n            updateProps(polyline, {\r\n                shape: {\r\n                    points: next\r\n                }\r\n            }, seriesModel);\r\n            if (polygon) {\r\n                polygon.setShape({\r\n                    points: current,\r\n                    stackedOnPoints: stackedOnCurrent\r\n                });\r\n                polygon.stopAnimation();\r\n                updateProps(polygon, {\r\n                    shape: {\r\n                        stackedOnPoints: stackedOnNext\r\n                    }\r\n                }, seriesModel);\r\n                if (polyline.shape.points !== polygon.shape.points) {\r\n                    polygon.shape.points = polyline.shape.points;\r\n                }\r\n            }\r\n            var updatedDataInfo = [];\r\n            var diffStatus = diff.status;\r\n            for (var i = 0; i < diffStatus.length; i++) {\r\n                var cmd = diffStatus[i].cmd;\r\n                if (cmd === '=') {\r\n                    var el = data.getItemGraphicEl(diffStatus[i].idx1);\r\n                    if (el) {\r\n                        updatedDataInfo.push({\r\n                            el: el,\r\n                            ptIdx: i\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            if (polyline.animators && polyline.animators.length) {\r\n                polyline.animators[0].during(function () {\r\n                    for (var i = 0; i < updatedDataInfo.length; i++) {\r\n                        var el = updatedDataInfo[i].el;\r\n                        el.setPosition(polyline.shape.__points[updatedDataInfo[i].ptIdx]);\r\n                        el.markRedraw();\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        LineView.prototype.remove = function (ecModel) {\r\n            var group = this.group;\r\n            var oldData = this._data;\r\n            this._lineGroup.removeAll();\r\n            this._symbolDraw.remove(true);\r\n            oldData && oldData.eachItemGraphicEl(function (el, idx) {\r\n                if (el.__temp) {\r\n                    group.remove(el);\r\n                    oldData.setItemGraphicEl(idx, null);\r\n                }\r\n            });\r\n            this._polyline =\r\n                this._polygon =\r\n                    this._coordSys =\r\n                        this._points =\r\n                            this._stackedOnPoints =\r\n                                this._data = null;\r\n        };\r\n        LineView.type = 'line';\r\n        return LineView;\r\n    }(ChartView));\r\n    ChartView.registerClass(LineView);\n\n    function layoutPoints (seriesType) {\r\n        return {\r\n            seriesType: seriesType,\r\n            plan: createRenderPlanner(),\r\n            reset: function (seriesModel) {\r\n                var data = seriesModel.getData();\r\n                var coordSys = seriesModel.coordinateSystem;\r\n                var pipelineContext = seriesModel.pipelineContext;\r\n                var isLargeRender = pipelineContext.large;\r\n                if (!coordSys) {\r\n                    return;\r\n                }\r\n                var dims = map(coordSys.dimensions, function (dim) {\r\n                    return data.mapDimension(dim);\r\n                }).slice(0, 2);\r\n                var dimLen = dims.length;\r\n                var stackResultDim = data.getCalculationInfo('stackResultDimension');\r\n                if (isDimensionStacked(data, dims[0])) {\r\n                    dims[0] = stackResultDim;\r\n                }\r\n                if (isDimensionStacked(data, dims[1])) {\r\n                    dims[1] = stackResultDim;\r\n                }\r\n                return dimLen && {\r\n                    progress: function (params, data) {\r\n                        var segCount = params.end - params.start;\r\n                        var points = isLargeRender && new Float32Array(segCount * dimLen);\r\n                        var tmpIn = [];\r\n                        var tmpOut = [];\r\n                        for (var i = params.start, offset = 0; i < params.end; i++) {\r\n                            var point = void 0;\r\n                            if (dimLen === 1) {\r\n                                var x = data.get(dims[0], i);\r\n                                point = !isNaN(x) && coordSys.dataToPoint(x, null, tmpOut);\r\n                            }\r\n                            else {\r\n                                var x = tmpIn[0] = data.get(dims[0], i);\r\n                                var y = tmpIn[1] = data.get(dims[1], i);\r\n                                point = !isNaN(x) && !isNaN(y) && coordSys.dataToPoint(tmpIn, null, tmpOut);\r\n                            }\r\n                            if (isLargeRender) {\r\n                                points[offset++] = point ? point[0] : NaN;\r\n                                points[offset++] = point ? point[1] : NaN;\r\n                            }\r\n                            else {\r\n                                data.setItemLayout(i, (point && point.slice()) || [NaN, NaN]);\r\n                            }\r\n                        }\r\n                        isLargeRender && data.setLayout('symbolPoints', points);\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    }\n\n    var samplers = {\r\n        average: function (frame) {\r\n            var sum = 0;\r\n            var count = 0;\r\n            for (var i = 0; i < frame.length; i++) {\r\n                if (!isNaN(frame[i])) {\r\n                    sum += frame[i];\r\n                    count++;\r\n                }\r\n            }\r\n            return count === 0 ? NaN : sum / count;\r\n        },\r\n        sum: function (frame) {\r\n            var sum = 0;\r\n            for (var i = 0; i < frame.length; i++) {\r\n                sum += frame[i] || 0;\r\n            }\r\n            return sum;\r\n        },\r\n        max: function (frame) {\r\n            var max = -Infinity;\r\n            for (var i = 0; i < frame.length; i++) {\r\n                frame[i] > max && (max = frame[i]);\r\n            }\r\n            return isFinite(max) ? max : NaN;\r\n        },\r\n        min: function (frame) {\r\n            var min = Infinity;\r\n            for (var i = 0; i < frame.length; i++) {\r\n                frame[i] < min && (min = frame[i]);\r\n            }\r\n            return isFinite(min) ? min : NaN;\r\n        },\r\n        nearest: function (frame) {\r\n            return frame[0];\r\n        }\r\n    };\r\n    var indexSampler = function (frame) {\r\n        return Math.round(frame.length / 2);\r\n    };\r\n    function dataSample (seriesType) {\r\n        return {\r\n            seriesType: seriesType,\r\n            reset: function (seriesModel, ecModel, api) {\r\n                var data = seriesModel.getData();\r\n                var sampling = seriesModel.get('sampling');\r\n                var coordSys = seriesModel.coordinateSystem;\r\n                if (coordSys.type === 'cartesian2d' && sampling) {\r\n                    var baseAxis = coordSys.getBaseAxis();\r\n                    var valueAxis = coordSys.getOtherAxis(baseAxis);\r\n                    var extent = baseAxis.getExtent();\r\n                    var size = extent[1] - extent[0];\r\n                    var rate = Math.round(data.count() / size);\r\n                    if (rate > 1) {\r\n                        var sampler = void 0;\r\n                        if (typeof sampling === 'string') {\r\n                            sampler = samplers[sampling];\r\n                        }\r\n                        else if (typeof sampling === 'function') {\r\n                            sampler = sampling;\r\n                        }\r\n                        if (sampler) {\r\n                            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\n\n    var defaultOption = {\r\n        show: true,\r\n        zlevel: 0,\r\n        z: 0,\r\n        inverse: false,\r\n        name: '',\r\n        nameLocation: 'end',\r\n        nameRotate: null,\r\n        nameTruncate: {\r\n            maxWidth: null,\r\n            ellipsis: '...',\r\n            placeholder: '.'\r\n        },\r\n        nameTextStyle: {},\r\n        nameGap: 15,\r\n        silent: false,\r\n        triggerEvent: false,\r\n        tooltip: {\r\n            show: false\r\n        },\r\n        axisPointer: {},\r\n        axisLine: {\r\n            show: true,\r\n            onZero: true,\r\n            onZeroAxisIndex: null,\r\n            lineStyle: {\r\n                color: '#6E7079',\r\n                width: 1,\r\n                type: 'solid'\r\n            },\r\n            symbol: ['none', 'none'],\r\n            symbolSize: [10, 15]\r\n        },\r\n        axisTick: {\r\n            show: true,\r\n            inside: false,\r\n            length: 5,\r\n            lineStyle: {\r\n                width: 1\r\n            }\r\n        },\r\n        axisLabel: {\r\n            show: true,\r\n            inside: false,\r\n            rotate: 0,\r\n            showMinLabel: null,\r\n            showMaxLabel: null,\r\n            margin: 8,\r\n            fontSize: 12\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: ['#E0E6F1'],\r\n                width: 1,\r\n                type: 'solid'\r\n            }\r\n        },\r\n        splitArea: {\r\n            show: false,\r\n            areaStyle: {\r\n                color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\r\n            }\r\n        }\r\n    };\r\n    var categoryAxis = merge({\r\n        boundaryGap: true,\r\n        deduplication: null,\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            alignWithLabel: false,\r\n            interval: 'auto'\r\n        },\r\n        axisLabel: {\r\n            interval: 'auto'\r\n        }\r\n    }, defaultOption);\r\n    var valueAxis = merge({\r\n        boundaryGap: [0, 0],\r\n        axisLine: {\r\n            show: 'auto'\r\n        },\r\n        axisTick: {\r\n            show: 'auto'\r\n        },\r\n        splitNumber: 5,\r\n        minorTick: {\r\n            show: false,\r\n            splitNumber: 5,\r\n            length: 3,\r\n            lineStyle: {}\r\n        },\r\n        minorSplitLine: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: '#F4F7FD',\r\n                width: 1\r\n            }\r\n        }\r\n    }, defaultOption);\r\n    var timeAxis = merge({\r\n        scale: true,\r\n        splitNumber: 6,\r\n        axisLabel: {\r\n            showMinLabel: false,\r\n            showMaxLabel: false,\r\n            rich: {\r\n                primary: {\r\n                    fontWeight: 'bold'\r\n                }\r\n            }\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        }\r\n    }, valueAxis);\r\n    var logAxis = defaults({\r\n        scale: true,\r\n        logBase: 10\r\n    }, valueAxis);\r\n    var axisDefault = {\r\n        category: categoryAxis,\r\n        value: valueAxis,\r\n        time: timeAxis,\r\n        log: logAxis\r\n    };\n\n    var AXIS_TYPES = { value: 1, category: 1, time: 1, log: 1 };\n\n    function axisModelCreator (axisName, BaseAxisModelClass, extraDefaultOption) {\r\n        each(AXIS_TYPES, function (v, axisType) {\r\n            var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\r\n            var AxisModel = (function (_super) {\r\n                __extends(AxisModel, _super);\r\n                function AxisModel() {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    var _this = _super.apply(this, args) || this;\r\n                    _this.type = axisName + 'Axis.' + axisType;\r\n                    return _this;\r\n                }\r\n                AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\r\n                    var layoutMode = fetchLayoutMode(this);\r\n                    var inputPositionParams = layoutMode\r\n                        ? getLayoutParams(option) : {};\r\n                    var themeModel = ecModel.getTheme();\r\n                    merge(option, themeModel.get(axisType + 'Axis'));\r\n                    merge(option, this.getDefaultOption());\r\n                    option.type = getAxisType(option);\r\n                    if (layoutMode) {\r\n                        mergeLayoutParam(option, inputPositionParams, layoutMode);\r\n                    }\r\n                };\r\n                AxisModel.prototype.optionUpdated = function () {\r\n                    var thisOption = this.option;\r\n                    if (thisOption.type === 'category') {\r\n                        this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\r\n                    }\r\n                };\r\n                AxisModel.prototype.getCategories = function (rawData) {\r\n                    var option = this.option;\r\n                    if (option.type === 'category') {\r\n                        if (rawData) {\r\n                            return option.data;\r\n                        }\r\n                        return this.__ordinalMeta.categories;\r\n                    }\r\n                };\r\n                AxisModel.prototype.getOrdinalMeta = function () {\r\n                    return this.__ordinalMeta;\r\n                };\r\n                AxisModel.type = axisName + 'Axis.' + axisType;\r\n                AxisModel.defaultOption = defaultOption;\r\n                return AxisModel;\r\n            }(BaseAxisModelClass));\r\n            ComponentModel.registerClass(AxisModel);\r\n        });\r\n        ComponentModel.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\r\n    }\r\n    function getAxisType(option) {\r\n        return option.type || (option.data ? 'category' : 'value');\r\n    }\n\n    var CartesianAxisModel = (function (_super) {\r\n        __extends(CartesianAxisModel, _super);\r\n        function CartesianAxisModel() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        CartesianAxisModel.prototype.getCoordSysModel = function () {\r\n            return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\r\n        };\r\n        CartesianAxisModel.type = 'cartesian2dAxis';\r\n        return CartesianAxisModel;\r\n    }(ComponentModel));\r\n    mixin(CartesianAxisModel, AxisModelCommonMixin);\r\n    var extraOption = {\r\n        offset: 0,\r\n        categorySortInfo: []\r\n    };\r\n    axisModelCreator('x', CartesianAxisModel, extraOption);\r\n    axisModelCreator('y', CartesianAxisModel, extraOption);\n\n    var PI$5 = Math.PI;\r\n    var AxisBuilder = (function () {\r\n        function AxisBuilder(axisModel, opt) {\r\n            this.group = new Group();\r\n            this.opt = opt;\r\n            this.axisModel = axisModel;\r\n            defaults(opt, {\r\n                labelOffset: 0,\r\n                nameDirection: 1,\r\n                tickDirection: 1,\r\n                labelDirection: 1,\r\n                silent: true,\r\n                handleAutoShown: function () { return true; }\r\n            });\r\n            var transformGroup = new Group({\r\n                x: opt.position[0],\r\n                y: opt.position[1],\r\n                rotation: opt.rotation\r\n            });\r\n            transformGroup.updateTransform();\r\n            this._transformGroup = transformGroup;\r\n        }\r\n        AxisBuilder.prototype.hasBuilder = function (name) {\r\n            return !!builders[name];\r\n        };\r\n        AxisBuilder.prototype.add = function (name) {\r\n            builders[name](this.opt, this.axisModel, this.group, this._transformGroup);\r\n        };\r\n        AxisBuilder.prototype.getGroup = function () {\r\n            return this.group;\r\n        };\r\n        AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\r\n            var rotationDiff = remRadian(textRotation - axisRotation);\r\n            var textAlign;\r\n            var textVerticalAlign;\r\n            if (isRadianAroundZero(rotationDiff)) {\r\n                textVerticalAlign = direction > 0 ? 'top' : 'bottom';\r\n                textAlign = 'center';\r\n            }\r\n            else if (isRadianAroundZero(rotationDiff - PI$5)) {\r\n                textVerticalAlign = direction > 0 ? 'bottom' : 'top';\r\n                textAlign = 'center';\r\n            }\r\n            else {\r\n                textVerticalAlign = 'middle';\r\n                if (rotationDiff > 0 && rotationDiff < PI$5) {\r\n                    textAlign = direction > 0 ? 'right' : 'left';\r\n                }\r\n                else {\r\n                    textAlign = direction > 0 ? 'left' : 'right';\r\n                }\r\n            }\r\n            return {\r\n                rotation: rotationDiff,\r\n                textAlign: textAlign,\r\n                textVerticalAlign: textVerticalAlign\r\n            };\r\n        };\r\n        AxisBuilder.makeAxisEventDataBase = function (axisModel) {\r\n            var eventData = {\r\n                componentType: axisModel.mainType,\r\n                componentIndex: axisModel.componentIndex\r\n            };\r\n            eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\r\n            return eventData;\r\n        };\r\n        AxisBuilder.isLabelSilent = function (axisModel) {\r\n            var tooltipOpt = axisModel.get('tooltip');\r\n            return axisModel.get('silent')\r\n                || !(axisModel.get('triggerEvent') || (tooltipOpt && tooltipOpt.show));\r\n        };\r\n        return AxisBuilder;\r\n    }());\r\n    var builders = {\r\n        axisLine: function (opt, axisModel, group, transformGroup) {\r\n            var shown = axisModel.get(['axisLine', 'show']);\r\n            if (shown === 'auto' && opt.handleAutoShown) {\r\n                shown = opt.handleAutoShown('axisLine');\r\n            }\r\n            if (!shown) {\r\n                return;\r\n            }\r\n            var extent = axisModel.axis.getExtent();\r\n            var matrix = transformGroup.transform;\r\n            var pt1 = [extent[0], 0];\r\n            var pt2 = [extent[1], 0];\r\n            if (matrix) {\r\n                applyTransform(pt1, pt1, matrix);\r\n                applyTransform(pt2, pt2, matrix);\r\n            }\r\n            var lineStyle = extend({\r\n                lineCap: 'round'\r\n            }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\r\n            var line = new Line({\r\n                subPixelOptimize: true,\r\n                shape: {\r\n                    x1: pt1[0],\r\n                    y1: pt1[1],\r\n                    x2: pt2[0],\r\n                    y2: pt2[1]\r\n                },\r\n                style: lineStyle,\r\n                strokeContainThreshold: opt.strokeContainThreshold || 5,\r\n                silent: true,\r\n                z2: 1\r\n            });\r\n            line.anid = 'line';\r\n            group.add(line);\r\n            var arrows = axisModel.get(['axisLine', 'symbol']);\r\n            var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\r\n            var arrowOffset = axisModel.get(['axisLine', 'symbolOffset']) || 0;\r\n            if (typeof arrowOffset === 'number') {\r\n                arrowOffset = [arrowOffset, arrowOffset];\r\n            }\r\n            if (arrows != null) {\r\n                if (typeof arrows === 'string') {\r\n                    arrows = [arrows, arrows];\r\n                }\r\n                if (typeof arrowSize === 'string'\r\n                    || typeof arrowSize === 'number') {\r\n                    arrowSize = [arrowSize, arrowSize];\r\n                }\r\n                var symbolWidth_1 = arrowSize[0];\r\n                var symbolHeight_1 = arrowSize[1];\r\n                each([{\r\n                        rotate: opt.rotation + Math.PI / 2,\r\n                        offset: arrowOffset[0],\r\n                        r: 0\r\n                    }, {\r\n                        rotate: opt.rotation - Math.PI / 2,\r\n                        offset: arrowOffset[1],\r\n                        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0])\r\n                            + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\r\n                    }], function (point, index) {\r\n                    if (arrows[index] !== 'none' && arrows[index] != null) {\r\n                        var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true);\r\n                        var r = point.r + point.offset;\r\n                        symbol.attr({\r\n                            rotation: point.rotate,\r\n                            x: pt1[0] + r * Math.cos(opt.rotation),\r\n                            y: pt1[1] - r * Math.sin(opt.rotation),\r\n                            silent: true,\r\n                            z2: 11\r\n                        });\r\n                        group.add(symbol);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        axisTickLabel: function (opt, axisModel, group, transformGroup) {\r\n            var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);\r\n            var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);\r\n            fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\r\n            buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection);\r\n        },\r\n        axisName: function (opt, axisModel, group, transformGroup) {\r\n            var name = retrieve(opt.axisName, axisModel.get('name'));\r\n            if (!name) {\r\n                return;\r\n            }\r\n            var nameLocation = axisModel.get('nameLocation');\r\n            var nameDirection = opt.nameDirection;\r\n            var textStyleModel = axisModel.getModel('nameTextStyle');\r\n            var gap = axisModel.get('nameGap') || 0;\r\n            var extent = axisModel.axis.getExtent();\r\n            var gapSignal = extent[0] > extent[1] ? -1 : 1;\r\n            var pos = [\r\n                nameLocation === 'start'\r\n                    ? extent[0] - gapSignal * gap\r\n                    : nameLocation === 'end'\r\n                        ? extent[1] + gapSignal * gap\r\n                        : (extent[0] + extent[1]) / 2,\r\n                isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0\r\n            ];\r\n            var labelLayout;\r\n            var nameRotation = axisModel.get('nameRotate');\r\n            if (nameRotation != null) {\r\n                nameRotation = nameRotation * PI$5 / 180;\r\n            }\r\n            var axisNameAvailableWidth;\r\n            if (isNameLocationCenter(nameLocation)) {\r\n                labelLayout = AxisBuilder.innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, nameDirection);\r\n            }\r\n            else {\r\n                labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent);\r\n                axisNameAvailableWidth = opt.axisNameAvailableWidth;\r\n                if (axisNameAvailableWidth != null) {\r\n                    axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\r\n                    !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\r\n                }\r\n            }\r\n            var textFont = textStyleModel.getFont();\r\n            var truncateOpt = axisModel.get('nameTruncate', true) || {};\r\n            var ellipsis = truncateOpt.ellipsis;\r\n            var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\r\n            var tooltipOpt = axisModel.get('tooltip', true);\r\n            var mainType = axisModel.mainType;\r\n            var formatterParams = {\r\n                componentType: mainType,\r\n                name: name,\r\n                $vars: ['name']\r\n            };\r\n            formatterParams[mainType + 'Index'] = axisModel.componentIndex;\r\n            var textEl = new ZRText({\r\n                x: pos[0],\r\n                y: pos[1],\r\n                rotation: labelLayout.rotation,\r\n                silent: AxisBuilder.isLabelSilent(axisModel),\r\n                style: createTextStyle(textStyleModel, {\r\n                    text: name,\r\n                    font: textFont,\r\n                    overflow: 'truncate',\r\n                    width: maxWidth,\r\n                    ellipsis: ellipsis,\r\n                    fill: textStyleModel.getTextColor()\r\n                        || axisModel.get(['axisLine', 'lineStyle', 'color']),\r\n                    align: textStyleModel.get('align')\r\n                        || labelLayout.textAlign,\r\n                    verticalAlign: textStyleModel.get('verticalAlign')\r\n                        || labelLayout.textVerticalAlign\r\n                }),\r\n                z2: 1\r\n            });\r\n            textEl.tooltip = (tooltipOpt && tooltipOpt.show)\r\n                ? extend({\r\n                    content: name,\r\n                    formatter: function () {\r\n                        return name;\r\n                    },\r\n                    formatterParams: formatterParams\r\n                }, tooltipOpt)\r\n                : null;\r\n            textEl.__fullText = name;\r\n            textEl.anid = 'name';\r\n            if (axisModel.get('triggerEvent')) {\r\n                var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\r\n                eventData.targetType = 'axisName';\r\n                eventData.name = name;\r\n                getECData(textEl).eventData = eventData;\r\n            }\r\n            transformGroup.add(textEl);\r\n            textEl.updateTransform();\r\n            group.add(textEl);\r\n            textEl.decomposeTransform();\r\n        }\r\n    };\r\n    function endTextLayout(rotation, textPosition, textRotate, extent) {\r\n        var rotationDiff = remRadian(textRotate - rotation);\r\n        var textAlign;\r\n        var textVerticalAlign;\r\n        var inverse = extent[0] > extent[1];\r\n        var onLeft = (textPosition === 'start' && !inverse)\r\n            || (textPosition !== 'start' && inverse);\r\n        if (isRadianAroundZero(rotationDiff - PI$5 / 2)) {\r\n            textVerticalAlign = onLeft ? 'bottom' : 'top';\r\n            textAlign = 'center';\r\n        }\r\n        else if (isRadianAroundZero(rotationDiff - PI$5 * 1.5)) {\r\n            textVerticalAlign = onLeft ? 'top' : 'bottom';\r\n            textAlign = 'center';\r\n        }\r\n        else {\r\n            textVerticalAlign = 'middle';\r\n            if (rotationDiff < PI$5 * 1.5 && rotationDiff > PI$5 / 2) {\r\n                textAlign = onLeft ? 'left' : 'right';\r\n            }\r\n            else {\r\n                textAlign = onLeft ? 'right' : 'left';\r\n            }\r\n        }\r\n        return {\r\n            rotation: rotationDiff,\r\n            textAlign: textAlign,\r\n            textVerticalAlign: textVerticalAlign\r\n        };\r\n    }\r\n    function fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\r\n        if (shouldShowAllLabels(axisModel.axis)) {\r\n            return;\r\n        }\r\n        var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\r\n        var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']);\r\n        labelEls = labelEls || [];\r\n        tickEls = tickEls || [];\r\n        var firstLabel = labelEls[0];\r\n        var nextLabel = labelEls[1];\r\n        var lastLabel = labelEls[labelEls.length - 1];\r\n        var prevLabel = labelEls[labelEls.length - 2];\r\n        var firstTick = tickEls[0];\r\n        var nextTick = tickEls[1];\r\n        var lastTick = tickEls[tickEls.length - 1];\r\n        var prevTick = tickEls[tickEls.length - 2];\r\n        if (showMinLabel === false) {\r\n            ignoreEl(firstLabel);\r\n            ignoreEl(firstTick);\r\n        }\r\n        else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\r\n            if (showMinLabel) {\r\n                ignoreEl(nextLabel);\r\n                ignoreEl(nextTick);\r\n            }\r\n            else {\r\n                ignoreEl(firstLabel);\r\n                ignoreEl(firstTick);\r\n            }\r\n        }\r\n        if (showMaxLabel === false) {\r\n            ignoreEl(lastLabel);\r\n            ignoreEl(lastTick);\r\n        }\r\n        else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\r\n            if (showMaxLabel) {\r\n                ignoreEl(prevLabel);\r\n                ignoreEl(prevTick);\r\n            }\r\n            else {\r\n                ignoreEl(lastLabel);\r\n                ignoreEl(lastTick);\r\n            }\r\n        }\r\n    }\r\n    function ignoreEl(el) {\r\n        el && (el.ignore = true);\r\n    }\r\n    function isTwoLabelOverlapped(current, next) {\r\n        var firstRect = current && current.getBoundingRect().clone();\r\n        var nextRect = next && next.getBoundingRect().clone();\r\n        if (!firstRect || !nextRect) {\r\n            return;\r\n        }\r\n        var mRotationBack = identity([]);\r\n        rotate(mRotationBack, mRotationBack, -current.rotation);\r\n        firstRect.applyTransform(mul$1([], mRotationBack, current.getLocalTransform()));\r\n        nextRect.applyTransform(mul$1([], mRotationBack, next.getLocalTransform()));\r\n        return firstRect.intersect(nextRect);\r\n    }\r\n    function isNameLocationCenter(nameLocation) {\r\n        return nameLocation === 'middle' || nameLocation === 'center';\r\n    }\r\n    function createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\r\n        var tickEls = [];\r\n        var pt1 = [];\r\n        var pt2 = [];\r\n        for (var i = 0; i < ticksCoords.length; i++) {\r\n            var tickCoord = ticksCoords[i].coord;\r\n            pt1[0] = tickCoord;\r\n            pt1[1] = 0;\r\n            pt2[0] = tickCoord;\r\n            pt2[1] = tickEndCoord;\r\n            if (tickTransform) {\r\n                applyTransform(pt1, pt1, tickTransform);\r\n                applyTransform(pt2, pt2, tickTransform);\r\n            }\r\n            var tickEl = new Line({\r\n                subPixelOptimize: true,\r\n                shape: {\r\n                    x1: pt1[0],\r\n                    y1: pt1[1],\r\n                    x2: pt2[0],\r\n                    y2: pt2[1]\r\n                },\r\n                style: tickLineStyle,\r\n                z2: 2,\r\n                autoBatch: true,\r\n                silent: true\r\n            });\r\n            tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\r\n            tickEls.push(tickEl);\r\n        }\r\n        return tickEls;\r\n    }\r\n    function buildAxisMajorTicks(group, transformGroup, axisModel, opt) {\r\n        var axis = axisModel.axis;\r\n        var tickModel = axisModel.getModel('axisTick');\r\n        var shown = tickModel.get('show');\r\n        if (shown === 'auto' && opt.handleAutoShown) {\r\n            shown = opt.handleAutoShown('axisTick');\r\n        }\r\n        if (!shown || axis.scale.isBlank()) {\r\n            return;\r\n        }\r\n        var lineStyleModel = tickModel.getModel('lineStyle');\r\n        var tickEndCoord = opt.tickDirection * tickModel.get('length');\r\n        var ticksCoords = axis.getTicksCoords();\r\n        var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\r\n            stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\r\n        }), 'ticks');\r\n        for (var i = 0; i < ticksEls.length; i++) {\r\n            group.add(ticksEls[i]);\r\n        }\r\n        return ticksEls;\r\n    }\r\n    function buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {\r\n        var axis = axisModel.axis;\r\n        var minorTickModel = axisModel.getModel('minorTick');\r\n        if (!minorTickModel.get('show') || axis.scale.isBlank()) {\r\n            return;\r\n        }\r\n        var minorTicksCoords = axis.getMinorTicksCoords();\r\n        if (!minorTicksCoords.length) {\r\n            return;\r\n        }\r\n        var lineStyleModel = minorTickModel.getModel('lineStyle');\r\n        var tickEndCoord = tickDirection * minorTickModel.get('length');\r\n        var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\r\n            stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\r\n        }));\r\n        for (var i = 0; i < minorTicksCoords.length; i++) {\r\n            var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\r\n            for (var k = 0; k < minorTicksEls.length; k++) {\r\n                group.add(minorTicksEls[k]);\r\n            }\r\n        }\r\n    }\r\n    function buildAxisLabel(group, transformGroup, axisModel, opt) {\r\n        var axis = axisModel.axis;\r\n        var show = retrieve(opt.axisLabelShow, axisModel.get(['axisLabel', 'show']));\r\n        if (!show || axis.scale.isBlank()) {\r\n            return;\r\n        }\r\n        var labelModel = axisModel.getModel('axisLabel');\r\n        var labelMargin = labelModel.get('margin');\r\n        var labels = axis.getViewLabels();\r\n        var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI$5 / 180;\r\n        var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\r\n        var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\r\n        var labelEls = [];\r\n        var silent = AxisBuilder.isLabelSilent(axisModel);\r\n        var triggerEvent = axisModel.get('triggerEvent');\r\n        each(labels, function (labelItem, index) {\r\n            var tickValue = axis.scale.type === 'ordinal'\r\n                ? axis.scale.getRawIndex(labelItem.tickValue)\r\n                : labelItem.tickValue;\r\n            var formattedLabel = labelItem.formattedLabel;\r\n            var rawLabel = labelItem.rawLabel;\r\n            var itemLabelModel = labelModel;\r\n            if (rawCategoryData && rawCategoryData[tickValue]) {\r\n                var rawCategoryItem = rawCategoryData[tickValue];\r\n                if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\r\n                    itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\r\n                }\r\n            }\r\n            var textColor = itemLabelModel.getTextColor()\r\n                || axisModel.get(['axisLine', 'lineStyle', 'color']);\r\n            var tickCoord = axis.dataToCoord(tickValue);\r\n            var textEl = new ZRText({\r\n                x: tickCoord,\r\n                y: opt.labelOffset + opt.labelDirection * labelMargin,\r\n                rotation: labelLayout.rotation,\r\n                silent: silent,\r\n                z2: 10,\r\n                style: createTextStyle(itemLabelModel, {\r\n                    text: formattedLabel,\r\n                    align: itemLabelModel.getShallow('align', true)\r\n                        || labelLayout.textAlign,\r\n                    verticalAlign: itemLabelModel.getShallow('verticalAlign', true)\r\n                        || itemLabelModel.getShallow('baseline', true)\r\n                        || labelLayout.textVerticalAlign,\r\n                    fill: typeof textColor === 'function'\r\n                        ? textColor(axis.type === 'category'\r\n                            ? rawLabel\r\n                            : axis.type === 'value'\r\n                                ? tickValue + ''\r\n                                : tickValue, index)\r\n                        : textColor\r\n                })\r\n            });\r\n            textEl.anid = 'label_' + tickValue;\r\n            if (triggerEvent) {\r\n                var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\r\n                eventData.targetType = 'axisLabel';\r\n                eventData.value = rawLabel;\r\n                getECData(textEl).eventData = eventData;\r\n            }\r\n            transformGroup.add(textEl);\r\n            textEl.updateTransform();\r\n            labelEls.push(textEl);\r\n            group.add(textEl);\r\n            textEl.decomposeTransform();\r\n        });\r\n        return labelEls;\r\n    }\n\n    function collect(ecModel, api) {\r\n        var result = {\r\n            axesInfo: {},\r\n            seriesInvolved: false,\r\n            coordSysAxesInfo: {},\r\n            coordSysMap: {}\r\n        };\r\n        collectAxesInfo(result, ecModel, api);\r\n        result.seriesInvolved && collectSeriesInfo(result, ecModel);\r\n        return result;\r\n    }\r\n    function collectAxesInfo(result, ecModel, api) {\r\n        var globalTooltipModel = ecModel.getComponent('tooltip');\r\n        var globalAxisPointerModel = ecModel.getComponent('axisPointer');\r\n        var linksOption = globalAxisPointerModel.get('link', true) || [];\r\n        var linkGroups = [];\r\n        each(api.getCoordinateSystems(), function (coordSys) {\r\n            if (!coordSys.axisPointerEnabled) {\r\n                return;\r\n            }\r\n            var coordSysKey = makeKey(coordSys.model);\r\n            var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\r\n            result.coordSysMap[coordSysKey] = coordSys;\r\n            var coordSysModel = coordSys.model;\r\n            var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\r\n            each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null));\r\n            if (coordSys.getTooltipAxes\r\n                && globalTooltipModel\r\n                && baseTooltipModel.get('show')) {\r\n                var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\r\n                var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\r\n                var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\r\n                if (triggerAxis || cross) {\r\n                    each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\r\n                }\r\n                if (cross) {\r\n                    each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\r\n                }\r\n            }\r\n            function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\r\n                var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\r\n                var axisPointerShow = axisPointerModel.get('show');\r\n                if (!axisPointerShow || (axisPointerShow === 'auto'\r\n                    && !fromTooltip\r\n                    && !isHandleTrigger(axisPointerModel))) {\r\n                    return;\r\n                }\r\n                if (triggerTooltip == null) {\r\n                    triggerTooltip = axisPointerModel.get('triggerTooltip');\r\n                }\r\n                axisPointerModel = fromTooltip\r\n                    ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip)\r\n                    : axisPointerModel;\r\n                var snap = axisPointerModel.get('snap');\r\n                var axisKey = makeKey(axis.model);\r\n                var involveSeries = triggerTooltip || snap || axis.type === 'category';\r\n                var axisInfo = result.axesInfo[axisKey] = {\r\n                    key: axisKey,\r\n                    axis: axis,\r\n                    coordSys: coordSys,\r\n                    axisPointerModel: axisPointerModel,\r\n                    triggerTooltip: triggerTooltip,\r\n                    involveSeries: involveSeries,\r\n                    snap: snap,\r\n                    useHandle: isHandleTrigger(axisPointerModel),\r\n                    seriesModels: [],\r\n                    linkGroup: null\r\n                };\r\n                axesInfoInCoordSys[axisKey] = axisInfo;\r\n                result.seriesInvolved = result.seriesInvolved || involveSeries;\r\n                var groupIndex = getLinkGroupIndex(linksOption, axis);\r\n                if (groupIndex != null) {\r\n                    var linkGroup = linkGroups[groupIndex]\r\n                        || (linkGroups[groupIndex] = { axesInfo: {} });\r\n                    linkGroup.axesInfo[axisKey] = axisInfo;\r\n                    linkGroup.mapper = linksOption[groupIndex].mapper;\r\n                    axisInfo.linkGroup = linkGroup;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    function makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\r\n        var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\r\n        var fields = [\r\n            'type', 'snap', 'lineStyle', 'shadowStyle', 'label',\r\n            'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'\r\n        ];\r\n        var volatileOption = {};\r\n        each(fields, function (field) {\r\n            volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\r\n        });\r\n        volatileOption.snap = axis.type !== 'category' && !!triggerTooltip;\r\n        if (tooltipAxisPointerModel.get('type') === 'cross') {\r\n            volatileOption.type = 'line';\r\n        }\r\n        var labelOption = volatileOption.label || (volatileOption.label = {});\r\n        labelOption.show == null && (labelOption.show = false);\r\n        if (fromTooltip === 'cross') {\r\n            var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\r\n            labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true;\r\n            if (!triggerTooltip) {\r\n                var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\r\n                crossStyle && defaults(labelOption, crossStyle.textStyle);\r\n            }\r\n        }\r\n        return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\r\n    }\r\n    function collectSeriesInfo(result, ecModel) {\r\n        ecModel.eachSeries(function (seriesModel) {\r\n            var coordSys = seriesModel.coordinateSystem;\r\n            var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\r\n            var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\r\n            if (!coordSys\r\n                || seriesTooltipTrigger === 'none'\r\n                || seriesTooltipTrigger === false\r\n                || seriesTooltipTrigger === 'item'\r\n                || seriesTooltipShow === false\r\n                || seriesModel.get(['axisPointer', 'show'], true) === false) {\r\n                return;\r\n            }\r\n            each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\r\n                var axis = axisInfo.axis;\r\n                if (coordSys.getAxis(axis.dim) === axis) {\r\n                    axisInfo.seriesModels.push(seriesModel);\r\n                    axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\r\n                    axisInfo.seriesDataCount += seriesModel.getData().count();\r\n                }\r\n            });\r\n        });\r\n    }\r\n    function getLinkGroupIndex(linksOption, axis) {\r\n        var axisModel = axis.model;\r\n        var dim = axis.dim;\r\n        for (var i = 0; i < linksOption.length; i++) {\r\n            var linkOption = linksOption[i] || {};\r\n            if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id)\r\n                || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex)\r\n                || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\r\n                return i;\r\n            }\r\n        }\r\n    }\r\n    function checkPropInLink(linkPropValue, axisPropValue) {\r\n        return linkPropValue === 'all'\r\n            || (isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0)\r\n            || linkPropValue === axisPropValue;\r\n    }\r\n    function fixValue(axisModel) {\r\n        var axisInfo = getAxisInfo(axisModel);\r\n        if (!axisInfo) {\r\n            return;\r\n        }\r\n        var axisPointerModel = axisInfo.axisPointerModel;\r\n        var scale = axisInfo.axis.scale;\r\n        var option = axisPointerModel.option;\r\n        var status = axisPointerModel.get('status');\r\n        var value = axisPointerModel.get('value');\r\n        if (value != null) {\r\n            value = scale.parse(value);\r\n        }\r\n        var useHandle = isHandleTrigger(axisPointerModel);\r\n        if (status == null) {\r\n            option.status = useHandle ? 'show' : 'hide';\r\n        }\r\n        var extent = scale.getExtent().slice();\r\n        extent[0] > extent[1] && extent.reverse();\r\n        if (value == null\r\n            || value > extent[1]) {\r\n            value = extent[1];\r\n        }\r\n        if (value < extent[0]) {\r\n            value = extent[0];\r\n        }\r\n        option.value = value;\r\n        if (useHandle) {\r\n            option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\r\n        }\r\n    }\r\n    function getAxisInfo(axisModel) {\r\n        var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {})\r\n            .coordSysAxesInfo;\r\n        return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\r\n    }\r\n    function getAxisPointerModel(axisModel) {\r\n        var axisInfo = getAxisInfo(axisModel);\r\n        return axisInfo && axisInfo.axisPointerModel;\r\n    }\r\n    function isHandleTrigger(axisPointerModel) {\r\n        return !!axisPointerModel.get(['handle', 'show']);\r\n    }\r\n    function makeKey(model) {\r\n        return model.type + '||' + model.id;\r\n    }\n\n    var axisPointerClazz = {};\r\n    var AxisView = (function (_super) {\r\n        __extends(AxisView, _super);\r\n        function AxisView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = AxisView.type;\r\n            return _this;\r\n        }\r\n        AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\r\n            this.axisPointerClass && fixValue(axisModel);\r\n            _super.prototype.render.apply(this, arguments);\r\n            this._doUpdateAxisPointerClass(axisModel, api, true);\r\n        };\r\n        AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\r\n            this._doUpdateAxisPointerClass(axisModel, api, false);\r\n        };\r\n        AxisView.prototype.remove = function (ecModel, api) {\r\n            var axisPointer = this._axisPointer;\r\n            axisPointer && axisPointer.remove(api);\r\n        };\r\n        AxisView.prototype.dispose = function (ecModel, api) {\r\n            this._disposeAxisPointer(api);\r\n            _super.prototype.dispose.apply(this, arguments);\r\n        };\r\n        AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\r\n            var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\r\n            if (!Clazz) {\r\n                return;\r\n            }\r\n            var axisPointerModel = getAxisPointerModel(axisModel);\r\n            axisPointerModel\r\n                ? (this._axisPointer || (this._axisPointer = new Clazz()))\r\n                    .render(axisModel, axisPointerModel, api, forceRender)\r\n                : this._disposeAxisPointer(api);\r\n        };\r\n        AxisView.prototype._disposeAxisPointer = function (api) {\r\n            this._axisPointer && this._axisPointer.dispose(api);\r\n            this._axisPointer = null;\r\n        };\r\n        AxisView.registerAxisPointerClass = function (type, clazz) {\r\n            if (__DEV__) {\r\n                if (axisPointerClazz[type]) {\r\n                    throw new Error('axisPointer ' + type + ' exists');\r\n                }\r\n            }\r\n            axisPointerClazz[type] = clazz;\r\n        };\r\n        AxisView.getAxisPointerClass = function (type) {\r\n            return type && axisPointerClazz[type];\r\n        };\r\n        AxisView.type = 'axis';\r\n        return AxisView;\r\n    }(ComponentView));\n\n    function layout$1(gridModel, axisModel, opt) {\r\n        opt = opt || {};\r\n        var grid = gridModel.coordinateSystem;\r\n        var axis = axisModel.axis;\r\n        var layout = {};\r\n        var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\r\n        var rawAxisPosition = axis.position;\r\n        var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\r\n        var axisDim = axis.dim;\r\n        var rect = grid.getRect();\r\n        var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\r\n        var idx = { left: 0, right: 1, top: 0, bottom: 1, onZero: 2 };\r\n        var axisOffset = axisModel.get('offset') || 0;\r\n        var posBound = axisDim === 'x'\r\n            ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset]\r\n            : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\r\n        if (otherAxisOnZeroOf) {\r\n            var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\r\n            posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\r\n        }\r\n        layout.position = [\r\n            axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0],\r\n            axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]\r\n        ];\r\n        layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1);\r\n        var dirMap = { top: -1, bottom: 1, left: -1, right: 1 };\r\n        layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\r\n        layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\r\n        if (axisModel.get(['axisTick', 'inside'])) {\r\n            layout.tickDirection = -layout.tickDirection;\r\n        }\r\n        if (retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\r\n            layout.labelDirection = -layout.labelDirection;\r\n        }\r\n        var labelRotate = axisModel.get(['axisLabel', 'rotate']);\r\n        layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate;\r\n        layout.z2 = 1;\r\n        return layout;\r\n    }\r\n    function isCartesian2DSeries(seriesModel) {\r\n        return seriesModel.get('coordinateSystem') === 'cartesian2d';\r\n    }\r\n    function findAxisModels(seriesModel) {\r\n        var axisModelMap = {\r\n            xAxisModel: null,\r\n            yAxisModel: null\r\n        };\r\n        each(axisModelMap, function (v, key) {\r\n            var axisType = key.replace(/Model$/, '');\r\n            var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\r\n            if (__DEV__) {\r\n                if (!axisModel) {\r\n                    throw new Error(axisType + ' \"' + retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\r\n                }\r\n            }\r\n            axisModelMap[key] = axisModel;\r\n        });\r\n        return axisModelMap;\r\n    }\n\n    var inner$6 = makeInner();\r\n    function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\r\n        var axis = axisModel.axis;\r\n        if (axis.scale.isBlank()) {\r\n            return;\r\n        }\r\n        var splitAreaModel = axisModel.getModel('splitArea');\r\n        var areaStyleModel = splitAreaModel.getModel('areaStyle');\r\n        var areaColors = areaStyleModel.get('color');\r\n        var gridRect = gridModel.coordinateSystem.getRect();\r\n        var ticksCoords = axis.getTicksCoords({\r\n            tickModel: splitAreaModel,\r\n            clamp: true\r\n        });\r\n        if (!ticksCoords.length) {\r\n            return;\r\n        }\r\n        var areaColorsLen = areaColors.length;\r\n        var lastSplitAreaColors = inner$6(axisView).splitAreaColors;\r\n        var newSplitAreaColors = createHashMap();\r\n        var colorIndex = 0;\r\n        if (lastSplitAreaColors) {\r\n            for (var i = 0; i < ticksCoords.length; i++) {\r\n                var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\r\n                if (cIndex != null) {\r\n                    colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        var prev = axis.toGlobalCoord(ticksCoords[0].coord);\r\n        var areaStyle = areaStyleModel.getAreaStyle();\r\n        areaColors = isArray(areaColors) ? areaColors : [areaColors];\r\n        for (var i = 1; i < ticksCoords.length; i++) {\r\n            var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\r\n            var x = void 0;\r\n            var y = void 0;\r\n            var width = void 0;\r\n            var height = void 0;\r\n            if (axis.isHorizontal()) {\r\n                x = prev;\r\n                y = gridRect.y;\r\n                width = tickCoord - x;\r\n                height = gridRect.height;\r\n                prev = x + width;\r\n            }\r\n            else {\r\n                x = gridRect.x;\r\n                y = prev;\r\n                width = gridRect.width;\r\n                height = tickCoord - y;\r\n                prev = y + height;\r\n            }\r\n            var tickValue = ticksCoords[i - 1].tickValue;\r\n            tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\r\n            axisGroup.add(new Rect({\r\n                anid: tickValue != null ? 'area_' + tickValue : null,\r\n                shape: {\r\n                    x: x,\r\n                    y: y,\r\n                    width: width,\r\n                    height: height\r\n                },\r\n                style: defaults({\r\n                    fill: areaColors[colorIndex]\r\n                }, areaStyle),\r\n                autoBatch: true,\r\n                silent: true\r\n            }));\r\n            colorIndex = (colorIndex + 1) % areaColorsLen;\r\n        }\r\n        inner$6(axisView).splitAreaColors = newSplitAreaColors;\r\n    }\r\n    function rectCoordAxisHandleRemove(axisView) {\r\n        inner$6(axisView).splitAreaColors = null;\r\n    }\n\n    var axisBuilderAttrs = [\r\n        'axisLine', 'axisTickLabel', 'axisName'\r\n    ];\r\n    var selfBuilderAttrs = [\r\n        'splitArea', 'splitLine', 'minorSplitLine'\r\n    ];\r\n    var CartesianAxisView = (function (_super) {\r\n        __extends(CartesianAxisView, _super);\r\n        function CartesianAxisView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = CartesianAxisView.type;\r\n            _this.axisPointerClass = 'CartesianAxisPointer';\r\n            return _this;\r\n        }\r\n        CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\r\n            this.group.removeAll();\r\n            var oldAxisGroup = this._axisGroup;\r\n            this._axisGroup = new Group();\r\n            this.group.add(this._axisGroup);\r\n            if (!axisModel.get('show')) {\r\n                return;\r\n            }\r\n            var gridModel = axisModel.getCoordSysModel();\r\n            var layout = layout$1(gridModel, axisModel);\r\n            var axisBuilder = new AxisBuilder(axisModel, extend({\r\n                handleAutoShown: function (elementType) {\r\n                    var cartesians = gridModel.coordinateSystem.getCartesians();\r\n                    for (var i = 0; i < cartesians.length; i++) {\r\n                        var otherAxisType = cartesians[i].getOtherAxis(axisModel.axis).type;\r\n                        if (otherAxisType === 'value' || otherAxisType === 'log') {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n            }, layout));\r\n            each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\r\n            this._axisGroup.add(axisBuilder.getGroup());\r\n            each(selfBuilderAttrs, function (name) {\r\n                if (axisModel.get([name, 'show'])) {\r\n                    axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\r\n                }\r\n            }, this);\r\n            groupTransition(oldAxisGroup, this._axisGroup, axisModel);\r\n            _super.prototype.render.call(this, axisModel, ecModel, api, payload);\r\n        };\r\n        CartesianAxisView.prototype.remove = function () {\r\n            rectCoordAxisHandleRemove(this);\r\n        };\r\n        CartesianAxisView.type = 'cartesianAxis';\r\n        return CartesianAxisView;\r\n    }(AxisView));\r\n    var axisElementBuilders = {\r\n        splitLine: function (axisView, axisGroup, axisModel, gridModel) {\r\n            var axis = axisModel.axis;\r\n            if (axis.scale.isBlank()) {\r\n                return;\r\n            }\r\n            var splitLineModel = axisModel.getModel('splitLine');\r\n            var lineStyleModel = splitLineModel.getModel('lineStyle');\r\n            var lineColors = lineStyleModel.get('color');\r\n            lineColors = isArray(lineColors) ? lineColors : [lineColors];\r\n            var gridRect = gridModel.coordinateSystem.getRect();\r\n            var isHorizontal = axis.isHorizontal();\r\n            var lineCount = 0;\r\n            var ticksCoords = axis.getTicksCoords({\r\n                tickModel: splitLineModel\r\n            });\r\n            var p1 = [];\r\n            var p2 = [];\r\n            var lineStyle = lineStyleModel.getLineStyle();\r\n            for (var i = 0; i < ticksCoords.length; i++) {\r\n                var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\r\n                if (isHorizontal) {\r\n                    p1[0] = tickCoord;\r\n                    p1[1] = gridRect.y;\r\n                    p2[0] = tickCoord;\r\n                    p2[1] = gridRect.y + gridRect.height;\r\n                }\r\n                else {\r\n                    p1[0] = gridRect.x;\r\n                    p1[1] = tickCoord;\r\n                    p2[0] = gridRect.x + gridRect.width;\r\n                    p2[1] = tickCoord;\r\n                }\r\n                var colorIndex = (lineCount++) % lineColors.length;\r\n                var tickValue = ticksCoords[i].tickValue;\r\n                axisGroup.add(new Line({\r\n                    anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\r\n                    subPixelOptimize: true,\r\n                    autoBatch: true,\r\n                    shape: {\r\n                        x1: p1[0],\r\n                        y1: p1[1],\r\n                        x2: p2[0],\r\n                        y2: p2[1]\r\n                    },\r\n                    style: defaults({\r\n                        stroke: lineColors[colorIndex]\r\n                    }, lineStyle),\r\n                    silent: true\r\n                }));\r\n            }\r\n        },\r\n        minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\r\n            var axis = axisModel.axis;\r\n            var minorSplitLineModel = axisModel.getModel('minorSplitLine');\r\n            var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\r\n            var gridRect = gridModel.coordinateSystem.getRect();\r\n            var isHorizontal = axis.isHorizontal();\r\n            var minorTicksCoords = axis.getMinorTicksCoords();\r\n            if (!minorTicksCoords.length) {\r\n                return;\r\n            }\r\n            var p1 = [];\r\n            var p2 = [];\r\n            var lineStyle = lineStyleModel.getLineStyle();\r\n            for (var i = 0; i < minorTicksCoords.length; i++) {\r\n                for (var k = 0; k < minorTicksCoords[i].length; k++) {\r\n                    var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\r\n                    if (isHorizontal) {\r\n                        p1[0] = tickCoord;\r\n                        p1[1] = gridRect.y;\r\n                        p2[0] = tickCoord;\r\n                        p2[1] = gridRect.y + gridRect.height;\r\n                    }\r\n                    else {\r\n                        p1[0] = gridRect.x;\r\n                        p1[1] = tickCoord;\r\n                        p2[0] = gridRect.x + gridRect.width;\r\n                        p2[1] = tickCoord;\r\n                    }\r\n                    axisGroup.add(new Line({\r\n                        anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\r\n                        subPixelOptimize: true,\r\n                        autoBatch: true,\r\n                        shape: {\r\n                            x1: p1[0],\r\n                            y1: p1[1],\r\n                            x2: p2[0],\r\n                            y2: p2[1]\r\n                        },\r\n                        style: lineStyle,\r\n                        silent: true\r\n                    }));\r\n                }\r\n            }\r\n        },\r\n        splitArea: function (axisView, axisGroup, axisModel, gridModel) {\r\n            rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\r\n        }\r\n    };\r\n    var CartesianXAxisView = (function (_super) {\r\n        __extends(CartesianXAxisView, _super);\r\n        function CartesianXAxisView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = CartesianXAxisView.type;\r\n            return _this;\r\n        }\r\n        CartesianXAxisView.type = 'xAxis';\r\n        return CartesianXAxisView;\r\n    }(CartesianAxisView));\r\n    var CartesianYAxisView = (function (_super) {\r\n        __extends(CartesianYAxisView, _super);\r\n        function CartesianYAxisView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = CartesianXAxisView.type;\r\n            return _this;\r\n        }\r\n        CartesianYAxisView.type = 'yAxis';\r\n        return CartesianYAxisView;\r\n    }(CartesianAxisView));\r\n    ComponentView.registerClass(CartesianXAxisView);\r\n    ComponentView.registerClass(CartesianYAxisView);\n\n    registerProcessor(PRIORITY.PROCESSOR.FILTER + 10, {\r\n        getTargetSeries: function (ecModel) {\r\n            var seriesModelMap = createHashMap();\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                isCartesian2DSeries(seriesModel) && seriesModelMap.set(seriesModel.uid, seriesModel);\r\n            });\r\n            return seriesModelMap;\r\n        },\r\n        overallReset: function (ecModel, api) {\r\n            var seriesRecords = [];\r\n            var axisRecordMap = createHashMap();\r\n            prepareDataExtentOnAxis(ecModel, axisRecordMap, seriesRecords);\r\n            calculateFilteredExtent(axisRecordMap, seriesRecords);\r\n            shrinkAxisExtent(axisRecordMap);\r\n        }\r\n    });\r\n    function prepareDataExtentOnAxis(ecModel, axisRecordMap, seriesRecords) {\r\n        ecModel.eachSeries(function (seriesModel) {\r\n            if (!isCartesian2DSeries(seriesModel)) {\r\n                return;\r\n            }\r\n            var axesModelMap = findAxisModels(seriesModel);\r\n            var xAxisModel = axesModelMap.xAxisModel;\r\n            var yAxisModel = axesModelMap.yAxisModel;\r\n            var xAxis = xAxisModel.axis;\r\n            var yAxis = yAxisModel.axis;\r\n            var xRawExtentInfo = xAxis.scale.rawExtentInfo;\r\n            var yRawExtentInfo = yAxis.scale.rawExtentInfo;\r\n            var data = seriesModel.getData();\r\n            if ((xRawExtentInfo && xRawExtentInfo.frozen)\r\n                || (yRawExtentInfo && yRawExtentInfo.frozen)) {\r\n                return;\r\n            }\r\n            seriesRecords.push({\r\n                seriesModel: seriesModel,\r\n                xAxisModel: xAxisModel,\r\n                yAxisModel: yAxisModel\r\n            });\r\n            unionAxisExtentFromData(prepareAxisRecord(axisRecordMap, xAxisModel).condExtent, data, xAxis.dim);\r\n            unionAxisExtentFromData(prepareAxisRecord(axisRecordMap, yAxisModel).condExtent, data, yAxis.dim);\r\n        });\r\n    }\r\n    function calculateFilteredExtent(axisRecordMap, seriesRecords) {\r\n        each(seriesRecords, function (seriesRecord) {\r\n            var xAxisModel = seriesRecord.xAxisModel;\r\n            var yAxisModel = seriesRecord.yAxisModel;\r\n            var xAxis = xAxisModel.axis;\r\n            var yAxis = yAxisModel.axis;\r\n            var xAxisRecord = prepareAxisRecord(axisRecordMap, xAxisModel);\r\n            var yAxisRecord = prepareAxisRecord(axisRecordMap, yAxisModel);\r\n            xAxisRecord.rawExtentInfo = ensureScaleRawExtentInfo(xAxis.scale, xAxisModel, xAxisRecord.condExtent);\r\n            yAxisRecord.rawExtentInfo = ensureScaleRawExtentInfo(yAxis.scale, yAxisModel, yAxisRecord.condExtent);\r\n            xAxisRecord.rawExtentResult = xAxisRecord.rawExtentInfo.calculate();\r\n            yAxisRecord.rawExtentResult = yAxisRecord.rawExtentInfo.calculate();\r\n            var data = seriesRecord.seriesModel.getData();\r\n            var condDimMap = {};\r\n            var tarDimMap = {};\r\n            var condAxis;\r\n            var tarAxisRecord;\r\n            function addCondition(axis, axisRecord) {\r\n                var condExtent = axisRecord.condExtent;\r\n                var rawExtentResult = axisRecord.rawExtentResult;\r\n                if (axis.type === 'category'\r\n                    && (condExtent[0] < rawExtentResult.min || rawExtentResult.max < condExtent[1])) {\r\n                    each(getDataDimensionsOnAxis(data, axis.dim), function (dataDim) {\r\n                        if (!hasOwn(condDimMap, dataDim)) {\r\n                            condDimMap[dataDim] = true;\r\n                            condAxis = axis;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            function addTarget(axis, axisRecord) {\r\n                var rawExtentResult = axisRecord.rawExtentResult;\r\n                if (axis.type !== 'category'\r\n                    && (!rawExtentResult.minFixed || !rawExtentResult.maxFixed)) {\r\n                    each(getDataDimensionsOnAxis(data, axis.dim), function (dataDim) {\r\n                        if (!hasOwn(condDimMap, dataDim) && !hasOwn(tarDimMap, dataDim)) {\r\n                            tarDimMap[dataDim] = true;\r\n                            tarAxisRecord = axisRecord;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            addCondition(xAxis, xAxisRecord);\r\n            addCondition(yAxis, yAxisRecord);\r\n            addTarget(xAxis, xAxisRecord);\r\n            addTarget(yAxis, yAxisRecord);\r\n            var condDims = keys(condDimMap);\r\n            var tarDims = keys(tarDimMap);\r\n            var tarDimExtents = map(tarDims, function () {\r\n                return initExtent();\r\n            });\r\n            var condDimsLen = condDims.length;\r\n            var tarDimsLen = tarDims.length;\r\n            if (!condDimsLen || !tarDimsLen) {\r\n                return;\r\n            }\r\n            var singleCondDim = condDimsLen === 1 ? condDims[0] : null;\r\n            var singleTarDim = tarDimsLen === 1 ? tarDims[0] : null;\r\n            var dataLen = data.count();\r\n            if (singleCondDim && singleTarDim) {\r\n                for (var dataIdx = 0; dataIdx < dataLen; dataIdx++) {\r\n                    var condVal = data.get(singleCondDim, dataIdx);\r\n                    if (condAxis.scale.isInExtentRange(condVal)) {\r\n                        unionExtent(tarDimExtents[0], data.get(singleTarDim, dataIdx));\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                for (var dataIdx = 0; dataIdx < dataLen; dataIdx++) {\r\n                    for (var j = 0; j < condDimsLen; j++) {\r\n                        var condVal = data.get(condDims[j], dataIdx);\r\n                        if (condAxis.scale.isInExtentRange(condVal)) {\r\n                            for (var k = 0; k < tarDimsLen; k++) {\r\n                                unionExtent(tarDimExtents[k], data.get(tarDims[k], dataIdx));\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            each(tarDimExtents, function (tarDimExtent, i) {\r\n                var dim = tarDims[i];\r\n                data.setApproximateExtent(tarDimExtent, dim);\r\n                var tarAxisExtent = tarAxisRecord.tarExtent = tarAxisRecord.tarExtent || initExtent();\r\n                unionExtent(tarAxisExtent, tarDimExtent[0]);\r\n                unionExtent(tarAxisExtent, tarDimExtent[1]);\r\n            });\r\n        });\r\n    }\r\n    function shrinkAxisExtent(axisRecordMap) {\r\n        axisRecordMap.each(function (axisRecord) {\r\n            var tarAxisExtent = axisRecord.tarExtent;\r\n            if (tarAxisExtent) {\r\n                var rawExtentResult = axisRecord.rawExtentResult;\r\n                var rawExtentInfo = axisRecord.rawExtentInfo;\r\n                if (!rawExtentResult.minFixed && tarAxisExtent[0] > rawExtentResult.min) {\r\n                    rawExtentInfo.modifyDataMinMax('min', tarAxisExtent[0]);\r\n                }\r\n                if (!rawExtentResult.maxFixed && tarAxisExtent[1] < rawExtentResult.max) {\r\n                    rawExtentInfo.modifyDataMinMax('max', tarAxisExtent[1]);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    function prepareAxisRecord(axisRecordMap, axisModel) {\r\n        return axisRecordMap.get(axisModel.uid)\r\n            || axisRecordMap.set(axisModel.uid, { condExtent: initExtent() });\r\n    }\r\n    function initExtent() {\r\n        return [Infinity, -Infinity];\r\n    }\r\n    function unionExtent(extent, val) {\r\n        val < extent[0] && (extent[0] = val);\r\n        val > extent[1] && (extent[1] = val);\r\n    }\n\n    var GridModel = (function (_super) {\r\n        __extends(GridModel, _super);\r\n        function GridModel() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GridModel.type = 'grid';\r\n        GridModel.dependencies = ['xAxis', 'yAxis'];\r\n        GridModel.layoutMode = 'box';\r\n        GridModel.defaultOption = {\r\n            show: false,\r\n            zlevel: 0,\r\n            z: 0,\r\n            left: '10%',\r\n            top: 60,\r\n            right: '10%',\r\n            bottom: 60,\r\n            containLabel: false,\r\n            backgroundColor: 'rgba(0,0,0,0)',\r\n            borderWidth: 1,\r\n            borderColor: '#ccc'\r\n        };\r\n        return GridModel;\r\n    }(ComponentModel));\n\n    var GridView = (function (_super) {\r\n        __extends(GridView, _super);\r\n        function GridView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'grid';\r\n            return _this;\r\n        }\r\n        GridView.prototype.render = function (gridModel, ecModel) {\r\n            this.group.removeAll();\r\n            if (gridModel.get('show')) {\r\n                this.group.add(new Rect({\r\n                    shape: gridModel.coordinateSystem.getRect(),\r\n                    style: defaults({\r\n                        fill: gridModel.get('backgroundColor')\r\n                    }, gridModel.getItemStyle()),\r\n                    silent: true,\r\n                    z2: -1\r\n                }));\r\n            }\r\n        };\r\n        GridView.type = 'grid';\r\n        return GridView;\r\n    }(ComponentView));\r\n    ComponentView.registerClass(GridView);\r\n    ComponentModel.registerClass(GridModel);\r\n    registerPreprocessor(function (option) {\r\n        if (option.xAxis && option.yAxis && !option.grid) {\r\n            option.grid = {};\r\n        }\r\n    });\n\n    registerLayout(layoutPoints('line'));\r\n    registerProcessor(PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n\n    var Cartesian = (function () {\r\n        function Cartesian(name) {\r\n            this.type = 'cartesian';\r\n            this._dimList = [];\r\n            this._axes = {};\r\n            this.name = name || '';\r\n        }\r\n        Cartesian.prototype.getAxis = function (dim) {\r\n            return this._axes[dim];\r\n        };\r\n        Cartesian.prototype.getAxes = function () {\r\n            return map(this._dimList, function (dim) {\r\n                return this._axes[dim];\r\n            }, this);\r\n        };\r\n        Cartesian.prototype.getAxesByScale = function (scaleType) {\r\n            scaleType = scaleType.toLowerCase();\r\n            return filter(this.getAxes(), function (axis) {\r\n                return axis.scale.type === scaleType;\r\n            });\r\n        };\r\n        Cartesian.prototype.addAxis = function (axis) {\r\n            var dim = axis.dim;\r\n            this._axes[dim] = axis;\r\n            this._dimList.push(dim);\r\n        };\r\n        return Cartesian;\r\n    }());\n\n    var cartesian2DDimensions = ['x', 'y'];\r\n    var Cartesian2D = (function (_super) {\r\n        __extends(Cartesian2D, _super);\r\n        function Cartesian2D() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'cartesian2d';\r\n            _this.dimensions = cartesian2DDimensions;\r\n            return _this;\r\n        }\r\n        Cartesian2D.prototype.getBaseAxis = function () {\r\n            return this.getAxesByScale('ordinal')[0]\r\n                || this.getAxesByScale('time')[0]\r\n                || this.getAxis('x');\r\n        };\r\n        Cartesian2D.prototype.containPoint = function (point) {\r\n            var axisX = this.getAxis('x');\r\n            var axisY = this.getAxis('y');\r\n            return axisX.contain(axisX.toLocalCoord(point[0]))\r\n                && axisY.contain(axisY.toLocalCoord(point[1]));\r\n        };\r\n        Cartesian2D.prototype.containData = function (data) {\r\n            return this.getAxis('x').containData(data[0])\r\n                && this.getAxis('y').containData(data[1]);\r\n        };\r\n        Cartesian2D.prototype.dataToPoint = function (data, reserved, out) {\r\n            var xAxis = this.getAxis('x');\r\n            var yAxis = this.getAxis('y');\r\n            out = out || [];\r\n            out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(data[0]));\r\n            out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(data[1]));\r\n            return out;\r\n        };\r\n        Cartesian2D.prototype.clampData = function (data, out) {\r\n            var xScale = this.getAxis('x').scale;\r\n            var yScale = this.getAxis('y').scale;\r\n            var xAxisExtent = xScale.getExtent();\r\n            var yAxisExtent = yScale.getExtent();\r\n            var x = xScale.parse(data[0]);\r\n            var y = yScale.parse(data[1]);\r\n            out = out || [];\r\n            out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\r\n            out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\r\n            return out;\r\n        };\r\n        Cartesian2D.prototype.pointToData = function (point, out) {\r\n            var xAxis = this.getAxis('x');\r\n            var yAxis = this.getAxis('y');\r\n            out = out || [];\r\n            out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]));\r\n            out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]));\r\n            return out;\r\n        };\r\n        Cartesian2D.prototype.getOtherAxis = function (axis) {\r\n            return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\r\n        };\r\n        Cartesian2D.prototype.getArea = function () {\r\n            var xExtent = this.getAxis('x').getGlobalExtent();\r\n            var yExtent = this.getAxis('y').getGlobalExtent();\r\n            var x = Math.min(xExtent[0], xExtent[1]);\r\n            var y = Math.min(yExtent[0], yExtent[1]);\r\n            var width = Math.max(xExtent[0], xExtent[1]) - x;\r\n            var height = Math.max(yExtent[0], yExtent[1]) - y;\r\n            return new BoundingRect(x, y, width, height);\r\n        };\r\n        return Cartesian2D;\r\n    }(Cartesian));\n\n    var Axis2D = (function (_super) {\r\n        __extends(Axis2D, _super);\r\n        function Axis2D(dim, scale, coordExtent, axisType, position) {\r\n            var _this = _super.call(this, dim, scale, coordExtent) || this;\r\n            _this.index = 0;\r\n            _this.type = axisType || 'value';\r\n            _this.position = position || 'bottom';\r\n            return _this;\r\n        }\r\n        Axis2D.prototype.isHorizontal = function () {\r\n            var position = this.position;\r\n            return position === 'top' || position === 'bottom';\r\n        };\r\n        Axis2D.prototype.getGlobalExtent = function (asc) {\r\n            var ret = this.getExtent();\r\n            ret[0] = this.toGlobalCoord(ret[0]);\r\n            ret[1] = this.toGlobalCoord(ret[1]);\r\n            asc && ret[0] > ret[1] && ret.reverse();\r\n            return ret;\r\n        };\r\n        Axis2D.prototype.pointToData = function (point, clamp) {\r\n            return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\r\n        };\r\n        Axis2D.prototype.setCategorySortInfo = function (info) {\r\n            if (this.type !== 'category') {\r\n                return false;\r\n            }\r\n            this.model.option.categorySortInfo = info;\r\n            this.scale.setCategorySortInfo(info);\r\n        };\r\n        return Axis2D;\r\n    }(Axis));\n\n    var Grid = (function () {\r\n        function Grid(gridModel, ecModel, api) {\r\n            this.type = 'grid';\r\n            this._coordsMap = {};\r\n            this._coordsList = [];\r\n            this._axesMap = {};\r\n            this._axesList = [];\r\n            this.axisPointerEnabled = true;\r\n            this.dimensions = cartesian2DDimensions;\r\n            this._initCartesian(gridModel, ecModel, api);\r\n            this.model = gridModel;\r\n        }\r\n        Grid.prototype.getRect = function () {\r\n            return this._rect;\r\n        };\r\n        Grid.prototype.update = function (ecModel, api) {\r\n            var axesMap = this._axesMap;\r\n            this._updateScale(ecModel, this.model);\r\n            each(axesMap.x, function (xAxis) {\r\n                niceScaleExtent(xAxis.scale, xAxis.model);\r\n            });\r\n            each(axesMap.y, function (yAxis) {\r\n                niceScaleExtent(yAxis.scale, yAxis.model);\r\n            });\r\n            var onZeroRecords = {};\r\n            each(axesMap.x, function (xAxis) {\r\n                fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\r\n            });\r\n            each(axesMap.y, function (yAxis) {\r\n                fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\r\n            });\r\n            this.resize(this.model, api);\r\n        };\r\n        Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\r\n            var gridRect = getLayoutRect(gridModel.getBoxLayoutParams(), {\r\n                width: api.getWidth(),\r\n                height: api.getHeight()\r\n            });\r\n            this._rect = gridRect;\r\n            var axesList = this._axesList;\r\n            adjustAxes();\r\n            if (!ignoreContainLabel && gridModel.get('containLabel')) {\r\n                each(axesList, function (axis) {\r\n                    if (!axis.model.get(['axisLabel', 'inside'])) {\r\n                        var labelUnionRect = estimateLabelUnionRect(axis);\r\n                        if (labelUnionRect) {\r\n                            var dim = axis.isHorizontal() ? 'height' : 'width';\r\n                            var margin = axis.model.get(['axisLabel', 'margin']);\r\n                            gridRect[dim] -= labelUnionRect[dim] + margin;\r\n                            if (axis.position === 'top') {\r\n                                gridRect.y += labelUnionRect.height + margin;\r\n                            }\r\n                            else if (axis.position === 'left') {\r\n                                gridRect.x += labelUnionRect.width + margin;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                adjustAxes();\r\n            }\r\n            function adjustAxes() {\r\n                each(axesList, function (axis) {\r\n                    var isHorizontal = axis.isHorizontal();\r\n                    var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\r\n                    var idx = axis.inverse ? 1 : 0;\r\n                    axis.setExtent(extent[idx], extent[1 - idx]);\r\n                    updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\r\n                });\r\n            }\r\n        };\r\n        Grid.prototype.getAxis = function (dim, axisIndex) {\r\n            var axesMapOnDim = this._axesMap[dim];\r\n            if (axesMapOnDim != null) {\r\n                return axesMapOnDim[axisIndex || 0];\r\n            }\r\n        };\r\n        Grid.prototype.getAxes = function () {\r\n            return this._axesList.slice();\r\n        };\r\n        Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\r\n            if (xAxisIndex != null && yAxisIndex != null) {\r\n                var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\r\n                return this._coordsMap[key];\r\n            }\r\n            if (isObject(xAxisIndex)) {\r\n                yAxisIndex = xAxisIndex.yAxisIndex;\r\n                xAxisIndex = xAxisIndex.xAxisIndex;\r\n            }\r\n            for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\r\n                if (coordList[i].getAxis('x').index === xAxisIndex\r\n                    || coordList[i].getAxis('y').index === yAxisIndex) {\r\n                    return coordList[i];\r\n                }\r\n            }\r\n        };\r\n        Grid.prototype.getCartesians = function () {\r\n            return this._coordsList.slice();\r\n        };\r\n        Grid.prototype.convertToPixel = function (ecModel, finder, value) {\r\n            var target = this._findConvertTarget(finder);\r\n            return target.cartesian\r\n                ? target.cartesian.dataToPoint(value)\r\n                : target.axis\r\n                    ? target.axis.toGlobalCoord(target.axis.dataToCoord(value))\r\n                    : null;\r\n        };\r\n        Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\r\n            var target = this._findConvertTarget(finder);\r\n            return target.cartesian\r\n                ? target.cartesian.pointToData(value)\r\n                : target.axis\r\n                    ? target.axis.coordToData(target.axis.toLocalCoord(value))\r\n                    : null;\r\n        };\r\n        Grid.prototype._findConvertTarget = function (finder) {\r\n            var seriesModel = finder.seriesModel;\r\n            var xAxisModel = finder.xAxisModel\r\n                || (seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0]);\r\n            var yAxisModel = finder.yAxisModel\r\n                || (seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0]);\r\n            var gridModel = finder.gridModel;\r\n            var coordsList = this._coordsList;\r\n            var cartesian;\r\n            var axis;\r\n            if (seriesModel) {\r\n                cartesian = seriesModel.coordinateSystem;\r\n                indexOf(coordsList, cartesian) < 0 && (cartesian = null);\r\n            }\r\n            else if (xAxisModel && yAxisModel) {\r\n                cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\r\n            }\r\n            else if (xAxisModel) {\r\n                axis = this.getAxis('x', xAxisModel.componentIndex);\r\n            }\r\n            else if (yAxisModel) {\r\n                axis = this.getAxis('y', yAxisModel.componentIndex);\r\n            }\r\n            else if (gridModel) {\r\n                var grid = gridModel.coordinateSystem;\r\n                if (grid === this) {\r\n                    cartesian = this._coordsList[0];\r\n                }\r\n            }\r\n            return { cartesian: cartesian, axis: axis };\r\n        };\r\n        Grid.prototype.containPoint = function (point) {\r\n            var coord = this._coordsList[0];\r\n            if (coord) {\r\n                return coord.containPoint(point);\r\n            }\r\n        };\r\n        Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\r\n            var _this = this;\r\n            var grid = this;\r\n            var axisPositionUsed = {\r\n                left: false,\r\n                right: false,\r\n                top: false,\r\n                bottom: false\r\n            };\r\n            var axesMap = {\r\n                x: {},\r\n                y: {}\r\n            };\r\n            var axesCount = {\r\n                x: 0,\r\n                y: 0\r\n            };\r\n            ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\r\n            ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\r\n            if (!axesCount.x || !axesCount.y) {\r\n                this._axesMap = {};\r\n                this._axesList = [];\r\n                return;\r\n            }\r\n            this._axesMap = axesMap;\r\n            each(axesMap.x, function (xAxis, xAxisIndex) {\r\n                each(axesMap.y, function (yAxis, yAxisIndex) {\r\n                    var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\r\n                    var cartesian = new Cartesian2D(key);\r\n                    cartesian.master = _this;\r\n                    cartesian.model = gridModel;\r\n                    _this._coordsMap[key] = cartesian;\r\n                    _this._coordsList.push(cartesian);\r\n                    cartesian.addAxis(xAxis);\r\n                    cartesian.addAxis(yAxis);\r\n                });\r\n            });\r\n            function createAxisCreator(dimName) {\r\n                return function (axisModel, idx) {\r\n                    if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\r\n                        return;\r\n                    }\r\n                    var axisPosition = axisModel.get('position');\r\n                    if (dimName === 'x') {\r\n                        if (axisPosition !== 'top' && axisPosition !== 'bottom') {\r\n                            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (axisPosition !== 'left' && axisPosition !== 'right') {\r\n                            axisPosition = axisPositionUsed.left ? 'right' : 'left';\r\n                        }\r\n                    }\r\n                    axisPositionUsed[axisPosition] = true;\r\n                    var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\r\n                    var isCategory = axis.type === 'category';\r\n                    axis.onBand = isCategory && axisModel.get('boundaryGap');\r\n                    axis.inverse = axisModel.get('inverse');\r\n                    axisModel.axis = axis;\r\n                    axis.model = axisModel;\r\n                    axis.grid = grid;\r\n                    axis.index = idx;\r\n                    grid._axesList.push(axis);\r\n                    axesMap[dimName][idx] = axis;\r\n                    axesCount[dimName]++;\r\n                };\r\n            }\r\n        };\r\n        Grid.prototype._updateScale = function (ecModel, gridModel) {\r\n            each(this._axesList, function (axis) {\r\n                axis.scale.setExtent(Infinity, -Infinity);\r\n                if (axis.type === 'category') {\r\n                    var categorySortInfo = axis.model.get('categorySortInfo');\r\n                    axis.scale.setCategorySortInfo(categorySortInfo);\r\n                }\r\n            });\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                if (isCartesian2DSeries(seriesModel)) {\r\n                    var axesModelMap = findAxisModels(seriesModel);\r\n                    var xAxisModel = axesModelMap.xAxisModel;\r\n                    var yAxisModel = axesModelMap.yAxisModel;\r\n                    if (!isAxisUsedInTheGrid(xAxisModel, gridModel)\r\n                        || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\r\n                        return;\r\n                    }\r\n                    var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\r\n                    var data = seriesModel.getData();\r\n                    var xAxis = cartesian.getAxis('x');\r\n                    var yAxis = cartesian.getAxis('y');\r\n                    if (data.type === 'list') {\r\n                        unionExtent(data, xAxis);\r\n                        unionExtent(data, yAxis);\r\n                    }\r\n                }\r\n            }, this);\r\n            function unionExtent(data, axis) {\r\n                each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\r\n                    axis.scale.unionExtentFromData(data, dim);\r\n                });\r\n            }\r\n        };\r\n        Grid.prototype.getTooltipAxes = function (dim) {\r\n            var baseAxes = [];\r\n            var otherAxes = [];\r\n            each(this.getCartesians(), function (cartesian) {\r\n                var baseAxis = (dim != null && dim !== 'auto')\r\n                    ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\r\n                var otherAxis = cartesian.getOtherAxis(baseAxis);\r\n                indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\r\n                indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\r\n            });\r\n            return { baseAxes: baseAxes, otherAxes: otherAxes };\r\n        };\r\n        Grid.create = function (ecModel, api) {\r\n            var grids = [];\r\n            ecModel.eachComponent('grid', function (gridModel, idx) {\r\n                var grid = new Grid(gridModel, ecModel, api);\r\n                grid.name = 'grid_' + idx;\r\n                grid.resize(gridModel, api, true);\r\n                gridModel.coordinateSystem = grid;\r\n                grids.push(grid);\r\n            });\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                if (!isCartesian2DSeries(seriesModel)) {\r\n                    return;\r\n                }\r\n                var axesModelMap = findAxisModels(seriesModel);\r\n                var xAxisModel = axesModelMap.xAxisModel;\r\n                var yAxisModel = axesModelMap.yAxisModel;\r\n                var gridModel = xAxisModel.getCoordSysModel();\r\n                if (__DEV__) {\r\n                    if (!gridModel) {\r\n                        throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\r\n                    }\r\n                    if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\r\n                        throw new Error('xAxis and yAxis must use the same grid');\r\n                    }\r\n                }\r\n                var grid = gridModel.coordinateSystem;\r\n                seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\r\n            });\r\n            return grids;\r\n        };\r\n        Grid.dimensions = cartesian2DDimensions;\r\n        return Grid;\r\n    }());\r\n    function isAxisUsedInTheGrid(axisModel, gridModel) {\r\n        return axisModel.getCoordSysModel() === gridModel;\r\n    }\r\n    function fixAxisOnZero(axesMap, otherAxisDim, axis, onZeroRecords) {\r\n        axis.getAxesOnZeroOf = function () {\r\n            return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\r\n        };\r\n        var otherAxes = axesMap[otherAxisDim];\r\n        var otherAxisOnZeroOf;\r\n        var axisModel = axis.model;\r\n        var onZero = axisModel.get(['axisLine', 'onZero']);\r\n        var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\r\n        if (!onZero) {\r\n            return;\r\n        }\r\n        if (onZeroAxisIndex != null) {\r\n            if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\r\n                otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\r\n            }\r\n        }\r\n        else {\r\n            for (var idx in otherAxes) {\r\n                if (otherAxes.hasOwnProperty(idx)\r\n                    && canOnZeroToAxis(otherAxes[idx])\r\n                    && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\r\n                    otherAxisOnZeroOf = otherAxes[idx];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (otherAxisOnZeroOf) {\r\n            onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\r\n        }\r\n        function getOnZeroRecordKey(axis) {\r\n            return axis.dim + '_' + axis.index;\r\n        }\r\n    }\r\n    function canOnZeroToAxis(axis) {\r\n        return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\r\n    }\r\n    function updateAxisTransform(axis, coordBase) {\r\n        var axisExtent = axis.getExtent();\r\n        var axisExtentSum = axisExtent[0] + axisExtent[1];\r\n        axis.toGlobalCoord = axis.dim === 'x'\r\n            ? function (coord) {\r\n                return coord + coordBase;\r\n            }\r\n            : function (coord) {\r\n                return axisExtentSum - coord + coordBase;\r\n            };\r\n        axis.toLocalCoord = axis.dim === 'x'\r\n            ? function (coord) {\r\n                return coord - coordBase;\r\n            }\r\n            : function (coord) {\r\n                return axisExtentSum - coord + coordBase;\r\n            };\r\n    }\r\n    CoordinateSystemManager.register('cartesian2d', Grid);\n\n    var BaseBarSeriesModel = (function (_super) {\r\n        __extends(BaseBarSeriesModel, _super);\r\n        function BaseBarSeriesModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = BaseBarSeriesModel.type;\r\n            return _this;\r\n        }\r\n        BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n            return createListFromArray(this.getSource(), this, { useEncodeDefaulter: true });\r\n        };\r\n        BaseBarSeriesModel.prototype.getMarkerPosition = function (value) {\r\n            var coordSys = this.coordinateSystem;\r\n            if (coordSys) {\r\n                var pt = coordSys.dataToPoint(coordSys.clampData(value));\r\n                var data = this.getData();\r\n                var offset = data.getLayout('offset');\r\n                var size = data.getLayout('size');\r\n                var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\r\n                pt[offsetIndex] += offset + size / 2;\r\n                return pt;\r\n            }\r\n            return [NaN, NaN];\r\n        };\r\n        BaseBarSeriesModel.type = 'series.__base_bar__';\r\n        BaseBarSeriesModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 2,\r\n            coordinateSystem: 'cartesian2d',\r\n            legendHoverLink: true,\r\n            barMinHeight: 0,\r\n            barMinAngle: 0,\r\n            large: false,\r\n            largeThreshold: 400,\r\n            progressive: 3e3,\r\n            progressiveChunkMode: 'mod'\r\n        };\r\n        return BaseBarSeriesModel;\r\n    }(SeriesModel));\r\n    SeriesModel.registerClass(BaseBarSeriesModel);\n\n    var BarSeriesModel = (function (_super) {\r\n        __extends(BarSeriesModel, _super);\r\n        function BarSeriesModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = BarSeriesModel.type;\r\n            return _this;\r\n        }\r\n        BarSeriesModel.prototype.getProgressive = function () {\r\n            return this.get('large')\r\n                ? this.get('progressive')\r\n                : false;\r\n        };\r\n        BarSeriesModel.prototype.getProgressiveThreshold = function () {\r\n            var progressiveThreshold = this.get('progressiveThreshold');\r\n            var largeThreshold = this.get('largeThreshold');\r\n            if (largeThreshold > progressiveThreshold) {\r\n                progressiveThreshold = largeThreshold;\r\n            }\r\n            return progressiveThreshold;\r\n        };\r\n        BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\r\n            return selectors.rect(data.getItemLayout(dataIndex));\r\n        };\r\n        BarSeriesModel.type = 'series.bar';\r\n        BarSeriesModel.dependencies = ['grid', 'polar'];\r\n        BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\r\n            clip: true,\r\n            roundCap: false,\r\n            showBackground: false,\r\n            backgroundStyle: {\r\n                color: 'rgba(180, 180, 180, 0.2)',\r\n                borderColor: null,\r\n                borderWidth: 0,\r\n                borderType: 'solid',\r\n                borderRadius: 0,\r\n                shadowBlur: 0,\r\n                shadowColor: null,\r\n                shadowOffsetX: 0,\r\n                shadowOffsetY: 0,\r\n                opacity: 1\r\n            },\r\n            select: {\r\n                itemStyle: {\r\n                    borderColor: '#212121'\r\n                }\r\n            },\r\n            realtimeSort: false\r\n        });\r\n        return BarSeriesModel;\r\n    }(BaseBarSeriesModel));\r\n    SeriesModel.registerClass(BarSeriesModel);\n\n    var SausageShape = (function () {\r\n        function SausageShape() {\r\n            this.cx = 0;\r\n            this.cy = 0;\r\n            this.r0 = 0;\r\n            this.r = 0;\r\n            this.startAngle = 0;\r\n            this.endAngle = Math.PI * 2;\r\n            this.clockwise = true;\r\n        }\r\n        return SausageShape;\r\n    }());\r\n    var SausagePath = (function (_super) {\r\n        __extends(SausagePath, _super);\r\n        function SausagePath(opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.type = 'sausage';\r\n            return _this;\r\n        }\r\n        SausagePath.prototype.getDefaultShape = function () {\r\n            return new SausageShape();\r\n        };\r\n        SausagePath.prototype.buildPath = function (ctx, shape) {\r\n            var x = shape.cx;\r\n            var y = shape.cy;\r\n            var r0 = Math.max(shape.r0 || 0, 0);\r\n            var r = Math.max(shape.r, 0);\r\n            var dr = (r - r0) * 0.5;\r\n            var rCenter = r0 + dr;\r\n            var startAngle = shape.startAngle;\r\n            var endAngle = shape.endAngle;\r\n            var clockwise = shape.clockwise;\r\n            var unitStartX = Math.cos(startAngle);\r\n            var unitStartY = Math.sin(startAngle);\r\n            var unitEndX = Math.cos(endAngle);\r\n            var unitEndY = Math.sin(endAngle);\r\n            var lessThanCircle = clockwise\r\n                ? endAngle - startAngle < Math.PI * 2\r\n                : startAngle - endAngle < Math.PI * 2;\r\n            if (lessThanCircle) {\r\n                ctx.moveTo(unitStartX * r0 + x, unitStartY * r0 + y);\r\n                ctx.arc(unitStartX * rCenter + x, unitStartY * rCenter + y, dr, -Math.PI + startAngle, startAngle, !clockwise);\r\n            }\r\n            ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\r\n            ctx.moveTo(unitEndX * r + x, unitEndY * r + y);\r\n            ctx.arc(unitEndX * rCenter + x, unitEndY * rCenter + y, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\r\n            if (r0 !== 0) {\r\n                ctx.arc(x, y, r0, endAngle, startAngle, clockwise);\r\n                ctx.moveTo(unitStartX * r0 + x, unitEndY * r0 + y);\r\n            }\r\n            ctx.closePath();\r\n        };\r\n        return SausagePath;\r\n    }(Path));\n\n    function isCoordinateSystemType(coordSys, type) {\r\n        return coordSys.type === type;\r\n    }\n\n    var BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'borderWidth'];\r\n    var BAR_BORDER_RADIUS_QUERY = ['itemStyle', 'borderRadius'];\r\n    var _eventPos = [0, 0];\r\n    var mathMax$4 = Math.max;\r\n    var mathMin$4 = Math.min;\r\n    function getClipArea(coord, data) {\r\n        var coordSysClipArea;\r\n        if (isCoordinateSystemType(coord, 'cartesian2d')) {\r\n            coordSysClipArea = coord.getArea && coord.getArea();\r\n            var baseAxis = coord.getBaseAxis();\r\n            if (baseAxis.type !== 'category' || !baseAxis.onBand) {\r\n                var expandWidth = data.getLayout('bandWidth');\r\n                if (baseAxis.isHorizontal()) {\r\n                    coordSysClipArea.x -= expandWidth;\r\n                    coordSysClipArea.width += expandWidth * 2;\r\n                }\r\n                else {\r\n                    coordSysClipArea.y -= expandWidth;\r\n                    coordSysClipArea.height += expandWidth * 2;\r\n                }\r\n            }\r\n        }\r\n        return coordSysClipArea;\r\n    }\r\n    var BarView = (function (_super) {\r\n        __extends(BarView, _super);\r\n        function BarView() {\r\n            var _this = _super.call(this) || this;\r\n            _this.type = BarView.type;\r\n            _this._isFirstFrame = true;\r\n            return _this;\r\n        }\r\n        BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\r\n            this._model = seriesModel;\r\n            this.removeOnRenderedListener(api);\r\n            this._updateDrawMode(seriesModel);\r\n            var coordinateSystemType = seriesModel.get('coordinateSystem');\r\n            var isReorder = payload && payload.type === 'changeAxisOrder';\r\n            if (coordinateSystemType === 'cartesian2d'\r\n                || coordinateSystemType === 'polar') {\r\n                this._isLargeDraw\r\n                    ? this._renderLarge(seriesModel, ecModel, api)\r\n                    : this._renderNormal(seriesModel, ecModel, api, isReorder);\r\n            }\r\n            else if (__DEV__) {\r\n                console.warn('Only cartesian2d and polar supported for bar.');\r\n            }\r\n        };\r\n        BarView.prototype.incrementalPrepareRender = function (seriesModel) {\r\n            this._clear();\r\n            this._updateDrawMode(seriesModel);\r\n            this._updateLargeClip(seriesModel);\r\n        };\r\n        BarView.prototype.incrementalRender = function (params, seriesModel) {\r\n            this._incrementalRenderLarge(params, seriesModel);\r\n        };\r\n        BarView.prototype._updateDrawMode = function (seriesModel) {\r\n            var isLargeDraw = seriesModel.pipelineContext.large;\r\n            if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\r\n                this._isLargeDraw = isLargeDraw;\r\n                this._clear();\r\n            }\r\n        };\r\n        BarView.prototype._renderNormal = function (seriesModel, ecModel, api, isReorder) {\r\n            var _this = this;\r\n            var group = this.group;\r\n            var data = seriesModel.getData();\r\n            var oldData = this._data;\r\n            var coord = seriesModel.coordinateSystem;\r\n            var baseAxis = coord.getBaseAxis();\r\n            var isHorizontalOrRadial;\r\n            if (coord.type === 'cartesian2d') {\r\n                isHorizontalOrRadial = baseAxis.isHorizontal();\r\n            }\r\n            else if (coord.type === 'polar') {\r\n                isHorizontalOrRadial = baseAxis.dim === 'angle';\r\n            }\r\n            var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\r\n            var axis2DModel = baseAxis.model;\r\n            var realtimeSort = seriesModel.get('realtimeSort');\r\n            if (realtimeSort && data.count()) {\r\n                if (this._isFirstFrame) {\r\n                    this._initSort(data, isHorizontalOrRadial, baseAxis, api);\r\n                    this._isFirstFrame = false;\r\n                    return;\r\n                }\r\n                else {\r\n                    this._onRendered = function () {\r\n                        var orderMap = function (idx) {\r\n                            var el = data.getItemGraphicEl(idx);\r\n                            if (el) {\r\n                                var shape = el.shape;\r\n                                return (isHorizontalOrRadial ? shape.y + shape.height : shape.x + shape.width) || 0;\r\n                            }\r\n                            else {\r\n                                return 0;\r\n                            }\r\n                        };\r\n                        _this._updateSort(data, orderMap, baseAxis, api);\r\n                    };\r\n                    api.getZr().on('rendered', this._onRendered);\r\n                }\r\n            }\r\n            var needsClip = seriesModel.get('clip', true) || realtimeSort;\r\n            var coordSysClipArea = getClipArea(coord, data);\r\n            group.removeClipPath();\r\n            var roundCap = seriesModel.get('roundCap', true);\r\n            var drawBackground = seriesModel.get('showBackground', true);\r\n            var backgroundModel = seriesModel.getModel('backgroundStyle');\r\n            var barBorderRadius = backgroundModel.get('borderRadius') || 0;\r\n            var bgEls = [];\r\n            var oldBgEls = this._backgroundEls;\r\n            data.diff(oldData)\r\n                .add(function (dataIndex) {\r\n                var itemModel = data.getItemModel(dataIndex);\r\n                var layout = getLayout[coord.type](data, dataIndex, itemModel);\r\n                if (drawBackground) {\r\n                    var bgLayout = getLayout[coord.type](data, dataIndex);\r\n                    var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\r\n                    bgEl.useStyle(backgroundModel.getItemStyle());\r\n                    if (coord.type === 'cartesian2d') {\r\n                        bgEl.setShape('r', barBorderRadius);\r\n                    }\r\n                    bgEls[dataIndex] = bgEl;\r\n                }\r\n                if (!data.hasValue(dataIndex)) {\r\n                    return;\r\n                }\r\n                var isClipped = false;\r\n                if (needsClip) {\r\n                    isClipped = clip[coord.type](coordSysClipArea, layout);\r\n                }\r\n                var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\r\n                updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\r\n                if (realtimeSort) {\r\n                    el.disableLabelAnimation = true;\r\n                    updateRealtimeAnimation(seriesModel, axis2DModel, animationModel, el, layout, data, dataIndex, isHorizontalOrRadial, false);\r\n                }\r\n                else if (coord.type === 'cartesian2d') {\r\n                    initProps(el, { shape: layout }, seriesModel, dataIndex);\r\n                }\r\n                data.setItemGraphicEl(dataIndex, el);\r\n                group.add(el);\r\n                el.ignore = isClipped;\r\n            })\r\n                .update(function (newIndex, oldIndex) {\r\n                var itemModel = data.getItemModel(newIndex);\r\n                var layout = getLayout[coord.type](data, newIndex, itemModel);\r\n                if (drawBackground) {\r\n                    var bgEl = oldBgEls[oldIndex];\r\n                    bgEl.useStyle(backgroundModel.getItemStyle());\r\n                    if (coord.type === 'cartesian2d') {\r\n                        bgEl.setShape('r', barBorderRadius);\r\n                    }\r\n                    bgEls[newIndex] = bgEl;\r\n                    var bgLayout = getLayout[coord.type](data, newIndex);\r\n                    var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\r\n                    updateProps(bgEl, { shape: shape }, animationModel, newIndex);\r\n                }\r\n                var el = oldData.getItemGraphicEl(oldIndex);\r\n                if (!data.hasValue(newIndex)) {\r\n                    group.remove(el);\r\n                    el = null;\r\n                }\r\n                var isClipped = false;\r\n                if (needsClip) {\r\n                    isClipped = clip[coord.type](coordSysClipArea, layout);\r\n                    if (isClipped) {\r\n                        group.remove(el);\r\n                    }\r\n                }\r\n                if (!el) {\r\n                    el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\r\n                }\r\n                updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\r\n                if (realtimeSort) {\r\n                    el.disableLabelAnimation = true;\r\n                    updateRealtimeAnimation(seriesModel, axis2DModel, animationModel, el, layout, data, newIndex, isHorizontalOrRadial, true);\r\n                }\r\n                else {\r\n                    updateProps(el, { shape: layout }, seriesModel, newIndex, null);\r\n                }\r\n                data.setItemGraphicEl(newIndex, el);\r\n                el.ignore = isClipped;\r\n                group.add(el);\r\n            })\r\n                .remove(function (dataIndex) {\r\n                var el = oldData.getItemGraphicEl(dataIndex);\r\n                el && removeElementWithFadeOut(el, seriesModel, dataIndex);\r\n            })\r\n                .execute();\r\n            var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\r\n            bgGroup.removeAll();\r\n            for (var i = 0; i < bgEls.length; ++i) {\r\n                bgGroup.add(bgEls[i]);\r\n            }\r\n            group.add(bgGroup);\r\n            this._backgroundEls = bgEls;\r\n            this._data = data;\r\n        };\r\n        BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\r\n            this._clear();\r\n            createLarge(seriesModel, this.group);\r\n            this._updateLargeClip(seriesModel);\r\n        };\r\n        BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\r\n            this._removeBackground();\r\n            createLarge(seriesModel, this.group, true);\r\n        };\r\n        BarView.prototype._updateLargeClip = function (seriesModel) {\r\n            var clipPath = seriesModel.get('clip', true)\r\n                ? createClipPath(seriesModel.coordinateSystem, false, seriesModel)\r\n                : null;\r\n            if (clipPath) {\r\n                this.group.setClipPath(clipPath);\r\n            }\r\n            else {\r\n                this.group.removeClipPath();\r\n            }\r\n        };\r\n        BarView.prototype._dataSort = function (data, idxMap) {\r\n            var info = [];\r\n            data.each(function (idx) {\r\n                info.push({\r\n                    mappedValue: idxMap(idx),\r\n                    ordinalNumber: idx,\r\n                    beforeSortIndex: null\r\n                });\r\n            });\r\n            info.sort(function (a, b) {\r\n                return b.mappedValue - a.mappedValue;\r\n            });\r\n            for (var i = 0; i < info.length; ++i) {\r\n                info[info[i].ordinalNumber].beforeSortIndex = i;\r\n            }\r\n            return map(info, function (item) {\r\n                return {\r\n                    ordinalNumber: item.ordinalNumber,\r\n                    beforeSortIndex: item.beforeSortIndex\r\n                };\r\n            });\r\n        };\r\n        BarView.prototype._isDataOrderChanged = function (data, orderMap, oldOrder) {\r\n            var oldCount = oldOrder ? oldOrder.length : 0;\r\n            if (oldCount !== data.count()) {\r\n                return true;\r\n            }\r\n            var lastValue = Number.MAX_VALUE;\r\n            for (var i = 0; i < oldOrder.length; ++i) {\r\n                var value = orderMap(oldOrder[i].ordinalNumber);\r\n                if (value > lastValue) {\r\n                    return true;\r\n                }\r\n                lastValue = value;\r\n            }\r\n            return false;\r\n        };\r\n        BarView.prototype._updateSort = function (data, orderMap, baseAxis, api) {\r\n            var oldOrder = baseAxis.scale.getCategorySortInfo();\r\n            var isOrderChanged = this._isDataOrderChanged(data, orderMap, oldOrder);\r\n            if (isOrderChanged) {\r\n                var newOrder = this._dataSort(data, orderMap);\r\n                var extent = baseAxis.scale.getExtent();\r\n                for (var i = extent[0]; i < extent[1]; ++i) {\r\n                    if (!oldOrder[i] || oldOrder[i].ordinalNumber !== newOrder[i].ordinalNumber) {\r\n                        this.removeOnRenderedListener(api);\r\n                        var action = {\r\n                            type: 'changeAxisOrder',\r\n                            componentType: baseAxis.dim + 'Axis',\r\n                            axisId: baseAxis.index,\r\n                            sortInfo: newOrder\r\n                        };\r\n                        api.dispatchAction(action);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        BarView.prototype._initSort = function (data, isHorizontal, baseAxis, api) {\r\n            var action = {\r\n                type: 'changeAxisOrder',\r\n                componentType: baseAxis.dim + 'Axis',\r\n                axisId: baseAxis.index,\r\n                sortInfo: this._dataSort(data, function (idx) { return parseFloat(data.get(isHorizontal ? 'y' : 'x', idx)) || 0; })\r\n            };\r\n            api.dispatchAction(action);\r\n        };\r\n        BarView.prototype.remove = function (ecModel, api) {\r\n            this._clear(this._model);\r\n            this.removeOnRenderedListener(api);\r\n        };\r\n        BarView.prototype.dispose = function (ecModel, api) {\r\n            this.removeOnRenderedListener(api);\r\n        };\r\n        BarView.prototype.removeOnRenderedListener = function (api) {\r\n            if (this._onRendered) {\r\n                api.getZr().off('rendered', this._onRendered);\r\n                this._onRendered = null;\r\n            }\r\n        };\r\n        BarView.prototype._clear = function (model) {\r\n            var group = this.group;\r\n            var data = this._data;\r\n            if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\r\n                this._removeBackground();\r\n                this._backgroundEls = [];\r\n                data.eachItemGraphicEl(function (el) {\r\n                    removeElementWithFadeOut(el, model, getECData(el).dataIndex);\r\n                });\r\n            }\r\n            else {\r\n                group.removeAll();\r\n            }\r\n            this._data = null;\r\n            this._isFirstFrame = true;\r\n        };\r\n        BarView.prototype._removeBackground = function () {\r\n            this.group.remove(this._backgroundGroup);\r\n            this._backgroundGroup = null;\r\n        };\r\n        BarView.type = 'bar';\r\n        return BarView;\r\n    }(ChartView));\r\n    var clip = {\r\n        cartesian2d: function (coordSysBoundingRect, layout) {\r\n            var signWidth = layout.width < 0 ? -1 : 1;\r\n            var signHeight = layout.height < 0 ? -1 : 1;\r\n            if (signWidth < 0) {\r\n                layout.x += layout.width;\r\n                layout.width = -layout.width;\r\n            }\r\n            if (signHeight < 0) {\r\n                layout.y += layout.height;\r\n                layout.height = -layout.height;\r\n            }\r\n            var x = mathMax$4(layout.x, coordSysBoundingRect.x);\r\n            var x2 = mathMin$4(layout.x + layout.width, coordSysBoundingRect.x + coordSysBoundingRect.width);\r\n            var y = mathMax$4(layout.y, coordSysBoundingRect.y);\r\n            var y2 = mathMin$4(layout.y + layout.height, coordSysBoundingRect.y + coordSysBoundingRect.height);\r\n            layout.x = x;\r\n            layout.y = y;\r\n            layout.width = x2 - x;\r\n            layout.height = y2 - y;\r\n            var clipped = layout.width < 0 || layout.height < 0;\r\n            if (signWidth < 0) {\r\n                layout.x += layout.width;\r\n                layout.width = -layout.width;\r\n            }\r\n            if (signHeight < 0) {\r\n                layout.y += layout.height;\r\n                layout.height = -layout.height;\r\n            }\r\n            return clipped;\r\n        },\r\n        polar: function () {\r\n            return false;\r\n        }\r\n    };\r\n    var elementCreator = {\r\n        cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\r\n            var rect = new Rect({\r\n                shape: extend({}, layout),\r\n                z2: 1\r\n            });\r\n            rect.__dataIndex = newIndex;\r\n            rect.name = 'item';\r\n            if (animationModel) {\r\n                var rectShape = rect.shape;\r\n                var animateProperty = isHorizontal ? 'height' : 'width';\r\n                rectShape[animateProperty] = 0;\r\n            }\r\n            return rect;\r\n        },\r\n        polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\r\n            var clockwise = layout.startAngle < layout.endAngle;\r\n            var ShapeClass = (!isRadial && roundCap) ? SausagePath : Sector;\r\n            var sector = new ShapeClass({\r\n                shape: defaults({ clockwise: clockwise }, layout),\r\n                z2: 1\r\n            });\r\n            sector.name = 'item';\r\n            if (animationModel) {\r\n                var sectorShape = sector.shape;\r\n                var animateProperty = isRadial ? 'r' : 'endAngle';\r\n                var animateTarget = {};\r\n                sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\r\n                animateTarget[animateProperty] = layout[animateProperty];\r\n                (isUpdate ? updateProps : initProps)(sector, {\r\n                    shape: animateTarget\r\n                }, animationModel);\r\n            }\r\n            return sector;\r\n        }\r\n    };\r\n    function updateRealtimeAnimation(seriesModel, axisModel, animationModel, el, layout, data, newIndex, isHorizontal, isUpdate) {\r\n        if (animationModel || axisModel) {\r\n            var seriesTarget = void 0;\r\n            var axisTarget = void 0;\r\n            if (isHorizontal) {\r\n                axisTarget = {\r\n                    x: layout.x,\r\n                    width: layout.width\r\n                };\r\n                seriesTarget = {\r\n                    y: layout.y,\r\n                    height: layout.height\r\n                };\r\n            }\r\n            else {\r\n                axisTarget = {\r\n                    y: layout.y,\r\n                    height: layout.height\r\n                };\r\n                seriesTarget = {\r\n                    x: layout.x,\r\n                    width: layout.width\r\n                };\r\n            }\r\n            (isUpdate ? updateProps : initProps)(el, {\r\n                shape: seriesTarget\r\n            }, seriesModel, newIndex, null);\r\n            (isUpdate ? updateProps : initProps)(el, {\r\n                shape: axisTarget\r\n            }, axisModel, newIndex);\r\n            var defaultTextGetter = function (values) {\r\n                return getDefaultLabel(seriesModel.getData(), newIndex, values);\r\n            };\r\n            var labelModel = seriesModel.getModel('label');\r\n            (isUpdate ? updateLabel : initLabel)(el, data, newIndex, labelModel, seriesModel, animationModel, defaultTextGetter);\r\n        }\r\n    }\r\n    var getLayout = {\r\n        cartesian2d: function (data, dataIndex, itemModel) {\r\n            var layout = data.getItemLayout(dataIndex);\r\n            var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0;\r\n            var signX = layout.width > 0 ? 1 : -1;\r\n            var signY = layout.height > 0 ? 1 : -1;\r\n            return {\r\n                x: layout.x + signX * fixedLineWidth / 2,\r\n                y: layout.y + signY * fixedLineWidth / 2,\r\n                width: layout.width - signX * fixedLineWidth,\r\n                height: layout.height - signY * fixedLineWidth\r\n            };\r\n        },\r\n        polar: function (data, dataIndex, itemModel) {\r\n            var layout = data.getItemLayout(dataIndex);\r\n            return {\r\n                cx: layout.cx,\r\n                cy: layout.cy,\r\n                r0: layout.r0,\r\n                r: layout.r,\r\n                startAngle: layout.startAngle,\r\n                endAngle: layout.endAngle\r\n            };\r\n        }\r\n    };\r\n    function isZeroOnPolar(layout) {\r\n        return layout.startAngle != null\r\n            && layout.endAngle != null\r\n            && layout.startAngle === layout.endAngle;\r\n    }\r\n    function updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontal, isPolar) {\r\n        var style = data.getItemVisual(dataIndex, 'style');\r\n        if (!isPolar) {\r\n            el.setShape('r', itemModel.get(BAR_BORDER_RADIUS_QUERY) || 0);\r\n        }\r\n        el.useStyle(style);\r\n        el.ignore = isZeroOnPolar(layout);\r\n        var cursorStyle = itemModel.getShallow('cursor');\r\n        cursorStyle && el.attr('cursor', cursorStyle);\r\n        if (!isPolar) {\r\n            var labelPositionOutside = isHorizontal\r\n                ? (layout.height > 0 ? 'bottom' : 'top')\r\n                : (layout.width > 0 ? 'left' : 'right');\r\n            setLabelStyle(el, getLabelStatesModels(itemModel), {\r\n                labelFetcher: seriesModel,\r\n                labelDataIndex: dataIndex,\r\n                defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\r\n                inheritColor: style.fill,\r\n                defaultOutsidePosition: labelPositionOutside\r\n            });\r\n        }\r\n        var emphasisModel = itemModel.getModel(['emphasis']);\r\n        enableHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\r\n        setStatesStylesFromModel(el, itemModel);\r\n        if (isZeroOnPolar(layout)) {\r\n            each(el.states, function (state) {\r\n                if (state.style) {\r\n                    state.style.fill = state.style.stroke = 'none';\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function getLineWidth(itemModel, rawLayout) {\r\n        var lineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\r\n        var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\r\n        var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\r\n        return Math.min(lineWidth, width, height);\r\n    }\r\n    var LagePathShape = (function () {\r\n        function LagePathShape() {\r\n        }\r\n        return LagePathShape;\r\n    }());\r\n    var LargePath = (function (_super) {\r\n        __extends(LargePath, _super);\r\n        function LargePath(opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.type = 'largeBar';\r\n            return _this;\r\n        }\r\n        LargePath.prototype.getDefaultShape = function () {\r\n            return new LagePathShape();\r\n        };\r\n        LargePath.prototype.buildPath = function (ctx, shape) {\r\n            var points = shape.points;\r\n            var startPoint = this.__startPoint;\r\n            var baseDimIdx = this.__baseDimIdx;\r\n            for (var i = 0; i < points.length; i += 2) {\r\n                startPoint[baseDimIdx] = points[i + baseDimIdx];\r\n                ctx.moveTo(startPoint[0], startPoint[1]);\r\n                ctx.lineTo(points[i], points[i + 1]);\r\n            }\r\n        };\r\n        return LargePath;\r\n    }(Path));\r\n    function createLarge(seriesModel, group, incremental) {\r\n        var data = seriesModel.getData();\r\n        var startPoint = [];\r\n        var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\r\n        startPoint[1 - baseDimIdx] = data.getLayout('valueAxisStart');\r\n        var largeDataIndices = data.getLayout('largeDataIndices');\r\n        var barWidth = data.getLayout('barWidth');\r\n        var backgroundModel = seriesModel.getModel('backgroundStyle');\r\n        var drawBackground = seriesModel.get('showBackground', true);\r\n        if (drawBackground) {\r\n            var points = data.getLayout('largeBackgroundPoints');\r\n            var backgroundStartPoint = [];\r\n            backgroundStartPoint[1 - baseDimIdx] = data.getLayout('backgroundStart');\r\n            var bgEl = new LargePath({\r\n                shape: { points: points },\r\n                incremental: !!incremental,\r\n                silent: true,\r\n                z2: 0\r\n            });\r\n            bgEl.__startPoint = backgroundStartPoint;\r\n            bgEl.__baseDimIdx = baseDimIdx;\r\n            bgEl.__largeDataIndices = largeDataIndices;\r\n            bgEl.__barWidth = barWidth;\r\n            setLargeBackgroundStyle(bgEl, backgroundModel, data);\r\n            group.add(bgEl);\r\n        }\r\n        var el = new LargePath({\r\n            shape: { points: data.getLayout('largePoints') },\r\n            incremental: !!incremental\r\n        });\r\n        el.__startPoint = startPoint;\r\n        el.__baseDimIdx = baseDimIdx;\r\n        el.__largeDataIndices = largeDataIndices;\r\n        el.__barWidth = barWidth;\r\n        group.add(el);\r\n        setLargeStyle(el, seriesModel, data);\r\n        getECData(el).seriesIndex = seriesModel.seriesIndex;\r\n        if (!seriesModel.get('silent')) {\r\n            el.on('mousedown', largePathUpdateDataIndex);\r\n            el.on('mousemove', largePathUpdateDataIndex);\r\n        }\r\n    }\r\n    var largePathUpdateDataIndex = throttle(function (event) {\r\n        var largePath = this;\r\n        var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\r\n        getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\r\n    }, 30, false);\r\n    function largePathFindDataIndex(largePath, x, y) {\r\n        var baseDimIdx = largePath.__baseDimIdx;\r\n        var valueDimIdx = 1 - baseDimIdx;\r\n        var points = largePath.shape.points;\r\n        var largeDataIndices = largePath.__largeDataIndices;\r\n        var barWidthHalf = Math.abs(largePath.__barWidth / 2);\r\n        var startValueVal = largePath.__startPoint[valueDimIdx];\r\n        _eventPos[0] = x;\r\n        _eventPos[1] = y;\r\n        var pointerBaseVal = _eventPos[baseDimIdx];\r\n        var pointerValueVal = _eventPos[1 - baseDimIdx];\r\n        var baseLowerBound = pointerBaseVal - barWidthHalf;\r\n        var baseUpperBound = pointerBaseVal + barWidthHalf;\r\n        for (var i = 0, len = points.length / 2; i < len; i++) {\r\n            var ii = i * 2;\r\n            var barBaseVal = points[ii + baseDimIdx];\r\n            var barValueVal = points[ii + valueDimIdx];\r\n            if (barBaseVal >= baseLowerBound && barBaseVal <= baseUpperBound\r\n                && (startValueVal <= barValueVal\r\n                    ? (pointerValueVal >= startValueVal && pointerValueVal <= barValueVal)\r\n                    : (pointerValueVal >= barValueVal && pointerValueVal <= startValueVal))) {\r\n                return largeDataIndices[i];\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    function setLargeStyle(el, seriesModel, data) {\r\n        var globalStyle = data.getVisual('style');\r\n        el.useStyle(extend({}, globalStyle));\r\n        el.style.fill = null;\r\n        el.style.stroke = globalStyle.fill;\r\n        el.style.lineWidth = data.getLayout('barWidth');\r\n    }\r\n    function setLargeBackgroundStyle(el, backgroundModel, data) {\r\n        var borderColor = backgroundModel.get('borderColor') || backgroundModel.get('color');\r\n        var itemStyle = backgroundModel.getItemStyle();\r\n        el.useStyle(itemStyle);\r\n        el.style.fill = null;\r\n        el.style.stroke = borderColor;\r\n        el.style.lineWidth = data.getLayout('barWidth');\r\n    }\r\n    function createBackgroundShape(isHorizontalOrRadial, layout, coord) {\r\n        if (isCoordinateSystemType(coord, 'cartesian2d')) {\r\n            var rectShape = layout;\r\n            var coordLayout = coord.getArea();\r\n            return {\r\n                x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\r\n                y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\r\n                width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\r\n                height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\r\n            };\r\n        }\r\n        else {\r\n            var coordLayout = coord.getArea();\r\n            var sectorShape = layout;\r\n            return {\r\n                cx: coordLayout.cx,\r\n                cy: coordLayout.cy,\r\n                r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\r\n                r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\r\n                startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\r\n                endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\r\n            };\r\n        }\r\n    }\r\n    function createBackgroundEl(coord, isHorizontalOrRadial, layout) {\r\n        var ElementClz = coord.type === 'polar' ? Sector : Rect;\r\n        return new ElementClz({\r\n            shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\r\n            silent: true,\r\n            z2: 0\r\n        });\r\n    }\r\n    ChartView.registerClass(BarView);\n\n    registerAction({\r\n        type: 'changeAxisOrder',\r\n        event: 'changeAxisOrder',\r\n        update: 'update'\r\n    }, function (payload, ecModel) {\r\n        var componentType = payload.componentType || 'series';\r\n        ecModel.eachComponent({ mainType: componentType, query: payload }, function (componentModel) {\r\n            if (payload.sortInfo) {\r\n                componentModel.axis.setCategorySortInfo(payload.sortInfo);\r\n            }\r\n        });\r\n    });\n\n    registerLayout(PRIORITY.VISUAL.LAYOUT, curry(layout, 'bar'));\r\n    registerLayout(PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, largeLayout);\r\n    registerVisual({\r\n        seriesType: 'bar',\r\n        reset: function (seriesModel) {\r\n            seriesModel.getData().setVisual('legendSymbol', 'roundRect');\r\n        }\r\n    });\n\n    function createListSimply (seriesModel, opt, nameList) {\r\n        opt = isArray(opt) && { coordDimensions: opt } || extend({}, opt);\r\n        var source = seriesModel.getSource();\r\n        var dimensionsInfo = createDimensions(source, opt);\r\n        var list = new List(dimensionsInfo, seriesModel);\r\n        list.initData(source, nameList);\r\n        return list;\r\n    }\n\n    var LegendVisualProvider = (function () {\r\n        function LegendVisualProvider(getDataWithEncodedVisual, getRawData) {\r\n            this._getDataWithEncodedVisual = getDataWithEncodedVisual;\r\n            this._getRawData = getRawData;\r\n        }\r\n        LegendVisualProvider.prototype.getAllNames = function () {\r\n            var rawData = this._getRawData();\r\n            return rawData.mapArray(rawData.getName);\r\n        };\r\n        LegendVisualProvider.prototype.containName = function (name) {\r\n            var rawData = this._getRawData();\r\n            return rawData.indexOfName(name) >= 0;\r\n        };\r\n        LegendVisualProvider.prototype.indexOfName = function (name) {\r\n            var dataWithEncodedVisual = this._getDataWithEncodedVisual();\r\n            return dataWithEncodedVisual.indexOfName(name);\r\n        };\r\n        LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\r\n            var dataWithEncodedVisual = this._getDataWithEncodedVisual();\r\n            return dataWithEncodedVisual.getItemVisual(dataIndex, key);\r\n        };\r\n        return LegendVisualProvider;\r\n    }());\n\n    var PieSeriesModel = (function (_super) {\r\n        __extends(PieSeriesModel, _super);\r\n        function PieSeriesModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.useColorPaletteOnData = true;\r\n            return _this;\r\n        }\r\n        PieSeriesModel.prototype.init = function (option) {\r\n            _super.prototype.init.apply(this, arguments);\r\n            this.legendVisualProvider = new LegendVisualProvider(bind(this.getData, this), bind(this.getRawData, this));\r\n            this._defaultLabelLine(option);\r\n        };\r\n        PieSeriesModel.prototype.mergeOption = function () {\r\n            _super.prototype.mergeOption.apply(this, arguments);\r\n        };\r\n        PieSeriesModel.prototype.getInitialData = function () {\r\n            return createListSimply(this, {\r\n                coordDimensions: ['value'],\r\n                encodeDefaulter: curry(makeSeriesEncodeForNameBased, this)\r\n            });\r\n        };\r\n        PieSeriesModel.prototype.getDataParams = function (dataIndex) {\r\n            var data = this.getData();\r\n            var params = _super.prototype.getDataParams.call(this, dataIndex);\r\n            var valueList = [];\r\n            data.each(data.mapDimension('value'), function (value) {\r\n                valueList.push(value);\r\n            });\r\n            params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\r\n            params.$vars.push('percent');\r\n            return params;\r\n        };\r\n        PieSeriesModel.prototype._defaultLabelLine = function (option) {\r\n            defaultEmphasis(option, 'labelLine', ['show']);\r\n            var labelLineNormalOpt = option.labelLine;\r\n            var labelLineEmphasisOpt = option.emphasis.labelLine;\r\n            labelLineNormalOpt.show = labelLineNormalOpt.show\r\n                && option.label.show;\r\n            labelLineEmphasisOpt.show = labelLineEmphasisOpt.show\r\n                && option.emphasis.label.show;\r\n        };\r\n        PieSeriesModel.type = 'series.pie';\r\n        PieSeriesModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 2,\r\n            legendHoverLink: true,\r\n            center: ['50%', '50%'],\r\n            radius: [0, '75%'],\r\n            clockwise: true,\r\n            startAngle: 90,\r\n            minAngle: 0,\r\n            minShowLabelAngle: 0,\r\n            selectedOffset: 10,\r\n            percentPrecision: 2,\r\n            stillShowZeroSum: true,\r\n            left: 0,\r\n            top: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            width: null,\r\n            height: null,\r\n            label: {\r\n                rotate: 0,\r\n                show: true,\r\n                overflow: 'truncate',\r\n                position: 'outer',\r\n                alignTo: 'none',\r\n                edgeDistance: '25%',\r\n                bleedMargin: 10,\r\n                distanceToLabelLine: 5\r\n            },\r\n            labelLine: {\r\n                show: true,\r\n                length: 15,\r\n                length2: 15,\r\n                smooth: false,\r\n                minTurnAngle: 90,\r\n                maxSurfaceAngle: 90,\r\n                lineStyle: {\r\n                    width: 1,\r\n                    type: 'solid'\r\n                }\r\n            },\r\n            itemStyle: {\r\n                borderWidth: 1\r\n            },\r\n            labelLayout: {\r\n                hideOverlap: true\r\n            },\r\n            emphasis: {\r\n                scale: true,\r\n                scaleSize: 5\r\n            },\r\n            avoidLabelOverlap: true,\r\n            animationType: 'expansion',\r\n            animationDuration: 1000,\r\n            animationTypeUpdate: 'transition',\r\n            animationEasingUpdate: 'cubicInOut',\r\n            animationDurationUpdate: 500,\r\n            animationEasing: 'cubicInOut'\r\n        };\r\n        return PieSeriesModel;\r\n    }(SeriesModel));\r\n    SeriesModel.registerClass(PieSeriesModel);\n\n    var RADIAN = Math.PI / 180;\r\n    function adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\r\n        if (list.length < 2) {\r\n            return;\r\n        }\r\n        function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\r\n            var rB = semi.rB;\r\n            var rB2 = rB * rB;\r\n            for (var i = 0; i < semi.list.length; i++) {\r\n                var item = semi.list[i];\r\n                var dy = Math.abs(item.label.y - cy);\r\n                var rA = r + item.len;\r\n                var rA2 = rA * rA;\r\n                var dx = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);\r\n                item.label.x = cx + (dx + item.len2) * dir;\r\n            }\r\n        }\r\n        function recalculateX(items) {\r\n            var topSemi = { list: [], maxY: 0 };\r\n            var bottomSemi = { list: [], maxY: 0 };\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i].labelAlignTo !== 'none') {\r\n                    continue;\r\n                }\r\n                var item = items[i];\r\n                var semi = item.label.y > cy ? bottomSemi : topSemi;\r\n                var dy = Math.abs(item.label.y - cy);\r\n                if (dy > semi.maxY) {\r\n                    var dx = item.label.x - cx - item.len2 * dir;\r\n                    var rA = r + item.len;\r\n                    var rB = dx < rA\r\n                        ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA))\r\n                        : rA;\r\n                    semi.rB = rB;\r\n                    semi.maxY = dy;\r\n                }\r\n                semi.list.push(item);\r\n            }\r\n            recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\r\n            recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\r\n        }\r\n        var len = list.length;\r\n        for (var i = 0; i < len; i++) {\r\n            if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\r\n                var dx = list[i].label.x - farthestX;\r\n                list[i].linePoints[1][0] += dx;\r\n                list[i].label.x = farthestX;\r\n            }\r\n        }\r\n        if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\r\n            recalculateX(list);\r\n        }\r\n    }\r\n    function avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\r\n        var leftList = [];\r\n        var rightList = [];\r\n        var leftmostX = Number.MAX_VALUE;\r\n        var rightmostX = -Number.MAX_VALUE;\r\n        for (var i = 0; i < labelLayoutList.length; i++) {\r\n            var label = labelLayoutList[i].label;\r\n            if (isPositionCenter(labelLayoutList[i])) {\r\n                continue;\r\n            }\r\n            if (label.x < cx) {\r\n                leftmostX = Math.min(leftmostX, label.x);\r\n                leftList.push(labelLayoutList[i]);\r\n            }\r\n            else {\r\n                rightmostX = Math.max(rightmostX, label.x);\r\n                rightList.push(labelLayoutList[i]);\r\n            }\r\n        }\r\n        adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\r\n        adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\r\n        for (var i = 0; i < labelLayoutList.length; i++) {\r\n            var layout = labelLayoutList[i];\r\n            var label = layout.label;\r\n            if (isPositionCenter(layout)) {\r\n                continue;\r\n            }\r\n            var linePoints = layout.linePoints;\r\n            if (linePoints) {\r\n                var isAlignToEdge = layout.labelAlignTo === 'edge';\r\n                var realTextWidth = layout.rect.width;\r\n                var targetTextWidth = void 0;\r\n                if (isAlignToEdge) {\r\n                    if (label.x < cx) {\r\n                        targetTextWidth = linePoints[2][0] - layout.labelDistance\r\n                            - viewLeft - layout.edgeDistance;\r\n                    }\r\n                    else {\r\n                        targetTextWidth = viewLeft + viewWidth - layout.edgeDistance\r\n                            - linePoints[2][0] - layout.labelDistance;\r\n                    }\r\n                }\r\n                else {\r\n                    if (label.x < cx) {\r\n                        targetTextWidth = label.x - viewLeft - layout.bleedMargin;\r\n                    }\r\n                    else {\r\n                        targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\r\n                    }\r\n                }\r\n                if (targetTextWidth < layout.rect.width) {\r\n                    layout.label.style.width = targetTextWidth;\r\n                    if (layout.labelAlignTo === 'edge') {\r\n                        realTextWidth = targetTextWidth;\r\n                    }\r\n                }\r\n                var dist = linePoints[1][0] - linePoints[2][0];\r\n                if (isAlignToEdge) {\r\n                    if (label.x < cx) {\r\n                        linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\r\n                    }\r\n                    else {\r\n                        linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance\r\n                            - realTextWidth - layout.labelDistance;\r\n                    }\r\n                }\r\n                else {\r\n                    if (label.x < cx) {\r\n                        linePoints[2][0] = label.x + layout.labelDistance;\r\n                    }\r\n                    else {\r\n                        linePoints[2][0] = label.x - layout.labelDistance;\r\n                    }\r\n                    linePoints[1][0] = linePoints[2][0] + dist;\r\n                }\r\n                linePoints[1][1] = linePoints[2][1] = label.y;\r\n            }\r\n        }\r\n    }\r\n    function isPositionCenter(sectorShape) {\r\n        return sectorShape.position === 'center';\r\n    }\r\n    function labelLayout (seriesModel) {\r\n        var data = seriesModel.getData();\r\n        var labelLayoutList = [];\r\n        var cx;\r\n        var cy;\r\n        var hasLabelRotate = false;\r\n        var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\r\n        var viewRect = data.getLayout('viewRect');\r\n        var r = data.getLayout('r');\r\n        var viewWidth = viewRect.width;\r\n        var viewLeft = viewRect.x;\r\n        var viewTop = viewRect.y;\r\n        var viewHeight = viewRect.height;\r\n        function setNotShow(el) {\r\n            el.ignore = true;\r\n        }\r\n        data.each(function (idx) {\r\n            var sector = data.getItemGraphicEl(idx);\r\n            var sectorShape = sector.shape;\r\n            var label = sector.getTextContent();\r\n            var labelLine = sector.getTextGuideLine();\r\n            var itemModel = data.getItemModel(idx);\r\n            var labelModel = itemModel.getModel('label');\r\n            var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\r\n            var labelDistance = labelModel.get('distanceToLabelLine');\r\n            var labelAlignTo = labelModel.get('alignTo');\r\n            var edgeDistance = parsePercent$2(labelModel.get('edgeDistance'), viewWidth);\r\n            var bleedMargin = labelModel.get('bleedMargin');\r\n            var labelLineModel = itemModel.getModel('labelLine');\r\n            var labelLineLen = labelLineModel.get('length');\r\n            labelLineLen = parsePercent$2(labelLineLen, viewWidth);\r\n            var labelLineLen2 = labelLineModel.get('length2');\r\n            labelLineLen2 = parsePercent$2(labelLineLen2, viewWidth);\r\n            if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\r\n                each(label.states, setNotShow);\r\n                label.ignore = true;\r\n                return;\r\n            }\r\n            var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\r\n            var nx = Math.cos(midAngle);\r\n            var ny = Math.sin(midAngle);\r\n            var textX;\r\n            var textY;\r\n            var linePoints;\r\n            var textAlign;\r\n            cx = sectorShape.cx;\r\n            cy = sectorShape.cy;\r\n            var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\r\n            if (labelPosition === 'center') {\r\n                textX = sectorShape.cx;\r\n                textY = sectorShape.cy;\r\n                textAlign = 'center';\r\n            }\r\n            else {\r\n                var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\r\n                var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\r\n                textX = x1 + nx * 3;\r\n                textY = y1 + ny * 3;\r\n                if (!isLabelInside) {\r\n                    var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\r\n                    var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\r\n                    var x3 = x2 + ((nx < 0 ? -1 : 1) * labelLineLen2);\r\n                    var y3 = y2;\r\n                    if (labelAlignTo === 'edge') {\r\n                        textX = nx < 0\r\n                            ? viewLeft + edgeDistance\r\n                            : viewLeft + viewWidth - edgeDistance;\r\n                    }\r\n                    else {\r\n                        textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\r\n                    }\r\n                    textY = y3;\r\n                    linePoints = [[x1, y1], [x2, y2], [x3, y3]];\r\n                }\r\n                textAlign = isLabelInside\r\n                    ? 'center'\r\n                    : (labelAlignTo === 'edge'\r\n                        ? (nx > 0 ? 'right' : 'left')\r\n                        : (nx > 0 ? 'left' : 'right'));\r\n            }\r\n            var labelRotate;\r\n            var rotate = labelModel.get('rotate');\r\n            if (typeof rotate === 'number') {\r\n                labelRotate = rotate * (Math.PI / 180);\r\n            }\r\n            else {\r\n                labelRotate = rotate\r\n                    ? (nx < 0 ? -midAngle + Math.PI : -midAngle)\r\n                    : 0;\r\n            }\r\n            hasLabelRotate = !!labelRotate;\r\n            label.x = textX;\r\n            label.y = textY;\r\n            label.rotation = labelRotate;\r\n            label.setStyle({\r\n                verticalAlign: 'middle'\r\n            });\r\n            if (!isLabelInside) {\r\n                var textRect = label.getBoundingRect().clone();\r\n                textRect.applyTransform(label.getComputedTransform());\r\n                var margin = (label.style.margin || 0) + 2.1;\r\n                textRect.x -= margin / 2;\r\n                textRect.y -= margin / 2;\r\n                textRect.width += margin;\r\n                textRect.height += margin;\r\n                labelLayoutList.push({\r\n                    label: label,\r\n                    labelLine: labelLine,\r\n                    position: labelPosition,\r\n                    len: labelLineLen,\r\n                    len2: labelLineLen2,\r\n                    minTurnAngle: labelLineModel.get('minTurnAngle'),\r\n                    maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\r\n                    surfaceNormal: new Point(nx, ny),\r\n                    linePoints: linePoints,\r\n                    textAlign: textAlign,\r\n                    labelDistance: labelDistance,\r\n                    labelAlignTo: labelAlignTo,\r\n                    edgeDistance: edgeDistance,\r\n                    bleedMargin: bleedMargin,\r\n                    rect: textRect\r\n                });\r\n            }\r\n            else {\r\n                label.setStyle({\r\n                    align: textAlign\r\n                });\r\n                var selectState = label.states.select;\r\n                if (selectState) {\r\n                    selectState.x += label.x;\r\n                    selectState.y += label.y;\r\n                }\r\n            }\r\n            sector.setTextConfig({\r\n                inside: isLabelInside\r\n            });\r\n        });\r\n        if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\r\n            avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\r\n        }\r\n        for (var i = 0; i < labelLayoutList.length; i++) {\r\n            var layout = labelLayoutList[i];\r\n            var label = layout.label;\r\n            var labelLine = layout.labelLine;\r\n            var notShowLabel = isNaN(label.x) || isNaN(label.y);\r\n            if (label) {\r\n                label.setStyle({\r\n                    align: layout.textAlign\r\n                });\r\n                if (notShowLabel) {\r\n                    each(label.states, setNotShow);\r\n                    label.ignore = true;\r\n                }\r\n                var selectState = label.states.select;\r\n                if (selectState) {\r\n                    selectState.x += label.x;\r\n                    selectState.y += label.y;\r\n                }\r\n            }\r\n            if (labelLine) {\r\n                var linePoints = layout.linePoints;\r\n                if (notShowLabel || !linePoints) {\r\n                    each(labelLine.states, setNotShow);\r\n                    labelLine.ignore = true;\r\n                }\r\n                else {\r\n                    limitTurnAngle(linePoints, layout.minTurnAngle);\r\n                    limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\r\n                    labelLine.setShape({ points: linePoints });\r\n                    label.__hostTarget.textGuideLineConfig = {\r\n                        anchor: new Point(linePoints[0][0], linePoints[0][1])\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\n\n    var PiePiece = (function (_super) {\r\n        __extends(PiePiece, _super);\r\n        function PiePiece(data, idx, startAngle) {\r\n            var _this = _super.call(this) || this;\r\n            _this.z2 = 2;\r\n            var polyline = new Polyline();\r\n            var text = new ZRText();\r\n            _this.setTextGuideLine(polyline);\r\n            _this.setTextContent(text);\r\n            _this.updateData(data, idx, startAngle, true);\r\n            return _this;\r\n        }\r\n        PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\r\n            var sector = this;\r\n            var seriesModel = data.hostModel;\r\n            var itemModel = data.getItemModel(idx);\r\n            var emphasisModel = itemModel.getModel('emphasis');\r\n            var layout = data.getItemLayout(idx);\r\n            var sectorShape = extend({}, layout);\r\n            if (firstCreate) {\r\n                sector.setShape(sectorShape);\r\n                var animationType = seriesModel.getShallow('animationType');\r\n                if (animationType === 'scale') {\r\n                    sector.shape.r = layout.r0;\r\n                    initProps(sector, {\r\n                        shape: {\r\n                            r: layout.r\r\n                        }\r\n                    }, seriesModel, idx);\r\n                }\r\n                else {\r\n                    if (startAngle != null) {\r\n                        sector.setShape({ startAngle: startAngle, endAngle: startAngle });\r\n                        initProps(sector, {\r\n                            shape: {\r\n                                startAngle: layout.startAngle,\r\n                                endAngle: layout.endAngle\r\n                            }\r\n                        }, seriesModel, idx);\r\n                    }\r\n                    else {\r\n                        sector.shape.endAngle = layout.startAngle;\r\n                        updateProps(sector, {\r\n                            shape: {\r\n                                endAngle: layout.endAngle\r\n                            }\r\n                        }, seriesModel, idx);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                updateProps(sector, {\r\n                    shape: sectorShape\r\n                }, seriesModel, idx);\r\n            }\r\n            sector.useStyle(data.getItemVisual(idx, 'style'));\r\n            setStatesStylesFromModel(sector, itemModel);\r\n            var midAngle = (layout.startAngle + layout.endAngle) / 2;\r\n            var offset = seriesModel.get('selectedOffset');\r\n            var dx = Math.cos(midAngle) * offset;\r\n            var dy = Math.sin(midAngle) * offset;\r\n            var cursorStyle = itemModel.getShallow('cursor');\r\n            cursorStyle && sector.attr('cursor', cursorStyle);\r\n            this._updateLabel(seriesModel, data, idx);\r\n            sector.ensureState('emphasis').shape = {\r\n                r: layout.r + (emphasisModel.get('scale')\r\n                    ? (emphasisModel.get('scaleSize') || 0) : 0)\r\n            };\r\n            extend(sector.ensureState('select'), {\r\n                x: dx,\r\n                y: dy\r\n            });\r\n            var labelLine = sector.getTextGuideLine();\r\n            var labelText = sector.getTextContent();\r\n            extend(labelLine.ensureState('select'), {\r\n                x: dx,\r\n                y: dy\r\n            });\r\n            extend(labelText.ensureState('select'), {\r\n                x: dx,\r\n                y: dy\r\n            });\r\n            enableHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\r\n        };\r\n        PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\r\n            var sector = this;\r\n            var labelText = sector.getTextContent();\r\n            var itemModel = data.getItemModel(idx);\r\n            var labelTextEmphasisState = labelText.ensureState('emphasis');\r\n            var labelModel = itemModel.getModel('label');\r\n            var labelHoverModel = itemModel.getModel(['emphasis', 'label']);\r\n            var style = data.getItemVisual(idx, 'style');\r\n            var visualColor = style && style.fill;\r\n            setLabelStyle(sector, getLabelStatesModels(itemModel), {\r\n                labelFetcher: data.hostModel,\r\n                labelDataIndex: idx,\r\n                inheritColor: visualColor,\r\n                defaultText: seriesModel.getFormattedLabel(idx, 'normal')\r\n                    || data.getName(idx)\r\n            }, { normal: {\r\n                    opacity: style && style.opacity\r\n                } });\r\n            sector.setTextConfig({\r\n                position: null,\r\n                rotation: null\r\n            });\r\n            labelText.attr({\r\n                z2: 10\r\n            });\r\n            labelText.ignore = !labelModel.get('show');\r\n            labelTextEmphasisState.ignore = !labelHoverModel.get('show');\r\n            setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\r\n                stroke: visualColor,\r\n                opacity: style && style.opacity\r\n            });\r\n        };\r\n        return PiePiece;\r\n    }(Sector));\r\n    var PieView = (function (_super) {\r\n        __extends(PieView, _super);\r\n        function PieView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.ignoreLabelLineUpdate = true;\r\n            return _this;\r\n        }\r\n        PieView.prototype.init = function () {\r\n            var sectorGroup = new Group();\r\n            this._sectorGroup = sectorGroup;\r\n        };\r\n        PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\r\n            var data = seriesModel.getData();\r\n            var oldData = this._data;\r\n            var group = this.group;\r\n            var startAngle;\r\n            if (!oldData && data.count() > 0) {\r\n                var shape = data.getItemLayout(0);\r\n                for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\r\n                    shape = data.getItemLayout(s);\r\n                }\r\n                if (shape) {\r\n                    startAngle = shape.startAngle;\r\n                }\r\n            }\r\n            data.diff(oldData)\r\n                .add(function (idx) {\r\n                var piePiece = new PiePiece(data, idx, startAngle);\r\n                data.setItemGraphicEl(idx, piePiece);\r\n                group.add(piePiece);\r\n            })\r\n                .update(function (newIdx, oldIdx) {\r\n                var piePiece = oldData.getItemGraphicEl(oldIdx);\r\n                piePiece.updateData(data, newIdx, startAngle);\r\n                piePiece.off('click');\r\n                group.add(piePiece);\r\n                data.setItemGraphicEl(newIdx, piePiece);\r\n            })\r\n                .remove(function (idx) {\r\n                var piePiece = oldData.getItemGraphicEl(idx);\r\n                removeElementWithFadeOut(piePiece, seriesModel, idx);\r\n            })\r\n                .execute();\r\n            labelLayout(seriesModel);\r\n            if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\r\n                this._data = data;\r\n            }\r\n        };\r\n        PieView.prototype.dispose = function () { };\r\n        PieView.prototype.containPoint = function (point, seriesModel) {\r\n            var data = seriesModel.getData();\r\n            var itemLayout = data.getItemLayout(0);\r\n            if (itemLayout) {\r\n                var dx = point[0] - itemLayout.cx;\r\n                var dy = point[1] - itemLayout.cy;\r\n                var radius = Math.sqrt(dx * dx + dy * dy);\r\n                return radius <= itemLayout.r && radius >= itemLayout.r0;\r\n            }\r\n        };\r\n        PieView.type = 'pie';\r\n        return PieView;\r\n    }(ChartView));\r\n    ChartView.registerClass(PieView);\n\n    var PI2$6 = Math.PI * 2;\r\n    var RADIAN$1 = Math.PI / 180;\r\n    function getViewRect(seriesModel, api) {\r\n        return getLayoutRect(seriesModel.getBoxLayoutParams(), {\r\n            width: api.getWidth(),\r\n            height: api.getHeight()\r\n        });\r\n    }\r\n    function pieLayout (seriesType, ecModel, api) {\r\n        ecModel.eachSeriesByType(seriesType, function (seriesModel) {\r\n            var data = seriesModel.getData();\r\n            var valueDim = data.mapDimension('value');\r\n            var viewRect = getViewRect(seriesModel, api);\r\n            var center = seriesModel.get('center');\r\n            var radius = seriesModel.get('radius');\r\n            if (!isArray(radius)) {\r\n                radius = [0, radius];\r\n            }\r\n            if (!isArray(center)) {\r\n                center = [center, center];\r\n            }\r\n            var width = parsePercent$2(viewRect.width, api.getWidth());\r\n            var height = parsePercent$2(viewRect.height, api.getHeight());\r\n            var size = Math.min(width, height);\r\n            var cx = parsePercent$2(center[0], width) + viewRect.x;\r\n            var cy = parsePercent$2(center[1], height) + viewRect.y;\r\n            var r0 = parsePercent$2(radius[0], size / 2);\r\n            var r = parsePercent$2(radius[1], size / 2);\r\n            var startAngle = -seriesModel.get('startAngle') * RADIAN$1;\r\n            var minAngle = seriesModel.get('minAngle') * RADIAN$1;\r\n            var validDataCount = 0;\r\n            data.each(valueDim, function (value) {\r\n                !isNaN(value) && validDataCount++;\r\n            });\r\n            var sum = data.getSum(valueDim);\r\n            var unitRadian = Math.PI / (sum || validDataCount) * 2;\r\n            var clockwise = seriesModel.get('clockwise');\r\n            var roseType = seriesModel.get('roseType');\r\n            var stillShowZeroSum = seriesModel.get('stillShowZeroSum');\r\n            var extent = data.getDataExtent(valueDim);\r\n            extent[0] = 0;\r\n            var restAngle = PI2$6;\r\n            var valueSumLargerThanMinAngle = 0;\r\n            var currentAngle = startAngle;\r\n            var dir = clockwise ? 1 : -1;\r\n            data.setLayout({ viewRect: viewRect, r: r });\r\n            data.each(valueDim, function (value, idx) {\r\n                var angle;\r\n                if (isNaN(value)) {\r\n                    data.setItemLayout(idx, {\r\n                        angle: NaN,\r\n                        startAngle: NaN,\r\n                        endAngle: NaN,\r\n                        clockwise: clockwise,\r\n                        cx: cx,\r\n                        cy: cy,\r\n                        r0: r0,\r\n                        r: roseType\r\n                            ? NaN\r\n                            : r\r\n                    });\r\n                    return;\r\n                }\r\n                if (roseType !== 'area') {\r\n                    angle = (sum === 0 && stillShowZeroSum)\r\n                        ? unitRadian : (value * unitRadian);\r\n                }\r\n                else {\r\n                    angle = PI2$6 / validDataCount;\r\n                }\r\n                if (angle < minAngle) {\r\n                    angle = minAngle;\r\n                    restAngle -= minAngle;\r\n                }\r\n                else {\r\n                    valueSumLargerThanMinAngle += value;\r\n                }\r\n                var endAngle = currentAngle + dir * angle;\r\n                data.setItemLayout(idx, {\r\n                    angle: angle,\r\n                    startAngle: currentAngle,\r\n                    endAngle: endAngle,\r\n                    clockwise: clockwise,\r\n                    cx: cx,\r\n                    cy: cy,\r\n                    r0: r0,\r\n                    r: roseType\r\n                        ? linearMap(value, extent, [r0, r])\r\n                        : r\r\n                });\r\n                currentAngle = endAngle;\r\n            });\r\n            if (restAngle < PI2$6 && validDataCount) {\r\n                if (restAngle <= 1e-3) {\r\n                    var angle_1 = PI2$6 / validDataCount;\r\n                    data.each(valueDim, function (value, idx) {\r\n                        if (!isNaN(value)) {\r\n                            var layout_1 = data.getItemLayout(idx);\r\n                            layout_1.angle = angle_1;\r\n                            layout_1.startAngle = startAngle + dir * idx * angle_1;\r\n                            layout_1.endAngle = startAngle + dir * (idx + 1) * angle_1;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    unitRadian = restAngle / valueSumLargerThanMinAngle;\r\n                    currentAngle = startAngle;\r\n                    data.each(valueDim, function (value, idx) {\r\n                        if (!isNaN(value)) {\r\n                            var layout_2 = data.getItemLayout(idx);\r\n                            var angle = layout_2.angle === minAngle\r\n                                ? minAngle : value * unitRadian;\r\n                            layout_2.startAngle = currentAngle;\r\n                            layout_2.endAngle = currentAngle + dir * angle;\r\n                            currentAngle += dir * angle;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\n\n    function dataFilter (seriesType) {\r\n        return {\r\n            seriesType: seriesType,\r\n            reset: function (seriesModel, ecModel) {\r\n                var legendModels = ecModel.findComponents({\r\n                    mainType: 'legend'\r\n                });\r\n                if (!legendModels || !legendModels.length) {\r\n                    return;\r\n                }\r\n                var data = seriesModel.getData();\r\n                data.filterSelf(function (idx) {\r\n                    var name = data.getName(idx);\r\n                    for (var i = 0; i < legendModels.length; i++) {\r\n                        if (!legendModels[i].isSelected(name)) {\r\n                            return false;\r\n                        }\r\n                    }\r\n                    return true;\r\n                });\r\n            }\r\n        };\r\n    }\n\n    createLegacyDataSelectAction('pie', registerAction);\r\n    registerLayout(curry(pieLayout, 'pie'));\r\n    registerProcessor(dataFilter('pie'));\n\n    var ScatterSeriesModel = (function (_super) {\r\n        __extends(ScatterSeriesModel, _super);\r\n        function ScatterSeriesModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = ScatterSeriesModel.type;\r\n            _this.hasSymbolVisual = true;\r\n            return _this;\r\n        }\r\n        ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\r\n            return createListFromArray(this.getSource(), this, {\r\n                useEncodeDefaulter: true\r\n            });\r\n        };\r\n        ScatterSeriesModel.prototype.getProgressive = function () {\r\n            var progressive = this.option.progressive;\r\n            if (progressive == null) {\r\n                return this.option.large ? 5e3 : this.get('progressive');\r\n            }\r\n            return progressive;\r\n        };\r\n        ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\r\n            var progressiveThreshold = this.option.progressiveThreshold;\r\n            if (progressiveThreshold == null) {\r\n                return this.option.large ? 1e4 : this.get('progressiveThreshold');\r\n            }\r\n            return progressiveThreshold;\r\n        };\r\n        ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\r\n            return selectors.point(data.getItemLayout(dataIndex));\r\n        };\r\n        ScatterSeriesModel.type = 'series.scatter';\r\n        ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\r\n        ScatterSeriesModel.defaultOption = {\r\n            coordinateSystem: 'cartesian2d',\r\n            zlevel: 0,\r\n            z: 2,\r\n            legendHoverLink: true,\r\n            symbolSize: 10,\r\n            large: false,\r\n            largeThreshold: 2000,\r\n            itemStyle: {\r\n                opacity: 0.8\r\n            },\r\n            emphasis: {\r\n                scale: true\r\n            },\r\n            clip: true,\r\n            select: {\r\n                itemStyle: {\r\n                    borderColor: '#212121'\r\n                }\r\n            }\r\n        };\r\n        return ScatterSeriesModel;\r\n    }(SeriesModel));\r\n    SeriesModel.registerClass(ScatterSeriesModel);\n\n    var BOOST_SIZE_THRESHOLD = 4;\r\n    var LargeSymbolPathShape = (function () {\r\n        function LargeSymbolPathShape() {\r\n        }\r\n        return LargeSymbolPathShape;\r\n    }());\r\n    var LargeSymbolPath = (function (_super) {\r\n        __extends(LargeSymbolPath, _super);\r\n        function LargeSymbolPath(opts) {\r\n            return _super.call(this, opts) || this;\r\n        }\r\n        LargeSymbolPath.prototype.getDefaultShape = function () {\r\n            return new LargeSymbolPathShape();\r\n        };\r\n        LargeSymbolPath.prototype.buildPath = function (path, shape) {\r\n            var points = shape.points;\r\n            var size = shape.size;\r\n            var symbolProxy = this.symbolProxy;\r\n            var symbolProxyShape = symbolProxy.shape;\r\n            var ctx = path.getContext\r\n                ? path.getContext()\r\n                : path;\r\n            var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD;\r\n            if (canBoost) {\r\n                this._ctx = ctx;\r\n                return;\r\n            }\r\n            this._ctx = null;\r\n            for (var i = 0; i < points.length;) {\r\n                var x = points[i++];\r\n                var y = points[i++];\r\n                if (isNaN(x) || isNaN(y)) {\r\n                    continue;\r\n                }\r\n                if (this.softClipShape && !this.softClipShape.contain(x, y)) {\r\n                    continue;\r\n                }\r\n                symbolProxyShape.x = x - size[0] / 2;\r\n                symbolProxyShape.y = y - size[1] / 2;\r\n                symbolProxyShape.width = size[0];\r\n                symbolProxyShape.height = size[1];\r\n                symbolProxy.buildPath(path, symbolProxyShape, true);\r\n            }\r\n        };\r\n        LargeSymbolPath.prototype.afterBrush = function () {\r\n            var shape = this.shape;\r\n            var points = shape.points;\r\n            var size = shape.size;\r\n            var ctx = this._ctx;\r\n            if (!ctx) {\r\n                return;\r\n            }\r\n            for (var i = 0; i < points.length;) {\r\n                var x = points[i++];\r\n                var y = points[i++];\r\n                if (isNaN(x) || isNaN(y)) {\r\n                    continue;\r\n                }\r\n                if (this.softClipShape && !this.softClipShape.contain(x, y)) {\r\n                    continue;\r\n                }\r\n                ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\r\n            }\r\n        };\r\n        LargeSymbolPath.prototype.findDataIndex = function (x, y) {\r\n            var shape = this.shape;\r\n            var points = shape.points;\r\n            var size = shape.size;\r\n            var w = Math.max(size[0], 4);\r\n            var h = Math.max(size[1], 4);\r\n            for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\r\n                var i = idx * 2;\r\n                var x0 = points[i] - w / 2;\r\n                var y0 = points[i + 1] - h / 2;\r\n                if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\r\n                    return idx;\r\n                }\r\n            }\r\n            return -1;\r\n        };\r\n        return LargeSymbolPath;\r\n    }(Path));\r\n    var LargeSymbolDraw = (function () {\r\n        function LargeSymbolDraw() {\r\n            this.group = new Group();\r\n        }\r\n        LargeSymbolDraw.prototype.isPersistent = function () {\r\n            return !this._incremental;\r\n        };\r\n        LargeSymbolDraw.prototype.updateData = function (data, opt) {\r\n            this.group.removeAll();\r\n            var symbolEl = new LargeSymbolPath({\r\n                rectHover: true,\r\n                cursor: 'default'\r\n            });\r\n            symbolEl.setShape({\r\n                points: data.getLayout('symbolPoints')\r\n            });\r\n            this._setCommon(symbolEl, data, false, opt);\r\n            this.group.add(symbolEl);\r\n            this._incremental = null;\r\n        };\r\n        LargeSymbolDraw.prototype.updateLayout = function (data) {\r\n            if (this._incremental) {\r\n                return;\r\n            }\r\n            var points = data.getLayout('symbolPoints');\r\n            this.group.eachChild(function (child) {\r\n                if (child.startIndex != null) {\r\n                    var len = (child.endIndex - child.startIndex) * 2;\r\n                    var byteOffset = child.startIndex * 4 * 2;\r\n                    points = new Float32Array(points.buffer, byteOffset, len);\r\n                }\r\n                child.setShape('points', points);\r\n            });\r\n        };\r\n        LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\r\n            this.group.removeAll();\r\n            this._clearIncremental();\r\n            if (data.count() > 2e6) {\r\n                if (!this._incremental) {\r\n                    this._incremental = new IncrementalDisplayble({\r\n                        silent: true\r\n                    });\r\n                }\r\n                this.group.add(this._incremental);\r\n            }\r\n            else {\r\n                this._incremental = null;\r\n            }\r\n        };\r\n        LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\r\n            var symbolEl;\r\n            if (this._incremental) {\r\n                symbolEl = new LargeSymbolPath();\r\n                this._incremental.addDisplayable(symbolEl, true);\r\n            }\r\n            else {\r\n                symbolEl = new LargeSymbolPath({\r\n                    rectHover: true,\r\n                    cursor: 'default',\r\n                    startIndex: taskParams.start,\r\n                    endIndex: taskParams.end\r\n                });\r\n                symbolEl.incremental = true;\r\n                this.group.add(symbolEl);\r\n            }\r\n            symbolEl.setShape({\r\n                points: data.getLayout('symbolPoints')\r\n            });\r\n            this._setCommon(symbolEl, data, !!this._incremental, opt);\r\n        };\r\n        LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, isIncremental, opt) {\r\n            var hostModel = data.hostModel;\r\n            opt = opt || {};\r\n            var size = data.getVisual('symbolSize');\r\n            symbolEl.setShape('size', (size instanceof Array) ? size : [size, size]);\r\n            symbolEl.softClipShape = opt.clipShape || null;\r\n            symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0);\r\n            symbolEl.setColor = symbolEl.symbolProxy.setColor;\r\n            var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\r\n            symbolEl.useStyle(hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\r\n            var globalStyle = data.getVisual('style');\r\n            var visualColor = globalStyle && globalStyle.fill;\r\n            if (visualColor) {\r\n                symbolEl.setColor(visualColor);\r\n            }\r\n            if (!isIncremental) {\r\n                var ecData_1 = getECData(symbolEl);\r\n                ecData_1.seriesIndex = hostModel.seriesIndex;\r\n                symbolEl.on('mousemove', function (e) {\r\n                    ecData_1.dataIndex = null;\r\n                    var dataIndex = symbolEl.findDataIndex(e.offsetX, e.offsetY);\r\n                    if (dataIndex >= 0) {\r\n                        ecData_1.dataIndex = dataIndex + (symbolEl.startIndex || 0);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        LargeSymbolDraw.prototype.remove = function () {\r\n            this._clearIncremental();\r\n            this._incremental = null;\r\n            this.group.removeAll();\r\n        };\r\n        LargeSymbolDraw.prototype._clearIncremental = function () {\r\n            var incremental = this._incremental;\r\n            if (incremental) {\r\n                incremental.clearDisplaybles();\r\n            }\r\n        };\r\n        return LargeSymbolDraw;\r\n    }());\n\n    var ScatterView = (function (_super) {\r\n        __extends(ScatterView, _super);\r\n        function ScatterView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = ScatterView.type;\r\n            return _this;\r\n        }\r\n        ScatterView.prototype.render = function (seriesModel, ecModel, api) {\r\n            var data = seriesModel.getData();\r\n            var symbolDraw = this._updateSymbolDraw(data, seriesModel);\r\n            symbolDraw.updateData(data, {\r\n                clipShape: this._getClipShape(seriesModel)\r\n            });\r\n            this._finished = true;\r\n        };\r\n        ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\r\n            var data = seriesModel.getData();\r\n            var symbolDraw = this._updateSymbolDraw(data, seriesModel);\r\n            symbolDraw.incrementalPrepareUpdate(data);\r\n            this._finished = false;\r\n        };\r\n        ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\r\n            this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\r\n                clipShape: this._getClipShape(seriesModel)\r\n            });\r\n            this._finished = taskParams.end === seriesModel.getData().count();\r\n        };\r\n        ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\r\n            var data = seriesModel.getData();\r\n            this.group.dirty();\r\n            if (!this._finished || data.count() > 1e4 || !this._symbolDraw.isPersistent()) {\r\n                return {\r\n                    update: true\r\n                };\r\n            }\r\n            else {\r\n                var res = layoutPoints().reset(seriesModel, ecModel, api);\r\n                if (res.progress) {\r\n                    res.progress({ start: 0, end: data.count(), count: data.count() }, data);\r\n                }\r\n                this._symbolDraw.updateLayout(data);\r\n            }\r\n        };\r\n        ScatterView.prototype._getClipShape = function (seriesModel) {\r\n            var coordSys = seriesModel.coordinateSystem;\r\n            var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\r\n            return seriesModel.get('clip', true) ? clipArea : null;\r\n        };\r\n        ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\r\n            var symbolDraw = this._symbolDraw;\r\n            var pipelineContext = seriesModel.pipelineContext;\r\n            var isLargeDraw = pipelineContext.large;\r\n            if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\r\n                symbolDraw && symbolDraw.remove();\r\n                symbolDraw = this._symbolDraw = isLargeDraw\r\n                    ? new LargeSymbolDraw()\r\n                    : new SymbolDraw();\r\n                this._isLargeDraw = isLargeDraw;\r\n                this.group.removeAll();\r\n            }\r\n            this.group.add(symbolDraw.group);\r\n            return symbolDraw;\r\n        };\r\n        ScatterView.prototype.remove = function (ecModel, api) {\r\n            this._symbolDraw && this._symbolDraw.remove(true);\r\n            this._symbolDraw = null;\r\n        };\r\n        ScatterView.prototype.dispose = function () { };\r\n        ScatterView.type = 'scatter';\r\n        return ScatterView;\r\n    }(ChartView));\r\n    ChartView.registerClass(ScatterView);\n\n    registerLayout(layoutPoints('scatter'));\n\n    var _nonShapeGraphicElements = {\r\n        path: null,\r\n        compoundPath: null,\r\n        group: Group,\r\n        image: ZRImage,\r\n        text: ZRText\r\n    };\r\n    registerPreprocessor(function (option) {\r\n        var graphicOption = option.graphic;\r\n        if (isArray(graphicOption)) {\r\n            if (!graphicOption[0] || !graphicOption[0].elements) {\r\n                option.graphic = [{ elements: graphicOption }];\r\n            }\r\n            else {\r\n                option.graphic = [option.graphic[0]];\r\n            }\r\n        }\r\n        else if (graphicOption && !graphicOption.elements) {\r\n            option.graphic = [{ elements: [graphicOption] }];\r\n        }\r\n    });\r\n    var GraphicModel = extendComponentModel({\r\n        type: 'graphic',\r\n        defaultOption: {\r\n            elements: [],\r\n            parentId: null\r\n        },\r\n        _elOptionsToUpdate: null,\r\n        mergeOption: function (option) {\r\n            var elements = this.option.elements;\r\n            this.option.elements = null;\r\n            GraphicModel.superApply(this, 'mergeOption', arguments);\r\n            this.option.elements = elements;\r\n        },\r\n        optionUpdated: function (newOption, isInit) {\r\n            var thisOption = this.option;\r\n            var newList = (isInit ? thisOption : newOption).elements;\r\n            var existList = thisOption.elements = isInit ? [] : thisOption.elements;\r\n            var flattenedList = [];\r\n            this._flatten(newList, flattenedList);\r\n            var mappingResult = mappingToExists(existList, flattenedList, 'normalMerge');\r\n            var elOptionsToUpdate = this._elOptionsToUpdate = [];\r\n            each(mappingResult, function (resultItem, index) {\r\n                var newElOption = resultItem.newOption;\r\n                if (__DEV__) {\r\n                    assert(isObject(newElOption) || resultItem.existing, 'Empty graphic option definition');\r\n                }\r\n                if (!newElOption) {\r\n                    return;\r\n                }\r\n                elOptionsToUpdate.push(newElOption);\r\n                setKeyInfoToNewElOption(resultItem, newElOption);\r\n                mergeNewElOptionToExist(existList, index, newElOption);\r\n                setLayoutInfoToExist(existList[index], newElOption);\r\n            }, this);\r\n            for (var i = existList.length - 1; i >= 0; i--) {\r\n                if (existList[i] == null) {\r\n                    existList.splice(i, 1);\r\n                }\r\n                else {\r\n                    delete existList[i].$action;\r\n                }\r\n            }\r\n        },\r\n        _flatten: function (optionList, result, parentOption) {\r\n            each(optionList, function (option) {\r\n                if (!option) {\r\n                    return;\r\n                }\r\n                if (parentOption) {\r\n                    option.parentOption = parentOption;\r\n                }\r\n                result.push(option);\r\n                var children = option.children;\r\n                if (option.type === 'group' && children) {\r\n                    this._flatten(children, result, option);\r\n                }\r\n                delete option.children;\r\n            }, this);\r\n        },\r\n        useElOptionsToUpdate: function () {\r\n            var els = this._elOptionsToUpdate;\r\n            this._elOptionsToUpdate = null;\r\n            return els;\r\n        }\r\n    });\r\n    extendComponentView({\r\n        type: 'graphic',\r\n        init: function (ecModel, api) {\r\n            this._elMap = createHashMap();\r\n            this._lastGraphicModel;\r\n        },\r\n        render: function (graphicModel, ecModel, api) {\r\n            if (graphicModel !== this._lastGraphicModel) {\r\n                this._clear();\r\n            }\r\n            this._lastGraphicModel = graphicModel;\r\n            this._updateElements(graphicModel);\r\n            this._relocate(graphicModel, api);\r\n        },\r\n        _updateElements: function (graphicModel) {\r\n            var elOptionsToUpdate = graphicModel.useElOptionsToUpdate();\r\n            if (!elOptionsToUpdate) {\r\n                return;\r\n            }\r\n            var elMap = this._elMap;\r\n            var rootGroup = this.group;\r\n            each(elOptionsToUpdate, function (elOption) {\r\n                var $action = elOption.$action;\r\n                var id = elOption.id;\r\n                var existEl = elMap.get(id);\r\n                var parentId = elOption.parentId;\r\n                var targetElParent = parentId != null ? elMap.get(parentId) : rootGroup;\r\n                var elOptionStyle = elOption.style;\r\n                if (elOption.type === 'text' && elOptionStyle) {\r\n                    if (elOption.hv && elOption.hv[1]) {\r\n                        elOptionStyle.textVerticalAlign = elOptionStyle.textBaseline = null;\r\n                    }\r\n                    !elOptionStyle.hasOwnProperty('textFill') && elOptionStyle.fill && (elOptionStyle.textFill = elOptionStyle.fill);\r\n                    !elOptionStyle.hasOwnProperty('textStroke') && elOptionStyle.stroke && (elOptionStyle.textStroke = elOptionStyle.stroke);\r\n                }\r\n                var elOptionCleaned = getCleanedElOption(elOption);\r\n                if (__DEV__) {\r\n                    existEl && assert(targetElParent === existEl.parent, 'Changing parent is not supported.');\r\n                }\r\n                if (!$action || $action === 'merge') {\r\n                    existEl\r\n                        ? existEl.attr(elOptionCleaned)\r\n                        : createEl(id, targetElParent, elOptionCleaned, elMap);\r\n                }\r\n                else if ($action === 'replace') {\r\n                    removeEl(existEl, elMap);\r\n                    createEl(id, targetElParent, elOptionCleaned, elMap);\r\n                }\r\n                else if ($action === 'remove') {\r\n                    removeEl(existEl, elMap);\r\n                }\r\n                var el = elMap.get(id);\r\n                if (el) {\r\n                    el.__ecGraphicWidthOption = elOption.width;\r\n                    el.__ecGraphicHeightOption = elOption.height;\r\n                    setEventData(el, graphicModel);\r\n                }\r\n            });\r\n        },\r\n        _relocate: function (graphicModel, api) {\r\n            var elOptions = graphicModel.option.elements;\r\n            var rootGroup = this.group;\r\n            var elMap = this._elMap;\r\n            var apiWidth = api.getWidth();\r\n            var apiHeight = api.getHeight();\r\n            for (var i = 0; i < elOptions.length; i++) {\r\n                var elOption = elOptions[i];\r\n                var el = elMap.get(elOption.id);\r\n                if (!el || !el.isGroup) {\r\n                    continue;\r\n                }\r\n                var parentEl = el.parent;\r\n                var isParentRoot = parentEl === rootGroup;\r\n                el.__ecGraphicWidth = parsePercent$2(el.__ecGraphicWidthOption, isParentRoot ? apiWidth : parentEl.__ecGraphicWidth) || 0;\r\n                el.__ecGraphicHeight = parsePercent$2(el.__ecGraphicHeightOption, isParentRoot ? apiHeight : parentEl.__ecGraphicHeight) || 0;\r\n            }\r\n            for (var i = elOptions.length - 1; i >= 0; i--) {\r\n                var elOption = elOptions[i];\r\n                var el = elMap.get(elOption.id);\r\n                if (!el) {\r\n                    continue;\r\n                }\r\n                var parentEl = el.parent;\r\n                var containerInfo = parentEl === rootGroup\r\n                    ? {\r\n                        width: apiWidth,\r\n                        height: apiHeight\r\n                    }\r\n                    : {\r\n                        width: parentEl.__ecGraphicWidth,\r\n                        height: parentEl.__ecGraphicHeight\r\n                    };\r\n                positionElement(el, elOption, containerInfo, null, { hv: elOption.hv, boundingMode: elOption.bounding });\r\n            }\r\n        },\r\n        _clear: function () {\r\n            var elMap = this._elMap;\r\n            elMap.each(function (el) {\r\n                removeEl(el, elMap);\r\n            });\r\n            this._elMap = createHashMap();\r\n        },\r\n        dispose: function () {\r\n            this._clear();\r\n        }\r\n    });\r\n    function createEl(id, targetElParent, elOption, elMap) {\r\n        var graphicType = elOption.type;\r\n        if (__DEV__) {\r\n            assert(graphicType, 'graphic type MUST be set');\r\n        }\r\n        var Clz = _nonShapeGraphicElements.hasOwnProperty(graphicType)\r\n            ? _nonShapeGraphicElements[graphicType]\r\n            : getShapeClass(graphicType);\r\n        if (__DEV__) {\r\n            assert(Clz, 'graphic type can not be found');\r\n        }\r\n        var el = new Clz(elOption);\r\n        targetElParent.add(el);\r\n        elMap.set(id, el);\r\n        el.__ecGraphicId = id;\r\n    }\r\n    function removeEl(existEl, elMap) {\r\n        var existElParent = existEl && existEl.parent;\r\n        if (existElParent) {\r\n            existEl.type === 'group' && existEl.traverse(function (el) {\r\n                removeEl(el, elMap);\r\n            });\r\n            elMap.removeKey(existEl.__ecGraphicId);\r\n            existElParent.remove(existEl);\r\n        }\r\n    }\r\n    function getCleanedElOption(elOption) {\r\n        elOption = extend({}, elOption);\r\n        each(['id', 'parentId', '$action', 'hv', 'bounding'].concat(LOCATION_PARAMS), function (name) {\r\n            delete elOption[name];\r\n        });\r\n        return elOption;\r\n    }\r\n    function isSetLoc(obj, props) {\r\n        var isSet;\r\n        each(props, function (prop) {\r\n            obj[prop] != null && obj[prop] !== 'auto' && (isSet = true);\r\n        });\r\n        return isSet;\r\n    }\r\n    function setKeyInfoToNewElOption(resultItem, newElOption) {\r\n        var existElOption = resultItem.existing;\r\n        newElOption.id = resultItem.keyInfo.id;\r\n        !newElOption.type && existElOption && (newElOption.type = existElOption.type);\r\n        if (newElOption.parentId == null) {\r\n            var newElParentOption = newElOption.parentOption;\r\n            if (newElParentOption) {\r\n                newElOption.parentId = newElParentOption.id;\r\n            }\r\n            else if (existElOption) {\r\n                newElOption.parentId = existElOption.parentId;\r\n            }\r\n        }\r\n        newElOption.parentOption = null;\r\n    }\r\n    function mergeNewElOptionToExist(existList, index, newElOption) {\r\n        var newElOptCopy = extend({}, newElOption);\r\n        var existElOption = existList[index];\r\n        var $action = newElOption.$action || 'merge';\r\n        if ($action === 'merge') {\r\n            if (existElOption) {\r\n                if (__DEV__) {\r\n                    var newType = newElOption.type;\r\n                    assert(!newType || existElOption.type === newType, 'Please set $action: \"replace\" to change `type`');\r\n                }\r\n                merge(existElOption, newElOptCopy, true);\r\n                mergeLayoutParam(existElOption, newElOptCopy, { ignoreSize: true });\r\n                copyLayoutParams(newElOption, existElOption);\r\n            }\r\n            else {\r\n                existList[index] = newElOptCopy;\r\n            }\r\n        }\r\n        else if ($action === 'replace') {\r\n            existList[index] = newElOptCopy;\r\n        }\r\n        else if ($action === 'remove') {\r\n            existElOption && (existList[index] = null);\r\n        }\r\n    }\r\n    function setLayoutInfoToExist(existItem, newElOption) {\r\n        if (!existItem) {\r\n            return;\r\n        }\r\n        existItem.hv = newElOption.hv = [\r\n            isSetLoc(newElOption, ['left', 'right']),\r\n            isSetLoc(newElOption, ['top', 'bottom'])\r\n        ];\r\n        if (existItem.type === 'group') {\r\n            existItem.width == null && (existItem.width = newElOption.width = 0);\r\n            existItem.height == null && (existItem.height = newElOption.height = 0);\r\n        }\r\n    }\r\n    function setEventData(el, graphicModel, elOption) {\r\n        var eventData = el.eventData;\r\n        if (!el.silent && !el.ignore && !eventData) {\r\n            eventData = el.eventData = {\r\n                componentType: 'graphic',\r\n                componentIndex: graphicModel.componentIndex,\r\n                name: el.name\r\n            };\r\n        }\r\n        if (eventData) {\r\n            eventData.info = el.info;\r\n        }\r\n    }\n\n    function findPointFromSeries (finder, ecModel) {\r\n        var point = [];\r\n        var seriesIndex = finder.seriesIndex;\r\n        var seriesModel;\r\n        if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\r\n            return {\r\n                point: []\r\n            };\r\n        }\r\n        var data = seriesModel.getData();\r\n        var dataIndex = queryDataIndex(data, finder);\r\n        if (dataIndex == null || dataIndex < 0 || isArray(dataIndex)) {\r\n            return { point: [] };\r\n        }\r\n        var el = data.getItemGraphicEl(dataIndex);\r\n        var coordSys = seriesModel.coordinateSystem;\r\n        if (seriesModel.getTooltipPosition) {\r\n            point = seriesModel.getTooltipPosition(dataIndex) || [];\r\n        }\r\n        else if (coordSys && coordSys.dataToPoint) {\r\n            if (finder.isStacked) {\r\n                var baseAxis = coordSys.getBaseAxis();\r\n                var valueAxis = coordSys.getOtherAxis(baseAxis);\r\n                var valueAxisDim = valueAxis.dim;\r\n                var baseAxisDim = baseAxis.dim;\r\n                var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\r\n                var baseDim = data.mapDimension(baseAxisDim);\r\n                var stackedData = [];\r\n                stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\r\n                stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\r\n                point = coordSys.dataToPoint(stackedData) || [];\r\n            }\r\n            else {\r\n                point = coordSys.dataToPoint(data.getValues(map(coordSys.dimensions, function (dim) {\r\n                    return data.mapDimension(dim);\r\n                }), dataIndex)) || [];\r\n            }\r\n        }\r\n        else if (el) {\r\n            var rect = el.getBoundingRect().clone();\r\n            rect.applyTransform(el.transform);\r\n            point = [\r\n                rect.x + rect.width / 2,\r\n                rect.y + rect.height / 2\r\n            ];\r\n        }\r\n        return { point: point, el: el };\r\n    }\n\n    var inner$7 = makeInner();\r\n    function axisTrigger (payload, ecModel, api) {\r\n        var currTrigger = payload.currTrigger;\r\n        var point = [payload.x, payload.y];\r\n        var finder = payload;\r\n        var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\r\n        var coordSysAxesInfo = ecModel.getComponent('axisPointer')\r\n            .coordSysAxesInfo;\r\n        if (!coordSysAxesInfo) {\r\n            return;\r\n        }\r\n        if (illegalPoint(point)) {\r\n            point = findPointFromSeries({\r\n                seriesIndex: finder.seriesIndex,\r\n                dataIndex: finder.dataIndex\r\n            }, ecModel).point;\r\n        }\r\n        var isIllegalPoint = illegalPoint(point);\r\n        var inputAxesInfo = finder.axesInfo;\r\n        var axesInfo = coordSysAxesInfo.axesInfo;\r\n        var shouldHide = currTrigger === 'leave' || illegalPoint(point);\r\n        var outputPayload = {};\r\n        var showValueMap = {};\r\n        var dataByCoordSys = {\r\n            list: [],\r\n            map: {}\r\n        };\r\n        var updaters = {\r\n            showPointer: curry(showPointer, showValueMap),\r\n            showTooltip: curry(showTooltip, dataByCoordSys)\r\n        };\r\n        each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\r\n            var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\r\n            each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\r\n                var axis = axisInfo.axis;\r\n                var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo);\r\n                if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\r\n                    var val = inputAxisInfo && inputAxisInfo.value;\r\n                    if (val == null && !isIllegalPoint) {\r\n                        val = axis.pointToData(point);\r\n                    }\r\n                    val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\r\n                }\r\n            });\r\n        });\r\n        var linkTriggers = {};\r\n        each(axesInfo, function (tarAxisInfo, tarKey) {\r\n            var linkGroup = tarAxisInfo.linkGroup;\r\n            if (linkGroup && !showValueMap[tarKey]) {\r\n                each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\r\n                    var srcValItem = showValueMap[srcKey];\r\n                    if (srcAxisInfo !== tarAxisInfo && srcValItem) {\r\n                        var val = srcValItem.value;\r\n                        linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\r\n                        linkTriggers[tarAxisInfo.key] = val;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        each(linkTriggers, function (val, tarKey) {\r\n            processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\r\n        });\r\n        updateModelActually(showValueMap, axesInfo, outputPayload);\r\n        dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\r\n        dispatchHighDownActually(axesInfo, dispatchAction, api);\r\n        return outputPayload;\r\n    }\r\n    function processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\r\n        var axis = axisInfo.axis;\r\n        if (axis.scale.isBlank() || !axis.containData(newValue)) {\r\n            return;\r\n        }\r\n        if (!axisInfo.involveSeries) {\r\n            updaters.showPointer(axisInfo, newValue);\r\n            return;\r\n        }\r\n        var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\r\n        var payloadBatch = payloadInfo.payloadBatch;\r\n        var snapToValue = payloadInfo.snapToValue;\r\n        if (payloadBatch[0] && outputFinder.seriesIndex == null) {\r\n            extend(outputFinder, payloadBatch[0]);\r\n        }\r\n        if (!noSnap && axisInfo.snap) {\r\n            if (axis.containData(snapToValue) && snapToValue != null) {\r\n                newValue = snapToValue;\r\n            }\r\n        }\r\n        updaters.showPointer(axisInfo, newValue, payloadBatch);\r\n        updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\r\n    }\r\n    function buildPayloadsBySeries(value, axisInfo) {\r\n        var axis = axisInfo.axis;\r\n        var dim = axis.dim;\r\n        var snapToValue = value;\r\n        var payloadBatch = [];\r\n        var minDist = Number.MAX_VALUE;\r\n        var minDiff = -1;\r\n        each(axisInfo.seriesModels, function (series, idx) {\r\n            var dataDim = series.getData().mapDimensionsAll(dim);\r\n            var seriesNestestValue;\r\n            var dataIndices;\r\n            if (series.getAxisTooltipData) {\r\n                var result = series.getAxisTooltipData(dataDim, value, axis);\r\n                dataIndices = result.dataIndices;\r\n                seriesNestestValue = result.nestestValue;\r\n            }\r\n            else {\r\n                dataIndices = series.getData().indicesOfNearest(dataDim[0], value, axis.type === 'category' ? 0.5 : null);\r\n                if (!dataIndices.length) {\r\n                    return;\r\n                }\r\n                seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\r\n            }\r\n            if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\r\n                return;\r\n            }\r\n            var diff = value - seriesNestestValue;\r\n            var dist = Math.abs(diff);\r\n            if (dist <= minDist) {\r\n                if (dist < minDist || (diff >= 0 && minDiff < 0)) {\r\n                    minDist = dist;\r\n                    minDiff = diff;\r\n                    snapToValue = seriesNestestValue;\r\n                    payloadBatch.length = 0;\r\n                }\r\n                each(dataIndices, function (dataIndex) {\r\n                    payloadBatch.push({\r\n                        seriesIndex: series.seriesIndex,\r\n                        dataIndexInside: dataIndex,\r\n                        dataIndex: series.getData().getRawIndex(dataIndex)\r\n                    });\r\n                });\r\n            }\r\n        });\r\n        return {\r\n            payloadBatch: payloadBatch,\r\n            snapToValue: snapToValue\r\n        };\r\n    }\r\n    function showPointer(showValueMap, axisInfo, value, payloadBatch) {\r\n        showValueMap[axisInfo.key] = {\r\n            value: value,\r\n            payloadBatch: payloadBatch\r\n        };\r\n    }\r\n    function showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\r\n        var payloadBatch = payloadInfo.payloadBatch;\r\n        var axis = axisInfo.axis;\r\n        var axisModel = axis.model;\r\n        var axisPointerModel = axisInfo.axisPointerModel;\r\n        if (!axisInfo.triggerTooltip || !payloadBatch.length) {\r\n            return;\r\n        }\r\n        var coordSysModel = axisInfo.coordSys.model;\r\n        var coordSysKey = makeKey(coordSysModel);\r\n        var coordSysItem = dataByCoordSys.map[coordSysKey];\r\n        if (!coordSysItem) {\r\n            coordSysItem = dataByCoordSys.map[coordSysKey] = {\r\n                coordSysId: coordSysModel.id,\r\n                coordSysIndex: coordSysModel.componentIndex,\r\n                coordSysType: coordSysModel.type,\r\n                coordSysMainType: coordSysModel.mainType,\r\n                dataByAxis: []\r\n            };\r\n            dataByCoordSys.list.push(coordSysItem);\r\n        }\r\n        coordSysItem.dataByAxis.push({\r\n            axisDim: axis.dim,\r\n            axisIndex: axisModel.componentIndex,\r\n            axisType: axisModel.type,\r\n            axisId: axisModel.id,\r\n            value: value,\r\n            valueLabelOpt: {\r\n                precision: axisPointerModel.get(['label', 'precision']),\r\n                formatter: axisPointerModel.get(['label', 'formatter'])\r\n            },\r\n            seriesDataIndices: payloadBatch.slice()\r\n        });\r\n    }\r\n    function updateModelActually(showValueMap, axesInfo, outputPayload) {\r\n        var outputAxesInfo = outputPayload.axesInfo = [];\r\n        each(axesInfo, function (axisInfo, key) {\r\n            var option = axisInfo.axisPointerModel.option;\r\n            var valItem = showValueMap[key];\r\n            if (valItem) {\r\n                !axisInfo.useHandle && (option.status = 'show');\r\n                option.value = valItem.value;\r\n                option.seriesDataIndices = (valItem.payloadBatch || []).slice();\r\n            }\r\n            else {\r\n                !axisInfo.useHandle && (option.status = 'hide');\r\n            }\r\n            option.status === 'show' && outputAxesInfo.push({\r\n                axisDim: axisInfo.axis.dim,\r\n                axisIndex: axisInfo.axis.model.componentIndex,\r\n                value: option.value\r\n            });\r\n        });\r\n    }\r\n    function dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\r\n        if (illegalPoint(point) || !dataByCoordSys.list.length) {\r\n            dispatchAction({ type: 'hideTip' });\r\n            return;\r\n        }\r\n        var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\r\n        dispatchAction({\r\n            type: 'showTip',\r\n            escapeConnect: true,\r\n            x: point[0],\r\n            y: point[1],\r\n            tooltipOption: payload.tooltipOption,\r\n            position: payload.position,\r\n            dataIndexInside: sampleItem.dataIndexInside,\r\n            dataIndex: sampleItem.dataIndex,\r\n            seriesIndex: sampleItem.seriesIndex,\r\n            dataByCoordSys: dataByCoordSys.list\r\n        });\r\n    }\r\n    function dispatchHighDownActually(axesInfo, dispatchAction, api) {\r\n        var zr = api.getZr();\r\n        var highDownKey = 'axisPointerLastHighlights';\r\n        var lastHighlights = inner$7(zr)[highDownKey] || {};\r\n        var newHighlights = inner$7(zr)[highDownKey] = {};\r\n        each(axesInfo, function (axisInfo, key) {\r\n            var option = axisInfo.axisPointerModel.option;\r\n            option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\r\n                var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\r\n                newHighlights[key] = batchItem;\r\n            });\r\n        });\r\n        var toHighlight = [];\r\n        var toDownplay = [];\r\n        each(lastHighlights, function (batchItem, key) {\r\n            !newHighlights[key] && toDownplay.push(batchItem);\r\n        });\r\n        each(newHighlights, function (batchItem, key) {\r\n            !lastHighlights[key] && toHighlight.push(batchItem);\r\n        });\r\n        toDownplay.length && api.dispatchAction({\r\n            type: 'downplay',\r\n            escapeConnect: true,\r\n            notBlur: true,\r\n            batch: toDownplay\r\n        });\r\n        toHighlight.length && api.dispatchAction({\r\n            type: 'highlight',\r\n            escapeConnect: true,\r\n            notBlur: true,\r\n            batch: toHighlight\r\n        });\r\n    }\r\n    function findInputAxisInfo(inputAxesInfo, axisInfo) {\r\n        for (var i = 0; i < (inputAxesInfo || []).length; i++) {\r\n            var inputAxisInfo = inputAxesInfo[i];\r\n            if (axisInfo.axis.dim === inputAxisInfo.axisDim\r\n                && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\r\n                return inputAxisInfo;\r\n            }\r\n        }\r\n    }\r\n    function makeMapperParam(axisInfo) {\r\n        var axisModel = axisInfo.axis.model;\r\n        var item = {};\r\n        var dim = item.axisDim = axisInfo.axis.dim;\r\n        item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\r\n        item.axisName = item[dim + 'AxisName'] = axisModel.name;\r\n        item.axisId = item[dim + 'AxisId'] = axisModel.id;\r\n        return item;\r\n    }\r\n    function illegalPoint(point) {\r\n        return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\r\n    }\n\n    var inner$8 = makeInner();\r\n    var each$4 = each;\r\n    function register(key, api, handler) {\r\n        if (env.node) {\r\n            return;\r\n        }\r\n        var zr = api.getZr();\r\n        inner$8(zr).records || (inner$8(zr).records = {});\r\n        initGlobalListeners(zr, api);\r\n        var record = inner$8(zr).records[key] || (inner$8(zr).records[key] = {});\r\n        record.handler = handler;\r\n    }\r\n    function initGlobalListeners(zr, api) {\r\n        if (inner$8(zr).initialized) {\r\n            return;\r\n        }\r\n        inner$8(zr).initialized = true;\r\n        useHandler('click', curry(doEnter, 'click'));\r\n        useHandler('mousemove', curry(doEnter, 'mousemove'));\r\n        useHandler('globalout', onLeave);\r\n        function useHandler(eventType, cb) {\r\n            zr.on(eventType, function (e) {\r\n                var dis = makeDispatchAction(api);\r\n                each$4(inner$8(zr).records, function (record) {\r\n                    record && cb(record, e, dis.dispatchAction);\r\n                });\r\n                dispatchTooltipFinally(dis.pendings, api);\r\n            });\r\n        }\r\n    }\r\n    function dispatchTooltipFinally(pendings, api) {\r\n        var showLen = pendings.showTip.length;\r\n        var hideLen = pendings.hideTip.length;\r\n        var actuallyPayload;\r\n        if (showLen) {\r\n            actuallyPayload = pendings.showTip[showLen - 1];\r\n        }\r\n        else if (hideLen) {\r\n            actuallyPayload = pendings.hideTip[hideLen - 1];\r\n        }\r\n        if (actuallyPayload) {\r\n            actuallyPayload.dispatchAction = null;\r\n            api.dispatchAction(actuallyPayload);\r\n        }\r\n    }\r\n    function onLeave(record, e, dispatchAction) {\r\n        record.handler('leave', null, dispatchAction);\r\n    }\r\n    function doEnter(currTrigger, record, e, dispatchAction) {\r\n        record.handler(currTrigger, e, dispatchAction);\r\n    }\r\n    function makeDispatchAction(api) {\r\n        var pendings = {\r\n            showTip: [],\r\n            hideTip: []\r\n        };\r\n        var dispatchAction = function (payload) {\r\n            var pendingList = pendings[payload.type];\r\n            if (pendingList) {\r\n                pendingList.push(payload);\r\n            }\r\n            else {\r\n                payload.dispatchAction = dispatchAction;\r\n                api.dispatchAction(payload);\r\n            }\r\n        };\r\n        return {\r\n            dispatchAction: dispatchAction,\r\n            pendings: pendings\r\n        };\r\n    }\r\n    function unregister(key, api) {\r\n        if (env.node) {\r\n            return;\r\n        }\r\n        var zr = api.getZr();\r\n        var record = (inner$8(zr).records || {})[key];\r\n        if (record) {\r\n            inner$8(zr).records[key] = null;\r\n        }\r\n    }\n\n    var AxisPointerView = (function (_super) {\r\n        __extends(AxisPointerView, _super);\r\n        function AxisPointerView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = AxisPointerView.type;\r\n            return _this;\r\n        }\r\n        AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\r\n            var globalTooltipModel = ecModel.getComponent('tooltip');\r\n            var triggerOn = globalAxisPointerModel.get('triggerOn')\r\n                || (globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click');\r\n            register('axisPointer', api, function (currTrigger, e, dispatchAction) {\r\n                if (triggerOn !== 'none'\r\n                    && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\r\n                    dispatchAction({\r\n                        type: 'updateAxisPointer',\r\n                        currTrigger: currTrigger,\r\n                        x: e && e.offsetX,\r\n                        y: e && e.offsetY\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        AxisPointerView.prototype.remove = function (ecModel, api) {\r\n            unregister('axisPointer', api);\r\n        };\r\n        AxisPointerView.prototype.dispose = function (ecModel, api) {\r\n            unregister('axisPointer', api);\r\n        };\r\n        AxisPointerView.type = 'axisPointer';\r\n        return AxisPointerView;\r\n    }(ComponentView));\r\n    ComponentView.registerClass(AxisPointerView);\n\n    var inner$9 = makeInner();\r\n    var clone$3 = clone;\r\n    var bind$1 = bind;\r\n    var BaseAxisPointer = (function () {\r\n        function BaseAxisPointer() {\r\n            this._dragging = false;\r\n            this.animationThreshold = 15;\r\n        }\r\n        BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\r\n            var value = axisPointerModel.get('value');\r\n            var status = axisPointerModel.get('status');\r\n            this._axisModel = axisModel;\r\n            this._axisPointerModel = axisPointerModel;\r\n            this._api = api;\r\n            if (!forceRender\r\n                && this._lastValue === value\r\n                && this._lastStatus === status) {\r\n                return;\r\n            }\r\n            this._lastValue = value;\r\n            this._lastStatus = status;\r\n            var group = this._group;\r\n            var handle = this._handle;\r\n            if (!status || status === 'hide') {\r\n                group && group.hide();\r\n                handle && handle.hide();\r\n                return;\r\n            }\r\n            group && group.show();\r\n            handle && handle.show();\r\n            var elOption = {};\r\n            this.makeElOption(elOption, value, axisModel, axisPointerModel, api);\r\n            var graphicKey = elOption.graphicKey;\r\n            if (graphicKey !== this._lastGraphicKey) {\r\n                this.clear(api);\r\n            }\r\n            this._lastGraphicKey = graphicKey;\r\n            var moveAnimation = this._moveAnimation =\r\n                this.determineAnimation(axisModel, axisPointerModel);\r\n            if (!group) {\r\n                group = this._group = new Group();\r\n                this.createPointerEl(group, elOption, axisModel, axisPointerModel);\r\n                this.createLabelEl(group, elOption, axisModel, axisPointerModel);\r\n                api.getZr().add(group);\r\n            }\r\n            else {\r\n                var doUpdateProps = curry(updateProps$1, axisPointerModel, moveAnimation);\r\n                this.updatePointerEl(group, elOption, doUpdateProps);\r\n                this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\r\n            }\r\n            updateMandatoryProps(group, axisPointerModel, true);\r\n            this._renderHandle(value);\r\n        };\r\n        BaseAxisPointer.prototype.remove = function (api) {\r\n            this.clear(api);\r\n        };\r\n        BaseAxisPointer.prototype.dispose = function (api) {\r\n            this.clear(api);\r\n        };\r\n        BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\r\n            var animation = axisPointerModel.get('animation');\r\n            var axis = axisModel.axis;\r\n            var isCategoryAxis = axis.type === 'category';\r\n            var useSnap = axisPointerModel.get('snap');\r\n            if (!useSnap && !isCategoryAxis) {\r\n                return false;\r\n            }\r\n            if (animation === 'auto' || animation == null) {\r\n                var animationThreshold = this.animationThreshold;\r\n                if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\r\n                    return true;\r\n                }\r\n                if (useSnap) {\r\n                    var seriesDataCount = getAxisInfo(axisModel).seriesDataCount;\r\n                    var axisExtent = axis.getExtent();\r\n                    return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\r\n                }\r\n                return false;\r\n            }\r\n            return animation === true;\r\n        };\r\n        BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\r\n        };\r\n        BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\r\n            var pointerOption = elOption.pointer;\r\n            if (pointerOption) {\r\n                var pointerEl = inner$9(group).pointerEl = new graphic[pointerOption.type](clone$3(elOption.pointer));\r\n                group.add(pointerEl);\r\n            }\r\n        };\r\n        BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\r\n            if (elOption.label) {\r\n                var labelEl = inner$9(group).labelEl = new ZRText(clone$3(elOption.label));\r\n                group.add(labelEl);\r\n                updateLabelShowHide(labelEl, axisPointerModel);\r\n            }\r\n        };\r\n        BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps) {\r\n            var pointerEl = inner$9(group).pointerEl;\r\n            if (pointerEl && elOption.pointer) {\r\n                pointerEl.setStyle(elOption.pointer.style);\r\n                updateProps(pointerEl, { shape: elOption.pointer.shape });\r\n            }\r\n        };\r\n        BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps, axisPointerModel) {\r\n            var labelEl = inner$9(group).labelEl;\r\n            if (labelEl) {\r\n                labelEl.setStyle(elOption.label.style);\r\n                updateProps(labelEl, {\r\n                    x: elOption.label.x,\r\n                    y: elOption.label.y\r\n                });\r\n                updateLabelShowHide(labelEl, axisPointerModel);\r\n            }\r\n        };\r\n        BaseAxisPointer.prototype._renderHandle = function (value) {\r\n            if (this._dragging || !this.updateHandleTransform) {\r\n                return;\r\n            }\r\n            var axisPointerModel = this._axisPointerModel;\r\n            var zr = this._api.getZr();\r\n            var handle = this._handle;\r\n            var handleModel = axisPointerModel.getModel('handle');\r\n            var status = axisPointerModel.get('status');\r\n            if (!handleModel.get('show') || !status || status === 'hide') {\r\n                handle && zr.remove(handle);\r\n                this._handle = null;\r\n                return;\r\n            }\r\n            var isInit;\r\n            if (!this._handle) {\r\n                isInit = true;\r\n                handle = this._handle = createIcon(handleModel.get('icon'), {\r\n                    cursor: 'move',\r\n                    draggable: true,\r\n                    onmousemove: function (e) {\r\n                        stop(e.event);\r\n                    },\r\n                    onmousedown: bind$1(this._onHandleDragMove, this, 0, 0),\r\n                    drift: bind$1(this._onHandleDragMove, this),\r\n                    ondragend: bind$1(this._onHandleDragEnd, this)\r\n                });\r\n                zr.add(handle);\r\n            }\r\n            updateMandatoryProps(handle, axisPointerModel, false);\r\n            handle.setStyle(handleModel.getItemStyle(null, [\r\n                'color', 'borderColor', 'borderWidth', 'opacity',\r\n                'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'\r\n            ]));\r\n            var handleSize = handleModel.get('size');\r\n            if (!isArray(handleSize)) {\r\n                handleSize = [handleSize, handleSize];\r\n            }\r\n            handle.scaleX = handleSize[0] / 2;\r\n            handle.scaleY = handleSize[1] / 2;\r\n            createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\r\n            this._moveHandleToValue(value, isInit);\r\n        };\r\n        BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\r\n            updateProps$1(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\r\n        };\r\n        BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\r\n            var handle = this._handle;\r\n            if (!handle) {\r\n                return;\r\n            }\r\n            this._dragging = true;\r\n            var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\r\n            this._payloadInfo = trans;\r\n            handle.stopAnimation();\r\n            handle.attr(getHandleTransProps(trans));\r\n            inner$9(handle).lastProp = null;\r\n            this._doDispatchAxisPointer();\r\n        };\r\n        BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\r\n            var handle = this._handle;\r\n            if (!handle) {\r\n                return;\r\n            }\r\n            var payloadInfo = this._payloadInfo;\r\n            var axisModel = this._axisModel;\r\n            this._api.dispatchAction({\r\n                type: 'updateAxisPointer',\r\n                x: payloadInfo.cursorPoint[0],\r\n                y: payloadInfo.cursorPoint[1],\r\n                tooltipOption: payloadInfo.tooltipOption,\r\n                axesInfo: [{\r\n                        axisDim: axisModel.axis.dim,\r\n                        axisIndex: axisModel.componentIndex\r\n                    }]\r\n            });\r\n        };\r\n        BaseAxisPointer.prototype._onHandleDragEnd = function () {\r\n            this._dragging = false;\r\n            var handle = this._handle;\r\n            if (!handle) {\r\n                return;\r\n            }\r\n            var value = this._axisPointerModel.get('value');\r\n            this._moveHandleToValue(value);\r\n            this._api.dispatchAction({\r\n                type: 'hideTip'\r\n            });\r\n        };\r\n        BaseAxisPointer.prototype.clear = function (api) {\r\n            this._lastValue = null;\r\n            this._lastStatus = null;\r\n            var zr = api.getZr();\r\n            var group = this._group;\r\n            var handle = this._handle;\r\n            if (zr && group) {\r\n                this._lastGraphicKey = null;\r\n                group && zr.remove(group);\r\n                handle && zr.remove(handle);\r\n                this._group = null;\r\n                this._handle = null;\r\n                this._payloadInfo = null;\r\n            }\r\n        };\r\n        BaseAxisPointer.prototype.doClear = function () {\r\n        };\r\n        BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\r\n            xDimIndex = xDimIndex || 0;\r\n            return {\r\n                x: xy[xDimIndex],\r\n                y: xy[1 - xDimIndex],\r\n                width: wh[xDimIndex],\r\n                height: wh[1 - xDimIndex]\r\n            };\r\n        };\r\n        return BaseAxisPointer;\r\n    }());\r\n    function updateProps$1(animationModel, moveAnimation, el, props) {\r\n        if (!propsEqual(inner$9(el).lastProp, props)) {\r\n            inner$9(el).lastProp = props;\r\n            moveAnimation\r\n                ? updateProps(el, props, animationModel)\r\n                : (el.stopAnimation(), el.attr(props));\r\n        }\r\n    }\r\n    function propsEqual(lastProps, newProps) {\r\n        if (isObject(lastProps) && isObject(newProps)) {\r\n            var equals_1 = true;\r\n            each(newProps, function (item, key) {\r\n                equals_1 = equals_1 && propsEqual(lastProps[key], item);\r\n            });\r\n            return !!equals_1;\r\n        }\r\n        else {\r\n            return lastProps === newProps;\r\n        }\r\n    }\r\n    function updateLabelShowHide(labelEl, axisPointerModel) {\r\n        labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\r\n    }\r\n    function getHandleTransProps(trans) {\r\n        return {\r\n            x: trans.x || 0,\r\n            y: trans.y || 0,\r\n            rotation: trans.rotation || 0\r\n        };\r\n    }\r\n    function updateMandatoryProps(group, axisPointerModel, silent) {\r\n        var z = axisPointerModel.get('z');\r\n        var zlevel = axisPointerModel.get('zlevel');\r\n        group && group.traverse(function (el) {\r\n            if (el.type !== 'group') {\r\n                z != null && (el.z = z);\r\n                zlevel != null && (el.zlevel = zlevel);\r\n                el.silent = silent;\r\n            }\r\n        });\r\n    }\n\n    function buildElStyle(axisPointerModel) {\r\n        var axisPointerType = axisPointerModel.get('type');\r\n        var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\r\n        var style;\r\n        if (axisPointerType === 'line') {\r\n            style = styleModel.getLineStyle();\r\n            style.fill = null;\r\n        }\r\n        else if (axisPointerType === 'shadow') {\r\n            style = styleModel.getAreaStyle();\r\n            style.stroke = null;\r\n        }\r\n        return style;\r\n    }\r\n    function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\r\n        var value = axisPointerModel.get('value');\r\n        var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\r\n            precision: axisPointerModel.get(['label', 'precision']),\r\n            formatter: axisPointerModel.get(['label', 'formatter'])\r\n        });\r\n        var labelModel = axisPointerModel.getModel('label');\r\n        var paddings = normalizeCssArray$1(labelModel.get('padding') || 0);\r\n        var font = labelModel.getFont();\r\n        var textRect = getBoundingRect(text, font);\r\n        var position = labelPos.position;\r\n        var width = textRect.width + paddings[1] + paddings[3];\r\n        var height = textRect.height + paddings[0] + paddings[2];\r\n        var align = labelPos.align;\r\n        align === 'right' && (position[0] -= width);\r\n        align === 'center' && (position[0] -= width / 2);\r\n        var verticalAlign = labelPos.verticalAlign;\r\n        verticalAlign === 'bottom' && (position[1] -= height);\r\n        verticalAlign === 'middle' && (position[1] -= height / 2);\r\n        confineInContainer(position, width, height, api);\r\n        var bgColor = labelModel.get('backgroundColor');\r\n        if (!bgColor || bgColor === 'auto') {\r\n            bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\r\n        }\r\n        elOption.label = {\r\n            x: position[0],\r\n            y: position[1],\r\n            style: {\r\n                text: text,\r\n                textFont: font,\r\n                fill: labelModel.getTextColor(),\r\n                padding: paddings,\r\n                backgroundColor: bgColor,\r\n                borderColor: labelModel.get('borderColor') || 'transparent',\r\n                borderRadius: labelModel.get('borderRadius'),\r\n                borderWidth: labelModel.get('borderWidth') || 0,\r\n                shadowBlur: labelModel.get('shadowBlur'),\r\n                shadowColor: labelModel.get('shadowColor'),\r\n                shadowOffsetX: labelModel.get('shadowOffsetX'),\r\n                shadowOffsetY: labelModel.get('shadowOffsetY')\r\n            },\r\n            z2: 10\r\n        };\r\n    }\r\n    function confineInContainer(position, width, height, api) {\r\n        var viewWidth = api.getWidth();\r\n        var viewHeight = api.getHeight();\r\n        position[0] = Math.min(position[0] + width, viewWidth) - width;\r\n        position[1] = Math.min(position[1] + height, viewHeight) - height;\r\n        position[0] = Math.max(position[0], 0);\r\n        position[1] = Math.max(position[1], 0);\r\n    }\r\n    function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\r\n        value = axis.scale.parse(value);\r\n        var text = axis.scale.getLabel({\r\n            value: value\r\n        }, {\r\n            precision: opt.precision\r\n        });\r\n        var formatter = opt.formatter;\r\n        if (formatter) {\r\n            var params_1 = {\r\n                value: getAxisRawValue(axis, { value: value }),\r\n                axisDimension: axis.dim,\r\n                axisIndex: axis.index,\r\n                seriesData: []\r\n            };\r\n            each(seriesDataIndices, function (idxItem) {\r\n                var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\r\n                var dataIndex = idxItem.dataIndexInside;\r\n                var dataParams = series && series.getDataParams(dataIndex);\r\n                dataParams && params_1.seriesData.push(dataParams);\r\n            });\r\n            if (isString(formatter)) {\r\n                text = formatter.replace('{value}', text);\r\n            }\r\n            else if (isFunction(formatter)) {\r\n                text = formatter(params_1);\r\n            }\r\n        }\r\n        return text;\r\n    }\r\n    function getTransformedPosition(axis, value, layoutInfo) {\r\n        var transform = create$1();\r\n        rotate(transform, transform, layoutInfo.rotation);\r\n        translate(transform, transform, layoutInfo.position);\r\n        return applyTransform$1([\r\n            axis.dataToCoord(value),\r\n            (layoutInfo.labelOffset || 0)\r\n                + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)\r\n        ], transform);\r\n    }\r\n    function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\r\n        var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\r\n        layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\r\n        buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\r\n            position: getTransformedPosition(axisModel.axis, value, layoutInfo),\r\n            align: textLayout.textAlign,\r\n            verticalAlign: textLayout.textVerticalAlign\r\n        });\r\n    }\r\n    function makeLineShape(p1, p2, xDimIndex) {\r\n        xDimIndex = xDimIndex || 0;\r\n        return {\r\n            x1: p1[xDimIndex],\r\n            y1: p1[1 - xDimIndex],\r\n            x2: p2[xDimIndex],\r\n            y2: p2[1 - xDimIndex]\r\n        };\r\n    }\r\n    function makeRectShape(xy, wh, xDimIndex) {\r\n        xDimIndex = xDimIndex || 0;\r\n        return {\r\n            x: xy[xDimIndex],\r\n            y: xy[1 - xDimIndex],\r\n            width: wh[xDimIndex],\r\n            height: wh[1 - xDimIndex]\r\n        };\r\n    }\n\n    var CartesianAxisPointer = (function (_super) {\r\n        __extends(CartesianAxisPointer, _super);\r\n        function CartesianAxisPointer() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\r\n            var axis = axisModel.axis;\r\n            var grid = axis.grid;\r\n            var axisPointerType = axisPointerModel.get('type');\r\n            var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\r\n            var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\r\n            if (axisPointerType && axisPointerType !== 'none') {\r\n                var elStyle = buildElStyle(axisPointerModel);\r\n                var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\r\n                pointerOption.style = elStyle;\r\n                elOption.graphicKey = pointerOption.type;\r\n                elOption.pointer = pointerOption;\r\n            }\r\n            var layoutInfo = layout$1(grid.model, axisModel);\r\n            buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\r\n        };\r\n        CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\r\n            var layoutInfo = layout$1(axisModel.axis.grid.model, axisModel, {\r\n                labelInside: false\r\n            });\r\n            layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\r\n            var pos = getTransformedPosition(axisModel.axis, value, layoutInfo);\r\n            return {\r\n                x: pos[0],\r\n                y: pos[1],\r\n                rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\r\n            };\r\n        };\r\n        CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\r\n            var axis = axisModel.axis;\r\n            var grid = axis.grid;\r\n            var axisExtent = axis.getGlobalExtent(true);\r\n            var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\r\n            var dimIndex = axis.dim === 'x' ? 0 : 1;\r\n            var currPosition = [transform.x, transform.y];\r\n            currPosition[dimIndex] += delta[dimIndex];\r\n            currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\r\n            currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\r\n            var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\r\n            var cursorPoint = [cursorOtherValue, cursorOtherValue];\r\n            cursorPoint[dimIndex] = currPosition[dimIndex];\r\n            var tooltipOptions = [\r\n                { verticalAlign: 'middle' },\r\n                { align: 'center' }\r\n            ];\r\n            return {\r\n                x: currPosition[0],\r\n                y: currPosition[1],\r\n                rotation: transform.rotation,\r\n                cursorPoint: cursorPoint,\r\n                tooltipOption: tooltipOptions[dimIndex]\r\n            };\r\n        };\r\n        return CartesianAxisPointer;\r\n    }(BaseAxisPointer));\r\n    function getCartesian(grid, axis) {\r\n        var opt = {};\r\n        opt[axis.dim + 'AxisIndex'] = axis.index;\r\n        return grid.getCartesian(opt);\r\n    }\r\n    var pointerShapeBuilder = {\r\n        line: function (axis, pixelValue, otherExtent) {\r\n            var targetShape = makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\r\n            return {\r\n                type: 'Line',\r\n                subPixelOptimize: true,\r\n                shape: targetShape\r\n            };\r\n        },\r\n        shadow: function (axis, pixelValue, otherExtent) {\r\n            var bandWidth = Math.max(1, axis.getBandWidth());\r\n            var span = otherExtent[1] - otherExtent[0];\r\n            return {\r\n                type: 'Rect',\r\n                shape: makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\r\n            };\r\n        }\r\n    };\r\n    function getAxisDimIndex(axis) {\r\n        return axis.dim === 'x' ? 0 : 1;\r\n    }\r\n    AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n\n    var AxisPointerModel = (function (_super) {\r\n        __extends(AxisPointerModel, _super);\r\n        function AxisPointerModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = AxisPointerModel.type;\r\n            return _this;\r\n        }\r\n        AxisPointerModel.type = 'axisPointer';\r\n        AxisPointerModel.defaultOption = {\r\n            show: 'auto',\r\n            zlevel: 0,\r\n            z: 50,\r\n            type: 'line',\r\n            snap: false,\r\n            triggerTooltip: true,\r\n            value: null,\r\n            status: null,\r\n            link: [],\r\n            animation: null,\r\n            animationDurationUpdate: 200,\r\n            lineStyle: {\r\n                color: '#B9BEC9',\r\n                width: 1,\r\n                type: 'dashed'\r\n            },\r\n            shadowStyle: {\r\n                color: 'rgba(210,219,238,0.2)'\r\n            },\r\n            label: {\r\n                show: true,\r\n                formatter: null,\r\n                precision: 'auto',\r\n                margin: 3,\r\n                color: '#fff',\r\n                padding: [5, 7, 5, 7],\r\n                backgroundColor: 'auto',\r\n                borderColor: null,\r\n                borderWidth: 0,\r\n                borderRadius: 3\r\n            },\r\n            handle: {\r\n                show: false,\r\n                icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\r\n                size: 45,\r\n                margin: 50,\r\n                color: '#333',\r\n                shadowBlur: 3,\r\n                shadowColor: '#aaa',\r\n                shadowOffsetX: 0,\r\n                shadowOffsetY: 2,\r\n                throttle: 40\r\n            }\r\n        };\r\n        return AxisPointerModel;\r\n    }(ComponentModel));\n\n    ComponentModel.registerClass(AxisPointerModel);\r\n    registerPreprocessor(function (option) {\r\n        if (option) {\r\n            (!option.axisPointer || option.axisPointer.length === 0)\r\n                && (option.axisPointer = {});\r\n            var link = option.axisPointer.link;\r\n            if (link && !isArray(link)) {\r\n                option.axisPointer.link = [link];\r\n            }\r\n        }\r\n    });\r\n    registerProcessor(PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\r\n        ecModel.getComponent('axisPointer').coordSysAxesInfo =\r\n            collect(ecModel, api);\r\n    });\r\n    registerAction({\r\n        type: 'updateAxisPointer',\r\n        event: 'updateAxisPointer',\r\n        update: ':updateAxisPointer'\r\n    }, axisTrigger);\n\n    var TooltipModel = (function (_super) {\r\n        __extends(TooltipModel, _super);\r\n        function TooltipModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = TooltipModel.type;\r\n            return _this;\r\n        }\r\n        TooltipModel.type = 'tooltip';\r\n        TooltipModel.dependencies = ['axisPointer'];\r\n        TooltipModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 60,\r\n            show: true,\r\n            showContent: true,\r\n            trigger: 'item',\r\n            triggerOn: 'mousemove|click',\r\n            alwaysShowContent: false,\r\n            displayMode: 'single',\r\n            renderMode: 'auto',\r\n            confine: false,\r\n            showDelay: 0,\r\n            hideDelay: 100,\r\n            transitionDuration: 0.4,\r\n            enterable: false,\r\n            backgroundColor: '#fff',\r\n            shadowBlur: 10,\r\n            shadowColor: 'rgba(0, 0, 0, .2)',\r\n            shadowOffsetX: 1,\r\n            shadowOffsetY: 2,\r\n            borderColor: '#333',\r\n            borderRadius: 4,\r\n            borderWidth: 1,\r\n            padding: 10,\r\n            extraCssText: '',\r\n            axisPointer: {\r\n                type: 'line',\r\n                axis: 'auto',\r\n                animation: 'auto',\r\n                animationDurationUpdate: 200,\r\n                animationEasingUpdate: 'exponentialOut',\r\n                crossStyle: {\r\n                    color: '#999',\r\n                    width: 1,\r\n                    type: 'dashed',\r\n                    textStyle: {}\r\n                }\r\n            },\r\n            textStyle: {\r\n                color: '#666',\r\n                fontSize: 14\r\n            }\r\n        };\r\n        return TooltipModel;\r\n    }(ComponentModel));\r\n    ComponentModel.registerClass(TooltipModel);\n\n    var each$5 = each;\r\n    var toCamelCase$1 = toCamelCase;\r\n    var vendors = ['', '-webkit-', '-moz-', '-o-'];\r\n    var gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\r\n    function mirrowPos(pos) {\r\n        pos = pos === 'left'\r\n            ? 'right'\r\n            : pos === 'right'\r\n                ? 'left'\r\n                : pos === 'top'\r\n                    ? 'bottom'\r\n                    : 'top';\r\n        return pos;\r\n    }\r\n    function getFinalColor(color) {\r\n        var finalNearPointColor = '#fff';\r\n        if (isObject(color) && color.type !== 'pattern') {\r\n            finalNearPointColor = color.colorStops[0].color;\r\n        }\r\n        else if (isObject(color) && (color.type === 'pattern')) {\r\n            finalNearPointColor = 'transparent';\r\n        }\r\n        else if (isString(color)) {\r\n            finalNearPointColor = color;\r\n        }\r\n        return finalNearPointColor;\r\n    }\r\n    function assembleArrow(backgroundColor, borderColor, arrowPosition) {\r\n        if (!isString(arrowPosition) || arrowPosition === 'inside') {\r\n            return '';\r\n        }\r\n        borderColor = getFinalColor(borderColor);\r\n        var arrowPos = mirrowPos(arrowPosition);\r\n        var centerPos = '';\r\n        var rotate = 0;\r\n        if (indexOf(['left', 'right'], arrowPos) > -1) {\r\n            centerPos = arrowPos + \":-6px;top:50%;transform:translateY(-50%)\";\r\n            rotate = arrowPos === 'left' ? -225 : -45;\r\n        }\r\n        else {\r\n            centerPos = arrowPos + \":-6px;left:50%;transform:translateX(-50%)\";\r\n            rotate = arrowPos === 'top' ? 225 : 45;\r\n        }\r\n        var styleCss = [\r\n            'style=\"position:absolute;width:10px;height:10px;',\r\n            \"\" + centerPos,\r\n            \"rotate(\" + rotate + \"deg);\",\r\n            \"border-bottom: \" + borderColor + \" solid 1px;\",\r\n            \"border-right: \" + borderColor + \" solid 1px;\",\r\n            \"background-color: \" + backgroundColor + \";\",\r\n            'box-shadow: 8px 8px 16px -3px #000',\r\n            '\"'\r\n        ];\r\n        return \"<div \" + styleCss.join('') + \"></div>\";\r\n    }\r\n    function assembleTransition(duration) {\r\n        var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\r\n        var transitionText = 'left ' + duration + 's ' + transitionCurve + ','\r\n            + 'top ' + duration + 's ' + transitionCurve;\r\n        return map(vendors, function (vendorPrefix) {\r\n            return vendorPrefix + 'transition:' + transitionText;\r\n        }).join(';');\r\n    }\r\n    function assembleFont(textStyleModel) {\r\n        var cssText = [];\r\n        var fontSize = textStyleModel.get('fontSize');\r\n        var color = textStyleModel.getTextColor();\r\n        color && cssText.push('color:' + color);\r\n        cssText.push('font:' + textStyleModel.getFont());\r\n        fontSize\r\n            && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\r\n        each$5(['decoration', 'align'], function (name) {\r\n            var val = textStyleModel.get(name);\r\n            val && cssText.push('text-' + name + ':' + val);\r\n        });\r\n        return cssText.join(';');\r\n    }\r\n    function assembleCssText(tooltipModel, isFirstShow) {\r\n        var cssText = [];\r\n        var transitionDuration = tooltipModel.get('transitionDuration');\r\n        var backgroundColor = tooltipModel.get('backgroundColor');\r\n        var shadowBlur = tooltipModel.get('shadowBlur');\r\n        var shadowColor = tooltipModel.get('shadowColor');\r\n        var shadowOffsetX = tooltipModel.get('shadowOffsetX');\r\n        var shadowOffsetY = tooltipModel.get('shadowOffsetY');\r\n        var textStyleModel = tooltipModel.getModel('textStyle');\r\n        var padding = tooltipModel.get('padding');\r\n        var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\r\n        cssText.push('box-shadow:' + boxShadow);\r\n        !isFirstShow && transitionDuration\r\n            && indexOf(['top', 'left', 'bottom', 'right'], tooltipModel.get('position')) > -1\r\n            && tooltipModel.get('trigger') !== 'item'\r\n            && cssText.push(assembleTransition(transitionDuration));\r\n        if (backgroundColor) {\r\n            if (env.canvasSupported) {\r\n                cssText.push('background-Color:' + backgroundColor);\r\n            }\r\n            else {\r\n                cssText.push('background-Color:#' + toHex(backgroundColor));\r\n                cssText.push('filter:alpha(opacity=70)');\r\n            }\r\n        }\r\n        each$5(['width', 'color', 'radius'], function (name) {\r\n            var borderName = 'border-' + name;\r\n            var camelCase = toCamelCase$1(borderName);\r\n            var val = tooltipModel.get(camelCase);\r\n            val != null\r\n                && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\r\n        });\r\n        cssText.push(assembleFont(textStyleModel));\r\n        if (padding != null) {\r\n            cssText.push('padding:' + normalizeCssArray$1(padding).join('px ') + 'px');\r\n        }\r\n        return cssText.join(';') + ';';\r\n    }\r\n    function makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\r\n        var zrPainter = zr && zr.painter;\r\n        if (appendToBody) {\r\n            var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\r\n            if (zrViewportRoot) {\r\n                transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\r\n            }\r\n        }\r\n        else {\r\n            out[0] = zrX;\r\n            out[1] = zrY;\r\n            var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\r\n            if (viewportRootOffset) {\r\n                out[0] += viewportRootOffset.offsetLeft;\r\n                out[1] += viewportRootOffset.offsetTop;\r\n            }\r\n        }\r\n    }\r\n    var TooltipHTMLContent = (function () {\r\n        function TooltipHTMLContent(container, api, opt) {\r\n            this._show = false;\r\n            this._styleCoord = [0, 0];\r\n            this._enterable = true;\r\n            this._firstShow = true;\r\n            if (env.wxa) {\r\n                return null;\r\n            }\r\n            var el = document.createElement('div');\r\n            el.domBelongToZr = true;\r\n            this.el = el;\r\n            var zr = this._zr = api.getZr();\r\n            var appendToBody = this._appendToBody = opt && opt.appendToBody;\r\n            makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\r\n            if (appendToBody) {\r\n                document.body.appendChild(el);\r\n            }\r\n            else {\r\n                container.appendChild(el);\r\n            }\r\n            this._container = container;\r\n            var self = this;\r\n            el.onmouseenter = function () {\r\n                if (self._enterable) {\r\n                    clearTimeout(self._hideTimeout);\r\n                    self._show = true;\r\n                }\r\n                self._inContent = true;\r\n            };\r\n            el.onmousemove = function (e) {\r\n                e = e || window.event;\r\n                if (!self._enterable) {\r\n                    var handler = zr.handler;\r\n                    var zrViewportRoot = zr.painter.getViewportRoot();\r\n                    normalizeEvent(zrViewportRoot, e, true);\r\n                    handler.dispatch('mousemove', e);\r\n                }\r\n            };\r\n            el.onmouseleave = function () {\r\n                if (self._enterable) {\r\n                    if (self._show) {\r\n                        self.hideLater(self._hideDelay);\r\n                    }\r\n                }\r\n                self._inContent = false;\r\n            };\r\n        }\r\n        TooltipHTMLContent.prototype.update = function () {\r\n            var container = this._container;\r\n            var stl = container.currentStyle\r\n                || document.defaultView.getComputedStyle(container);\r\n            var domStyle = container.style;\r\n            if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\r\n                domStyle.position = 'relative';\r\n            }\r\n        };\r\n        TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\r\n            clearTimeout(this._hideTimeout);\r\n            var el = this.el;\r\n            var styleCoord = this._styleCoord;\r\n            var offset = el.offsetHeight / 2;\r\n            nearPointColor = getFinalColor(nearPointColor);\r\n            el.style.cssText = gCssText + assembleCssText(tooltipModel, this._firstShow)\r\n                + ';left:' + styleCoord[0] + 'px;top:' + (styleCoord[1] - offset) + 'px;'\r\n                + (\"border-color: \" + nearPointColor + \";\")\r\n                + (tooltipModel.get('extraCssText') || '');\r\n            el.style.display = el.innerHTML ? 'block' : 'none';\r\n            el.style.pointerEvents = this._enterable ? 'auto' : 'none';\r\n            this._show = true;\r\n            this._firstShow = false;\r\n        };\r\n        TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\r\n            if (content == null) {\r\n                return;\r\n            }\r\n            this.el.innerHTML = content;\r\n            this.el.innerHTML += (isString(arrowPosition)\r\n                && tooltipModel.get('trigger') === 'item'\r\n                && !tooltipModel.get('confine'))\r\n                ? assembleArrow(tooltipModel.get('backgroundColor'), borderColor, arrowPosition) : '';\r\n        };\r\n        TooltipHTMLContent.prototype.setEnterable = function (enterable) {\r\n            this._enterable = enterable;\r\n        };\r\n        TooltipHTMLContent.prototype.getSize = function () {\r\n            var el = this.el;\r\n            return [el.clientWidth, el.clientHeight];\r\n        };\r\n        TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\r\n            var styleCoord = this._styleCoord;\r\n            makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\r\n            var style = this.el.style;\r\n            style.left = styleCoord[0] + 'px';\r\n            style.top = styleCoord[1] + 'px';\r\n        };\r\n        TooltipHTMLContent.prototype.hide = function () {\r\n            this.el.style.display = 'none';\r\n            this._show = false;\r\n        };\r\n        TooltipHTMLContent.prototype.hideLater = function (time) {\r\n            if (this._show && !(this._inContent && this._enterable)) {\r\n                if (time) {\r\n                    this._hideDelay = time;\r\n                    this._show = false;\r\n                    this._hideTimeout = setTimeout(bind(this.hide, this), time);\r\n                }\r\n                else {\r\n                    this.hide();\r\n                }\r\n            }\r\n        };\r\n        TooltipHTMLContent.prototype.isShow = function () {\r\n            return this._show;\r\n        };\r\n        TooltipHTMLContent.prototype.dispose = function () {\r\n            this.el.parentNode.removeChild(this.el);\r\n        };\r\n        TooltipHTMLContent.prototype.getOuterSize = function () {\r\n            var width = this.el.clientWidth;\r\n            var height = this.el.clientHeight;\r\n            if (document.defaultView && document.defaultView.getComputedStyle) {\r\n                var stl = document.defaultView.getComputedStyle(this.el);\r\n                if (stl) {\r\n                    width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\r\n                    height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\r\n                }\r\n            }\r\n            return { width: width, height: height };\r\n        };\r\n        return TooltipHTMLContent;\r\n    }());\n\n    var TooltipRichContent = (function () {\r\n        function TooltipRichContent(api) {\r\n            this._show = false;\r\n            this._enterable = true;\r\n            this._zr = api.getZr();\r\n        }\r\n        TooltipRichContent.prototype.update = function () {\r\n        };\r\n        TooltipRichContent.prototype.show = function () {\r\n            if (this._hideTimeout) {\r\n                clearTimeout(this._hideTimeout);\r\n            }\r\n            this.el.show();\r\n            this._show = true;\r\n        };\r\n        TooltipRichContent.prototype.setContent = function (content, markerRich, tooltipModel, borderColor, arrowPosition) {\r\n            if (this.el) {\r\n                this._zr.remove(this.el);\r\n            }\r\n            var markers = {};\r\n            var text = content;\r\n            var prefix = '{marker';\r\n            var suffix = '|}';\r\n            var startId = text.indexOf(prefix);\r\n            while (startId >= 0) {\r\n                var endId = text.indexOf(suffix);\r\n                var name_1 = text.substr(startId + prefix.length, endId - startId - prefix.length);\r\n                if (name_1.indexOf('sub') > -1) {\r\n                    markers['marker' + name_1] = {\r\n                        width: 4,\r\n                        height: 4,\r\n                        borderRadius: 2,\r\n                        backgroundColor: markerRich[name_1]\r\n                    };\r\n                }\r\n                else {\r\n                    markers['marker' + name_1] = {\r\n                        width: 10,\r\n                        height: 10,\r\n                        borderRadius: 5,\r\n                        backgroundColor: markerRich[name_1]\r\n                    };\r\n                }\r\n                text = text.substr(endId + 1);\r\n                startId = text.indexOf(prefix);\r\n            }\r\n            this.el = new ZRText({\r\n                style: {\r\n                    rich: markers,\r\n                    text: content,\r\n                    lineHeight: 20,\r\n                    backgroundColor: tooltipModel.get('backgroundColor'),\r\n                    borderRadius: tooltipModel.get('borderRadius'),\r\n                    borderWidth: 1,\r\n                    borderColor: borderColor,\r\n                    shadowColor: tooltipModel.get('shadowColor'),\r\n                    shadowBlur: tooltipModel.get('shadowBlur'),\r\n                    shadowOffsetX: tooltipModel.get('shadowOffsetX'),\r\n                    shadowOffsetY: tooltipModel.get('shadowOffsetY'),\r\n                    fill: tooltipModel.get(['textStyle', 'color']),\r\n                    padding: tooltipModel.get('padding'),\r\n                    verticalAlign: 'middle',\r\n                    align: 'left'\r\n                },\r\n                z: tooltipModel.get('z')\r\n            });\r\n            this._zr.add(this.el);\r\n            var self = this;\r\n            this.el.on('mouseover', function () {\r\n                if (self._enterable) {\r\n                    clearTimeout(self._hideTimeout);\r\n                    self._show = true;\r\n                }\r\n                self._inContent = true;\r\n            });\r\n            this.el.on('mouseout', function () {\r\n                if (self._enterable) {\r\n                    if (self._show) {\r\n                        self.hideLater(self._hideDelay);\r\n                    }\r\n                }\r\n                self._inContent = false;\r\n            });\r\n        };\r\n        TooltipRichContent.prototype.setEnterable = function (enterable) {\r\n            this._enterable = enterable;\r\n        };\r\n        TooltipRichContent.prototype.getSize = function () {\r\n            var bounding = this.el.getBoundingRect();\r\n            return [bounding.width, bounding.height];\r\n        };\r\n        TooltipRichContent.prototype.moveTo = function (x, y) {\r\n            var el = this.el;\r\n            if (el) {\r\n                el.x = x;\r\n                el.y = y;\r\n                el.markRedraw();\r\n            }\r\n        };\r\n        TooltipRichContent.prototype.hide = function () {\r\n            if (this.el) {\r\n                this.el.hide();\r\n            }\r\n            this._show = false;\r\n        };\r\n        TooltipRichContent.prototype.hideLater = function (time) {\r\n            if (this._show && !(this._inContent && this._enterable)) {\r\n                if (time) {\r\n                    this._hideDelay = time;\r\n                    this._show = false;\r\n                    this._hideTimeout = setTimeout(bind(this.hide, this), time);\r\n                }\r\n                else {\r\n                    this.hide();\r\n                }\r\n            }\r\n        };\r\n        TooltipRichContent.prototype.isShow = function () {\r\n            return this._show;\r\n        };\r\n        TooltipRichContent.prototype.getOuterSize = function () {\r\n            var size = this.getSize();\r\n            return {\r\n                width: size[0],\r\n                height: size[1]\r\n            };\r\n        };\r\n        TooltipRichContent.prototype.dispose = function () {\r\n            this._zr.remove(this.el);\r\n        };\r\n        return TooltipRichContent;\r\n    }());\n\n    var bind$2 = bind;\r\n    var each$6 = each;\r\n    var parsePercent$3 = parsePercent$2;\r\n    var proxyRect = new Rect({\r\n        shape: { x: -1, y: -1, width: 2, height: 2 }\r\n    });\r\n    var TooltipView = (function (_super) {\r\n        __extends(TooltipView, _super);\r\n        function TooltipView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = TooltipView.type;\r\n            return _this;\r\n        }\r\n        TooltipView.prototype.init = function (ecModel, api) {\r\n            if (env.node) {\r\n                return;\r\n            }\r\n            var tooltipModel = ecModel.getComponent('tooltip');\r\n            var renderMode = tooltipModel.get('renderMode');\r\n            this._renderMode = getTooltipRenderMode(renderMode);\r\n            var tooltipContent;\r\n            if (this._renderMode === 'html') {\r\n                tooltipContent = new TooltipHTMLContent(api.getDom(), api, {\r\n                    appendToBody: tooltipModel.get('appendToBody', true)\r\n                });\r\n                this._newLine = '';\r\n            }\r\n            else {\r\n                tooltipContent = new TooltipRichContent(api);\r\n                this._newLine = '\\n';\r\n            }\r\n            this._tooltipContent = tooltipContent;\r\n        };\r\n        TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\r\n            if (env.node) {\r\n                return;\r\n            }\r\n            this.group.removeAll();\r\n            this._tooltipModel = tooltipModel;\r\n            this._ecModel = ecModel;\r\n            this._api = api;\r\n            this._lastDataByCoordSys = null;\r\n            this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\r\n            var tooltipContent = this._tooltipContent;\r\n            tooltipContent.update();\r\n            tooltipContent.setEnterable(tooltipModel.get('enterable'));\r\n            this._initGlobalListener();\r\n            this._keepShow();\r\n        };\r\n        TooltipView.prototype._initGlobalListener = function () {\r\n            var tooltipModel = this._tooltipModel;\r\n            var triggerOn = tooltipModel.get('triggerOn');\r\n            register('itemTooltip', this._api, bind$2(function (currTrigger, e, dispatchAction) {\r\n                if (triggerOn !== 'none') {\r\n                    if (triggerOn.indexOf(currTrigger) >= 0) {\r\n                        this._tryShow(e, dispatchAction);\r\n                    }\r\n                    else if (currTrigger === 'leave') {\r\n                        this._hide(dispatchAction);\r\n                    }\r\n                }\r\n            }, this));\r\n        };\r\n        TooltipView.prototype._keepShow = function () {\r\n            var tooltipModel = this._tooltipModel;\r\n            var ecModel = this._ecModel;\r\n            var api = this._api;\r\n            if (this._lastX != null\r\n                && this._lastY != null\r\n                && tooltipModel.get('triggerOn') !== 'none') {\r\n                var self_1 = this;\r\n                clearTimeout(this._refreshUpdateTimeout);\r\n                this._refreshUpdateTimeout = setTimeout(function () {\r\n                    !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\r\n                        x: self_1._lastX,\r\n                        y: self_1._lastY\r\n                    });\r\n                });\r\n            }\r\n        };\r\n        TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\r\n            if (payload.from === this.uid || env.node) {\r\n                return;\r\n            }\r\n            var dispatchAction = makeDispatchAction$1(payload, api);\r\n            this._ticket = '';\r\n            var dataByCoordSys = payload.dataByCoordSys;\r\n            if (payload.tooltip && payload.x != null && payload.y != null) {\r\n                var el = proxyRect;\r\n                el.x = payload.x;\r\n                el.y = payload.y;\r\n                el.update();\r\n                el.tooltip = payload.tooltip;\r\n                this._tryShow({\r\n                    offsetX: payload.x,\r\n                    offsetY: payload.y,\r\n                    target: el\r\n                }, dispatchAction);\r\n            }\r\n            else if (dataByCoordSys) {\r\n                this._tryShow({\r\n                    offsetX: payload.x,\r\n                    offsetY: payload.y,\r\n                    position: payload.position,\r\n                    dataByCoordSys: dataByCoordSys,\r\n                    tooltipOption: payload.tooltipOption\r\n                }, dispatchAction);\r\n            }\r\n            else if (payload.seriesIndex != null) {\r\n                if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\r\n                    return;\r\n                }\r\n                var pointInfo = findPointFromSeries(payload, ecModel);\r\n                var cx = pointInfo.point[0];\r\n                var cy = pointInfo.point[1];\r\n                if (cx != null && cy != null) {\r\n                    this._tryShow({\r\n                        offsetX: cx,\r\n                        offsetY: cy,\r\n                        position: payload.position,\r\n                        target: pointInfo.el\r\n                    }, dispatchAction);\r\n                }\r\n            }\r\n            else if (payload.x != null && payload.y != null) {\r\n                api.dispatchAction({\r\n                    type: 'updateAxisPointer',\r\n                    x: payload.x,\r\n                    y: payload.y\r\n                });\r\n                this._tryShow({\r\n                    offsetX: payload.x,\r\n                    offsetY: payload.y,\r\n                    position: payload.position,\r\n                    target: api.getZr().findHover(payload.x, payload.y).target\r\n                }, dispatchAction);\r\n            }\r\n        };\r\n        TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\r\n            var tooltipContent = this._tooltipContent;\r\n            if (!this._alwaysShowContent && this._tooltipModel) {\r\n                tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\r\n            }\r\n            this._lastX = this._lastY = null;\r\n            if (payload.from !== this.uid) {\r\n                this._hide(makeDispatchAction$1(payload, api));\r\n            }\r\n        };\r\n        TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\r\n            var seriesIndex = payload.seriesIndex;\r\n            var dataIndex = payload.dataIndex;\r\n            var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\r\n            if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\r\n                return;\r\n            }\r\n            var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\r\n            if (!seriesModel) {\r\n                return;\r\n            }\r\n            var data = seriesModel.getData();\r\n            var tooltipCascadedModel = buildTooltipModel([\r\n                data.getItemModel(dataIndex),\r\n                seriesModel,\r\n                (seriesModel.coordinateSystem || {}).model,\r\n                tooltipModel\r\n            ]);\r\n            if (tooltipCascadedModel.get('trigger') !== 'axis') {\r\n                return;\r\n            }\r\n            api.dispatchAction({\r\n                type: 'updateAxisPointer',\r\n                seriesIndex: seriesIndex,\r\n                dataIndex: dataIndex,\r\n                position: payload.position\r\n            });\r\n            return true;\r\n        };\r\n        TooltipView.prototype._tryShow = function (e, dispatchAction) {\r\n            var el = e.target;\r\n            var tooltipModel = this._tooltipModel;\r\n            if (!tooltipModel) {\r\n                return;\r\n            }\r\n            this._lastX = e.offsetX;\r\n            this._lastY = e.offsetY;\r\n            var dataByCoordSys = e.dataByCoordSys;\r\n            if (dataByCoordSys && dataByCoordSys.length) {\r\n                this._showAxisTooltip(dataByCoordSys, e);\r\n            }\r\n            else if (el && getECData(el).dataIndex != null) {\r\n                this._lastDataByCoordSys = null;\r\n                this._showSeriesItemTooltip(e, el, dispatchAction);\r\n            }\r\n            else if (el && el.tooltip) {\r\n                this._lastDataByCoordSys = null;\r\n                this._showComponentItemTooltip(e, el, dispatchAction);\r\n            }\r\n            else {\r\n                this._lastDataByCoordSys = null;\r\n                this._hide(dispatchAction);\r\n            }\r\n        };\r\n        TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\r\n            var delay = tooltipModel.get('showDelay');\r\n            cb = bind(cb, this);\r\n            clearTimeout(this._showTimout);\r\n            delay > 0\r\n                ? (this._showTimout = setTimeout(cb, delay))\r\n                : cb();\r\n        };\r\n        TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\r\n            var ecModel = this._ecModel;\r\n            var globalTooltipModel = this._tooltipModel;\r\n            var point = [e.offsetX, e.offsetY];\r\n            var singleDefaultHTML = [];\r\n            var singleParamsList = [];\r\n            var singleTooltipModel = buildTooltipModel([\r\n                e.tooltipOption,\r\n                globalTooltipModel\r\n            ]);\r\n            var renderMode = this._renderMode;\r\n            var newLine = this._newLine;\r\n            var markers = {};\r\n            each$6(dataByCoordSys, function (itemCoordSys) {\r\n                each$6(itemCoordSys.dataByAxis, function (item) {\r\n                    var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\r\n                    var axisValue = item.value;\r\n                    var seriesDefaultHTML = [];\r\n                    if (!axisModel || axisValue == null) {\r\n                        return;\r\n                    }\r\n                    var valueLabel = getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\r\n                    each(item.seriesDataIndices, function (idxItem) {\r\n                        var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\r\n                        var dataIndex = idxItem.dataIndexInside;\r\n                        var dataParams = series && series.getDataParams(dataIndex);\r\n                        dataParams.axisDim = item.axisDim;\r\n                        dataParams.axisIndex = item.axisIndex;\r\n                        dataParams.axisType = item.axisType;\r\n                        dataParams.axisId = item.axisId;\r\n                        dataParams.axisValue = getAxisRawValue(axisModel.axis, { value: axisValue });\r\n                        dataParams.axisValueLabel = valueLabel;\r\n                        dataParams.marker = getTooltipMarker({\r\n                            color: dataParams.color,\r\n                            renderMode: renderMode\r\n                        });\r\n                        singleParamsList.push(dataParams);\r\n                        var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\r\n                        var html;\r\n                        if (isObject(seriesTooltip)) {\r\n                            html = seriesTooltip.html;\r\n                            var newMarkers = seriesTooltip.markers;\r\n                            merge(markers, newMarkers);\r\n                        }\r\n                        else {\r\n                            html = seriesTooltip;\r\n                        }\r\n                        dataParams.html = html;\r\n                    });\r\n                    switch (singleTooltipModel.get('order')) {\r\n                        case 'valueAsc':\r\n                            singleParamsList.sort(function (a, b) {\r\n                                return +(a.data) - +(b.data);\r\n                            });\r\n                            break;\r\n                        case 'valueDesc':\r\n                            singleParamsList.sort(function (a, b) {\r\n                                return +(b.data) - +(a.data);\r\n                            });\r\n                            break;\r\n                        case 'seriesDesc':\r\n                            singleParamsList.reverse();\r\n                            break;\r\n                    }\r\n                    each(singleParamsList, function (params) {\r\n                        seriesDefaultHTML.push(params.html);\r\n                        delete params.html;\r\n                    });\r\n                    var firstLine = valueLabel;\r\n                    if (renderMode !== 'html') {\r\n                        singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\r\n                    }\r\n                    else {\r\n                        singleDefaultHTML.push((firstLine\r\n                            ? ('<div style=\"font-size:12px;color:#6e7079;line-height:1;margin-top:-4px;\">'\r\n                                + encodeHTML(firstLine) + '</div>'\r\n                                + newLine)\r\n                            : '')\r\n                            + seriesDefaultHTML.reverse().join(newLine));\r\n                    }\r\n                    singleDefaultHTML.push('<br/>');\r\n                });\r\n            }, this);\r\n            singleDefaultHTML.pop();\r\n            var singleDefaultHTMLStr = singleDefaultHTML.join(this._newLine + this._newLine);\r\n            var positionExpr = e.position;\r\n            this._showOrMove(singleTooltipModel, function () {\r\n                if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\r\n                    this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\r\n                }\r\n                else {\r\n                    this._showTooltipContent(singleTooltipModel, singleDefaultHTMLStr, singleParamsList, Math.random() + '', point[0], point[1], positionExpr, undefined, markers);\r\n                }\r\n            });\r\n        };\r\n        TooltipView.prototype._showSeriesItemTooltip = function (e, el, dispatchAction) {\r\n            var ecModel = this._ecModel;\r\n            var ecData = getECData(el);\r\n            var seriesIndex = ecData.seriesIndex;\r\n            var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\r\n            var dataModel = ecData.dataModel || seriesModel;\r\n            var dataIndex = ecData.dataIndex;\r\n            var dataType = ecData.dataType;\r\n            var data = dataModel.getData(dataType);\r\n            var tooltipModel = buildTooltipModel([\r\n                data.getItemModel(dataIndex),\r\n                dataModel,\r\n                seriesModel && (seriesModel.coordinateSystem || {}).model,\r\n                this._tooltipModel\r\n            ]);\r\n            var tooltipTrigger = tooltipModel.get('trigger');\r\n            if (tooltipTrigger != null && tooltipTrigger !== 'item') {\r\n                return;\r\n            }\r\n            var tooltipOrder = tooltipModel.get('order');\r\n            var params = dataModel.getDataParams(dataIndex, dataType);\r\n            params.marker = getTooltipMarker({\r\n                color: params.color,\r\n                renderMode: this._renderMode\r\n            });\r\n            var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode, tooltipOrder);\r\n            var defaultHtml;\r\n            var markers;\r\n            if (isObject(seriesTooltip)) {\r\n                defaultHtml = seriesTooltip.html;\r\n                markers = seriesTooltip.markers;\r\n            }\r\n            else {\r\n                defaultHtml = seriesTooltip;\r\n                markers = null;\r\n            }\r\n            var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\r\n            this._showOrMove(tooltipModel, function () {\r\n                this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\r\n            });\r\n            dispatchAction({\r\n                type: 'showTip',\r\n                dataIndexInside: dataIndex,\r\n                dataIndex: data.getRawIndex(dataIndex),\r\n                seriesIndex: seriesIndex,\r\n                from: this.uid\r\n            });\r\n        };\r\n        TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\r\n            var tooltipOpt = el.tooltip;\r\n            if (isString(tooltipOpt)) {\r\n                var content = tooltipOpt;\r\n                tooltipOpt = {\r\n                    content: content,\r\n                    formatter: content\r\n                };\r\n            }\r\n            var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\r\n            var defaultHtml = subTooltipModel.get('content');\r\n            var asyncTicket = Math.random() + '';\r\n            this._showOrMove(subTooltipModel, function () {\r\n                this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\r\n            });\r\n            dispatchAction({\r\n                type: 'showTip',\r\n                from: this.uid\r\n            });\r\n        };\r\n        TooltipView.prototype._showTooltipContent = function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\r\n            this._ticket = '';\r\n            if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\r\n                return;\r\n            }\r\n            var tooltipContent = this._tooltipContent;\r\n            var formatter = tooltipModel.get('formatter');\r\n            positionExpr = positionExpr || tooltipModel.get('position');\r\n            var html = defaultHtml;\r\n            var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'));\r\n            if (formatter && isString(formatter)) {\r\n                html = formatTpl(formatter, params, true);\r\n            }\r\n            else if (isFunction(formatter)) {\r\n                var callback = bind$2(function (cbTicket, html) {\r\n                    if (cbTicket === this._ticket) {\r\n                        tooltipContent.setContent(html, markers, tooltipModel, nearPoint.color, positionExpr);\r\n                        this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\r\n                    }\r\n                }, this);\r\n                this._ticket = asyncTicket;\r\n                html = formatter(params, asyncTicket, callback);\r\n            }\r\n            tooltipContent.setContent(html, markers, tooltipModel, nearPoint.color, positionExpr);\r\n            tooltipContent.show(tooltipModel, nearPoint.color);\r\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\r\n        };\r\n        TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger) {\r\n            if (trigger === 'axis' || isArray(tooltipDataParams)) {\r\n                return {\r\n                    color: this._renderMode === 'html' ? '#fff' : 'none'\r\n                };\r\n            }\r\n            if (!isArray(tooltipDataParams)) {\r\n                return {\r\n                    color: tooltipDataParams.color || tooltipDataParams.borderColor\r\n                };\r\n            }\r\n        };\r\n        TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x, y, content, params, el) {\r\n            var viewWidth = this._api.getWidth();\r\n            var viewHeight = this._api.getHeight();\r\n            positionExpr = positionExpr || tooltipModel.get('position');\r\n            var contentSize = content.getSize();\r\n            var align = tooltipModel.get('align');\r\n            var vAlign = tooltipModel.get('verticalAlign');\r\n            var rect = el && el.getBoundingRect().clone();\r\n            el && rect.applyTransform(el.transform);\r\n            if (isFunction(positionExpr)) {\r\n                positionExpr = positionExpr([x, y], params, content.el, rect, {\r\n                    viewSize: [viewWidth, viewHeight],\r\n                    contentSize: contentSize.slice()\r\n                });\r\n            }\r\n            if (isArray(positionExpr)) {\r\n                x = parsePercent$3(positionExpr[0], viewWidth);\r\n                y = parsePercent$3(positionExpr[1], viewHeight);\r\n            }\r\n            else if (isObject(positionExpr)) {\r\n                var boxLayoutPosition = positionExpr;\r\n                boxLayoutPosition.width = contentSize[0];\r\n                boxLayoutPosition.height = contentSize[1];\r\n                var layoutRect = getLayoutRect(boxLayoutPosition, { width: viewWidth, height: viewHeight });\r\n                x = layoutRect.x;\r\n                y = layoutRect.y;\r\n                align = null;\r\n                vAlign = null;\r\n            }\r\n            else if (isString(positionExpr) && el) {\r\n                var pos = calcTooltipPosition(positionExpr, rect, contentSize);\r\n                x = pos[0];\r\n                y = pos[1];\r\n            }\r\n            else {\r\n                var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\r\n                x = pos[0];\r\n                y = pos[1];\r\n            }\r\n            align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\r\n            vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\r\n            if (tooltipModel.get('confine')) {\r\n                var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\r\n                x = pos[0];\r\n                y = pos[1];\r\n            }\r\n            content.moveTo(x, y);\r\n        };\r\n        TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys) {\r\n            var lastCoordSys = this._lastDataByCoordSys;\r\n            var contentNotChanged = !!lastCoordSys\r\n                && lastCoordSys.length === dataByCoordSys.length;\r\n            contentNotChanged && each$6(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\r\n                var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\r\n                var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\r\n                var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\r\n                contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\r\n                contentNotChanged && each$6(lastDataByAxis, function (lastItem, indexAxis) {\r\n                    var thisItem = thisDataByAxis[indexAxis] || {};\r\n                    var lastIndices = lastItem.seriesDataIndices || [];\r\n                    var newIndices = thisItem.seriesDataIndices || [];\r\n                    contentNotChanged = contentNotChanged\r\n                        && lastItem.value === thisItem.value\r\n                        && lastItem.axisType === thisItem.axisType\r\n                        && lastItem.axisId === thisItem.axisId\r\n                        && lastIndices.length === newIndices.length;\r\n                    contentNotChanged && each$6(lastIndices, function (lastIdxItem, j) {\r\n                        var newIdxItem = newIndices[j];\r\n                        contentNotChanged = contentNotChanged\r\n                            && lastIdxItem.seriesIndex === newIdxItem.seriesIndex\r\n                            && lastIdxItem.dataIndex === newIdxItem.dataIndex;\r\n                    });\r\n                });\r\n            });\r\n            this._lastDataByCoordSys = dataByCoordSys;\r\n            return !!contentNotChanged;\r\n        };\r\n        TooltipView.prototype._hide = function (dispatchAction) {\r\n            this._lastDataByCoordSys = null;\r\n            dispatchAction({\r\n                type: 'hideTip',\r\n                from: this.uid\r\n            });\r\n        };\r\n        TooltipView.prototype.dispose = function (ecModel, api) {\r\n            if (env.node) {\r\n                return;\r\n            }\r\n            this._tooltipContent.dispose();\r\n            unregister('itemTooltip', api);\r\n        };\r\n        TooltipView.type = 'tooltip';\r\n        return TooltipView;\r\n    }(ComponentView));\r\n    function buildTooltipModel(modelCascade) {\r\n        var resultModel = modelCascade.pop();\r\n        while (modelCascade.length) {\r\n            var tooltipOpt = modelCascade.pop();\r\n            if (tooltipOpt) {\r\n                if (tooltipOpt instanceof Model) {\r\n                    tooltipOpt = tooltipOpt.get('tooltip', true);\r\n                }\r\n                if (isString(tooltipOpt)) {\r\n                    tooltipOpt = {\r\n                        formatter: tooltipOpt\r\n                    };\r\n                }\r\n                resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\r\n            }\r\n        }\r\n        return resultModel;\r\n    }\r\n    function makeDispatchAction$1(payload, api) {\r\n        return payload.dispatchAction || bind(api.dispatchAction, api);\r\n    }\r\n    function refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\r\n        var size = content.getOuterSize();\r\n        var width = size.width;\r\n        var height = size.height;\r\n        if (gapH != null) {\r\n            if (x + width + gapH > viewWidth) {\r\n                x -= width + gapH;\r\n            }\r\n            else {\r\n                x += gapH;\r\n            }\r\n        }\r\n        if (gapV != null) {\r\n            if (y + height + gapV > viewHeight) {\r\n                y -= height + gapV;\r\n            }\r\n            else {\r\n                y += gapV;\r\n            }\r\n        }\r\n        return [x, y];\r\n    }\r\n    function confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\r\n        var size = content.getOuterSize();\r\n        var width = size.width;\r\n        var height = size.height;\r\n        x = Math.min(x + width, viewWidth) - width;\r\n        y = Math.min(y + height, viewHeight) - height;\r\n        x = Math.max(x, 0);\r\n        y = Math.max(y, 0);\r\n        return [x, y];\r\n    }\r\n    function calcTooltipPosition(position, rect, contentSize) {\r\n        var domWidth = contentSize[0];\r\n        var domHeight = contentSize[1];\r\n        var gap = 10;\r\n        var offset = 5;\r\n        var x = 0;\r\n        var y = 0;\r\n        var rectWidth = rect.width;\r\n        var rectHeight = rect.height;\r\n        switch (position) {\r\n            case 'inside':\r\n                x = rect.x + rectWidth / 2 - domWidth / 2;\r\n                y = rect.y + rectHeight / 2 - domHeight / 2;\r\n                break;\r\n            case 'top':\r\n                x = rect.x + rectWidth / 2 - domWidth / 2;\r\n                y = rect.y - domHeight - gap;\r\n                break;\r\n            case 'bottom':\r\n                x = rect.x + rectWidth / 2 - domWidth / 2;\r\n                y = rect.y + rectHeight + gap;\r\n                break;\r\n            case 'left':\r\n                x = rect.x - domWidth - gap - offset;\r\n                y = rect.y + rectHeight / 2 - domHeight / 2;\r\n                break;\r\n            case 'right':\r\n                x = rect.x + rectWidth + gap + offset;\r\n                y = rect.y + rectHeight / 2 - domHeight / 2;\r\n        }\r\n        return [x, y];\r\n    }\r\n    function isCenterAlign(align) {\r\n        return align === 'center' || align === 'middle';\r\n    }\r\n    ComponentView.registerClass(TooltipView);\n\n    registerAction({\r\n        type: 'showTip',\r\n        event: 'showTip',\r\n        update: 'tooltip:manuallyShowTip'\r\n    }, function () { });\r\n    registerAction({\r\n        type: 'hideTip',\r\n        event: 'hideTip',\r\n        update: 'tooltip:manuallyHideTip'\r\n    }, function () { });\n\n    var getDefaultSelectorOptions = function (ecModel, type) {\r\n        if (type === 'all') {\r\n            return {\r\n                type: 'all',\r\n                title: ecModel.getLocale(['legend', 'selector', 'all'])\r\n            };\r\n        }\r\n        else if (type === 'inverse') {\r\n            return {\r\n                type: 'inverse',\r\n                title: ecModel.getLocale(['legend', 'selector', 'inverse'])\r\n            };\r\n        }\r\n    };\r\n    var LegendModel = (function (_super) {\r\n        __extends(LegendModel, _super);\r\n        function LegendModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = LegendModel.type;\r\n            _this.layoutMode = {\r\n                type: 'box',\r\n                ignoreSize: true\r\n            };\r\n            return _this;\r\n        }\r\n        LegendModel.prototype.init = function (option, parentModel, ecModel) {\r\n            this.mergeDefaultAndTheme(option, ecModel);\r\n            option.selected = option.selected || {};\r\n            this._updateSelector(option);\r\n        };\r\n        LegendModel.prototype.mergeOption = function (option, ecModel) {\r\n            _super.prototype.mergeOption.call(this, option, ecModel);\r\n            this._updateSelector(option);\r\n        };\r\n        LegendModel.prototype._updateSelector = function (option) {\r\n            var selector = option.selector;\r\n            var ecModel = this.ecModel;\r\n            if (selector === true) {\r\n                selector = option.selector = ['all', 'inverse'];\r\n            }\r\n            if (isArray(selector)) {\r\n                each(selector, function (item, index) {\r\n                    isString(item) && (item = { type: item });\r\n                    selector[index] = merge(item, getDefaultSelectorOptions(ecModel, item.type));\r\n                });\r\n            }\r\n        };\r\n        LegendModel.prototype.optionUpdated = function () {\r\n            this._updateData(this.ecModel);\r\n            var legendData = this._data;\r\n            if (legendData[0] && this.get('selectedMode') === 'single') {\r\n                var hasSelected = false;\r\n                for (var i = 0; i < legendData.length; i++) {\r\n                    var name_1 = legendData[i].get('name');\r\n                    if (this.isSelected(name_1)) {\r\n                        this.select(name_1);\r\n                        hasSelected = true;\r\n                        break;\r\n                    }\r\n                }\r\n                !hasSelected && this.select(legendData[0].get('name'));\r\n            }\r\n        };\r\n        LegendModel.prototype._updateData = function (ecModel) {\r\n            var potentialData = [];\r\n            var availableNames = [];\r\n            ecModel.eachRawSeries(function (seriesModel) {\r\n                var seriesName = seriesModel.name;\r\n                availableNames.push(seriesName);\r\n                var isPotential;\r\n                if (seriesModel.legendVisualProvider) {\r\n                    var provider = seriesModel.legendVisualProvider;\r\n                    var names = provider.getAllNames();\r\n                    if (!ecModel.isSeriesFiltered(seriesModel)) {\r\n                        availableNames = availableNames.concat(names);\r\n                    }\r\n                    if (names.length) {\r\n                        potentialData = potentialData.concat(names);\r\n                    }\r\n                    else {\r\n                        isPotential = true;\r\n                    }\r\n                }\r\n                else {\r\n                    isPotential = true;\r\n                }\r\n                if (isPotential && isNameSpecified(seriesModel)) {\r\n                    potentialData.push(seriesModel.name);\r\n                }\r\n            });\r\n            this._availableNames = availableNames;\r\n            var rawData = this.get('data') || potentialData;\r\n            var legendData = map(rawData, function (dataItem) {\r\n                if (typeof dataItem === 'string' || typeof dataItem === 'number') {\r\n                    dataItem = {\r\n                        name: dataItem\r\n                    };\r\n                }\r\n                return new Model(dataItem, this, this.ecModel);\r\n            }, this);\r\n            this._data = legendData;\r\n        };\r\n        LegendModel.prototype.getData = function () {\r\n            return this._data;\r\n        };\r\n        LegendModel.prototype.select = function (name) {\r\n            var selected = this.option.selected;\r\n            var selectedMode = this.get('selectedMode');\r\n            if (selectedMode === 'single') {\r\n                var data = this._data;\r\n                each(data, function (dataItem) {\r\n                    selected[dataItem.get('name')] = false;\r\n                });\r\n            }\r\n            selected[name] = true;\r\n        };\r\n        LegendModel.prototype.unSelect = function (name) {\r\n            if (this.get('selectedMode') !== 'single') {\r\n                this.option.selected[name] = false;\r\n            }\r\n        };\r\n        LegendModel.prototype.toggleSelected = function (name) {\r\n            var selected = this.option.selected;\r\n            if (!selected.hasOwnProperty(name)) {\r\n                selected[name] = true;\r\n            }\r\n            this[selected[name] ? 'unSelect' : 'select'](name);\r\n        };\r\n        LegendModel.prototype.allSelect = function () {\r\n            var data = this._data;\r\n            var selected = this.option.selected;\r\n            each(data, function (dataItem) {\r\n                selected[dataItem.get('name', true)] = true;\r\n            });\r\n        };\r\n        LegendModel.prototype.inverseSelect = function () {\r\n            var data = this._data;\r\n            var selected = this.option.selected;\r\n            each(data, function (dataItem) {\r\n                var name = dataItem.get('name', true);\r\n                if (!selected.hasOwnProperty(name)) {\r\n                    selected[name] = true;\r\n                }\r\n                selected[name] = !selected[name];\r\n            });\r\n        };\r\n        LegendModel.prototype.isSelected = function (name) {\r\n            var selected = this.option.selected;\r\n            return !(selected.hasOwnProperty(name) && !selected[name])\r\n                && indexOf(this._availableNames, name) >= 0;\r\n        };\r\n        LegendModel.prototype.getOrient = function () {\r\n            return this.get('orient') === 'vertical'\r\n                ? { index: 1, name: 'vertical' }\r\n                : { index: 0, name: 'horizontal' };\r\n        };\r\n        LegendModel.type = 'legend.plain';\r\n        LegendModel.dependencies = ['series'];\r\n        LegendModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 4,\r\n            show: true,\r\n            orient: 'horizontal',\r\n            left: 'center',\r\n            top: 0,\r\n            align: 'auto',\r\n            backgroundColor: 'rgba(0,0,0,0)',\r\n            borderColor: '#ccc',\r\n            borderRadius: 0,\r\n            borderWidth: 0,\r\n            padding: 5,\r\n            itemGap: 10,\r\n            itemWidth: 25,\r\n            itemHeight: 14,\r\n            inactiveColor: '#ccc',\r\n            inactiveBorderColor: '#ccc',\r\n            itemStyle: {\r\n                borderWidth: 0\r\n            },\r\n            textStyle: {\r\n                color: '#333'\r\n            },\r\n            selectedMode: true,\r\n            selector: false,\r\n            selectorLabel: {\r\n                show: true,\r\n                borderRadius: 10,\r\n                padding: [3, 5, 3, 5],\r\n                fontSize: 12,\r\n                fontFamily: ' sans-serif',\r\n                color: '#666',\r\n                borderWidth: 1,\r\n                borderColor: '#666'\r\n            },\r\n            emphasis: {\r\n                selectorLabel: {\r\n                    show: true,\r\n                    color: '#eee',\r\n                    backgroundColor: '#666'\r\n                }\r\n            },\r\n            selectorPosition: 'auto',\r\n            selectorItemGap: 7,\r\n            selectorButtonGap: 10,\r\n            tooltip: {\r\n                show: false\r\n            }\r\n        };\r\n        return LegendModel;\r\n    }(ComponentModel));\r\n    ComponentModel.registerClass(LegendModel);\n\n    function legendSelectActionHandler(methodName, payload, ecModel) {\r\n        var selectedMap = {};\r\n        var isToggleSelect = methodName === 'toggleSelected';\r\n        var isSelected;\r\n        ecModel.eachComponent('legend', function (legendModel) {\r\n            if (isToggleSelect && isSelected != null) {\r\n                legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\r\n            }\r\n            else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\r\n                legendModel[methodName]();\r\n            }\r\n            else {\r\n                legendModel[methodName](payload.name);\r\n                isSelected = legendModel.isSelected(payload.name);\r\n            }\r\n            var legendData = legendModel.getData();\r\n            each(legendData, function (model) {\r\n                var name = model.get('name');\r\n                if (name === '\\n' || name === '') {\r\n                    return;\r\n                }\r\n                var isItemSelected = legendModel.isSelected(name);\r\n                if (selectedMap.hasOwnProperty(name)) {\r\n                    selectedMap[name] = selectedMap[name] && isItemSelected;\r\n                }\r\n                else {\r\n                    selectedMap[name] = isItemSelected;\r\n                }\r\n            });\r\n        });\r\n        return (methodName === 'allSelect' || methodName === 'inverseSelect')\r\n            ? {\r\n                selected: selectedMap\r\n            }\r\n            : {\r\n                name: payload.name,\r\n                selected: selectedMap\r\n            };\r\n    }\r\n    registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\r\n    registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\r\n    registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\r\n    registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\r\n    registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n\n    function layout$2(group, componentModel, api) {\r\n        var boxLayoutParams = componentModel.getBoxLayoutParams();\r\n        var padding = componentModel.get('padding');\r\n        var viewportSize = { width: api.getWidth(), height: api.getHeight() };\r\n        var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\r\n        box(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\r\n        positionElement(group, boxLayoutParams, viewportSize, padding);\r\n    }\r\n    function makeBackground(rect, componentModel) {\r\n        var padding = normalizeCssArray$1(componentModel.get('padding'));\r\n        var style = componentModel.getItemStyle(['color', 'opacity']);\r\n        style.fill = componentModel.get('backgroundColor');\r\n        rect = new Rect({\r\n            shape: {\r\n                x: rect.x - padding[3],\r\n                y: rect.y - padding[0],\r\n                width: rect.width + padding[1] + padding[3],\r\n                height: rect.height + padding[0] + padding[2],\r\n                r: componentModel.get('borderRadius')\r\n            },\r\n            style: style,\r\n            silent: true,\r\n            z2: -1\r\n        });\r\n        return rect;\r\n    }\n\n    var curry$1 = curry;\r\n    var each$7 = each;\r\n    var Group$1 = Group;\r\n    var LegendView = (function (_super) {\r\n        __extends(LegendView, _super);\r\n        function LegendView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = LegendView.type;\r\n            _this.newlineDisabled = false;\r\n            return _this;\r\n        }\r\n        LegendView.prototype.init = function () {\r\n            this.group.add(this._contentGroup = new Group$1());\r\n            this.group.add(this._selectorGroup = new Group$1());\r\n            this._isFirstRender = true;\r\n        };\r\n        LegendView.prototype.getContentGroup = function () {\r\n            return this._contentGroup;\r\n        };\r\n        LegendView.prototype.getSelectorGroup = function () {\r\n            return this._selectorGroup;\r\n        };\r\n        LegendView.prototype.render = function (legendModel, ecModel, api) {\r\n            var isFirstRender = this._isFirstRender;\r\n            this._isFirstRender = false;\r\n            this.resetInner();\r\n            if (!legendModel.get('show', true)) {\r\n                return;\r\n            }\r\n            var itemAlign = legendModel.get('align');\r\n            var orient = legendModel.get('orient');\r\n            if (!itemAlign || itemAlign === 'auto') {\r\n                itemAlign = (legendModel.get('left') === 'right'\r\n                    && orient === 'vertical') ? 'right' : 'left';\r\n            }\r\n            var selector = legendModel.get('selector', true);\r\n            var selectorPosition = legendModel.get('selectorPosition', true);\r\n            if (selector && (!selectorPosition || selectorPosition === 'auto')) {\r\n                selectorPosition = orient === 'horizontal' ? 'end' : 'start';\r\n            }\r\n            this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\r\n            var positionInfo = legendModel.getBoxLayoutParams();\r\n            var viewportSize = { width: api.getWidth(), height: api.getHeight() };\r\n            var padding = legendModel.get('padding');\r\n            var maxSize = getLayoutRect(positionInfo, viewportSize, padding);\r\n            var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition);\r\n            var layoutRect = getLayoutRect(defaults({\r\n                width: mainRect.width,\r\n                height: mainRect.height\r\n            }, positionInfo), viewportSize, padding);\r\n            this.group.x = layoutRect.x - mainRect.x;\r\n            this.group.y = layoutRect.y - mainRect.y;\r\n            this.group.markRedraw();\r\n            this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\r\n        };\r\n        LegendView.prototype.resetInner = function () {\r\n            this.getContentGroup().removeAll();\r\n            this._backgroundEl && this.group.remove(this._backgroundEl);\r\n            this.getSelectorGroup().removeAll();\r\n        };\r\n        LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\r\n            var contentGroup = this.getContentGroup();\r\n            var legendDrawnMap = createHashMap();\r\n            var selectMode = legendModel.get('selectedMode');\r\n            var excludeSeriesId = [];\r\n            ecModel.eachRawSeries(function (seriesModel) {\r\n                !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\r\n            });\r\n            each$7(legendModel.getData(), function (itemModel, dataIndex) {\r\n                var name = itemModel.get('name');\r\n                if (!this.newlineDisabled && (name === '' || name === '\\n')) {\r\n                    var g = new Group$1();\r\n                    g.newline = true;\r\n                    contentGroup.add(g);\r\n                    return;\r\n                }\r\n                var seriesModel = ecModel.getSeriesByName(name)[0];\r\n                if (legendDrawnMap.get(name)) {\r\n                    return;\r\n                }\r\n                if (seriesModel) {\r\n                    var data = seriesModel.getData();\r\n                    var style = data.getVisual('style');\r\n                    var color = style[data.getVisual('drawType')] || style.fill;\r\n                    var borderColor = style.stroke;\r\n                    var legendSymbolType = data.getVisual('legendSymbol') || 'roundRect';\r\n                    var symbolType = data.getVisual('symbol');\r\n                    var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode);\r\n                    itemGroup.on('click', curry$1(dispatchSelectAction, name, null, api, excludeSeriesId))\r\n                        .on('mouseover', curry$1(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId))\r\n                        .on('mouseout', curry$1(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\r\n                    legendDrawnMap.set(name, true);\r\n                }\r\n                else {\r\n                    ecModel.eachRawSeries(function (seriesModel) {\r\n                        if (legendDrawnMap.get(name)) {\r\n                            return;\r\n                        }\r\n                        if (seriesModel.legendVisualProvider) {\r\n                            var provider = seriesModel.legendVisualProvider;\r\n                            if (!provider.containName(name)) {\r\n                                return;\r\n                            }\r\n                            var idx = provider.indexOfName(name);\r\n                            var style = provider.getItemVisual(idx, 'style');\r\n                            var borderColor = style.stroke;\r\n                            var color = style.fill;\r\n                            var colorArr = parse(style.fill);\r\n                            if (colorArr && colorArr[3] === 0) {\r\n                                colorArr[3] = 0.2;\r\n                                color = stringify(colorArr, 'rgba');\r\n                            }\r\n                            var legendSymbolType = 'roundRect';\r\n                            var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, null, itemAlign, color, borderColor, selectMode);\r\n                            itemGroup.on('click', curry$1(dispatchSelectAction, null, name, api, excludeSeriesId))\r\n                                .on('mouseover', curry$1(dispatchHighlightAction, null, name, api, excludeSeriesId))\r\n                                .on('mouseout', curry$1(dispatchDownplayAction, null, name, api, excludeSeriesId));\r\n                            legendDrawnMap.set(name, true);\r\n                        }\r\n                    }, this);\r\n                }\r\n                if (__DEV__) {\r\n                    if (!legendDrawnMap.get(name)) {\r\n                        console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\r\n                    }\r\n                }\r\n            }, this);\r\n            if (selector) {\r\n                this._createSelector(selector, legendModel, api, orient, selectorPosition);\r\n            }\r\n        };\r\n        LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\r\n            var selectorGroup = this.getSelectorGroup();\r\n            each$7(selector, function createSelectorButton(selectorItem) {\r\n                var type = selectorItem.type;\r\n                var labelText = new ZRText({\r\n                    style: {\r\n                        x: 0,\r\n                        y: 0,\r\n                        align: 'center',\r\n                        verticalAlign: 'middle'\r\n                    },\r\n                    onclick: function () {\r\n                        api.dispatchAction({\r\n                            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\r\n                        });\r\n                    }\r\n                });\r\n                selectorGroup.add(labelText);\r\n                var labelModel = legendModel.getModel('selectorLabel');\r\n                var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\r\n                setLabelStyle(labelText, { normal: labelModel, emphasis: emphasisLabelModel }, {\r\n                    defaultText: selectorItem.title\r\n                });\r\n                enableHoverEmphasis(labelText);\r\n            });\r\n        };\r\n        LegendView.prototype._createItem = function (name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode) {\r\n            var itemWidth = legendModel.get('itemWidth');\r\n            var itemHeight = legendModel.get('itemHeight');\r\n            var inactiveColor = legendModel.get('inactiveColor');\r\n            var inactiveBorderColor = legendModel.get('inactiveBorderColor');\r\n            var symbolKeepAspect = legendModel.get('symbolKeepAspect');\r\n            var legendModelItemStyle = legendModel.getModel('itemStyle');\r\n            var isSelected = legendModel.isSelected(name);\r\n            var itemGroup = new Group$1();\r\n            var textStyleModel = itemModel.getModel('textStyle');\r\n            var itemIcon = itemModel.get('icon');\r\n            var tooltipModel = itemModel.getModel('tooltip');\r\n            var legendGlobalTooltipModel = tooltipModel.parentModel;\r\n            legendSymbolType = itemIcon || legendSymbolType;\r\n            var legendSymbol = createSymbol(legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, symbolKeepAspect == null ? true : symbolKeepAspect);\r\n            itemGroup.add(setSymbolStyle(legendSymbol, legendSymbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected));\r\n            if (!itemIcon && symbolType\r\n                && ((symbolType !== legendSymbolType) || symbolType === 'none')) {\r\n                var size = itemHeight * 0.8;\r\n                if (symbolType === 'none') {\r\n                    symbolType = 'circle';\r\n                }\r\n                var legendSymbolCenter = createSymbol(symbolType, (itemWidth - size) / 2, (itemHeight - size) / 2, size, size, isSelected ? color : inactiveColor, symbolKeepAspect == null ? true : symbolKeepAspect);\r\n                itemGroup.add(setSymbolStyle(legendSymbolCenter, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected));\r\n            }\r\n            var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\r\n            var textAlign = itemAlign;\r\n            var formatter = legendModel.get('formatter');\r\n            var content = name;\r\n            if (typeof formatter === 'string' && formatter) {\r\n                content = formatter.replace('{name}', name != null ? name : '');\r\n            }\r\n            else if (typeof formatter === 'function') {\r\n                content = formatter(name);\r\n            }\r\n            itemGroup.add(new ZRText({\r\n                style: createTextStyle(textStyleModel, {\r\n                    text: content,\r\n                    x: textX,\r\n                    y: itemHeight / 2,\r\n                    fill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\r\n                    align: textAlign,\r\n                    verticalAlign: 'middle'\r\n                })\r\n            }));\r\n            var hitRect = new Rect({\r\n                shape: itemGroup.getBoundingRect(),\r\n                invisible: true\r\n            });\r\n            if (tooltipModel.get('show')) {\r\n                var formatterParams = {\r\n                    componentType: 'legend',\r\n                    legendIndex: legendModel.componentIndex,\r\n                    name: name,\r\n                    $vars: ['name']\r\n                };\r\n                hitRect.tooltip = extend({\r\n                    content: name,\r\n                    formatter: legendGlobalTooltipModel.get('formatter', true)\r\n                        || function (params) {\r\n                            return params.name;\r\n                        },\r\n                    formatterParams: formatterParams\r\n                }, tooltipModel.option);\r\n            }\r\n            itemGroup.add(hitRect);\r\n            itemGroup.eachChild(function (child) {\r\n                child.silent = true;\r\n            });\r\n            hitRect.silent = !selectMode;\r\n            this.getContentGroup().add(itemGroup);\r\n            enableHoverEmphasis(itemGroup);\r\n            itemGroup.__legendDataIndex = dataIndex;\r\n            return itemGroup;\r\n        };\r\n        LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\r\n            var contentGroup = this.getContentGroup();\r\n            var selectorGroup = this.getSelectorGroup();\r\n            box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\r\n            var contentRect = contentGroup.getBoundingRect();\r\n            var contentPos = [-contentRect.x, -contentRect.y];\r\n            selectorGroup.markRedraw();\r\n            contentGroup.markRedraw();\r\n            if (selector) {\r\n                box('horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\r\n                var selectorRect = selectorGroup.getBoundingRect();\r\n                var selectorPos = [-selectorRect.x, -selectorRect.y];\r\n                var selectorButtonGap = legendModel.get('selectorButtonGap', true);\r\n                var orientIdx = legendModel.getOrient().index;\r\n                var wh = orientIdx === 0 ? 'width' : 'height';\r\n                var hw = orientIdx === 0 ? 'height' : 'width';\r\n                var yx = orientIdx === 0 ? 'y' : 'x';\r\n                if (selectorPosition === 'end') {\r\n                    selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\r\n                }\r\n                else {\r\n                    contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\r\n                }\r\n                selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\r\n                selectorGroup.x = selectorPos[0];\r\n                selectorGroup.y = selectorPos[1];\r\n                contentGroup.x = contentPos[0];\r\n                contentGroup.y = contentPos[1];\r\n                var mainRect = { x: 0, y: 0 };\r\n                mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\r\n                mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\r\n                mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\r\n                return mainRect;\r\n            }\r\n            else {\r\n                contentGroup.x = contentPos[0];\r\n                contentGroup.y = contentPos[1];\r\n                return this.group.getBoundingRect();\r\n            }\r\n        };\r\n        LegendView.prototype.remove = function () {\r\n            this.getContentGroup().removeAll();\r\n            this._isFirstRender = true;\r\n        };\r\n        LegendView.type = 'legend.plain';\r\n        return LegendView;\r\n    }(ComponentView));\r\n    function setSymbolStyle(symbol, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected) {\r\n        var itemStyle;\r\n        if (symbolType !== 'line' && symbolType.indexOf('empty') < 0) {\r\n            itemStyle = legendModelItemStyle.getItemStyle();\r\n            symbol.style.stroke = borderColor;\r\n            if (!isSelected) {\r\n                itemStyle.stroke = inactiveBorderColor;\r\n            }\r\n        }\r\n        else {\r\n            itemStyle = legendModelItemStyle.getItemStyle(['borderWidth', 'borderColor']);\r\n        }\r\n        symbol.setStyle(itemStyle);\r\n        return symbol;\r\n    }\r\n    function dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\r\n        dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\r\n        api.dispatchAction({\r\n            type: 'legendToggleSelect',\r\n            name: seriesName != null ? seriesName : dataName\r\n        });\r\n        dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\r\n    }\r\n    function isUseHoverLayer(api) {\r\n        var list = api.getZr().storage.getDisplayList();\r\n        var emphasisState;\r\n        var i = 0;\r\n        var len = list.length;\r\n        while (i < len && !(emphasisState = list[i].states.emphasis)) {\r\n            i++;\r\n        }\r\n        return emphasisState && emphasisState.hoverLayer;\r\n    }\r\n    function dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\r\n        if (!isUseHoverLayer(api)) {\r\n            api.dispatchAction({\r\n                type: 'highlight',\r\n                seriesName: seriesName,\r\n                name: dataName,\r\n                excludeSeriesId: excludeSeriesId\r\n            });\r\n        }\r\n    }\r\n    function dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\r\n        if (!isUseHoverLayer(api)) {\r\n            api.dispatchAction({\r\n                type: 'downplay',\r\n                seriesName: seriesName,\r\n                name: dataName,\r\n                excludeSeriesId: excludeSeriesId\r\n            });\r\n        }\r\n    }\r\n    ComponentView.registerClass(LegendView);\n\n    function legendFilter (ecModel) {\r\n        var legendModels = ecModel.findComponents({\r\n            mainType: 'legend'\r\n        });\r\n        if (legendModels && legendModels.length) {\r\n            ecModel.filterSeries(function (series) {\r\n                for (var i = 0; i < legendModels.length; i++) {\r\n                    if (!legendModels[i].isSelected(series.name)) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n    }\n\n    registerProcessor(PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\r\n    ComponentModel.registerSubTypeDefaulter('legend', function () {\r\n        return 'plain';\r\n    });\n\n    var ScrollableLegendModel = (function (_super) {\r\n        __extends(ScrollableLegendModel, _super);\r\n        function ScrollableLegendModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = ScrollableLegendModel.type;\r\n            return _this;\r\n        }\r\n        ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\r\n            this.option.scrollDataIndex = scrollDataIndex;\r\n        };\r\n        ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\r\n            var inputPositionParams = getLayoutParams(option);\r\n            _super.prototype.init.call(this, option, parentModel, ecModel);\r\n            mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\r\n        };\r\n        ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\r\n            _super.prototype.mergeOption.call(this, option, ecModel);\r\n            mergeAndNormalizeLayoutParams(this, this.option, option);\r\n        };\r\n        ScrollableLegendModel.type = 'legend.scroll';\r\n        ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\r\n            scrollDataIndex: 0,\r\n            pageButtonItemGap: 5,\r\n            pageButtonGap: null,\r\n            pageButtonPosition: 'end',\r\n            pageFormatter: '{current}/{total}',\r\n            pageIcons: {\r\n                horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\r\n                vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\r\n            },\r\n            pageIconColor: '#2f4554',\r\n            pageIconInactiveColor: '#aaa',\r\n            pageIconSize: 15,\r\n            pageTextStyle: {\r\n                color: '#333'\r\n            },\r\n            animationDurationUpdate: 800\r\n        });\r\n        return ScrollableLegendModel;\r\n    }(LegendModel));\r\n    function mergeAndNormalizeLayoutParams(legendModel, target, raw) {\r\n        var orient = legendModel.getOrient();\r\n        var ignoreSize = [1, 1];\r\n        ignoreSize[orient.index] = 0;\r\n        mergeLayoutParam(target, raw, {\r\n            type: 'box', ignoreSize: !!ignoreSize\r\n        });\r\n    }\r\n    ComponentModel.registerClass(ScrollableLegendModel);\n\n    var Group$2 = Group;\r\n    var WH = ['width', 'height'];\r\n    var XY = ['x', 'y'];\r\n    var ScrollableLegendView = (function (_super) {\r\n        __extends(ScrollableLegendView, _super);\r\n        function ScrollableLegendView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = ScrollableLegendView.type;\r\n            _this.newlineDisabled = true;\r\n            _this._currentIndex = 0;\r\n            return _this;\r\n        }\r\n        ScrollableLegendView.prototype.init = function () {\r\n            _super.prototype.init.call(this);\r\n            this.group.add(this._containerGroup = new Group$2());\r\n            this._containerGroup.add(this.getContentGroup());\r\n            this.group.add(this._controllerGroup = new Group$2());\r\n        };\r\n        ScrollableLegendView.prototype.resetInner = function () {\r\n            _super.prototype.resetInner.call(this);\r\n            this._controllerGroup.removeAll();\r\n            this._containerGroup.removeClipPath();\r\n            this._containerGroup.__rectSize = null;\r\n        };\r\n        ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\r\n            var self = this;\r\n            _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\r\n            var controllerGroup = this._controllerGroup;\r\n            var pageIconSize = legendModel.get('pageIconSize', true);\r\n            var pageIconSizeArr = isArray(pageIconSize)\r\n                ? pageIconSize : [pageIconSize, pageIconSize];\r\n            createPageButton('pagePrev', 0);\r\n            var pageTextStyleModel = legendModel.getModel('pageTextStyle');\r\n            controllerGroup.add(new ZRText({\r\n                name: 'pageText',\r\n                style: {\r\n                    text: 'xx/xx',\r\n                    fill: pageTextStyleModel.getTextColor(),\r\n                    font: pageTextStyleModel.getFont(),\r\n                    verticalAlign: 'middle',\r\n                    align: 'center'\r\n                },\r\n                silent: true\r\n            }));\r\n            createPageButton('pageNext', 1);\r\n            function createPageButton(name, iconIdx) {\r\n                var pageDataIndexName = (name + 'DataIndex');\r\n                var icon = createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\r\n                    onclick: bind(self._pageGo, self, pageDataIndexName, legendModel, api)\r\n                }, {\r\n                    x: -pageIconSizeArr[0] / 2,\r\n                    y: -pageIconSizeArr[1] / 2,\r\n                    width: pageIconSizeArr[0],\r\n                    height: pageIconSizeArr[1]\r\n                });\r\n                icon.name = name;\r\n                controllerGroup.add(icon);\r\n            }\r\n        };\r\n        ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\r\n            var selectorGroup = this.getSelectorGroup();\r\n            var orientIdx = legendModel.getOrient().index;\r\n            var wh = WH[orientIdx];\r\n            var xy = XY[orientIdx];\r\n            var hw = WH[1 - orientIdx];\r\n            var yx = XY[1 - orientIdx];\r\n            selector && box('horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\r\n            var selectorButtonGap = legendModel.get('selectorButtonGap', true);\r\n            var selectorRect = selectorGroup.getBoundingRect();\r\n            var selectorPos = [-selectorRect.x, -selectorRect.y];\r\n            var processMaxSize = clone(maxSize);\r\n            selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\r\n            var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx);\r\n            if (selector) {\r\n                if (selectorPosition === 'end') {\r\n                    selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\r\n                }\r\n                else {\r\n                    var offset = selectorRect[wh] + selectorButtonGap;\r\n                    selectorPos[orientIdx] -= offset;\r\n                    mainRect[xy] -= offset;\r\n                }\r\n                mainRect[wh] += selectorRect[wh] + selectorButtonGap;\r\n                selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\r\n                mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\r\n                mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\r\n                selectorGroup.x = selectorPos[0];\r\n                selectorGroup.y = selectorPos[1];\r\n                selectorGroup.markRedraw();\r\n            }\r\n            return mainRect;\r\n        };\r\n        ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx) {\r\n            var contentGroup = this.getContentGroup();\r\n            var containerGroup = this._containerGroup;\r\n            var controllerGroup = this._controllerGroup;\r\n            box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\r\n            box('horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\r\n            var contentRect = contentGroup.getBoundingRect();\r\n            var controllerRect = controllerGroup.getBoundingRect();\r\n            var showController = this._showController = contentRect[wh] > maxSize[wh];\r\n            var contentPos = [-contentRect.x, -contentRect.y];\r\n            if (!isFirstRender) {\r\n                contentPos[orientIdx] = contentGroup[yx];\r\n            }\r\n            var containerPos = [0, 0];\r\n            var controllerPos = [-controllerRect.x, -controllerRect.y];\r\n            var pageButtonGap = retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true));\r\n            if (showController) {\r\n                var pageButtonPosition = legendModel.get('pageButtonPosition', true);\r\n                if (pageButtonPosition === 'end') {\r\n                    controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\r\n                }\r\n                else {\r\n                    containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\r\n                }\r\n            }\r\n            controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\r\n            contentGroup.setPosition(contentPos);\r\n            containerGroup.setPosition(containerPos);\r\n            controllerGroup.setPosition(controllerPos);\r\n            var mainRect = { x: 0, y: 0 };\r\n            mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\r\n            mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]);\r\n            mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\r\n            containerGroup.__rectSize = maxSize[wh];\r\n            if (showController) {\r\n                var clipShape = { x: 0, y: 0 };\r\n                clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\r\n                clipShape[hw] = mainRect[hw];\r\n                containerGroup.setClipPath(new Rect({ shape: clipShape }));\r\n                containerGroup.__rectSize = clipShape[wh];\r\n            }\r\n            else {\r\n                controllerGroup.eachChild(function (child) {\r\n                    child.attr({\r\n                        invisible: true,\r\n                        silent: true\r\n                    });\r\n                });\r\n            }\r\n            var pageInfo = this._getPageInfo(legendModel);\r\n            pageInfo.pageIndex != null && updateProps(contentGroup, { x: pageInfo.contentPosition[0], y: pageInfo.contentPosition[1] }, showController ? legendModel : null);\r\n            this._updatePageInfoView(legendModel, pageInfo);\r\n            return mainRect;\r\n        };\r\n        ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\r\n            var scrollDataIndex = this._getPageInfo(legendModel)[to];\r\n            scrollDataIndex != null && api.dispatchAction({\r\n                type: 'legendScroll',\r\n                scrollDataIndex: scrollDataIndex,\r\n                legendId: legendModel.id\r\n            });\r\n        };\r\n        ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\r\n            var controllerGroup = this._controllerGroup;\r\n            each(['pagePrev', 'pageNext'], function (name) {\r\n                var key = (name + 'DataIndex');\r\n                var canJump = pageInfo[key] != null;\r\n                var icon = controllerGroup.childOfName(name);\r\n                if (icon) {\r\n                    icon.setStyle('fill', canJump\r\n                        ? legendModel.get('pageIconColor', true)\r\n                        : legendModel.get('pageIconInactiveColor', true));\r\n                    icon.cursor = canJump ? 'pointer' : 'default';\r\n                }\r\n            });\r\n            var pageText = controllerGroup.childOfName('pageText');\r\n            var pageFormatter = legendModel.get('pageFormatter');\r\n            var pageIndex = pageInfo.pageIndex;\r\n            var current = pageIndex != null ? pageIndex + 1 : 0;\r\n            var total = pageInfo.pageCount;\r\n            pageText && pageFormatter && pageText.setStyle('text', isString(pageFormatter)\r\n                ? pageFormatter.replace('{current}', current == null ? '' : current + '')\r\n                    .replace('{total}', total == null ? '' : total + '')\r\n                : pageFormatter({ current: current, total: total }));\r\n        };\r\n        ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\r\n            var scrollDataIndex = legendModel.get('scrollDataIndex', true);\r\n            var contentGroup = this.getContentGroup();\r\n            var containerRectSize = this._containerGroup.__rectSize;\r\n            var orientIdx = legendModel.getOrient().index;\r\n            var wh = WH[orientIdx];\r\n            var xy = XY[orientIdx];\r\n            var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\r\n            var children = contentGroup.children();\r\n            var targetItem = children[targetItemIndex];\r\n            var itemCount = children.length;\r\n            var pCount = !itemCount ? 0 : 1;\r\n            var result = {\r\n                contentPosition: [contentGroup.x, contentGroup.y],\r\n                pageCount: pCount,\r\n                pageIndex: pCount - 1,\r\n                pagePrevDataIndex: null,\r\n                pageNextDataIndex: null\r\n            };\r\n            if (!targetItem) {\r\n                return result;\r\n            }\r\n            var targetItemInfo = getItemInfo(targetItem);\r\n            result.contentPosition[orientIdx] = -targetItemInfo.s;\r\n            for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\r\n                currItemInfo = getItemInfo(children[i]);\r\n                if ((!currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize)\r\n                    || (currItemInfo && !intersect(currItemInfo, winStartItemInfo.s))) {\r\n                    if (winEndItemInfo.i > winStartItemInfo.i) {\r\n                        winStartItemInfo = winEndItemInfo;\r\n                    }\r\n                    else {\r\n                        winStartItemInfo = currItemInfo;\r\n                    }\r\n                    if (winStartItemInfo) {\r\n                        if (result.pageNextDataIndex == null) {\r\n                            result.pageNextDataIndex = winStartItemInfo.i;\r\n                        }\r\n                        ++result.pageCount;\r\n                    }\r\n                }\r\n                winEndItemInfo = currItemInfo;\r\n            }\r\n            for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\r\n                currItemInfo = getItemInfo(children[i]);\r\n                if ((!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s))\r\n                    && winStartItemInfo.i < winEndItemInfo.i) {\r\n                    winEndItemInfo = winStartItemInfo;\r\n                    if (result.pagePrevDataIndex == null) {\r\n                        result.pagePrevDataIndex = winStartItemInfo.i;\r\n                    }\r\n                    ++result.pageCount;\r\n                    ++result.pageIndex;\r\n                }\r\n                winStartItemInfo = currItemInfo;\r\n            }\r\n            return result;\r\n            function getItemInfo(el) {\r\n                if (el) {\r\n                    var itemRect = el.getBoundingRect();\r\n                    var start = itemRect[xy] + el[xy];\r\n                    return {\r\n                        s: start,\r\n                        e: start + itemRect[wh],\r\n                        i: el.__legendDataIndex\r\n                    };\r\n                }\r\n            }\r\n            function intersect(itemInfo, winStart) {\r\n                return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\r\n            }\r\n        };\r\n        ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\r\n            if (!this._showController) {\r\n                return 0;\r\n            }\r\n            var index;\r\n            var contentGroup = this.getContentGroup();\r\n            var defaultIndex;\r\n            contentGroup.eachChild(function (child, idx) {\r\n                var legendDataIdx = child.__legendDataIndex;\r\n                if (defaultIndex == null && legendDataIdx != null) {\r\n                    defaultIndex = idx;\r\n                }\r\n                if (legendDataIdx === targetDataIndex) {\r\n                    index = idx;\r\n                }\r\n            });\r\n            return index != null ? index : defaultIndex;\r\n        };\r\n        ScrollableLegendView.type = 'legend.scroll';\r\n        return ScrollableLegendView;\r\n    }(LegendView));\r\n    ComponentView.registerClass(ScrollableLegendView);\n\n    registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\r\n        var scrollDataIndex = payload.scrollDataIndex;\r\n        scrollDataIndex != null && ecModel.eachComponent({ mainType: 'legend', subType: 'scroll', query: payload }, function (legendModel) {\r\n            legendModel.setScrollDataIndex(scrollDataIndex);\r\n        });\r\n    });\n\n    var TitleModel = (function (_super) {\r\n        __extends(TitleModel, _super);\r\n        function TitleModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = TitleModel.type;\r\n            _this.layoutMode = { type: 'box', ignoreSize: true };\r\n            return _this;\r\n        }\r\n        TitleModel.type = 'title';\r\n        TitleModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 6,\r\n            show: true,\r\n            text: '',\r\n            target: 'blank',\r\n            subtext: '',\r\n            subtarget: 'blank',\r\n            left: 0,\r\n            top: 0,\r\n            backgroundColor: 'rgba(0,0,0,0)',\r\n            borderColor: '#ccc',\r\n            borderWidth: 0,\r\n            padding: 5,\r\n            itemGap: 10,\r\n            textStyle: {\r\n                fontSize: 18,\r\n                fontWeight: 'bold',\r\n                color: '#464646'\r\n            },\r\n            subtextStyle: {\r\n                fontSize: 12,\r\n                color: '#6E7079'\r\n            }\r\n        };\r\n        return TitleModel;\r\n    }(ComponentModel));\r\n    ComponentModel.registerClass(TitleModel);\r\n    var TitleView = (function (_super) {\r\n        __extends(TitleView, _super);\r\n        function TitleView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = TitleView.type;\r\n            return _this;\r\n        }\r\n        TitleView.prototype.render = function (titleModel, ecModel, api) {\r\n            this.group.removeAll();\r\n            if (!titleModel.get('show')) {\r\n                return;\r\n            }\r\n            var group = this.group;\r\n            var textStyleModel = titleModel.getModel('textStyle');\r\n            var subtextStyleModel = titleModel.getModel('subtextStyle');\r\n            var textAlign = titleModel.get('textAlign');\r\n            var textVerticalAlign = retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\r\n            var textEl = new ZRText({\r\n                style: createTextStyle(textStyleModel, {\r\n                    text: titleModel.get('text'),\r\n                    fill: textStyleModel.getTextColor()\r\n                }, { disableBox: true }),\r\n                z2: 10\r\n            });\r\n            var textRect = textEl.getBoundingRect();\r\n            var subText = titleModel.get('subtext');\r\n            var subTextEl = new ZRText({\r\n                style: createTextStyle(subtextStyleModel, {\r\n                    text: subText,\r\n                    fill: subtextStyleModel.getTextColor(),\r\n                    y: textRect.height + titleModel.get('itemGap'),\r\n                    verticalAlign: 'top'\r\n                }, { disableBox: true }),\r\n                z2: 10\r\n            });\r\n            var link = titleModel.get('link');\r\n            var sublink = titleModel.get('sublink');\r\n            var triggerEvent = titleModel.get('triggerEvent', true);\r\n            textEl.silent = !link && !triggerEvent;\r\n            subTextEl.silent = !sublink && !triggerEvent;\r\n            if (link) {\r\n                textEl.on('click', function () {\r\n                    windowOpen(link, '_' + titleModel.get('target'));\r\n                });\r\n            }\r\n            if (sublink) {\r\n                subTextEl.on('click', function () {\r\n                    windowOpen(link, '_' + titleModel.get('subtarget'));\r\n                });\r\n            }\r\n            getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent\r\n                ? {\r\n                    componentType: 'title',\r\n                    componentIndex: titleModel.componentIndex\r\n                }\r\n                : null;\r\n            group.add(textEl);\r\n            subText && group.add(subTextEl);\r\n            var groupRect = group.getBoundingRect();\r\n            var layoutOption = titleModel.getBoxLayoutParams();\r\n            layoutOption.width = groupRect.width;\r\n            layoutOption.height = groupRect.height;\r\n            var layoutRect = getLayoutRect(layoutOption, {\r\n                width: api.getWidth(),\r\n                height: api.getHeight()\r\n            }, titleModel.get('padding'));\r\n            if (!textAlign) {\r\n                textAlign = (titleModel.get('left') || titleModel.get('right'));\r\n                if (textAlign === 'middle') {\r\n                    textAlign = 'center';\r\n                }\r\n                if (textAlign === 'right') {\r\n                    layoutRect.x += layoutRect.width;\r\n                }\r\n                else if (textAlign === 'center') {\r\n                    layoutRect.x += layoutRect.width / 2;\r\n                }\r\n            }\r\n            if (!textVerticalAlign) {\r\n                textVerticalAlign = (titleModel.get('top') || titleModel.get('bottom'));\r\n                if (textVerticalAlign === 'center') {\r\n                    textVerticalAlign = 'middle';\r\n                }\r\n                if (textVerticalAlign === 'bottom') {\r\n                    layoutRect.y += layoutRect.height;\r\n                }\r\n                else if (textVerticalAlign === 'middle') {\r\n                    layoutRect.y += layoutRect.height / 2;\r\n                }\r\n                textVerticalAlign = textVerticalAlign || 'top';\r\n            }\r\n            group.x = layoutRect.x;\r\n            group.y = layoutRect.y;\r\n            group.markRedraw();\r\n            var alignStyle = {\r\n                align: textAlign,\r\n                verticalAlign: textVerticalAlign\r\n            };\r\n            textEl.setStyle(alignStyle);\r\n            subTextEl.setStyle(alignStyle);\r\n            groupRect = group.getBoundingRect();\r\n            var padding = layoutRect.margin;\r\n            var style = titleModel.getItemStyle(['color', 'opacity']);\r\n            style.fill = titleModel.get('backgroundColor');\r\n            var rect = new Rect({\r\n                shape: {\r\n                    x: groupRect.x - padding[3],\r\n                    y: groupRect.y - padding[0],\r\n                    width: groupRect.width + padding[1] + padding[3],\r\n                    height: groupRect.height + padding[0] + padding[2],\r\n                    r: titleModel.get('borderRadius')\r\n                },\r\n                style: style,\r\n                subPixelOptimize: true,\r\n                silent: true\r\n            });\r\n            group.add(rect);\r\n        };\r\n        TitleView.type = 'title';\r\n        return TitleView;\r\n    }(ComponentView));\r\n    ComponentView.registerClass(TitleView);\n\n    function fillLabel(opt) {\r\n        defaultEmphasis(opt, 'label', ['show']);\r\n    }\r\n    var inner$a = makeInner();\r\n    var MarkerModel = (function (_super) {\r\n        __extends(MarkerModel, _super);\r\n        function MarkerModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = MarkerModel.type;\r\n            _this.createdBySelf = false;\r\n            return _this;\r\n        }\r\n        MarkerModel.prototype.init = function (option, parentModel, ecModel) {\r\n            if (__DEV__) {\r\n                if (this.type === 'marker') {\r\n                    throw new Error('Marker component is abstract component. Use markLine, markPoint, markArea instead.');\r\n                }\r\n            }\r\n            this.mergeDefaultAndTheme(option, ecModel);\r\n            this._mergeOption(option, ecModel, false, true);\r\n        };\r\n        MarkerModel.prototype.isAnimationEnabled = function () {\r\n            if (env.node) {\r\n                return false;\r\n            }\r\n            var hostSeries = this.__hostSeries;\r\n            return this.getShallow('animation') && hostSeries && hostSeries.isAnimationEnabled();\r\n        };\r\n        MarkerModel.prototype.mergeOption = function (newOpt, ecModel) {\r\n            this._mergeOption(newOpt, ecModel, false, false);\r\n        };\r\n        MarkerModel.prototype._mergeOption = function (newOpt, ecModel, createdBySelf, isInit) {\r\n            var componentType = this.mainType;\r\n            if (!createdBySelf) {\r\n                ecModel.eachSeries(function (seriesModel) {\r\n                    var markerOpt = seriesModel.get(this.mainType, true);\r\n                    var markerModel = inner$a(seriesModel)[componentType];\r\n                    if (!markerOpt || !markerOpt.data) {\r\n                        inner$a(seriesModel)[componentType] = null;\r\n                        return;\r\n                    }\r\n                    if (!markerModel) {\r\n                        if (isInit) {\r\n                            fillLabel(markerOpt);\r\n                        }\r\n                        each(markerOpt.data, function (item) {\r\n                            if (item instanceof Array) {\r\n                                fillLabel(item[0]);\r\n                                fillLabel(item[1]);\r\n                            }\r\n                            else {\r\n                                fillLabel(item);\r\n                            }\r\n                        });\r\n                        markerModel = this.createMarkerModelFromSeries(markerOpt, this, ecModel);\r\n                        extend(markerModel, {\r\n                            mainType: this.mainType,\r\n                            seriesIndex: seriesModel.seriesIndex,\r\n                            name: seriesModel.name,\r\n                            createdBySelf: true\r\n                        });\r\n                        markerModel.__hostSeries = seriesModel;\r\n                    }\r\n                    else {\r\n                        markerModel._mergeOption(markerOpt, ecModel, true);\r\n                    }\r\n                    inner$a(seriesModel)[componentType] = markerModel;\r\n                }, this);\r\n            }\r\n        };\r\n        MarkerModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType, renderMode) {\r\n            var data = this.getData();\r\n            var value = this.getRawValue(dataIndex);\r\n            var formattedValue = isArray(value)\r\n                ? map(value, addCommas).join(', ') : addCommas(value);\r\n            var name = encodeHTML(data.getName(dataIndex));\r\n            var html = \"<div style=\\\"font-size:12px;line-height:1;margin:0 0 8px 0;\\\">\" + encodeHTML(this.name) + \"</div>\";\r\n            if (value != null || name) {\r\n                html += renderMode === 'html' ? '' : '\\n';\r\n            }\r\n            if (name) {\r\n                html += \"<div style=\\\"line-height:1\\\"><span style=\\\"font-size:12px;color:#6e7079;\\\">\" + name + \"</span>\";\r\n            }\r\n            if (value != null) {\r\n                html = renderMode === 'html'\r\n                    ? concatTooltipHtml(html, formattedValue, true) + (name ? '</div>' : '')\r\n                    : (html + formattedValue);\r\n            }\r\n            return html;\r\n        };\r\n        MarkerModel.prototype.getData = function () {\r\n            return this._data;\r\n        };\r\n        MarkerModel.prototype.setData = function (data) {\r\n            this._data = data;\r\n        };\r\n        MarkerModel.getMarkerModelFromSeries = function (seriesModel, componentType) {\r\n            return inner$a(seriesModel)[componentType];\r\n        };\r\n        MarkerModel.type = 'marker';\r\n        MarkerModel.dependencies = ['series', 'grid', 'polar', 'geo'];\r\n        return MarkerModel;\r\n    }(ComponentModel));\r\n    mixin(MarkerModel, DataFormatMixin.prototype);\n\n    var MarkPointModel = (function (_super) {\r\n        __extends(MarkPointModel, _super);\r\n        function MarkPointModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = MarkPointModel.type;\r\n            return _this;\r\n        }\r\n        MarkPointModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\r\n            return new MarkPointModel(markerOpt, masterMarkerModel, ecModel);\r\n        };\r\n        MarkPointModel.type = 'markPoint';\r\n        MarkPointModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 5,\r\n            symbol: 'pin',\r\n            symbolSize: 50,\r\n            tooltip: {\r\n                trigger: 'item'\r\n            },\r\n            label: {\r\n                show: true,\r\n                position: 'inside'\r\n            },\r\n            itemStyle: {\r\n                borderWidth: 2\r\n            },\r\n            emphasis: {\r\n                label: {\r\n                    show: true\r\n                }\r\n            }\r\n        };\r\n        return MarkPointModel;\r\n    }(MarkerModel));\r\n    ComponentModel.registerClass(MarkPointModel);\n\n    function hasXOrY(item) {\r\n        return !(isNaN(parseFloat(item.x)) && isNaN(parseFloat(item.y)));\r\n    }\r\n    function hasXAndY(item) {\r\n        return !isNaN(parseFloat(item.x)) && !isNaN(parseFloat(item.y));\r\n    }\r\n    function markerTypeCalculatorWithExtent(markerType, data, otherDataDim, targetDataDim, otherCoordIndex, targetCoordIndex) {\r\n        var coordArr = [];\r\n        var stacked = isDimensionStacked(data, targetDataDim);\r\n        var calcDataDim = stacked\r\n            ? data.getCalculationInfo('stackResultDimension')\r\n            : targetDataDim;\r\n        var value = numCalculate(data, calcDataDim, markerType);\r\n        var dataIndex = data.indicesOfNearest(calcDataDim, value)[0];\r\n        coordArr[otherCoordIndex] = data.get(otherDataDim, dataIndex);\r\n        coordArr[targetCoordIndex] = data.get(calcDataDim, dataIndex);\r\n        var coordArrValue = data.get(targetDataDim, dataIndex);\r\n        var precision = getPrecision(data.get(targetDataDim, dataIndex));\r\n        precision = Math.min(precision, 20);\r\n        if (precision >= 0) {\r\n            coordArr[targetCoordIndex] = +coordArr[targetCoordIndex].toFixed(precision);\r\n        }\r\n        return [coordArr, coordArrValue];\r\n    }\r\n    var markerTypeCalculator = {\r\n        min: curry(markerTypeCalculatorWithExtent, 'min'),\r\n        max: curry(markerTypeCalculatorWithExtent, 'max'),\r\n        average: curry(markerTypeCalculatorWithExtent, 'average'),\r\n        median: curry(markerTypeCalculatorWithExtent, 'median')\r\n    };\r\n    function dataTransform(seriesModel, item) {\r\n        var data = seriesModel.getData();\r\n        var coordSys = seriesModel.coordinateSystem;\r\n        if (item && !hasXAndY(item) && !isArray(item.coord) && coordSys) {\r\n            var dims = coordSys.dimensions;\r\n            var axisInfo = getAxisInfo$1(item, data, coordSys, seriesModel);\r\n            item = clone(item);\r\n            if (item.type\r\n                && markerTypeCalculator[item.type]\r\n                && axisInfo.baseAxis && axisInfo.valueAxis) {\r\n                var otherCoordIndex = indexOf(dims, axisInfo.baseAxis.dim);\r\n                var targetCoordIndex = indexOf(dims, axisInfo.valueAxis.dim);\r\n                var coordInfo = markerTypeCalculator[item.type](data, axisInfo.baseDataDim, axisInfo.valueDataDim, otherCoordIndex, targetCoordIndex);\r\n                item.coord = coordInfo[0];\r\n                item.value = coordInfo[1];\r\n            }\r\n            else {\r\n                var coord = [\r\n                    item.xAxis != null ? item.xAxis : item.radiusAxis,\r\n                    item.yAxis != null ? item.yAxis : item.angleAxis\r\n                ];\r\n                for (var i = 0; i < 2; i++) {\r\n                    if (markerTypeCalculator[coord[i]]) {\r\n                        coord[i] = numCalculate(data, data.mapDimension(dims[i]), coord[i]);\r\n                    }\r\n                }\r\n                item.coord = coord;\r\n            }\r\n        }\r\n        return item;\r\n    }\r\n    function getAxisInfo$1(item, data, coordSys, seriesModel) {\r\n        var ret = {};\r\n        if (item.valueIndex != null || item.valueDim != null) {\r\n            ret.valueDataDim = item.valueIndex != null\r\n                ? data.getDimension(item.valueIndex) : item.valueDim;\r\n            ret.valueAxis = coordSys.getAxis(dataDimToCoordDim(seriesModel, ret.valueDataDim));\r\n            ret.baseAxis = coordSys.getOtherAxis(ret.valueAxis);\r\n            ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\r\n        }\r\n        else {\r\n            ret.baseAxis = seriesModel.getBaseAxis();\r\n            ret.valueAxis = coordSys.getOtherAxis(ret.baseAxis);\r\n            ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\r\n            ret.valueDataDim = data.mapDimension(ret.valueAxis.dim);\r\n        }\r\n        return ret;\r\n    }\r\n    function dataDimToCoordDim(seriesModel, dataDim) {\r\n        var data = seriesModel.getData();\r\n        var dimensions = data.dimensions;\r\n        dataDim = data.getDimension(dataDim);\r\n        for (var i = 0; i < dimensions.length; i++) {\r\n            var dimItem = data.getDimensionInfo(dimensions[i]);\r\n            if (dimItem.name === dataDim) {\r\n                return dimItem.coordDim;\r\n            }\r\n        }\r\n    }\r\n    function dataFilter$1(coordSys, item) {\r\n        return (coordSys && coordSys.containData && item.coord && !hasXOrY(item))\r\n            ? coordSys.containData(item.coord) : true;\r\n    }\r\n    function dimValueGetter(item, dimName, dataIndex, dimIndex) {\r\n        if (dimIndex < 2) {\r\n            return item.coord && item.coord[dimIndex];\r\n        }\r\n        return item.value;\r\n    }\r\n    function numCalculate(data, valueDataDim, type) {\r\n        if (type === 'average') {\r\n            var sum_1 = 0;\r\n            var count_1 = 0;\r\n            data.each(valueDataDim, function (val, idx) {\r\n                if (!isNaN(val)) {\r\n                    sum_1 += val;\r\n                    count_1++;\r\n                }\r\n            });\r\n            return sum_1 / count_1;\r\n        }\r\n        else if (type === 'median') {\r\n            return data.getMedian(valueDataDim);\r\n        }\r\n        else {\r\n            return data.getDataExtent(valueDataDim)[type === 'max' ? 1 : 0];\r\n        }\r\n    }\n\n    var inner$b = makeInner();\r\n    var MarkerView = (function (_super) {\r\n        __extends(MarkerView, _super);\r\n        function MarkerView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = MarkerView.type;\r\n            return _this;\r\n        }\r\n        MarkerView.prototype.init = function () {\r\n            this.markerGroupMap = createHashMap();\r\n        };\r\n        MarkerView.prototype.render = function (markerModel, ecModel, api) {\r\n            var _this = this;\r\n            var markerGroupMap = this.markerGroupMap;\r\n            markerGroupMap.each(function (item) {\r\n                inner$b(item).keep = false;\r\n            });\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\r\n                markerModel && _this.renderSeries(seriesModel, markerModel, ecModel, api);\r\n            });\r\n            markerGroupMap.each(function (item) {\r\n                !inner$b(item).keep && _this.group.remove(item.group);\r\n            });\r\n        };\r\n        MarkerView.prototype.markKeep = function (drawGroup) {\r\n            inner$b(drawGroup).keep = true;\r\n        };\r\n        MarkerView.prototype.blurSeries = function (seriesModelList) {\r\n            var _this = this;\r\n            each(seriesModelList, function (seriesModel) {\r\n                var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\r\n                if (markerModel) {\r\n                    var data = markerModel.getData();\r\n                    data.eachItemGraphicEl(function (el) {\r\n                        if (el) {\r\n                            enterBlur(el);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        MarkerView.type = 'marker';\r\n        return MarkerView;\r\n    }(ComponentView));\n\n    function updateMarkerLayout(mpData, seriesModel, api) {\r\n        var coordSys = seriesModel.coordinateSystem;\r\n        mpData.each(function (idx) {\r\n            var itemModel = mpData.getItemModel(idx);\r\n            var point;\r\n            var xPx = parsePercent$2(itemModel.get('x'), api.getWidth());\r\n            var yPx = parsePercent$2(itemModel.get('y'), api.getHeight());\r\n            if (!isNaN(xPx) && !isNaN(yPx)) {\r\n                point = [xPx, yPx];\r\n            }\r\n            else if (seriesModel.getMarkerPosition) {\r\n                point = seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions, idx));\r\n            }\r\n            else if (coordSys) {\r\n                var x = mpData.get(coordSys.dimensions[0], idx);\r\n                var y = mpData.get(coordSys.dimensions[1], idx);\r\n                point = coordSys.dataToPoint([x, y]);\r\n            }\r\n            if (!isNaN(xPx)) {\r\n                point[0] = xPx;\r\n            }\r\n            if (!isNaN(yPx)) {\r\n                point[1] = yPx;\r\n            }\r\n            mpData.setItemLayout(idx, point);\r\n        });\r\n    }\r\n    var MarkPointView = (function (_super) {\r\n        __extends(MarkPointView, _super);\r\n        function MarkPointView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = MarkPointView.type;\r\n            return _this;\r\n        }\r\n        MarkPointView.prototype.updateTransform = function (markPointModel, ecModel, api) {\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                var mpModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markPoint');\r\n                if (mpModel) {\r\n                    updateMarkerLayout(mpModel.getData(), seriesModel, api);\r\n                    this.markerGroupMap.get(seriesModel.id).updateLayout();\r\n                }\r\n            }, this);\r\n        };\r\n        MarkPointView.prototype.renderSeries = function (seriesModel, mpModel, ecModel, api) {\r\n            var coordSys = seriesModel.coordinateSystem;\r\n            var seriesId = seriesModel.id;\r\n            var seriesData = seriesModel.getData();\r\n            var symbolDrawMap = this.markerGroupMap;\r\n            var symbolDraw = symbolDrawMap.get(seriesId)\r\n                || symbolDrawMap.set(seriesId, new SymbolDraw());\r\n            var mpData = createList$1(coordSys, seriesModel, mpModel);\r\n            mpModel.setData(mpData);\r\n            updateMarkerLayout(mpModel.getData(), seriesModel, api);\r\n            mpData.each(function (idx) {\r\n                var itemModel = mpData.getItemModel(idx);\r\n                var symbol = itemModel.getShallow('symbol');\r\n                var symbolSize = itemModel.getShallow('symbolSize');\r\n                if (isFunction(symbol) || isFunction(symbolSize)) {\r\n                    var rawIdx = mpModel.getRawValue(idx);\r\n                    var dataParams = mpModel.getDataParams(idx);\r\n                    if (isFunction(symbol)) {\r\n                        symbol = symbol(rawIdx, dataParams);\r\n                    }\r\n                    if (isFunction(symbolSize)) {\r\n                        symbolSize = symbolSize(rawIdx, dataParams);\r\n                    }\r\n                }\r\n                var style = itemModel.getModel('itemStyle').getItemStyle();\r\n                var color = getVisualFromData(seriesData, 'color');\r\n                if (!style.fill) {\r\n                    style.fill = color;\r\n                }\r\n                mpData.setItemVisual(idx, {\r\n                    symbol: symbol,\r\n                    symbolSize: symbolSize,\r\n                    style: style\r\n                });\r\n            });\r\n            symbolDraw.updateData(mpData);\r\n            this.group.add(symbolDraw.group);\r\n            mpData.eachItemGraphicEl(function (el) {\r\n                el.traverse(function (child) {\r\n                    getECData(child).dataModel = mpModel;\r\n                });\r\n            });\r\n            this.markKeep(symbolDraw);\r\n            symbolDraw.group.silent = mpModel.get('silent') || seriesModel.get('silent');\r\n        };\r\n        MarkPointView.type = 'markPoint';\r\n        return MarkPointView;\r\n    }(MarkerView));\r\n    function createList$1(coordSys, seriesModel, mpModel) {\r\n        var coordDimsInfos;\r\n        if (coordSys) {\r\n            coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\r\n                var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {};\r\n                return defaults({ name: coordDim }, info);\r\n            });\r\n        }\r\n        else {\r\n            coordDimsInfos = [{\r\n                    name: 'value',\r\n                    type: 'float'\r\n                }];\r\n        }\r\n        var mpData = new List(coordDimsInfos, mpModel);\r\n        var dataOpt = map(mpModel.get('data'), curry(dataTransform, seriesModel));\r\n        if (coordSys) {\r\n            dataOpt = filter(dataOpt, curry(dataFilter$1, coordSys));\r\n        }\r\n        mpData.initData(dataOpt, null, coordSys ? dimValueGetter : function (item) {\r\n            return item.value;\r\n        });\r\n        return mpData;\r\n    }\r\n    ComponentView.registerClass(MarkPointView);\n\n    registerPreprocessor(function (opt) {\r\n        opt.markPoint = opt.markPoint || {};\r\n    });\n\n    var MarkLineModel = (function (_super) {\r\n        __extends(MarkLineModel, _super);\r\n        function MarkLineModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = MarkLineModel.type;\r\n            return _this;\r\n        }\r\n        MarkLineModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\r\n            return new MarkLineModel(markerOpt, masterMarkerModel, ecModel);\r\n        };\r\n        MarkLineModel.type = 'markLine';\r\n        MarkLineModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 5,\r\n            symbol: ['circle', 'arrow'],\r\n            symbolSize: [8, 16],\r\n            precision: 2,\r\n            tooltip: {\r\n                trigger: 'item'\r\n            },\r\n            label: {\r\n                show: true,\r\n                position: 'end',\r\n                distance: 5\r\n            },\r\n            lineStyle: {\r\n                type: 'dashed'\r\n            },\r\n            emphasis: {\r\n                label: {\r\n                    show: true\r\n                },\r\n                lineStyle: {\r\n                    width: 3\r\n                }\r\n            },\r\n            animationEasing: 'linear'\r\n        };\r\n        return MarkLineModel;\r\n    }(MarkerModel));\r\n    ComponentModel.registerClass(MarkLineModel);\n\n    var straightLineProto = Line.prototype;\r\n    var bezierCurveProto = BezierCurve.prototype;\r\n    var StraightLineShape = (function () {\r\n        function StraightLineShape() {\r\n            this.x1 = 0;\r\n            this.y1 = 0;\r\n            this.x2 = 0;\r\n            this.y2 = 0;\r\n            this.percent = 1;\r\n        }\r\n        return StraightLineShape;\r\n    }());\r\n    var CurveShape = (function (_super) {\r\n        __extends(CurveShape, _super);\r\n        function CurveShape() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        return CurveShape;\r\n    }(StraightLineShape));\r\n    function isStraightLine(shape) {\r\n        return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\r\n    }\r\n    var ECLinePath = (function (_super) {\r\n        __extends(ECLinePath, _super);\r\n        function ECLinePath(opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.type = 'ec-line';\r\n            return _this;\r\n        }\r\n        ECLinePath.prototype.getDefaultStyle = function () {\r\n            return {\r\n                stroke: '#000',\r\n                fill: null\r\n            };\r\n        };\r\n        ECLinePath.prototype.getDefaultShape = function () {\r\n            return new StraightLineShape();\r\n        };\r\n        ECLinePath.prototype.buildPath = function (ctx, shape) {\r\n            if (isStraightLine(shape)) {\r\n                straightLineProto.buildPath.call(this, ctx, shape);\r\n            }\r\n            else {\r\n                bezierCurveProto.buildPath.call(this, ctx, shape);\r\n            }\r\n        };\r\n        ECLinePath.prototype.pointAt = function (t) {\r\n            if (isStraightLine(this.shape)) {\r\n                return straightLineProto.pointAt.call(this, t);\r\n            }\r\n            else {\r\n                return bezierCurveProto.pointAt.call(this, t);\r\n            }\r\n        };\r\n        ECLinePath.prototype.tangentAt = function (t) {\r\n            var shape = this.shape;\r\n            var p = isStraightLine(shape)\r\n                ? [shape.x2 - shape.x1, shape.y2 - shape.y1]\r\n                : bezierCurveProto.tangentAt.call(this, t);\r\n            return normalize(p, p);\r\n        };\r\n        return ECLinePath;\r\n    }(Path));\n\n    var SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\r\n    function makeSymbolTypeKey(symbolCategory) {\r\n        return '_' + symbolCategory + 'Type';\r\n    }\r\n    function createSymbol$1(name, lineData, idx) {\r\n        var symbolType = lineData.getItemVisual(idx, name);\r\n        var symbolSize = lineData.getItemVisual(idx, name + 'Size');\r\n        if (!symbolType || symbolType === 'none') {\r\n            return;\r\n        }\r\n        var symbolSizeArr = isArray(symbolSize)\r\n            ? symbolSize : [symbolSize, symbolSize];\r\n        var symbolPath = createSymbol(symbolType, -symbolSizeArr[0] / 2, -symbolSizeArr[1] / 2, symbolSizeArr[0], symbolSizeArr[1]);\r\n        symbolPath.name = name;\r\n        return symbolPath;\r\n    }\r\n    function createLine(points) {\r\n        var line = new ECLinePath({\r\n            name: 'line',\r\n            subPixelOptimize: true\r\n        });\r\n        setLinePoints(line.shape, points);\r\n        return line;\r\n    }\r\n    function setLinePoints(targetShape, points) {\r\n        targetShape.x1 = points[0][0];\r\n        targetShape.y1 = points[0][1];\r\n        targetShape.x2 = points[1][0];\r\n        targetShape.y2 = points[1][1];\r\n        targetShape.percent = 1;\r\n        var cp1 = points[2];\r\n        if (cp1) {\r\n            targetShape.cpx1 = cp1[0];\r\n            targetShape.cpy1 = cp1[1];\r\n        }\r\n        else {\r\n            targetShape.cpx1 = NaN;\r\n            targetShape.cpy1 = NaN;\r\n        }\r\n    }\r\n    var Line$1 = (function (_super) {\r\n        __extends(Line, _super);\r\n        function Line(lineData, idx, seriesScope) {\r\n            var _this = _super.call(this) || this;\r\n            _this._createLine(lineData, idx, seriesScope);\r\n            return _this;\r\n        }\r\n        Line.prototype._createLine = function (lineData, idx, seriesScope) {\r\n            var seriesModel = lineData.hostModel;\r\n            var linePoints = lineData.getItemLayout(idx);\r\n            var line = createLine(linePoints);\r\n            line.shape.percent = 0;\r\n            initProps(line, {\r\n                shape: {\r\n                    percent: 1\r\n                }\r\n            }, seriesModel, idx);\r\n            this.add(line);\r\n            each(SYMBOL_CATEGORIES, function (symbolCategory) {\r\n                var symbol = createSymbol$1(symbolCategory, lineData, idx);\r\n                this.add(symbol);\r\n                this[makeSymbolTypeKey(symbolCategory)] = lineData.getItemVisual(idx, symbolCategory);\r\n            }, this);\r\n            this._updateCommonStl(lineData, idx, seriesScope);\r\n        };\r\n        Line.prototype.updateData = function (lineData, idx, seriesScope) {\r\n            var seriesModel = lineData.hostModel;\r\n            var line = this.childOfName('line');\r\n            var linePoints = lineData.getItemLayout(idx);\r\n            var target = {\r\n                shape: {}\r\n            };\r\n            setLinePoints(target.shape, linePoints);\r\n            updateProps(line, target, seriesModel, idx);\r\n            each(SYMBOL_CATEGORIES, function (symbolCategory) {\r\n                var symbolType = lineData.getItemVisual(idx, symbolCategory);\r\n                var key = makeSymbolTypeKey(symbolCategory);\r\n                if (this[key] !== symbolType) {\r\n                    this.remove(this.childOfName(symbolCategory));\r\n                    var symbol = createSymbol$1(symbolCategory, lineData, idx);\r\n                    this.add(symbol);\r\n                }\r\n                this[key] = symbolType;\r\n            }, this);\r\n            this._updateCommonStl(lineData, idx, seriesScope);\r\n        };\r\n        Line.prototype.getLinePath = function () {\r\n            return this.childAt(0);\r\n        };\r\n        Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\r\n            var seriesModel = lineData.hostModel;\r\n            var line = this.childOfName('line');\r\n            var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\r\n            var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\r\n            var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\r\n            var labelStatesModels = seriesScope && seriesScope.labelStatesModels;\r\n            if (!seriesScope || lineData.hasItemOption) {\r\n                var itemModel = lineData.getItemModel(idx);\r\n                emphasisLineStyle = itemModel.getModel(['emphasis', 'lineStyle']).getLineStyle();\r\n                blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\r\n                selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\r\n                labelStatesModels = getLabelStatesModels(itemModel);\r\n            }\r\n            var lineStyle = lineData.getItemVisual(idx, 'style');\r\n            var visualColor = lineStyle.stroke;\r\n            line.useStyle(lineStyle);\r\n            line.style.fill = null;\r\n            line.style.strokeNoScale = true;\r\n            line.ensureState('emphasis').style = emphasisLineStyle;\r\n            line.ensureState('blur').style = blurLineStyle;\r\n            line.ensureState('select').style = selectLineStyle;\r\n            each(SYMBOL_CATEGORIES, function (symbolCategory) {\r\n                var symbol = this.childOfName(symbolCategory);\r\n                if (symbol) {\r\n                    symbol.setColor(visualColor);\r\n                    symbol.style.opacity = lineStyle.opacity;\r\n                    for (var i = 0; i < SPECIAL_STATES.length; i++) {\r\n                        var stateName = SPECIAL_STATES[i];\r\n                        var lineState = line.getState(stateName);\r\n                        if (lineState) {\r\n                            var lineStateStyle = lineState.style || {};\r\n                            var state = symbol.ensureState(stateName);\r\n                            var stateStyle = state.style || (state.style = {});\r\n                            if (lineStateStyle.stroke != null) {\r\n                                stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\r\n                            }\r\n                            if (lineStateStyle.opacity != null) {\r\n                                stateStyle.opacity = lineStateStyle.opacity;\r\n                            }\r\n                        }\r\n                    }\r\n                    symbol.markRedraw();\r\n                }\r\n            }, this);\r\n            var rawVal = seriesModel.getRawValue(idx);\r\n            setLabelStyle(this, labelStatesModels, {\r\n                labelDataIndex: idx,\r\n                labelFetcher: {\r\n                    getFormattedLabel: function (dataIndex, stateName) {\r\n                        return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\r\n                    }\r\n                },\r\n                inheritColor: visualColor || '#000',\r\n                defaultText: (rawVal == null\r\n                    ? lineData.getName(idx)\r\n                    : isFinite(rawVal)\r\n                        ? round$1(rawVal)\r\n                        : rawVal) + ''\r\n            });\r\n            var label = this.getTextContent();\r\n            if (label) {\r\n                var labelNormalModel = labelStatesModels.normal;\r\n                label.__align = label.style.align;\r\n                label.__verticalAlign = label.style.verticalAlign;\r\n                label.__position = labelNormalModel.get('position') || 'middle';\r\n                var distance = labelNormalModel.get('distance');\r\n                if (!isArray(distance)) {\r\n                    distance = [distance, distance];\r\n                }\r\n                label.__labelDistance = distance;\r\n            }\r\n            this.setTextConfig({\r\n                position: null,\r\n                local: true,\r\n                inside: false\r\n            });\r\n            enableHoverEmphasis(this);\r\n        };\r\n        Line.prototype.highlight = function () {\r\n            enterEmphasis(this);\r\n        };\r\n        Line.prototype.downplay = function () {\r\n            leaveEmphasis(this);\r\n        };\r\n        Line.prototype.updateLayout = function (lineData, idx) {\r\n            this.setLinePoints(lineData.getItemLayout(idx));\r\n        };\r\n        Line.prototype.setLinePoints = function (points) {\r\n            var linePath = this.childOfName('line');\r\n            setLinePoints(linePath.shape, points);\r\n            linePath.dirty();\r\n        };\r\n        Line.prototype.beforeUpdate = function () {\r\n            var lineGroup = this;\r\n            var symbolFrom = lineGroup.childOfName('fromSymbol');\r\n            var symbolTo = lineGroup.childOfName('toSymbol');\r\n            var label = lineGroup.getTextContent();\r\n            if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\r\n                return;\r\n            }\r\n            var invScale = 1;\r\n            var parentNode = this.parent;\r\n            while (parentNode) {\r\n                if (parentNode.scaleX) {\r\n                    invScale /= parentNode.scaleX;\r\n                }\r\n                parentNode = parentNode.parent;\r\n            }\r\n            var line = lineGroup.childOfName('line');\r\n            if (!this.__dirty && !line.__dirty) {\r\n                return;\r\n            }\r\n            var percent = line.shape.percent;\r\n            var fromPos = line.pointAt(0);\r\n            var toPos = line.pointAt(percent);\r\n            var d = sub([], toPos, fromPos);\r\n            normalize(d, d);\r\n            if (symbolFrom) {\r\n                symbolFrom.setPosition(fromPos);\r\n                var tangent = line.tangentAt(0);\r\n                symbolFrom.rotation = Math.PI / 2 - Math.atan2(tangent[1], tangent[0]);\r\n                symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\r\n                symbolFrom.markRedraw();\r\n            }\r\n            if (symbolTo) {\r\n                symbolTo.setPosition(toPos);\r\n                var tangent = line.tangentAt(1);\r\n                symbolTo.rotation = -Math.PI / 2 - Math.atan2(tangent[1], tangent[0]);\r\n                symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\r\n                symbolTo.markRedraw();\r\n            }\r\n            if (label && !label.ignore) {\r\n                label.x = label.y = 0;\r\n                label.originX = label.originY = 0;\r\n                var textAlign = void 0;\r\n                var textVerticalAlign = void 0;\r\n                var distance = label.__labelDistance;\r\n                var distanceX = distance[0] * invScale;\r\n                var distanceY = distance[1] * invScale;\r\n                var halfPercent = percent / 2;\r\n                var tangent = line.tangentAt(halfPercent);\r\n                var n = [tangent[1], -tangent[0]];\r\n                var cp = line.pointAt(halfPercent);\r\n                if (n[1] > 0) {\r\n                    n[0] = -n[0];\r\n                    n[1] = -n[1];\r\n                }\r\n                var dir = tangent[0] < 0 ? -1 : 1;\r\n                if (label.__position !== 'start' && label.__position !== 'end') {\r\n                    var rotation = -Math.atan2(tangent[1], tangent[0]);\r\n                    if (toPos[0] < fromPos[0]) {\r\n                        rotation = Math.PI + rotation;\r\n                    }\r\n                    label.rotation = rotation;\r\n                }\r\n                var dy = void 0;\r\n                switch (label.__position) {\r\n                    case 'insideStartTop':\r\n                    case 'insideMiddleTop':\r\n                    case 'insideEndTop':\r\n                    case 'middle':\r\n                        dy = -distanceY;\r\n                        textVerticalAlign = 'bottom';\r\n                        break;\r\n                    case 'insideStartBottom':\r\n                    case 'insideMiddleBottom':\r\n                    case 'insideEndBottom':\r\n                        dy = distanceY;\r\n                        textVerticalAlign = 'top';\r\n                        break;\r\n                    default:\r\n                        dy = 0;\r\n                        textVerticalAlign = 'middle';\r\n                }\r\n                switch (label.__position) {\r\n                    case 'end':\r\n                        label.x = d[0] * distanceX + toPos[0];\r\n                        label.y = d[1] * distanceY + toPos[1];\r\n                        textAlign = d[0] > 0.8 ? 'left' : (d[0] < -0.8 ? 'right' : 'center');\r\n                        textVerticalAlign = d[1] > 0.8 ? 'top' : (d[1] < -0.8 ? 'bottom' : 'middle');\r\n                        break;\r\n                    case 'start':\r\n                        label.x = -d[0] * distanceX + fromPos[0];\r\n                        label.y = -d[1] * distanceY + fromPos[1];\r\n                        textAlign = d[0] > 0.8 ? 'right' : (d[0] < -0.8 ? 'left' : 'center');\r\n                        textVerticalAlign = d[1] > 0.8 ? 'bottom' : (d[1] < -0.8 ? 'top' : 'middle');\r\n                        break;\r\n                    case 'insideStartTop':\r\n                    case 'insideStart':\r\n                    case 'insideStartBottom':\r\n                        label.x = distanceX * dir + fromPos[0];\r\n                        label.y = fromPos[1] + dy;\r\n                        textAlign = tangent[0] < 0 ? 'right' : 'left';\r\n                        label.originX = -distanceX * dir;\r\n                        label.originY = -dy;\r\n                        break;\r\n                    case 'insideMiddleTop':\r\n                    case 'insideMiddle':\r\n                    case 'insideMiddleBottom':\r\n                    case 'middle':\r\n                        label.x = cp[0];\r\n                        label.y = cp[1] + dy;\r\n                        textAlign = 'center';\r\n                        label.originY = -dy;\r\n                        break;\r\n                    case 'insideEndTop':\r\n                    case 'insideEnd':\r\n                    case 'insideEndBottom':\r\n                        label.x = -distanceX * dir + toPos[0];\r\n                        label.y = toPos[1] + dy;\r\n                        textAlign = tangent[0] >= 0 ? 'right' : 'left';\r\n                        label.originX = distanceX * dir;\r\n                        label.originY = -dy;\r\n                        break;\r\n                }\r\n                label.scaleX = label.scaleY = invScale;\r\n                label.setStyle({\r\n                    verticalAlign: label.__verticalAlign || textVerticalAlign,\r\n                    align: label.__align || textAlign\r\n                });\r\n            }\r\n        };\r\n        return Line;\r\n    }(Group));\n\n    var LineDraw = (function () {\r\n        function LineDraw(LineCtor) {\r\n            this.group = new Group();\r\n            this._LineCtor = LineCtor || Line$1;\r\n        }\r\n        LineDraw.prototype.isPersistent = function () {\r\n            return true;\r\n        };\r\n        LineDraw.prototype.updateData = function (lineData) {\r\n            var _this = this;\r\n            var lineDraw = this;\r\n            var group = lineDraw.group;\r\n            var oldLineData = lineDraw._lineData;\r\n            lineDraw._lineData = lineData;\r\n            if (!oldLineData) {\r\n                group.removeAll();\r\n            }\r\n            var seriesScope = makeSeriesScope$1(lineData);\r\n            lineData.diff(oldLineData)\r\n                .add(function (idx) {\r\n                _this._doAdd(lineData, idx, seriesScope);\r\n            })\r\n                .update(function (newIdx, oldIdx) {\r\n                _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\r\n            })\r\n                .remove(function (idx) {\r\n                group.remove(oldLineData.getItemGraphicEl(idx));\r\n            })\r\n                .execute();\r\n        };\r\n        LineDraw.prototype.updateLayout = function () {\r\n            var lineData = this._lineData;\r\n            if (!lineData) {\r\n                return;\r\n            }\r\n            lineData.eachItemGraphicEl(function (el, idx) {\r\n                el.updateLayout(lineData, idx);\r\n            }, this);\r\n        };\r\n        LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\r\n            this._seriesScope = makeSeriesScope$1(lineData);\r\n            this._lineData = null;\r\n            this.group.removeAll();\r\n        };\r\n        LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\r\n            function updateIncrementalAndHover(el) {\r\n                if (!el.isGroup && !isEffectObject(el)) {\r\n                    el.incremental = true;\r\n                    el.ensureState('emphasis').hoverLayer = true;\r\n                }\r\n            }\r\n            for (var idx = taskParams.start; idx < taskParams.end; idx++) {\r\n                var itemLayout = lineData.getItemLayout(idx);\r\n                if (lineNeedsDraw(itemLayout)) {\r\n                    var el = new this._LineCtor(lineData, idx, this._seriesScope);\r\n                    el.traverse(updateIncrementalAndHover);\r\n                    this.group.add(el);\r\n                    lineData.setItemGraphicEl(idx, el);\r\n                }\r\n            }\r\n        };\r\n        LineDraw.prototype.remove = function () {\r\n            this.group.removeAll();\r\n        };\r\n        LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\r\n            var itemLayout = lineData.getItemLayout(idx);\r\n            if (!lineNeedsDraw(itemLayout)) {\r\n                return;\r\n            }\r\n            var el = new this._LineCtor(lineData, idx, seriesScope);\r\n            lineData.setItemGraphicEl(idx, el);\r\n            this.group.add(el);\r\n        };\r\n        LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\r\n            var itemEl = oldLineData.getItemGraphicEl(oldIdx);\r\n            if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\r\n                this.group.remove(itemEl);\r\n                return;\r\n            }\r\n            if (!itemEl) {\r\n                itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\r\n            }\r\n            else {\r\n                itemEl.updateData(newLineData, newIdx, seriesScope);\r\n            }\r\n            newLineData.setItemGraphicEl(newIdx, itemEl);\r\n            this.group.add(itemEl);\r\n        };\r\n        return LineDraw;\r\n    }());\r\n    function isEffectObject(el) {\r\n        return el.animators && el.animators.length > 0;\r\n    }\r\n    function makeSeriesScope$1(lineData) {\r\n        var hostModel = lineData.hostModel;\r\n        return {\r\n            lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\r\n            emphasisLineStyle: hostModel.getModel(['emphasis', 'lineStyle']).getLineStyle(),\r\n            blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\r\n            selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\r\n            labelStatesModels: getLabelStatesModels(hostModel)\r\n        };\r\n    }\r\n    function isPointNaN(pt) {\r\n        return isNaN(pt[0]) || isNaN(pt[1]);\r\n    }\r\n    function lineNeedsDraw(pts) {\r\n        return !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\r\n    }\n\n    var inner$c = makeInner();\r\n    var markLineTransform = function (seriesModel, coordSys, mlModel, item) {\r\n        var data = seriesModel.getData();\r\n        var itemArray;\r\n        if (!isArray(item)) {\r\n            var mlType = item.type;\r\n            if (mlType === 'min' || mlType === 'max' || mlType === 'average' || mlType === 'median'\r\n                || (item.xAxis != null || item.yAxis != null)) {\r\n                var valueAxis = void 0;\r\n                var value = void 0;\r\n                if (item.yAxis != null || item.xAxis != null) {\r\n                    valueAxis = coordSys.getAxis(item.yAxis != null ? 'y' : 'x');\r\n                    value = retrieve(item.yAxis, item.xAxis);\r\n                }\r\n                else {\r\n                    var axisInfo = getAxisInfo$1(item, data, coordSys, seriesModel);\r\n                    valueAxis = axisInfo.valueAxis;\r\n                    var valueDataDim = getStackedDimension(data, axisInfo.valueDataDim);\r\n                    value = numCalculate(data, valueDataDim, mlType);\r\n                }\r\n                var valueIndex = valueAxis.dim === 'x' ? 0 : 1;\r\n                var baseIndex = 1 - valueIndex;\r\n                var mlFrom = clone(item);\r\n                var mlTo = {\r\n                    coord: []\r\n                };\r\n                mlFrom.type = null;\r\n                mlFrom.coord = [];\r\n                mlFrom.coord[baseIndex] = -Infinity;\r\n                mlTo.coord[baseIndex] = Infinity;\r\n                var precision = mlModel.get('precision');\r\n                if (precision >= 0 && typeof value === 'number') {\r\n                    value = +value.toFixed(Math.min(precision, 20));\r\n                }\r\n                mlFrom.coord[valueIndex] = mlTo.coord[valueIndex] = value;\r\n                itemArray = [mlFrom, mlTo, {\r\n                        type: mlType,\r\n                        valueIndex: item.valueIndex,\r\n                        value: value\r\n                    }];\r\n            }\r\n            else {\r\n                if (__DEV__) {\r\n                    logError('Invalid markLine data.');\r\n                }\r\n                itemArray = [];\r\n            }\r\n        }\r\n        else {\r\n            itemArray = item;\r\n        }\r\n        var normalizedItem = [\r\n            dataTransform(seriesModel, itemArray[0]),\r\n            dataTransform(seriesModel, itemArray[1]),\r\n            extend({}, itemArray[2])\r\n        ];\r\n        normalizedItem[2].type = normalizedItem[2].type || null;\r\n        merge(normalizedItem[2], normalizedItem[0]);\r\n        merge(normalizedItem[2], normalizedItem[1]);\r\n        return normalizedItem;\r\n    };\r\n    function isInifinity(val) {\r\n        return !isNaN(val) && !isFinite(val);\r\n    }\r\n    function ifMarkLineHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\r\n        var otherDimIndex = 1 - dimIndex;\r\n        var dimName = coordSys.dimensions[dimIndex];\r\n        return isInifinity(fromCoord[otherDimIndex]) && isInifinity(toCoord[otherDimIndex])\r\n            && fromCoord[dimIndex] === toCoord[dimIndex] && coordSys.getAxis(dimName).containData(fromCoord[dimIndex]);\r\n    }\r\n    function markLineFilter(coordSys, item) {\r\n        if (coordSys.type === 'cartesian2d') {\r\n            var fromCoord = item[0].coord;\r\n            var toCoord = item[1].coord;\r\n            if (fromCoord && toCoord\r\n                && (ifMarkLineHasOnlyDim(1, fromCoord, toCoord, coordSys)\r\n                    || ifMarkLineHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\r\n                return true;\r\n            }\r\n        }\r\n        return dataFilter$1(coordSys, item[0])\r\n            && dataFilter$1(coordSys, item[1]);\r\n    }\r\n    function updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api) {\r\n        var coordSys = seriesModel.coordinateSystem;\r\n        var itemModel = data.getItemModel(idx);\r\n        var point;\r\n        var xPx = parsePercent$2(itemModel.get('x'), api.getWidth());\r\n        var yPx = parsePercent$2(itemModel.get('y'), api.getHeight());\r\n        if (!isNaN(xPx) && !isNaN(yPx)) {\r\n            point = [xPx, yPx];\r\n        }\r\n        else {\r\n            if (seriesModel.getMarkerPosition) {\r\n                point = seriesModel.getMarkerPosition(data.getValues(data.dimensions, idx));\r\n            }\r\n            else {\r\n                var dims = coordSys.dimensions;\r\n                var x = data.get(dims[0], idx);\r\n                var y = data.get(dims[1], idx);\r\n                point = coordSys.dataToPoint([x, y]);\r\n            }\r\n            if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\r\n                var xAxis = coordSys.getAxis('x');\r\n                var yAxis = coordSys.getAxis('y');\r\n                var dims = coordSys.dimensions;\r\n                if (isInifinity(data.get(dims[0], idx))) {\r\n                    point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[isFrom ? 0 : 1]);\r\n                }\r\n                else if (isInifinity(data.get(dims[1], idx))) {\r\n                    point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[isFrom ? 0 : 1]);\r\n                }\r\n            }\r\n            if (!isNaN(xPx)) {\r\n                point[0] = xPx;\r\n            }\r\n            if (!isNaN(yPx)) {\r\n                point[1] = yPx;\r\n            }\r\n        }\r\n        data.setItemLayout(idx, point);\r\n    }\r\n    var MarkLineView = (function (_super) {\r\n        __extends(MarkLineView, _super);\r\n        function MarkLineView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = MarkLineView.type;\r\n            return _this;\r\n        }\r\n        MarkLineView.prototype.updateTransform = function (markLineModel, ecModel, api) {\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                var mlModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markLine');\r\n                if (mlModel) {\r\n                    var mlData_1 = mlModel.getData();\r\n                    var fromData_1 = inner$c(mlModel).from;\r\n                    var toData_1 = inner$c(mlModel).to;\r\n                    fromData_1.each(function (idx) {\r\n                        updateSingleMarkerEndLayout(fromData_1, idx, true, seriesModel, api);\r\n                        updateSingleMarkerEndLayout(toData_1, idx, false, seriesModel, api);\r\n                    });\r\n                    mlData_1.each(function (idx) {\r\n                        mlData_1.setItemLayout(idx, [\r\n                            fromData_1.getItemLayout(idx),\r\n                            toData_1.getItemLayout(idx)\r\n                        ]);\r\n                    });\r\n                    this.markerGroupMap.get(seriesModel.id).updateLayout();\r\n                }\r\n            }, this);\r\n        };\r\n        MarkLineView.prototype.renderSeries = function (seriesModel, mlModel, ecModel, api) {\r\n            var coordSys = seriesModel.coordinateSystem;\r\n            var seriesId = seriesModel.id;\r\n            var seriesData = seriesModel.getData();\r\n            var lineDrawMap = this.markerGroupMap;\r\n            var lineDraw = lineDrawMap.get(seriesId)\r\n                || lineDrawMap.set(seriesId, new LineDraw());\r\n            this.group.add(lineDraw.group);\r\n            var mlData = createList$2(coordSys, seriesModel, mlModel);\r\n            var fromData = mlData.from;\r\n            var toData = mlData.to;\r\n            var lineData = mlData.line;\r\n            inner$c(mlModel).from = fromData;\r\n            inner$c(mlModel).to = toData;\r\n            mlModel.setData(lineData);\r\n            var symbolType = mlModel.get('symbol');\r\n            var symbolSize = mlModel.get('symbolSize');\r\n            if (!isArray(symbolType)) {\r\n                symbolType = [symbolType, symbolType];\r\n            }\r\n            if (!isArray(symbolSize)) {\r\n                symbolSize = [symbolSize, symbolSize];\r\n            }\r\n            mlData.from.each(function (idx) {\r\n                updateDataVisualAndLayout(fromData, idx, true);\r\n                updateDataVisualAndLayout(toData, idx, false);\r\n            });\r\n            lineData.each(function (idx) {\r\n                var lineStyle = lineData.getItemModel(idx)\r\n                    .getModel('lineStyle').getLineStyle();\r\n                lineData.setItemLayout(idx, [\r\n                    fromData.getItemLayout(idx),\r\n                    toData.getItemLayout(idx)\r\n                ]);\r\n                if (lineStyle.stroke == null) {\r\n                    lineStyle.stroke = fromData.getItemVisual(idx, 'style').fill;\r\n                }\r\n                lineData.setItemVisual(idx, {\r\n                    fromSymbolSize: fromData.getItemVisual(idx, 'symbolSize'),\r\n                    fromSymbol: fromData.getItemVisual(idx, 'symbol'),\r\n                    toSymbolSize: toData.getItemVisual(idx, 'symbolSize'),\r\n                    toSymbol: toData.getItemVisual(idx, 'symbol'),\r\n                    style: lineStyle\r\n                });\r\n            });\r\n            lineDraw.updateData(lineData);\r\n            mlData.line.eachItemGraphicEl(function (el, idx) {\r\n                el.traverse(function (child) {\r\n                    getECData(child).dataModel = mlModel;\r\n                });\r\n            });\r\n            function updateDataVisualAndLayout(data, idx, isFrom) {\r\n                var itemModel = data.getItemModel(idx);\r\n                updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api);\r\n                var style = itemModel.getModel('itemStyle').getItemStyle();\r\n                if (style.fill == null) {\r\n                    style.fill = getVisualFromData(seriesData, 'color');\r\n                }\r\n                data.setItemVisual(idx, {\r\n                    symbolSize: itemModel.get('symbolSize') || symbolSize[isFrom ? 0 : 1],\r\n                    symbol: itemModel.get('symbol', true) || symbolType[isFrom ? 0 : 1],\r\n                    style: style\r\n                });\r\n            }\r\n            this.markKeep(lineDraw);\r\n            lineDraw.group.silent = mlModel.get('silent') || seriesModel.get('silent');\r\n        };\r\n        MarkLineView.type = 'markLine';\r\n        return MarkLineView;\r\n    }(MarkerView));\r\n    function createList$2(coordSys, seriesModel, mlModel) {\r\n        var coordDimsInfos;\r\n        if (coordSys) {\r\n            coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\r\n                var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {};\r\n                return defaults({ name: coordDim }, info);\r\n            });\r\n        }\r\n        else {\r\n            coordDimsInfos = [{\r\n                    name: 'value',\r\n                    type: 'float'\r\n                }];\r\n        }\r\n        var fromData = new List(coordDimsInfos, mlModel);\r\n        var toData = new List(coordDimsInfos, mlModel);\r\n        var lineData = new List([], mlModel);\r\n        var optData = map(mlModel.get('data'), curry(markLineTransform, seriesModel, coordSys, mlModel));\r\n        if (coordSys) {\r\n            optData = filter(optData, curry(markLineFilter, coordSys));\r\n        }\r\n        var dimValueGetter$1 = coordSys ? dimValueGetter : function (item) {\r\n            return item.value;\r\n        };\r\n        fromData.initData(map(optData, function (item) {\r\n            return item[0];\r\n        }), null, dimValueGetter$1);\r\n        toData.initData(map(optData, function (item) {\r\n            return item[1];\r\n        }), null, dimValueGetter$1);\r\n        lineData.initData(map(optData, function (item) {\r\n            return item[2];\r\n        }));\r\n        lineData.hasItemOption = true;\r\n        return {\r\n            from: fromData,\r\n            to: toData,\r\n            line: lineData\r\n        };\r\n    }\r\n    ComponentView.registerClass(MarkLineView);\n\n    registerPreprocessor(function (opt) {\r\n        opt.markLine = opt.markLine || {};\r\n    });\n\n    var MarkAreaModel = (function (_super) {\r\n        __extends(MarkAreaModel, _super);\r\n        function MarkAreaModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = MarkAreaModel.type;\r\n            return _this;\r\n        }\r\n        MarkAreaModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\r\n            return new MarkAreaModel(markerOpt, masterMarkerModel, ecModel);\r\n        };\r\n        MarkAreaModel.type = 'markArea';\r\n        MarkAreaModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 1,\r\n            tooltip: {\r\n                trigger: 'item'\r\n            },\r\n            animation: false,\r\n            label: {\r\n                show: true,\r\n                position: 'top'\r\n            },\r\n            itemStyle: {\r\n                borderWidth: 0\r\n            },\r\n            emphasis: {\r\n                label: {\r\n                    show: true,\r\n                    position: 'top'\r\n                }\r\n            }\r\n        };\r\n        return MarkAreaModel;\r\n    }(MarkerModel));\r\n    ComponentModel.registerClass(MarkAreaModel);\n\n    var inner$d = makeInner();\r\n    var markAreaTransform = function (seriesModel, coordSys, maModel, item) {\r\n        var lt = dataTransform(seriesModel, item[0]);\r\n        var rb = dataTransform(seriesModel, item[1]);\r\n        var ltCoord = lt.coord;\r\n        var rbCoord = rb.coord;\r\n        ltCoord[0] = retrieve(ltCoord[0], -Infinity);\r\n        ltCoord[1] = retrieve(ltCoord[1], -Infinity);\r\n        rbCoord[0] = retrieve(rbCoord[0], Infinity);\r\n        rbCoord[1] = retrieve(rbCoord[1], Infinity);\r\n        var result = mergeAll([{}, lt, rb]);\r\n        result.coord = [\r\n            lt.coord, rb.coord\r\n        ];\r\n        result.x0 = lt.x;\r\n        result.y0 = lt.y;\r\n        result.x1 = rb.x;\r\n        result.y1 = rb.y;\r\n        return result;\r\n    };\r\n    function isInifinity$1(val) {\r\n        return !isNaN(val) && !isFinite(val);\r\n    }\r\n    function ifMarkAreaHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\r\n        var otherDimIndex = 1 - dimIndex;\r\n        return isInifinity$1(fromCoord[otherDimIndex]) && isInifinity$1(toCoord[otherDimIndex]);\r\n    }\r\n    function markAreaFilter(coordSys, item) {\r\n        var fromCoord = item.coord[0];\r\n        var toCoord = item.coord[1];\r\n        if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\r\n            if (fromCoord && toCoord\r\n                && (ifMarkAreaHasOnlyDim(1, fromCoord, toCoord)\r\n                    || ifMarkAreaHasOnlyDim(0, fromCoord, toCoord))) {\r\n                return true;\r\n            }\r\n        }\r\n        return dataFilter$1(coordSys, {\r\n            coord: fromCoord,\r\n            x: item.x0,\r\n            y: item.y0\r\n        })\r\n            || dataFilter$1(coordSys, {\r\n                coord: toCoord,\r\n                x: item.x1,\r\n                y: item.y1\r\n            });\r\n    }\r\n    function getSingleMarkerEndPoint(data, idx, dims, seriesModel, api) {\r\n        var coordSys = seriesModel.coordinateSystem;\r\n        var itemModel = data.getItemModel(idx);\r\n        var point;\r\n        var xPx = parsePercent$2(itemModel.get(dims[0]), api.getWidth());\r\n        var yPx = parsePercent$2(itemModel.get(dims[1]), api.getHeight());\r\n        if (!isNaN(xPx) && !isNaN(yPx)) {\r\n            point = [xPx, yPx];\r\n        }\r\n        else {\r\n            if (seriesModel.getMarkerPosition) {\r\n                point = seriesModel.getMarkerPosition(data.getValues(dims, idx));\r\n            }\r\n            else {\r\n                var x = data.get(dims[0], idx);\r\n                var y = data.get(dims[1], idx);\r\n                var pt = [x, y];\r\n                coordSys.clampData && coordSys.clampData(pt, pt);\r\n                point = coordSys.dataToPoint(pt, true);\r\n            }\r\n            if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\r\n                var xAxis = coordSys.getAxis('x');\r\n                var yAxis = coordSys.getAxis('y');\r\n                var x = data.get(dims[0], idx);\r\n                var y = data.get(dims[1], idx);\r\n                if (isInifinity$1(x)) {\r\n                    point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[dims[0] === 'x0' ? 0 : 1]);\r\n                }\r\n                else if (isInifinity$1(y)) {\r\n                    point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[dims[1] === 'y0' ? 0 : 1]);\r\n                }\r\n            }\r\n            if (!isNaN(xPx)) {\r\n                point[0] = xPx;\r\n            }\r\n            if (!isNaN(yPx)) {\r\n                point[1] = yPx;\r\n            }\r\n        }\r\n        return point;\r\n    }\r\n    var dimPermutations = [['x0', 'y0'], ['x1', 'y0'], ['x1', 'y1'], ['x0', 'y1']];\r\n    var MarkAreaView = (function (_super) {\r\n        __extends(MarkAreaView, _super);\r\n        function MarkAreaView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = MarkAreaView.type;\r\n            return _this;\r\n        }\r\n        MarkAreaView.prototype.updateTransform = function (markAreaModel, ecModel, api) {\r\n            ecModel.eachSeries(function (seriesModel) {\r\n                var maModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markArea');\r\n                if (maModel) {\r\n                    var areaData_1 = maModel.getData();\r\n                    areaData_1.each(function (idx) {\r\n                        var points = map(dimPermutations, function (dim) {\r\n                            return getSingleMarkerEndPoint(areaData_1, idx, dim, seriesModel, api);\r\n                        });\r\n                        areaData_1.setItemLayout(idx, points);\r\n                        var el = areaData_1.getItemGraphicEl(idx);\r\n                        el.setShape('points', points);\r\n                    });\r\n                }\r\n            }, this);\r\n        };\r\n        MarkAreaView.prototype.renderSeries = function (seriesModel, maModel, ecModel, api) {\r\n            var coordSys = seriesModel.coordinateSystem;\r\n            var seriesId = seriesModel.id;\r\n            var seriesData = seriesModel.getData();\r\n            var areaGroupMap = this.markerGroupMap;\r\n            var polygonGroup = areaGroupMap.get(seriesId)\r\n                || areaGroupMap.set(seriesId, { group: new Group() });\r\n            this.group.add(polygonGroup.group);\r\n            this.markKeep(polygonGroup);\r\n            var areaData = createList$3(coordSys, seriesModel, maModel);\r\n            maModel.setData(areaData);\r\n            areaData.each(function (idx) {\r\n                areaData.setItemLayout(idx, map(dimPermutations, function (dim) {\r\n                    return getSingleMarkerEndPoint(areaData, idx, dim, seriesModel, api);\r\n                }));\r\n                var style = areaData.getItemModel(idx).getModel('itemStyle').getItemStyle();\r\n                var color$1 = getVisualFromData(seriesData, 'color');\r\n                if (!style.fill) {\r\n                    style.fill = color$1;\r\n                    if (typeof style.fill === 'string') {\r\n                        style.fill = modifyAlpha(style.fill, 0.4);\r\n                    }\r\n                }\r\n                if (!style.stroke) {\r\n                    style.stroke = color$1;\r\n                }\r\n                areaData.setItemVisual(idx, 'style', style);\r\n            });\r\n            areaData.diff(inner$d(polygonGroup).data)\r\n                .add(function (idx) {\r\n                var polygon = new Polygon({\r\n                    shape: {\r\n                        points: areaData.getItemLayout(idx)\r\n                    }\r\n                });\r\n                areaData.setItemGraphicEl(idx, polygon);\r\n                polygonGroup.group.add(polygon);\r\n            })\r\n                .update(function (newIdx, oldIdx) {\r\n                var polygon = inner$d(polygonGroup).data.getItemGraphicEl(oldIdx);\r\n                updateProps(polygon, {\r\n                    shape: {\r\n                        points: areaData.getItemLayout(newIdx)\r\n                    }\r\n                }, maModel, newIdx);\r\n                polygonGroup.group.add(polygon);\r\n                areaData.setItemGraphicEl(newIdx, polygon);\r\n            })\r\n                .remove(function (idx) {\r\n                var polygon = inner$d(polygonGroup).data.getItemGraphicEl(idx);\r\n                polygonGroup.group.remove(polygon);\r\n            })\r\n                .execute();\r\n            areaData.eachItemGraphicEl(function (polygon, idx) {\r\n                var itemModel = areaData.getItemModel(idx);\r\n                var style = areaData.getItemVisual(idx, 'style');\r\n                polygon.useStyle(areaData.getItemVisual(idx, 'style'));\r\n                setLabelStyle(polygon, getLabelStatesModels(itemModel), {\r\n                    labelFetcher: maModel,\r\n                    labelDataIndex: idx,\r\n                    defaultText: areaData.getName(idx) || '',\r\n                    inheritColor: typeof style.fill === 'string'\r\n                        ? modifyAlpha(style.fill, 1) : '#000'\r\n                });\r\n                setStatesStylesFromModel(polygon, itemModel);\r\n                enableHoverEmphasis(polygon);\r\n                getECData(polygon).dataModel = maModel;\r\n            });\r\n            inner$d(polygonGroup).data = areaData;\r\n            polygonGroup.group.silent = maModel.get('silent') || seriesModel.get('silent');\r\n        };\r\n        MarkAreaView.type = 'markArea';\r\n        return MarkAreaView;\r\n    }(MarkerView));\r\n    function createList$3(coordSys, seriesModel, maModel) {\r\n        var coordDimsInfos;\r\n        var areaData;\r\n        var dims = ['x0', 'y0', 'x1', 'y1'];\r\n        if (coordSys) {\r\n            coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\r\n                var data = seriesModel.getData();\r\n                var info = data.getDimensionInfo(data.mapDimension(coordDim)) || {};\r\n                return defaults({\r\n                    name: coordDim\r\n                }, info);\r\n            });\r\n            areaData = new List(map(dims, function (dim, idx) {\r\n                return {\r\n                    name: dim,\r\n                    type: coordDimsInfos[idx % 2].type\r\n                };\r\n            }), maModel);\r\n        }\r\n        else {\r\n            coordDimsInfos = [{\r\n                    name: 'value',\r\n                    type: 'float'\r\n                }];\r\n            areaData = new List(coordDimsInfos, maModel);\r\n        }\r\n        var optData = map(maModel.get('data'), curry(markAreaTransform, seriesModel, coordSys, maModel));\r\n        if (coordSys) {\r\n            optData = filter(optData, curry(markAreaFilter, coordSys));\r\n        }\r\n        var dimValueGetter = coordSys ? function (item, dimName, dataIndex, dimIndex) {\r\n            return item.coord[Math.floor(dimIndex / 2)][dimIndex % 2];\r\n        } : function (item) {\r\n            return item.value;\r\n        };\r\n        areaData.initData(optData, null, dimValueGetter);\r\n        areaData.hasItemOption = true;\r\n        return areaData;\r\n    }\r\n    ComponentView.registerClass(MarkAreaView);\n\n    registerPreprocessor(function (opt) {\r\n        opt.markArea = opt.markArea || {};\r\n    });\n\n    ComponentModel.registerSubTypeDefaulter('dataZoom', function () {\r\n        return 'slider';\r\n    });\n\n    var DATA_ZOOM_AXIS_DIMENSIONS = [\r\n        'x', 'y', 'radius', 'angle', 'single'\r\n    ];\r\n    var SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\r\n    function isCoordSupported(seriesModel) {\r\n        var coordType = seriesModel.get('coordinateSystem');\r\n        return indexOf(SERIES_COORDS, coordType) >= 0;\r\n    }\r\n    function getAxisMainType(axisDim) {\r\n        if (__DEV__) {\r\n            assert(axisDim);\r\n        }\r\n        return axisDim + 'Axis';\r\n    }\r\n    function findEffectedDataZooms(ecModel, payload) {\r\n        var axisRecords = createHashMap();\r\n        var effectedModels = [];\r\n        var effectedModelMap = createHashMap();\r\n        ecModel.eachComponent({ mainType: 'dataZoom', query: payload }, function (dataZoomModel) {\r\n            if (!effectedModelMap.get(dataZoomModel.uid)) {\r\n                addToEffected(dataZoomModel);\r\n            }\r\n        });\r\n        var foundNewLink;\r\n        do {\r\n            foundNewLink = false;\r\n            ecModel.eachComponent('dataZoom', processSingle);\r\n        } while (foundNewLink);\r\n        function processSingle(dataZoomModel) {\r\n            if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\r\n                addToEffected(dataZoomModel);\r\n                foundNewLink = true;\r\n            }\r\n        }\r\n        function addToEffected(dataZoom) {\r\n            effectedModelMap.set(dataZoom.uid, true);\r\n            effectedModels.push(dataZoom);\r\n            markAxisControlled(dataZoom);\r\n        }\r\n        function isLinked(dataZoomModel) {\r\n            var isLink = false;\r\n            dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\r\n                var axisIdxArr = axisRecords.get(axisDim);\r\n                if (axisIdxArr && axisIdxArr[axisIndex]) {\r\n                    isLink = true;\r\n                }\r\n            });\r\n            return isLink;\r\n        }\r\n        function markAxisControlled(dataZoomModel) {\r\n            dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\r\n                (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\r\n            });\r\n        }\r\n        return effectedModels;\r\n    }\r\n    function collectReferCoordSysModelInfo(dataZoomModel) {\r\n        var ecModel = dataZoomModel.ecModel;\r\n        var coordSysInfoWrap = {\r\n            infoList: [],\r\n            infoMap: createHashMap()\r\n        };\r\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\r\n            var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\r\n            if (!axisModel) {\r\n                return;\r\n            }\r\n            var coordSysModel = axisModel.getCoordSysModel();\r\n            if (!coordSysModel) {\r\n                return;\r\n            }\r\n            var coordSysUid = coordSysModel.uid;\r\n            var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\r\n            if (!coordSysInfo) {\r\n                coordSysInfo = { model: coordSysModel, axisModels: [] };\r\n                coordSysInfoWrap.infoList.push(coordSysInfo);\r\n                coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\r\n            }\r\n            coordSysInfo.axisModels.push(axisModel);\r\n        });\r\n        return coordSysInfoWrap;\r\n    }\n\n    var DataZoomAxisInfo = (function () {\r\n        function DataZoomAxisInfo() {\r\n            this.indexList = [];\r\n            this.indexMap = [];\r\n        }\r\n        DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\r\n            this.indexList.push(axisCmptIdx);\r\n            this.indexMap[axisCmptIdx] = true;\r\n        };\r\n        return DataZoomAxisInfo;\r\n    }());\r\n    var DataZoomModel = (function (_super) {\r\n        __extends(DataZoomModel, _super);\r\n        function DataZoomModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = DataZoomModel.type;\r\n            _this._autoThrottle = true;\r\n            _this._noTarget = true;\r\n            _this._rangePropMode = ['percent', 'percent'];\r\n            return _this;\r\n        }\r\n        DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\r\n            var inputRawOption = retrieveRawOption(option);\r\n            this.settledOption = inputRawOption;\r\n            this.mergeDefaultAndTheme(option, ecModel);\r\n            this._doInit(inputRawOption);\r\n        };\r\n        DataZoomModel.prototype.mergeOption = function (newOption) {\r\n            var inputRawOption = retrieveRawOption(newOption);\r\n            merge(this.option, newOption, true);\r\n            merge(this.settledOption, inputRawOption, true);\r\n            this._doInit(inputRawOption);\r\n        };\r\n        DataZoomModel.prototype._doInit = function (inputRawOption) {\r\n            var thisOption = this.option;\r\n            if (!env.canvasSupported) {\r\n                thisOption.realtime = false;\r\n            }\r\n            this._setDefaultThrottle(inputRawOption);\r\n            this._updateRangeUse(inputRawOption);\r\n            var settledOption = this.settledOption;\r\n            each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\r\n                if (this._rangePropMode[index] === 'value') {\r\n                    thisOption[names[0]] = settledOption[names[0]] = null;\r\n                }\r\n            }, this);\r\n            this._resetTarget();\r\n        };\r\n        DataZoomModel.prototype._resetTarget = function () {\r\n            var optionOrient = this.get('orient', true);\r\n            var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\r\n            var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\r\n            if (hasAxisSpecified) {\r\n                this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\r\n            }\r\n            else {\r\n                this._orient = optionOrient || 'horizontal';\r\n                this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\r\n            }\r\n            this._noTarget = true;\r\n            targetAxisIndexMap.each(function (axisInfo) {\r\n                if (axisInfo.indexList.length) {\r\n                    this._noTarget = false;\r\n                }\r\n            }, this);\r\n        };\r\n        DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\r\n            var hasAxisSpecified = false;\r\n            each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\r\n                var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING);\r\n                if (!refering.specified) {\r\n                    return;\r\n                }\r\n                hasAxisSpecified = true;\r\n                var axisInfo = new DataZoomAxisInfo();\r\n                each(refering.models, function (axisModel) {\r\n                    axisInfo.add(axisModel.componentIndex);\r\n                });\r\n                targetAxisIndexMap.set(axisDim, axisInfo);\r\n            }, this);\r\n            return hasAxisSpecified;\r\n        };\r\n        DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\r\n            var ecModel = this.ecModel;\r\n            var needAuto = true;\r\n            if (needAuto) {\r\n                var axisDim = orient === 'vertical' ? 'y' : 'x';\r\n                var axisModels = ecModel.findComponents({ mainType: axisDim + 'Axis' });\r\n                setParallelAxis(axisModels, axisDim);\r\n            }\r\n            if (needAuto) {\r\n                var axisModels = ecModel.findComponents({\r\n                    mainType: 'singleAxis',\r\n                    filter: function (axisModel) { return axisModel.get('orient', true) === orient; }\r\n                });\r\n                setParallelAxis(axisModels, 'single');\r\n            }\r\n            function setParallelAxis(axisModels, axisDim) {\r\n                var axisModel = axisModels[0];\r\n                if (!axisModel) {\r\n                    return;\r\n                }\r\n                var axisInfo = new DataZoomAxisInfo();\r\n                axisInfo.add(axisModel.componentIndex);\r\n                targetAxisIndexMap.set(axisDim, axisInfo);\r\n                needAuto = false;\r\n                if (axisDim === 'x' || axisDim === 'y') {\r\n                    var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\r\n                    gridModel_1 && each(axisModels, function (axModel) {\r\n                        if (axisModel.componentIndex !== axModel.componentIndex\r\n                            && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\r\n                            axisInfo.add(axModel.componentIndex);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (needAuto) {\r\n                each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\r\n                    if (needAuto) {\r\n                        return;\r\n                    }\r\n                    var axisModels = ecModel.findComponents({\r\n                        mainType: getAxisMainType(axisDim),\r\n                        filter: function (axisModel) { return axisModel.get('type', true) === 'category'; }\r\n                    });\r\n                    if (axisModels[0]) {\r\n                        var axisInfo = new DataZoomAxisInfo();\r\n                        axisInfo.add(axisModels[0].componentIndex);\r\n                        targetAxisIndexMap.set(axisDim, axisInfo);\r\n                    }\r\n                }, this);\r\n            }\r\n        };\r\n        DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\r\n            var dim;\r\n            this.eachTargetAxis(function (axisDim) {\r\n                !dim && (dim = axisDim);\r\n            }, this);\r\n            return dim === 'y' ? 'vertical' : 'horizontal';\r\n        };\r\n        DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\r\n            if (inputRawOption.hasOwnProperty('throttle')) {\r\n                this._autoThrottle = false;\r\n            }\r\n            if (this._autoThrottle) {\r\n                var globalOption = this.ecModel.option;\r\n                this.option.throttle = (globalOption.animation && globalOption.animationDurationUpdate > 0) ? 100 : 20;\r\n            }\r\n        };\r\n        DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\r\n            var rangePropMode = this._rangePropMode;\r\n            var rangeModeInOption = this.get('rangeMode');\r\n            each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\r\n                var percentSpecified = inputRawOption[names[0]] != null;\r\n                var valueSpecified = inputRawOption[names[1]] != null;\r\n                if (percentSpecified && !valueSpecified) {\r\n                    rangePropMode[index] = 'percent';\r\n                }\r\n                else if (!percentSpecified && valueSpecified) {\r\n                    rangePropMode[index] = 'value';\r\n                }\r\n                else if (rangeModeInOption) {\r\n                    rangePropMode[index] = rangeModeInOption[index];\r\n                }\r\n                else if (percentSpecified) {\r\n                    rangePropMode[index] = 'percent';\r\n                }\r\n            });\r\n        };\r\n        DataZoomModel.prototype.noTarget = function () {\r\n            return this._noTarget;\r\n        };\r\n        DataZoomModel.prototype.getFirstTargetAxisModel = function () {\r\n            var firstAxisModel;\r\n            this.eachTargetAxis(function (axisDim, axisIndex) {\r\n                if (firstAxisModel == null) {\r\n                    firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\r\n                }\r\n            }, this);\r\n            return firstAxisModel;\r\n        };\r\n        DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\r\n            this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\r\n                each(axisInfo.indexList, function (axisIndex) {\r\n                    callback.call(context, axisDim, axisIndex);\r\n                });\r\n            });\r\n        };\r\n        DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\r\n            var axisModel = this.getAxisModel(axisDim, axisIndex);\r\n            if (axisModel) {\r\n                return axisModel.__dzAxisProxy;\r\n            }\r\n        };\r\n        DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\r\n            if (__DEV__) {\r\n                assert(axisDim && axisIndex != null);\r\n            }\r\n            var axisInfo = this._targetAxisInfoMap.get(axisDim);\r\n            if (axisInfo && axisInfo.indexMap[axisIndex]) {\r\n                return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\r\n            }\r\n        };\r\n        DataZoomModel.prototype.setRawRange = function (opt) {\r\n            var thisOption = this.option;\r\n            var settledOption = this.settledOption;\r\n            each([['start', 'startValue'], ['end', 'endValue']], function (names) {\r\n                if (opt[names[0]] != null || opt[names[1]] != null) {\r\n                    thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\r\n                    thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\r\n                }\r\n            }, this);\r\n            this._updateRangeUse(opt);\r\n        };\r\n        DataZoomModel.prototype.setCalculatedRange = function (opt) {\r\n            var option = this.option;\r\n            each(['start', 'startValue', 'end', 'endValue'], function (name) {\r\n                option[name] = opt[name];\r\n            });\r\n        };\r\n        DataZoomModel.prototype.getPercentRange = function () {\r\n            var axisProxy = this.findRepresentativeAxisProxy();\r\n            if (axisProxy) {\r\n                return axisProxy.getDataPercentWindow();\r\n            }\r\n        };\r\n        DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\r\n            if (axisDim == null && axisIndex == null) {\r\n                var axisProxy = this.findRepresentativeAxisProxy();\r\n                if (axisProxy) {\r\n                    return axisProxy.getDataValueWindow();\r\n                }\r\n            }\r\n            else {\r\n                return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\r\n            }\r\n        };\r\n        DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\r\n            if (axisModel) {\r\n                return axisModel.__dzAxisProxy;\r\n            }\r\n            var firstProxy;\r\n            var axisDimList = this._targetAxisInfoMap.keys();\r\n            for (var i = 0; i < axisDimList.length; i++) {\r\n                var axisDim = axisDimList[i];\r\n                var axisInfo = this._targetAxisInfoMap.get(axisDim);\r\n                for (var j = 0; j < axisInfo.indexList.length; j++) {\r\n                    var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\r\n                    if (proxy.hostedBy(this)) {\r\n                        return proxy;\r\n                    }\r\n                    if (!firstProxy) {\r\n                        firstProxy = proxy;\r\n                    }\r\n                }\r\n            }\r\n            return firstProxy;\r\n        };\r\n        DataZoomModel.prototype.getRangePropMode = function () {\r\n            return this._rangePropMode.slice();\r\n        };\r\n        DataZoomModel.prototype.getOrient = function () {\r\n            if (__DEV__) {\r\n                assert(this._orient);\r\n            }\r\n            return this._orient;\r\n        };\r\n        DataZoomModel.type = 'dataZoom';\r\n        DataZoomModel.dependencies = [\r\n            'xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'\r\n        ];\r\n        DataZoomModel.defaultOption = {\r\n            zlevel: 0,\r\n            z: 4,\r\n            filterMode: 'filter',\r\n            start: 0,\r\n            end: 100\r\n        };\r\n        return DataZoomModel;\r\n    }(ComponentModel));\r\n    function retrieveRawOption(option) {\r\n        var ret = {};\r\n        each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\r\n            option.hasOwnProperty(name) && (ret[name] = option[name]);\r\n        });\r\n        return ret;\r\n    }\n\n    var DataZoomView = (function (_super) {\r\n        __extends(DataZoomView, _super);\r\n        function DataZoomView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = DataZoomView.type;\r\n            return _this;\r\n        }\r\n        DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\r\n            this.dataZoomModel = dataZoomModel;\r\n            this.ecModel = ecModel;\r\n            this.api = api;\r\n        };\r\n        DataZoomView.type = 'dataZoom';\r\n        return DataZoomView;\r\n    }(ComponentView));\r\n    ComponentView.registerClass(DataZoomView);\n\n    var SliderZoomModel = (function (_super) {\r\n        __extends(SliderZoomModel, _super);\r\n        function SliderZoomModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = SliderZoomModel.type;\r\n            return _this;\r\n        }\r\n        SliderZoomModel.type = 'dataZoom.slider';\r\n        SliderZoomModel.layoutMode = 'box';\r\n        SliderZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\r\n            show: true,\r\n            right: 'ph',\r\n            top: 'ph',\r\n            width: 'ph',\r\n            height: 'ph',\r\n            left: null,\r\n            bottom: null,\r\n            borderColor: '#d2dbee',\r\n            borderRadius: 3,\r\n            backgroundColor: 'rgba(47,69,84,0)',\r\n            dataBackground: {\r\n                lineStyle: {\r\n                    color: '#d2dbee',\r\n                    width: 0.5\r\n                },\r\n                areaStyle: {\r\n                    color: '#d2dbee',\r\n                    opacity: 0.2\r\n                }\r\n            },\r\n            selectedDataBackground: {\r\n                lineStyle: {\r\n                    color: '#8fb0f7',\r\n                    width: 0.5\r\n                },\r\n                areaStyle: {\r\n                    color: '#8fb0f7',\r\n                    opacity: 0.2\r\n                }\r\n            },\r\n            fillerColor: 'rgba(135,175,274,0.2)',\r\n            handleIcon: 'path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z',\r\n            handleSize: '100%',\r\n            handleStyle: {\r\n                color: '#fff',\r\n                borderColor: '#ACB8D1'\r\n            },\r\n            moveHandleSize: 7,\r\n            moveHandleIcon: 'path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z',\r\n            moveHandleStyle: {\r\n                color: '#D2DBEE',\r\n                opacity: 0.7\r\n            },\r\n            showDetail: true,\r\n            showDataShadow: 'auto',\r\n            realtime: true,\r\n            zoomLock: false,\r\n            textStyle: {\r\n                color: '#6E7079'\r\n            },\r\n            brushSelect: true,\r\n            brushStyle: {\r\n                color: 'rgba(135,175,274,0.15)'\r\n            },\r\n            emphasis: {\r\n                handleStyle: {\r\n                    borderColor: '#8FB0F7'\r\n                },\r\n                moveHandleStyle: {\r\n                    color: '#8FB0F7'\r\n                }\r\n            }\r\n        });\r\n        return SliderZoomModel;\r\n    }(DataZoomModel));\r\n    ComponentModel.registerClass(SliderZoomModel);\n\n    function sliderMove (delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\r\n        delta = delta || 0;\r\n        var extentSpan = extent[1] - extent[0];\r\n        if (minSpan != null) {\r\n            minSpan = restrict(minSpan, [0, extentSpan]);\r\n        }\r\n        if (maxSpan != null) {\r\n            maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\r\n        }\r\n        if (handleIndex === 'all') {\r\n            var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\r\n            handleSpan = restrict(handleSpan, [0, extentSpan]);\r\n            minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\r\n            handleIndex = 0;\r\n        }\r\n        handleEnds[0] = restrict(handleEnds[0], extent);\r\n        handleEnds[1] = restrict(handleEnds[1], extent);\r\n        var originalDistSign = getSpanSign(handleEnds, handleIndex);\r\n        handleEnds[handleIndex] += delta;\r\n        var extentMinSpan = minSpan || 0;\r\n        var realExtent = extent.slice();\r\n        originalDistSign.sign < 0 ? (realExtent[0] += extentMinSpan) : (realExtent[1] -= extentMinSpan);\r\n        handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent);\r\n        var currDistSign;\r\n        currDistSign = getSpanSign(handleEnds, handleIndex);\r\n        if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\r\n            handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\r\n        }\r\n        currDistSign = getSpanSign(handleEnds, handleIndex);\r\n        if (maxSpan != null && currDistSign.span > maxSpan) {\r\n            handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\r\n        }\r\n        return handleEnds;\r\n    }\r\n    function getSpanSign(handleEnds, handleIndex) {\r\n        var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex];\r\n        return { span: Math.abs(dist), sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1 };\r\n    }\r\n    function restrict(value, extend) {\r\n        return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\r\n    }\n\n    var Rect$1 = Rect;\r\n    var DEFAULT_LOCATION_EDGE_GAP = 7;\r\n    var DEFAULT_FRAME_BORDER_WIDTH = 1;\r\n    var DEFAULT_FILLER_SIZE = 30;\r\n    var DEFAULT_MOVE_HANDLE_SIZE = 7;\r\n    var HORIZONTAL = 'horizontal';\r\n    var VERTICAL = 'vertical';\r\n    var LABEL_GAP = 5;\r\n    var SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\r\n    var REALTIME_ANIMATION_CONFIG = {\r\n        easing: 'cubicOut',\r\n        duration: 100\r\n    };\r\n    var SliderZoomView = (function (_super) {\r\n        __extends(SliderZoomView, _super);\r\n        function SliderZoomView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = SliderZoomView.type;\r\n            _this._displayables = {};\r\n            return _this;\r\n        }\r\n        SliderZoomView.prototype.init = function (ecModel, api) {\r\n            this.api = api;\r\n            this._onBrush = bind(this._onBrush, this);\r\n            this._onBrushEnd = bind(this._onBrushEnd, this);\r\n        };\r\n        SliderZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\r\n            _super.prototype.render.apply(this, arguments);\r\n            createOrUpdate(this, '_dispatchZoomAction', dataZoomModel.get('throttle'), 'fixRate');\r\n            this._orient = dataZoomModel.getOrient();\r\n            if (dataZoomModel.get('show') === false) {\r\n                this.group.removeAll();\r\n                return;\r\n            }\r\n            if (dataZoomModel.noTarget()) {\r\n                this._clear();\r\n                this.group.removeAll();\r\n                return;\r\n            }\r\n            if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\r\n                this._buildView();\r\n            }\r\n            this._updateView();\r\n        };\r\n        SliderZoomView.prototype.dispose = function () {\r\n            this._clear();\r\n            _super.prototype.dispose.apply(this, arguments);\r\n        };\r\n        SliderZoomView.prototype._clear = function () {\r\n            clear(this, '_dispatchZoomAction');\r\n            var zr = this.api.getZr();\r\n            zr.off('mousemove', this._onBrush);\r\n            zr.off('mouseup', this._onBrushEnd);\r\n        };\r\n        SliderZoomView.prototype._buildView = function () {\r\n            var thisGroup = this.group;\r\n            thisGroup.removeAll();\r\n            this._brushing = false;\r\n            this._resetLocation();\r\n            this._resetInterval();\r\n            var barGroup = this._displayables.sliderGroup = new Group();\r\n            this._renderBackground();\r\n            this._renderHandle();\r\n            this._renderDataShadow();\r\n            thisGroup.add(barGroup);\r\n            this._positionGroup();\r\n        };\r\n        SliderZoomView.prototype._resetLocation = function () {\r\n            var dataZoomModel = this.dataZoomModel;\r\n            var api = this.api;\r\n            var showMoveHandle = dataZoomModel.get('brushSelect');\r\n            var moveHandleSize = showMoveHandle ? DEFAULT_MOVE_HANDLE_SIZE : 0;\r\n            var coordRect = this._findCoordRect();\r\n            var ecSize = { width: api.getWidth(), height: api.getHeight() };\r\n            var positionInfo = this._orient === HORIZONTAL\r\n                ? {\r\n                    right: ecSize.width - coordRect.x - coordRect.width,\r\n                    top: (ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP - moveHandleSize),\r\n                    width: coordRect.width,\r\n                    height: DEFAULT_FILLER_SIZE\r\n                }\r\n                : {\r\n                    right: DEFAULT_LOCATION_EDGE_GAP,\r\n                    top: coordRect.y,\r\n                    width: DEFAULT_FILLER_SIZE,\r\n                    height: coordRect.height\r\n                };\r\n            var layoutParams = getLayoutParams(dataZoomModel.option);\r\n            each(['right', 'top', 'width', 'height'], function (name) {\r\n                if (layoutParams[name] === 'ph') {\r\n                    layoutParams[name] = positionInfo[name];\r\n                }\r\n            });\r\n            var layoutRect = getLayoutRect(layoutParams, ecSize);\r\n            this._location = { x: layoutRect.x, y: layoutRect.y };\r\n            this._size = [layoutRect.width, layoutRect.height];\r\n            this._orient === VERTICAL && this._size.reverse();\r\n        };\r\n        SliderZoomView.prototype._positionGroup = function () {\r\n            var thisGroup = this.group;\r\n            var location = this._location;\r\n            var orient = this._orient;\r\n            var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\r\n            var inverse = targetAxisModel && targetAxisModel.get('inverse');\r\n            var sliderGroup = this._displayables.sliderGroup;\r\n            var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse;\r\n            sliderGroup.attr((orient === HORIZONTAL && !inverse)\r\n                ? { scaleY: otherAxisInverse ? 1 : -1, scaleX: 1 }\r\n                : (orient === HORIZONTAL && inverse)\r\n                    ? { scaleY: otherAxisInverse ? 1 : -1, scaleX: -1 }\r\n                    : (orient === VERTICAL && !inverse)\r\n                        ? { scaleY: otherAxisInverse ? -1 : 1, scaleX: 1, rotation: Math.PI / 2 }\r\n                        : { scaleY: otherAxisInverse ? -1 : 1, scaleX: -1, rotation: Math.PI / 2 });\r\n            var rect = thisGroup.getBoundingRect([sliderGroup]);\r\n            thisGroup.x = location.x - rect.x;\r\n            thisGroup.y = location.y - rect.y;\r\n            thisGroup.markRedraw();\r\n        };\r\n        SliderZoomView.prototype._getViewExtent = function () {\r\n            return [0, this._size[0]];\r\n        };\r\n        SliderZoomView.prototype._renderBackground = function () {\r\n            var dataZoomModel = this.dataZoomModel;\r\n            var size = this._size;\r\n            var barGroup = this._displayables.sliderGroup;\r\n            var brushSelect = dataZoomModel.get('brushSelect');\r\n            barGroup.add(new Rect$1({\r\n                silent: true,\r\n                shape: {\r\n                    x: 0, y: 0, width: size[0], height: size[1]\r\n                },\r\n                style: {\r\n                    fill: dataZoomModel.get('backgroundColor')\r\n                },\r\n                z2: -40\r\n            }));\r\n            var clickPanel = new Rect$1({\r\n                shape: {\r\n                    x: 0, y: 0, width: size[0], height: size[1]\r\n                },\r\n                style: {\r\n                    fill: 'transparent'\r\n                },\r\n                z2: 0,\r\n                onclick: bind(this._onClickPanel, this)\r\n            });\r\n            var zr = this.api.getZr();\r\n            if (brushSelect) {\r\n                clickPanel.on('mousedown', this._onBrushStart, this);\r\n                clickPanel.cursor = 'crosshair';\r\n                zr.on('mousemove', this._onBrush);\r\n                zr.on('mouseup', this._onBrushEnd);\r\n            }\r\n            else {\r\n                zr.off('mousemove', this._onBrush);\r\n                zr.off('mouseup', this._onBrushEnd);\r\n            }\r\n            barGroup.add(clickPanel);\r\n        };\r\n        SliderZoomView.prototype._renderDataShadow = function () {\r\n            var info = this._dataShadowInfo = this._prepareDataShadowInfo();\r\n            this._displayables.dataShadowSegs = [];\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var size = this._size;\r\n            var seriesModel = info.series;\r\n            var data = seriesModel.getRawData();\r\n            var otherDim = seriesModel.getShadowDim\r\n                ? seriesModel.getShadowDim()\r\n                : info.otherDim;\r\n            if (otherDim == null) {\r\n                return;\r\n            }\r\n            var otherDataExtent = data.getDataExtent(otherDim);\r\n            var otherOffset = (otherDataExtent[1] - otherDataExtent[0]) * 0.3;\r\n            otherDataExtent = [\r\n                otherDataExtent[0] - otherOffset,\r\n                otherDataExtent[1] + otherOffset\r\n            ];\r\n            var otherShadowExtent = [0, size[1]];\r\n            var thisShadowExtent = [0, size[0]];\r\n            var areaPoints = [[size[0], 0], [0, 0]];\r\n            var linePoints = [];\r\n            var step = thisShadowExtent[1] / (data.count() - 1);\r\n            var thisCoord = 0;\r\n            var stride = Math.round(data.count() / size[0]);\r\n            var lastIsEmpty;\r\n            data.each([otherDim], function (value, index) {\r\n                if (stride > 0 && (index % stride)) {\r\n                    thisCoord += step;\r\n                    return;\r\n                }\r\n                var isEmpty = value == null || isNaN(value) || value === '';\r\n                var otherCoord = isEmpty\r\n                    ? 0 : linearMap(value, otherDataExtent, otherShadowExtent, true);\r\n                if (isEmpty && !lastIsEmpty && index) {\r\n                    areaPoints.push([areaPoints[areaPoints.length - 1][0], 0]);\r\n                    linePoints.push([linePoints[linePoints.length - 1][0], 0]);\r\n                }\r\n                else if (!isEmpty && lastIsEmpty) {\r\n                    areaPoints.push([thisCoord, 0]);\r\n                    linePoints.push([thisCoord, 0]);\r\n                }\r\n                areaPoints.push([thisCoord, otherCoord]);\r\n                linePoints.push([thisCoord, otherCoord]);\r\n                thisCoord += step;\r\n                lastIsEmpty = isEmpty;\r\n            });\r\n            var dataZoomModel = this.dataZoomModel;\r\n            function createDataShadowGroup(isSelectedArea) {\r\n                var model = dataZoomModel.getModel(isSelectedArea ? 'selectedDataBackground' : 'dataBackground');\r\n                var group = new Group();\r\n                var polygon = new Polygon({\r\n                    shape: { points: areaPoints },\r\n                    segmentIgnoreThreshold: 1,\r\n                    style: model.getModel('areaStyle').getAreaStyle(),\r\n                    silent: true,\r\n                    z2: -20\r\n                });\r\n                var polyline = new Polyline({\r\n                    shape: { points: linePoints },\r\n                    segmentIgnoreThreshold: 1,\r\n                    style: model.getModel('lineStyle').getLineStyle(),\r\n                    silent: true,\r\n                    z2: -19\r\n                });\r\n                group.add(polygon);\r\n                group.add(polyline);\r\n                return group;\r\n            }\r\n            for (var i = 0; i < 3; i++) {\r\n                var group = createDataShadowGroup(i === 1);\r\n                this._displayables.sliderGroup.add(group);\r\n                this._displayables.dataShadowSegs.push(group);\r\n            }\r\n        };\r\n        SliderZoomView.prototype._prepareDataShadowInfo = function () {\r\n            var dataZoomModel = this.dataZoomModel;\r\n            var showDataShadow = dataZoomModel.get('showDataShadow');\r\n            if (showDataShadow === false) {\r\n                return;\r\n            }\r\n            var result;\r\n            var ecModel = this.ecModel;\r\n            dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\r\n                var seriesModels = dataZoomModel\r\n                    .getAxisProxy(axisDim, axisIndex)\r\n                    .getTargetSeriesModels();\r\n                each(seriesModels, function (seriesModel) {\r\n                    if (result) {\r\n                        return;\r\n                    }\r\n                    if (showDataShadow !== true && indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\r\n                        return;\r\n                    }\r\n                    var thisAxis = ecModel.getComponent(getAxisMainType(axisDim), axisIndex).axis;\r\n                    var otherDim = getOtherDim(axisDim);\r\n                    var otherAxisInverse;\r\n                    var coordSys = seriesModel.coordinateSystem;\r\n                    if (otherDim != null && coordSys.getOtherAxis) {\r\n                        otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\r\n                    }\r\n                    otherDim = seriesModel.getData().mapDimension(otherDim);\r\n                    result = {\r\n                        thisAxis: thisAxis,\r\n                        series: seriesModel,\r\n                        thisDim: axisDim,\r\n                        otherDim: otherDim,\r\n                        otherAxisInverse: otherAxisInverse\r\n                    };\r\n                }, this);\r\n            }, this);\r\n            return result;\r\n        };\r\n        SliderZoomView.prototype._renderHandle = function () {\r\n            var thisGroup = this.group;\r\n            var displayables = this._displayables;\r\n            var handles = displayables.handles = [null, null];\r\n            var handleLabels = displayables.handleLabels = [null, null];\r\n            var sliderGroup = this._displayables.sliderGroup;\r\n            var size = this._size;\r\n            var dataZoomModel = this.dataZoomModel;\r\n            var api = this.api;\r\n            var borderRadius = dataZoomModel.get('borderRadius') || 0;\r\n            var brushSelect = dataZoomModel.get('brushSelect');\r\n            var filler = displayables.filler = new Rect$1({\r\n                silent: brushSelect,\r\n                style: {\r\n                    fill: dataZoomModel.get('fillerColor')\r\n                },\r\n                textConfig: {\r\n                    position: 'inside'\r\n                }\r\n            });\r\n            sliderGroup.add(filler);\r\n            sliderGroup.add(new Rect$1({\r\n                silent: true,\r\n                subPixelOptimize: true,\r\n                shape: {\r\n                    x: 0,\r\n                    y: 0,\r\n                    width: size[0],\r\n                    height: size[1],\r\n                    r: borderRadius\r\n                },\r\n                style: {\r\n                    stroke: dataZoomModel.get('dataBackgroundColor')\r\n                        || dataZoomModel.get('borderColor'),\r\n                    lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\r\n                    fill: 'rgba(0,0,0,0)'\r\n                }\r\n            }));\r\n            each([0, 1], function (handleIndex) {\r\n                var iconStr = dataZoomModel.get('handleIcon');\r\n                if (!symbolBuildProxies[iconStr] && iconStr.indexOf('path://') < 0) {\r\n                    iconStr = 'path://' + iconStr;\r\n                    if (__DEV__) {\r\n                        deprecateLog('handleIcon now needs \\'path://\\' prefix when using a path string');\r\n                    }\r\n                }\r\n                var path = createSymbol(iconStr, -1, 0, 2, 2, null, true);\r\n                path.attr({\r\n                    cursor: getCursor(this._orient),\r\n                    draggable: true,\r\n                    drift: bind(this._onDragMove, this, handleIndex),\r\n                    ondragend: bind(this._onDragEnd, this),\r\n                    onmouseover: bind(this._showDataInfo, this, true),\r\n                    onmouseout: bind(this._showDataInfo, this, false),\r\n                    z2: 5\r\n                });\r\n                var bRect = path.getBoundingRect();\r\n                var handleSize = dataZoomModel.get('handleSize');\r\n                this._handleHeight = parsePercent$2(handleSize, this._size[1]);\r\n                this._handleWidth = bRect.width / bRect.height * this._handleHeight;\r\n                path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\r\n                path.style.strokeNoScale = true;\r\n                path.rectHover = true;\r\n                path.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\r\n                enableHoverEmphasis(path);\r\n                var handleColor = dataZoomModel.get('handleColor');\r\n                if (handleColor != null) {\r\n                    path.style.fill = handleColor;\r\n                }\r\n                sliderGroup.add(handles[handleIndex] = path);\r\n                var textStyleModel = dataZoomModel.getModel('textStyle');\r\n                thisGroup.add(handleLabels[handleIndex] = new ZRText({\r\n                    silent: true,\r\n                    invisible: true,\r\n                    style: {\r\n                        x: 0, y: 0, text: '',\r\n                        verticalAlign: 'middle',\r\n                        align: 'center',\r\n                        fill: textStyleModel.getTextColor(),\r\n                        font: textStyleModel.getFont()\r\n                    },\r\n                    z2: 10\r\n                }));\r\n            }, this);\r\n            var actualMoveZone = filler;\r\n            if (brushSelect) {\r\n                var moveHandleHeight = parsePercent$2(dataZoomModel.get('moveHandleSize'), size[1]);\r\n                var moveHandle_1 = displayables.moveHandle = new Rect({\r\n                    style: dataZoomModel.getModel('moveHandleStyle').getItemStyle(),\r\n                    silent: true,\r\n                    shape: {\r\n                        r: [0, 0, 2, 2],\r\n                        y: size[1] - 0.5,\r\n                        height: moveHandleHeight\r\n                    }\r\n                });\r\n                var iconSize = moveHandleHeight * 0.8;\r\n                var moveHandleIcon = displayables.moveHandleIcon = createSymbol(dataZoomModel.get('moveHandleIcon'), -iconSize / 2, -iconSize / 2, iconSize, iconSize, '#fff', true);\r\n                moveHandleIcon.silent = true;\r\n                moveHandleIcon.y = size[1] + moveHandleHeight / 2 - 0.5;\r\n                moveHandle_1.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'moveHandleStyle']).getItemStyle();\r\n                var moveZoneExpandSize = Math.min(size[1] / 2, Math.max(moveHandleHeight, 10));\r\n                actualMoveZone = displayables.moveZone = new Rect({\r\n                    invisible: true,\r\n                    shape: {\r\n                        y: size[1] - moveZoneExpandSize,\r\n                        height: moveHandleHeight + moveZoneExpandSize\r\n                    }\r\n                });\r\n                actualMoveZone.on('mouseover', function () {\r\n                    api.enterEmphasis(moveHandle_1);\r\n                })\r\n                    .on('mouseout', function () {\r\n                    api.leaveEmphasis(moveHandle_1);\r\n                });\r\n                sliderGroup.add(moveHandle_1);\r\n                sliderGroup.add(moveHandleIcon);\r\n                sliderGroup.add(actualMoveZone);\r\n            }\r\n            actualMoveZone.attr({\r\n                draggable: true,\r\n                cursor: getCursor(this._orient),\r\n                drift: bind(this._onDragMove, this, 'all'),\r\n                ondragstart: bind(this._showDataInfo, this, true),\r\n                ondragend: bind(this._onDragEnd, this),\r\n                onmouseover: bind(this._showDataInfo, this, true),\r\n                onmouseout: bind(this._showDataInfo, this, false)\r\n            });\r\n        };\r\n        SliderZoomView.prototype._resetInterval = function () {\r\n            var range = this._range = this.dataZoomModel.getPercentRange();\r\n            var viewExtent = this._getViewExtent();\r\n            this._handleEnds = [\r\n                linearMap(range[0], [0, 100], viewExtent, true),\r\n                linearMap(range[1], [0, 100], viewExtent, true)\r\n            ];\r\n        };\r\n        SliderZoomView.prototype._updateInterval = function (handleIndex, delta) {\r\n            var dataZoomModel = this.dataZoomModel;\r\n            var handleEnds = this._handleEnds;\r\n            var viewExtend = this._getViewExtent();\r\n            var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\r\n            var percentExtent = [0, 100];\r\n            sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null\r\n                ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null\r\n                ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\r\n            var lastRange = this._range;\r\n            var range = this._range = asc([\r\n                linearMap(handleEnds[0], viewExtend, percentExtent, true),\r\n                linearMap(handleEnds[1], viewExtend, percentExtent, true)\r\n            ]);\r\n            return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\r\n        };\r\n        SliderZoomView.prototype._updateView = function (nonRealtime) {\r\n            var displaybles = this._displayables;\r\n            var handleEnds = this._handleEnds;\r\n            var handleInterval = asc(handleEnds.slice());\r\n            var size = this._size;\r\n            each([0, 1], function (handleIndex) {\r\n                var handle = displaybles.handles[handleIndex];\r\n                var handleHeight = this._handleHeight;\r\n                handle.attr({\r\n                    scaleX: handleHeight / 2,\r\n                    scaleY: handleHeight / 2,\r\n                    x: handleEnds[handleIndex],\r\n                    y: size[1] / 2 - handleHeight / 2\r\n                });\r\n            }, this);\r\n            displaybles.filler.setShape({\r\n                x: handleInterval[0],\r\n                y: 0,\r\n                width: handleInterval[1] - handleInterval[0],\r\n                height: size[1]\r\n            });\r\n            var viewExtent = {\r\n                x: handleInterval[0],\r\n                width: handleInterval[1] - handleInterval[0]\r\n            };\r\n            if (displaybles.moveHandle) {\r\n                displaybles.moveHandle.setShape(viewExtent);\r\n                displaybles.moveZone.setShape(viewExtent);\r\n                displaybles.moveZone.getBoundingRect();\r\n                displaybles.moveHandleIcon && displaybles.moveHandleIcon.attr('x', viewExtent.x + viewExtent.width / 2);\r\n            }\r\n            var dataShadowSegs = displaybles.dataShadowSegs;\r\n            var segIntervals = [0, handleInterval[0], handleInterval[1], size[0]];\r\n            for (var i = 0; i < dataShadowSegs.length; i++) {\r\n                var segGroup = dataShadowSegs[i];\r\n                var clipPath = segGroup.getClipPath();\r\n                if (!clipPath) {\r\n                    clipPath = new Rect();\r\n                    segGroup.setClipPath(clipPath);\r\n                }\r\n                clipPath.setShape({\r\n                    x: segIntervals[i],\r\n                    y: 0,\r\n                    width: segIntervals[i + 1] - segIntervals[i],\r\n                    height: size[1]\r\n                });\r\n            }\r\n            this._updateDataInfo(nonRealtime);\r\n        };\r\n        SliderZoomView.prototype._updateDataInfo = function (nonRealtime) {\r\n            var dataZoomModel = this.dataZoomModel;\r\n            var displaybles = this._displayables;\r\n            var handleLabels = displaybles.handleLabels;\r\n            var orient = this._orient;\r\n            var labelTexts = ['', ''];\r\n            if (dataZoomModel.get('showDetail')) {\r\n                var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\r\n                if (axisProxy) {\r\n                    var axis = axisProxy.getAxisModel().axis;\r\n                    var range = this._range;\r\n                    var dataInterval = nonRealtime\r\n                        ? axisProxy.calculateDataWindow({\r\n                            start: range[0], end: range[1]\r\n                        }).valueWindow\r\n                        : axisProxy.getDataValueWindow();\r\n                    labelTexts = [\r\n                        this._formatLabel(dataInterval[0], axis),\r\n                        this._formatLabel(dataInterval[1], axis)\r\n                    ];\r\n                }\r\n            }\r\n            var orderedHandleEnds = asc(this._handleEnds.slice());\r\n            setLabel.call(this, 0);\r\n            setLabel.call(this, 1);\r\n            function setLabel(handleIndex) {\r\n                var barTransform = getTransform(displaybles.handles[handleIndex].parent, this.group);\r\n                var direction = transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\r\n                var offset = this._handleWidth / 2 + LABEL_GAP;\r\n                var textPoint = applyTransform$1([\r\n                    orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset),\r\n                    this._size[1] / 2\r\n                ], barTransform);\r\n                handleLabels[handleIndex].setStyle({\r\n                    x: textPoint[0],\r\n                    y: textPoint[1],\r\n                    verticalAlign: orient === HORIZONTAL ? 'middle' : direction,\r\n                    align: orient === HORIZONTAL ? direction : 'center',\r\n                    text: labelTexts[handleIndex]\r\n                });\r\n            }\r\n        };\r\n        SliderZoomView.prototype._formatLabel = function (value, axis) {\r\n            var dataZoomModel = this.dataZoomModel;\r\n            var labelFormatter = dataZoomModel.get('labelFormatter');\r\n            var labelPrecision = dataZoomModel.get('labelPrecision');\r\n            if (labelPrecision == null || labelPrecision === 'auto') {\r\n                labelPrecision = axis.getPixelPrecision();\r\n            }\r\n            var valueStr = (value == null || isNaN(value))\r\n                ? ''\r\n                : (axis.type === 'category' || axis.type === 'time')\r\n                    ? axis.scale.getLabel({\r\n                        value: Math.round(value)\r\n                    })\r\n                    : value.toFixed(Math.min(labelPrecision, 20));\r\n            return isFunction(labelFormatter)\r\n                ? labelFormatter(value, valueStr)\r\n                : isString(labelFormatter)\r\n                    ? labelFormatter.replace('{value}', valueStr)\r\n                    : valueStr;\r\n        };\r\n        SliderZoomView.prototype._showDataInfo = function (showOrHide) {\r\n            showOrHide = this._dragging || showOrHide;\r\n            var displayables = this._displayables;\r\n            var handleLabels = displayables.handleLabels;\r\n            handleLabels[0].attr('invisible', !showOrHide);\r\n            handleLabels[1].attr('invisible', !showOrHide);\r\n            displayables.moveHandle\r\n                && this.api[showOrHide ? 'enterEmphasis' : 'leaveEmphasis'](displayables.moveHandle, 1);\r\n        };\r\n        SliderZoomView.prototype._onDragMove = function (handleIndex, dx, dy, event) {\r\n            this._dragging = true;\r\n            stop(event.event);\r\n            var barTransform = this._displayables.sliderGroup.getLocalTransform();\r\n            var vertex = applyTransform$1([dx, dy], barTransform, true);\r\n            var changed = this._updateInterval(handleIndex, vertex[0]);\r\n            var realtime = this.dataZoomModel.get('realtime');\r\n            this._updateView(!realtime);\r\n            changed && realtime && this._dispatchZoomAction(true);\r\n        };\r\n        SliderZoomView.prototype._onDragEnd = function () {\r\n            this._dragging = false;\r\n            this._showDataInfo(false);\r\n            var realtime = this.dataZoomModel.get('realtime');\r\n            !realtime && this._dispatchZoomAction(false);\r\n        };\r\n        SliderZoomView.prototype._onClickPanel = function (e) {\r\n            var size = this._size;\r\n            var localPoint = this._displayables.sliderGroup.transformCoordToLocal(e.offsetX, e.offsetY);\r\n            if (localPoint[0] < 0 || localPoint[0] > size[0]\r\n                || localPoint[1] < 0 || localPoint[1] > size[1]) {\r\n                return;\r\n            }\r\n            var handleEnds = this._handleEnds;\r\n            var center = (handleEnds[0] + handleEnds[1]) / 2;\r\n            var changed = this._updateInterval('all', localPoint[0] - center);\r\n            this._updateView();\r\n            changed && this._dispatchZoomAction(false);\r\n        };\r\n        SliderZoomView.prototype._onBrushStart = function (e) {\r\n            var x = e.offsetX;\r\n            var y = e.offsetY;\r\n            this._brushStart = new Point(x, y);\r\n            this._brushing = true;\r\n            this._brushStartTime = +new Date();\r\n        };\r\n        SliderZoomView.prototype._onBrushEnd = function (e) {\r\n            if (!this._brushing) {\r\n                return;\r\n            }\r\n            var brushRect = this._displayables.brushRect;\r\n            this._brushing = false;\r\n            if (!brushRect) {\r\n                return;\r\n            }\r\n            brushRect.attr('ignore', true);\r\n            var brushShape = brushRect.shape;\r\n            var brushEndTime = +new Date();\r\n            if (brushEndTime - this._brushStartTime < 200 && Math.abs(brushShape.width) < 5) {\r\n                return;\r\n            }\r\n            var viewExtend = this._getViewExtent();\r\n            var percentExtent = [0, 100];\r\n            this._range = asc([\r\n                linearMap(brushShape.x, viewExtend, percentExtent, true),\r\n                linearMap(brushShape.x + brushShape.width, viewExtend, percentExtent, true)\r\n            ]);\r\n            this._handleEnds = [brushShape.x, brushShape.x + brushShape.width];\r\n            this._updateView();\r\n            this._dispatchZoomAction(false);\r\n        };\r\n        SliderZoomView.prototype._onBrush = function (e) {\r\n            if (this._brushing) {\r\n                stop(e.event);\r\n                this._updateBrushRect(e.offsetX, e.offsetY);\r\n            }\r\n        };\r\n        SliderZoomView.prototype._updateBrushRect = function (mouseX, mouseY) {\r\n            var displayables = this._displayables;\r\n            var dataZoomModel = this.dataZoomModel;\r\n            var brushRect = displayables.brushRect;\r\n            if (!brushRect) {\r\n                brushRect = displayables.brushRect = new Rect$1({\r\n                    silent: true,\r\n                    style: dataZoomModel.getModel('brushStyle').getItemStyle()\r\n                });\r\n                displayables.sliderGroup.add(brushRect);\r\n            }\r\n            brushRect.ignore = false;\r\n            var brushStart = this._brushStart;\r\n            var sliderGroup = this._displayables.sliderGroup;\r\n            var endPoint = sliderGroup.transformCoordToLocal(mouseX, mouseY);\r\n            var startPoint = sliderGroup.transformCoordToLocal(brushStart.x, brushStart.y);\r\n            var size = this._size;\r\n            endPoint[0] = Math.max(Math.min(size[0], endPoint[0]), 0);\r\n            brushRect.setShape({\r\n                x: startPoint[0], y: 0,\r\n                width: endPoint[0] - startPoint[0], height: size[1]\r\n            });\r\n        };\r\n        SliderZoomView.prototype._dispatchZoomAction = function (realtime) {\r\n            var range = this._range;\r\n            this.api.dispatchAction({\r\n                type: 'dataZoom',\r\n                from: this.uid,\r\n                dataZoomId: this.dataZoomModel.id,\r\n                animation: realtime ? REALTIME_ANIMATION_CONFIG : null,\r\n                start: range[0],\r\n                end: range[1]\r\n            });\r\n        };\r\n        SliderZoomView.prototype._findCoordRect = function () {\r\n            var rect;\r\n            var coordSysInfoList = collectReferCoordSysModelInfo(this.dataZoomModel).infoList;\r\n            if (!rect && coordSysInfoList.length) {\r\n                var coordSys = coordSysInfoList[0].model.coordinateSystem;\r\n                rect = coordSys.getRect && coordSys.getRect();\r\n            }\r\n            if (!rect) {\r\n                var width = this.api.getWidth();\r\n                var height = this.api.getHeight();\r\n                rect = {\r\n                    x: width * 0.2,\r\n                    y: height * 0.2,\r\n                    width: width * 0.6,\r\n                    height: height * 0.6\r\n                };\r\n            }\r\n            return rect;\r\n        };\r\n        SliderZoomView.type = 'dataZoom.slider';\r\n        return SliderZoomView;\r\n    }(DataZoomView));\r\n    function getOtherDim(thisDim) {\r\n        var map = { x: 'y', y: 'x', radius: 'angle', angle: 'radius' };\r\n        return map[thisDim];\r\n    }\r\n    function getCursor(orient) {\r\n        return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\r\n    }\r\n    ComponentView.registerClass(SliderZoomView);\n\n    var each$8 = each;\r\n    var asc$1 = asc;\r\n    var AxisProxy = (function () {\r\n        function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\r\n            this._dimName = dimName;\r\n            this._axisIndex = axisIndex;\r\n            this.ecModel = ecModel;\r\n            this._dataZoomModel = dataZoomModel;\r\n        }\r\n        AxisProxy.prototype.hostedBy = function (dataZoomModel) {\r\n            return this._dataZoomModel === dataZoomModel;\r\n        };\r\n        AxisProxy.prototype.getDataValueWindow = function () {\r\n            return this._valueWindow.slice();\r\n        };\r\n        AxisProxy.prototype.getDataPercentWindow = function () {\r\n            return this._percentWindow.slice();\r\n        };\r\n        AxisProxy.prototype.getTargetSeriesModels = function () {\r\n            var seriesModels = [];\r\n            this.ecModel.eachSeries(function (seriesModel) {\r\n                if (isCoordSupported(seriesModel)) {\r\n                    var axisMainType = getAxisMainType(this._dimName);\r\n                    var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\r\n                    if (axisModel && this._axisIndex === axisModel.componentIndex) {\r\n                        seriesModels.push(seriesModel);\r\n                    }\r\n                }\r\n            }, this);\r\n            return seriesModels;\r\n        };\r\n        AxisProxy.prototype.getAxisModel = function () {\r\n            return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\r\n        };\r\n        AxisProxy.prototype.getMinMaxSpan = function () {\r\n            return clone(this._minMaxSpan);\r\n        };\r\n        AxisProxy.prototype.calculateDataWindow = function (opt) {\r\n            var dataExtent = this._dataExtent;\r\n            var axisModel = this.getAxisModel();\r\n            var scale = axisModel.axis.scale;\r\n            var rangePropMode = this._dataZoomModel.getRangePropMode();\r\n            var percentExtent = [0, 100];\r\n            var percentWindow = [];\r\n            var valueWindow = [];\r\n            var hasPropModeValue;\r\n            each$8(['start', 'end'], function (prop, idx) {\r\n                var boundPercent = opt[prop];\r\n                var boundValue = opt[prop + 'Value'];\r\n                if (rangePropMode[idx] === 'percent') {\r\n                    boundPercent == null && (boundPercent = percentExtent[idx]);\r\n                    boundValue = scale.parse(linearMap(boundPercent, percentExtent, dataExtent));\r\n                }\r\n                else {\r\n                    hasPropModeValue = true;\r\n                    boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue);\r\n                    boundPercent = linearMap(boundValue, dataExtent, percentExtent);\r\n                }\r\n                valueWindow[idx] = boundValue;\r\n                percentWindow[idx] = boundPercent;\r\n            });\r\n            asc$1(valueWindow);\r\n            asc$1(percentWindow);\r\n            var spans = this._minMaxSpan;\r\n            hasPropModeValue\r\n                ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false)\r\n                : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\r\n            function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\r\n                var suffix = toValue ? 'Span' : 'ValueSpan';\r\n                sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\r\n                for (var i = 0; i < 2; i++) {\r\n                    toWindow[i] = linearMap(fromWindow[i], fromExtent, toExtent, true);\r\n                    toValue && (toWindow[i] = scale.parse(toWindow[i]));\r\n                }\r\n            }\r\n            return {\r\n                valueWindow: valueWindow,\r\n                percentWindow: percentWindow\r\n            };\r\n        };\r\n        AxisProxy.prototype.reset = function (dataZoomModel) {\r\n            if (dataZoomModel !== this._dataZoomModel) {\r\n                return;\r\n            }\r\n            var targetSeries = this.getTargetSeriesModels();\r\n            this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries);\r\n            this._updateMinMaxSpan();\r\n            var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\r\n            this._valueWindow = dataWindow.valueWindow;\r\n            this._percentWindow = dataWindow.percentWindow;\r\n            this._setAxisModel();\r\n        };\r\n        AxisProxy.prototype.filterData = function (dataZoomModel, api) {\r\n            if (dataZoomModel !== this._dataZoomModel) {\r\n                return;\r\n            }\r\n            var axisDim = this._dimName;\r\n            var seriesModels = this.getTargetSeriesModels();\r\n            var filterMode = dataZoomModel.get('filterMode');\r\n            var valueWindow = this._valueWindow;\r\n            if (filterMode === 'none') {\r\n                return;\r\n            }\r\n            each$8(seriesModels, function (seriesModel) {\r\n                var seriesData = seriesModel.getData();\r\n                var dataDims = seriesData.mapDimensionsAll(axisDim);\r\n                if (!dataDims.length) {\r\n                    return;\r\n                }\r\n                if (filterMode === 'weakFilter') {\r\n                    seriesData.filterSelf(function (dataIndex) {\r\n                        var leftOut;\r\n                        var rightOut;\r\n                        var hasValue;\r\n                        for (var i = 0; i < dataDims.length; i++) {\r\n                            var value = seriesData.get(dataDims[i], dataIndex);\r\n                            var thisHasValue = !isNaN(value);\r\n                            var thisLeftOut = value < valueWindow[0];\r\n                            var thisRightOut = value > valueWindow[1];\r\n                            if (thisHasValue && !thisLeftOut && !thisRightOut) {\r\n                                return true;\r\n                            }\r\n                            thisHasValue && (hasValue = true);\r\n                            thisLeftOut && (leftOut = true);\r\n                            thisRightOut && (rightOut = true);\r\n                        }\r\n                        return hasValue && leftOut && rightOut;\r\n                    });\r\n                }\r\n                else {\r\n                    each$8(dataDims, function (dim) {\r\n                        if (filterMode === 'empty') {\r\n                            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\r\n                                return !isInWindow(value) ? NaN : value;\r\n                            }));\r\n                        }\r\n                        else {\r\n                            var range = {};\r\n                            range[dim] = valueWindow;\r\n                            seriesData.selectRange(range);\r\n                        }\r\n                    });\r\n                }\r\n                each$8(dataDims, function (dim) {\r\n                    seriesData.setApproximateExtent(valueWindow, dim);\r\n                });\r\n            });\r\n            function isInWindow(value) {\r\n                return value >= valueWindow[0] && value <= valueWindow[1];\r\n            }\r\n        };\r\n        AxisProxy.prototype._updateMinMaxSpan = function () {\r\n            var minMaxSpan = this._minMaxSpan = {};\r\n            var dataZoomModel = this._dataZoomModel;\r\n            var dataExtent = this._dataExtent;\r\n            each$8(['min', 'max'], function (minMax) {\r\n                var percentSpan = dataZoomModel.get(minMax + 'Span');\r\n                var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\r\n                valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan));\r\n                if (valueSpan != null) {\r\n                    percentSpan = linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\r\n                }\r\n                else if (percentSpan != null) {\r\n                    valueSpan = linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\r\n                }\r\n                minMaxSpan[minMax + 'Span'] = percentSpan;\r\n                minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\r\n            }, this);\r\n        };\r\n        AxisProxy.prototype._setAxisModel = function () {\r\n            var axisModel = this.getAxisModel();\r\n            var percentWindow = this._percentWindow;\r\n            var valueWindow = this._valueWindow;\r\n            if (!percentWindow) {\r\n                return;\r\n            }\r\n            var precision = getPixelPrecision(valueWindow, [0, 500]);\r\n            precision = Math.min(precision, 20);\r\n            var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\r\n            if (percentWindow[0] !== 0) {\r\n                rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\r\n            }\r\n            if (percentWindow[1] !== 100) {\r\n                rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\r\n            }\r\n            rawExtentInfo.freeze();\r\n        };\r\n        return AxisProxy;\r\n    }());\r\n    function calculateDataExtent(axisProxy, axisDim, seriesModels) {\r\n        var dataExtent = [Infinity, -Infinity];\r\n        each$8(seriesModels, function (seriesModel) {\r\n            unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\r\n        });\r\n        var axisModel = axisProxy.getAxisModel();\r\n        var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\r\n        return [rawExtentResult.min, rawExtentResult.max];\r\n    }\n\n    registerProcessor(PRIORITY.PROCESSOR.FILTER, {\r\n        getTargetSeries: function (ecModel) {\r\n            function eachAxisModel(cb) {\r\n                ecModel.eachComponent('dataZoom', function (dataZoomModel) {\r\n                    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\r\n                        var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\r\n                        cb(axisDim, axisIndex, axisModel, dataZoomModel);\r\n                    });\r\n                });\r\n            }\r\n            eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\r\n                axisModel.__dzAxisProxy = null;\r\n            });\r\n            var proxyList = [];\r\n            eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\r\n                if (!axisModel.__dzAxisProxy) {\r\n                    axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\r\n                    proxyList.push(axisModel.__dzAxisProxy);\r\n                }\r\n            });\r\n            var seriesModelMap = createHashMap();\r\n            each(proxyList, function (axisProxy) {\r\n                each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\r\n                    seriesModelMap.set(seriesModel.uid, seriesModel);\r\n                });\r\n            });\r\n            return seriesModelMap;\r\n        },\r\n        overallReset: function (ecModel, api) {\r\n            ecModel.eachComponent('dataZoom', function (dataZoomModel) {\r\n                dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\r\n                    dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\r\n                });\r\n                dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\r\n                    dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\r\n                });\r\n            });\r\n            ecModel.eachComponent('dataZoom', function (dataZoomModel) {\r\n                var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\r\n                if (axisProxy) {\r\n                    var percentRange = axisProxy.getDataPercentWindow();\r\n                    var valueRange = axisProxy.getDataValueWindow();\r\n                    dataZoomModel.setCalculatedRange({\r\n                        start: percentRange[0],\r\n                        end: percentRange[1],\r\n                        startValue: valueRange[0],\r\n                        endValue: valueRange[1]\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    });\n\n    registerAction('dataZoom', function (payload, ecModel) {\r\n        var effectedModels = findEffectedDataZooms(ecModel, payload);\r\n        each(effectedModels, function (dataZoomModel) {\r\n            dataZoomModel.setRawRange({\r\n                start: payload.start,\r\n                end: payload.end,\r\n                startValue: payload.startValue,\r\n                endValue: payload.endValue\r\n            });\r\n        });\r\n    });\n\n    var InsideZoomModel = (function (_super) {\r\n        __extends(InsideZoomModel, _super);\r\n        function InsideZoomModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = InsideZoomModel.type;\r\n            return _this;\r\n        }\r\n        InsideZoomModel.type = 'dataZoom.inside';\r\n        InsideZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\r\n            disabled: false,\r\n            zoomLock: false,\r\n            zoomOnMouseWheel: true,\r\n            moveOnMouseMove: true,\r\n            moveOnMouseWheel: false,\r\n            preventDefaultMouseMove: true\r\n        });\r\n        return InsideZoomModel;\r\n    }(DataZoomModel));\r\n    ComponentModel.registerClass(InsideZoomModel);\n\n    var ATTR = '\\0_ec_interaction_mutex';\r\n    function take(zr, resourceKey, userKey) {\r\n        var store = getStore(zr);\r\n        store[resourceKey] = userKey;\r\n    }\r\n    function release(zr, resourceKey, userKey) {\r\n        var store = getStore(zr);\r\n        var uKey = store[resourceKey];\r\n        if (uKey === userKey) {\r\n            store[resourceKey] = null;\r\n        }\r\n    }\r\n    function isTaken(zr, resourceKey) {\r\n        return !!getStore(zr)[resourceKey];\r\n    }\r\n    function getStore(zr) {\r\n        return zr[ATTR] || (zr[ATTR] = {});\r\n    }\r\n    registerAction({ type: 'takeGlobalCursor', event: 'globalCursorTaken', update: 'update' }, function () { });\n\n    var RoamController = (function (_super) {\r\n        __extends(RoamController, _super);\r\n        function RoamController(zr) {\r\n            var _this = _super.call(this) || this;\r\n            _this._zr = zr;\r\n            var mousedownHandler = bind(_this._mousedownHandler, _this);\r\n            var mousemoveHandler = bind(_this._mousemoveHandler, _this);\r\n            var mouseupHandler = bind(_this._mouseupHandler, _this);\r\n            var mousewheelHandler = bind(_this._mousewheelHandler, _this);\r\n            var pinchHandler = bind(_this._pinchHandler, _this);\r\n            _this.enable = function (controlType, opt) {\r\n                this.disable();\r\n                this._opt = defaults(clone(opt) || {}, {\r\n                    zoomOnMouseWheel: true,\r\n                    moveOnMouseMove: true,\r\n                    moveOnMouseWheel: false,\r\n                    preventDefaultMouseMove: true\r\n                });\r\n                if (controlType == null) {\r\n                    controlType = true;\r\n                }\r\n                if (controlType === true || (controlType === 'move' || controlType === 'pan')) {\r\n                    zr.on('mousedown', mousedownHandler);\r\n                    zr.on('mousemove', mousemoveHandler);\r\n                    zr.on('mouseup', mouseupHandler);\r\n                }\r\n                if (controlType === true || (controlType === 'scale' || controlType === 'zoom')) {\r\n                    zr.on('mousewheel', mousewheelHandler);\r\n                    zr.on('pinch', pinchHandler);\r\n                }\r\n            };\r\n            _this.disable = function () {\r\n                zr.off('mousedown', mousedownHandler);\r\n                zr.off('mousemove', mousemoveHandler);\r\n                zr.off('mouseup', mouseupHandler);\r\n                zr.off('mousewheel', mousewheelHandler);\r\n                zr.off('pinch', pinchHandler);\r\n            };\r\n            return _this;\r\n        }\r\n        RoamController.prototype.isDragging = function () {\r\n            return this._dragging;\r\n        };\r\n        RoamController.prototype.isPinching = function () {\r\n            return this._pinching;\r\n        };\r\n        RoamController.prototype.setPointerChecker = function (pointerChecker) {\r\n            this.pointerChecker = pointerChecker;\r\n        };\r\n        RoamController.prototype.dispose = function () {\r\n            this.disable();\r\n        };\r\n        RoamController.prototype._mousedownHandler = function (e) {\r\n            if (isMiddleOrRightButtonOnMouseUpDown(e)\r\n                || (e.target && e.target.draggable)) {\r\n                return;\r\n            }\r\n            var x = e.offsetX;\r\n            var y = e.offsetY;\r\n            if (this.pointerChecker && this.pointerChecker(e, x, y)) {\r\n                this._x = x;\r\n                this._y = y;\r\n                this._dragging = true;\r\n            }\r\n        };\r\n        RoamController.prototype._mousemoveHandler = function (e) {\r\n            if (!this._dragging\r\n                || !isAvailableBehavior('moveOnMouseMove', e, this._opt)\r\n                || e.gestureEvent === 'pinch'\r\n                || isTaken(this._zr, 'globalPan')) {\r\n                return;\r\n            }\r\n            var x = e.offsetX;\r\n            var y = e.offsetY;\r\n            var oldX = this._x;\r\n            var oldY = this._y;\r\n            var dx = x - oldX;\r\n            var dy = y - oldY;\r\n            this._x = x;\r\n            this._y = y;\r\n            this._opt.preventDefaultMouseMove && stop(e.event);\r\n            trigger(this, 'pan', 'moveOnMouseMove', e, {\r\n                dx: dx, dy: dy, oldX: oldX, oldY: oldY, newX: x, newY: y, isAvailableBehavior: null\r\n            });\r\n        };\r\n        RoamController.prototype._mouseupHandler = function (e) {\r\n            if (!isMiddleOrRightButtonOnMouseUpDown(e)) {\r\n                this._dragging = false;\r\n            }\r\n        };\r\n        RoamController.prototype._mousewheelHandler = function (e) {\r\n            var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\r\n            var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\r\n            var wheelDelta = e.wheelDelta;\r\n            var absWheelDeltaDelta = Math.abs(wheelDelta);\r\n            var originX = e.offsetX;\r\n            var originY = e.offsetY;\r\n            if (wheelDelta === 0 || (!shouldZoom && !shouldMove)) {\r\n                return;\r\n            }\r\n            if (shouldZoom) {\r\n                var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\r\n                var scale = wheelDelta > 0 ? factor : 1 / factor;\r\n                checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\r\n                    scale: scale, originX: originX, originY: originY, isAvailableBehavior: null\r\n                });\r\n            }\r\n            if (shouldMove) {\r\n                var absDelta = Math.abs(wheelDelta);\r\n                var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\r\n                checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\r\n                    scrollDelta: scrollDelta, originX: originX, originY: originY, isAvailableBehavior: null\r\n                });\r\n            }\r\n        };\r\n        RoamController.prototype._pinchHandler = function (e) {\r\n            if (isTaken(this._zr, 'globalPan')) {\r\n                return;\r\n            }\r\n            var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\r\n            checkPointerAndTrigger(this, 'zoom', null, e, {\r\n                scale: scale, originX: e.pinchX, originY: e.pinchY, isAvailableBehavior: null\r\n            });\r\n        };\r\n        return RoamController;\r\n    }(Eventful));\r\n    function checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\r\n        if (controller.pointerChecker\r\n            && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\r\n            stop(e.event);\r\n            trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\r\n        }\r\n    }\r\n    function trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\r\n        contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e);\r\n        controller.trigger(eventName, contollerEvent);\r\n    }\r\n    function isAvailableBehavior(behaviorToCheck, e, settings) {\r\n        var setting = settings[behaviorToCheck];\r\n        return !behaviorToCheck || (setting && (!isString(setting) || e.event[setting + 'Key']));\r\n    }\n\n    var inner$e = makeInner();\r\n    registerProcessor(PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\r\n        var apiInner = inner$e(api);\r\n        var coordSysRecordMap = apiInner.coordSysRecordMap\r\n            || (apiInner.coordSysRecordMap = createHashMap());\r\n        coordSysRecordMap.each(function (coordSysRecord) {\r\n            coordSysRecord.dataZoomInfoMap = null;\r\n        });\r\n        ecModel.eachComponent({ mainType: 'dataZoom', subType: 'inside' }, function (dataZoomModel) {\r\n            var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\r\n            each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\r\n                var coordSysUid = dzCoordSysInfo.model.uid;\r\n                var coordSysRecord = coordSysRecordMap.get(coordSysUid)\r\n                    || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\r\n                var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap\r\n                    || (coordSysRecord.dataZoomInfoMap = createHashMap());\r\n                dataZoomInfoMap.set(dataZoomModel.uid, {\r\n                    dzReferCoordSysInfo: dzCoordSysInfo,\r\n                    model: dataZoomModel,\r\n                    getRange: null\r\n                });\r\n            });\r\n        });\r\n        coordSysRecordMap.each(function (coordSysRecord) {\r\n            var controller = coordSysRecord.controller;\r\n            var firstDzInfo;\r\n            var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\r\n            if (dataZoomInfoMap) {\r\n                var firstDzKey = dataZoomInfoMap.keys()[0];\r\n                if (firstDzKey != null) {\r\n                    firstDzInfo = dataZoomInfoMap.get(firstDzKey);\r\n                }\r\n            }\r\n            if (!firstDzInfo) {\r\n                disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\r\n                return;\r\n            }\r\n            var controllerParams = mergeControllerParams(dataZoomInfoMap);\r\n            controller.enable(controllerParams.controlType, controllerParams.opt);\r\n            controller.setPointerChecker(coordSysRecord.containsPoint);\r\n            createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\r\n        });\r\n    });\r\n    function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\r\n        inner$e(api).coordSysRecordMap.each(function (coordSysRecord) {\r\n            var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\r\n            if (dzInfo) {\r\n                dzInfo.getRange = getRange;\r\n            }\r\n        });\r\n    }\r\n    function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\r\n        var coordSysRecordMap = inner$e(api).coordSysRecordMap;\r\n        var coordSysKeyArr = coordSysRecordMap.keys();\r\n        for (var i = 0; i < coordSysKeyArr.length; i++) {\r\n            var coordSysKey = coordSysKeyArr[i];\r\n            var coordSysRecord = coordSysRecordMap.get(coordSysKey);\r\n            var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\r\n            if (dataZoomInfoMap) {\r\n                var dzUid = dataZoomModel.uid;\r\n                var dzInfo = dataZoomInfoMap.get(dzUid);\r\n                if (dzInfo) {\r\n                    dataZoomInfoMap.removeKey(dzUid);\r\n                    if (!dataZoomInfoMap.keys().length) {\r\n                        disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\r\n        if (coordSysRecord) {\r\n            coordSysRecordMap.removeKey(coordSysRecord.model.uid);\r\n            var controller = coordSysRecord.controller;\r\n            controller && controller.dispose();\r\n        }\r\n    }\r\n    function createCoordSysRecord(api, coordSysModel) {\r\n        var coordSysRecord = {\r\n            model: coordSysModel,\r\n            containsPoint: curry(containsPoint, coordSysModel),\r\n            dispatchAction: curry(dispatchAction, api),\r\n            dataZoomInfoMap: null,\r\n            controller: null\r\n        };\r\n        var controller = coordSysRecord.controller = new RoamController(api.getZr());\r\n        each(['pan', 'zoom', 'scrollMove'], function (eventName) {\r\n            controller.on(eventName, function (event) {\r\n                var batch = [];\r\n                coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\r\n                    if (!event.isAvailableBehavior(dzInfo.model.option)) {\r\n                        return;\r\n                    }\r\n                    var method = (dzInfo.getRange || {})[eventName];\r\n                    var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\r\n                    !dzInfo.model.get('disabled', true) && range && batch.push({\r\n                        dataZoomId: dzInfo.model.id,\r\n                        start: range[0],\r\n                        end: range[1]\r\n                    });\r\n                });\r\n                batch.length && coordSysRecord.dispatchAction(batch);\r\n            });\r\n        });\r\n        return coordSysRecord;\r\n    }\r\n    function dispatchAction(api, batch) {\r\n        api.dispatchAction({\r\n            type: 'dataZoom',\r\n            animation: {\r\n                easing: 'cubicOut',\r\n                duration: 100\r\n            },\r\n            batch: batch\r\n        });\r\n    }\r\n    function containsPoint(coordSysModel, e, x, y) {\r\n        return coordSysModel.coordinateSystem.containPoint([x, y]);\r\n    }\r\n    function mergeControllerParams(dataZoomInfoMap) {\r\n        var controlType;\r\n        var prefix = 'type_';\r\n        var typePriority = {\r\n            'type_true': 2,\r\n            'type_move': 1,\r\n            'type_false': 0,\r\n            'type_undefined': -1\r\n        };\r\n        var preventDefaultMouseMove = true;\r\n        dataZoomInfoMap.each(function (dataZoomInfo) {\r\n            var dataZoomModel = dataZoomInfo.model;\r\n            var oneType = dataZoomModel.get('disabled', true)\r\n                ? false\r\n                : dataZoomModel.get('zoomLock', true)\r\n                    ? 'move'\r\n                    : true;\r\n            if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\r\n                controlType = oneType;\r\n            }\r\n            preventDefaultMouseMove = preventDefaultMouseMove\r\n                && dataZoomModel.get('preventDefaultMouseMove', true);\r\n        });\r\n        return {\r\n            controlType: controlType,\r\n            opt: {\r\n                zoomOnMouseWheel: true,\r\n                moveOnMouseMove: true,\r\n                moveOnMouseWheel: true,\r\n                preventDefaultMouseMove: !!preventDefaultMouseMove\r\n            }\r\n        };\r\n    }\n\n    var InsideZoomView = (function (_super) {\r\n        __extends(InsideZoomView, _super);\r\n        function InsideZoomView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = 'dataZoom.inside';\r\n            return _this;\r\n        }\r\n        InsideZoomView.prototype.render = function (dataZoomModel, ecModel, api) {\r\n            _super.prototype.render.apply(this, arguments);\r\n            if (dataZoomModel.noTarget()) {\r\n                this._clear();\r\n                return;\r\n            }\r\n            this.range = dataZoomModel.getPercentRange();\r\n            setViewInfoToCoordSysRecord(api, dataZoomModel, {\r\n                pan: bind(getRangeHandlers.pan, this),\r\n                zoom: bind(getRangeHandlers.zoom, this),\r\n                scrollMove: bind(getRangeHandlers.scrollMove, this)\r\n            });\r\n        };\r\n        InsideZoomView.prototype.dispose = function () {\r\n            this._clear();\r\n            _super.prototype.dispose.apply(this, arguments);\r\n        };\r\n        InsideZoomView.prototype._clear = function () {\r\n            disposeCoordSysRecordIfNeeded(this.api, this.dataZoomModel);\r\n            this.range = null;\r\n        };\r\n        InsideZoomView.type = 'dataZoom.inside';\r\n        return InsideZoomView;\r\n    }(DataZoomView));\r\n    var getRangeHandlers = {\r\n        zoom: function (coordSysInfo, coordSysMainType, controller, e) {\r\n            var lastRange = this.range;\r\n            var range = lastRange.slice();\r\n            var axisModel = coordSysInfo.axisModels[0];\r\n            if (!axisModel) {\r\n                return;\r\n            }\r\n            var directionInfo = getDirectionInfo[coordSysMainType](null, [e.originX, e.originY], axisModel, controller, coordSysInfo);\r\n            var percentPoint = (directionInfo.signal > 0\r\n                ? (directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel)\r\n                : (directionInfo.pixel - directionInfo.pixelStart)) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\r\n            var scale = Math.max(1 / e.scale, 0);\r\n            range[0] = (range[0] - percentPoint) * scale + percentPoint;\r\n            range[1] = (range[1] - percentPoint) * scale + percentPoint;\r\n            var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\r\n            sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\r\n            this.range = range;\r\n            if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\r\n                return range;\r\n            }\r\n        },\r\n        pan: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\r\n            var directionInfo = getDirectionInfo[coordSysMainType]([e.oldX, e.oldY], [e.newX, e.newY], axisModel, controller, coordSysInfo);\r\n            return directionInfo.signal\r\n                * (range[1] - range[0])\r\n                * directionInfo.pixel / directionInfo.pixelLength;\r\n        }),\r\n        scrollMove: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\r\n            var directionInfo = getDirectionInfo[coordSysMainType]([0, 0], [e.scrollDelta, e.scrollDelta], axisModel, controller, coordSysInfo);\r\n            return directionInfo.signal * (range[1] - range[0]) * e.scrollDelta;\r\n        })\r\n    };\r\n    function makeMover(getPercentDelta) {\r\n        return function (coordSysInfo, coordSysMainType, controller, e) {\r\n            var lastRange = this.range;\r\n            var range = lastRange.slice();\r\n            var axisModel = coordSysInfo.axisModels[0];\r\n            if (!axisModel) {\r\n                return;\r\n            }\r\n            var percentDelta = getPercentDelta(range, axisModel, coordSysInfo, coordSysMainType, controller, e);\r\n            sliderMove(percentDelta, range, [0, 100], 'all');\r\n            this.range = range;\r\n            if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\r\n                return range;\r\n            }\r\n        };\r\n    }\r\n    var getDirectionInfo = {\r\n        grid: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\r\n            var axis = axisModel.axis;\r\n            var ret = {};\r\n            var rect = coordSysInfo.model.coordinateSystem.getRect();\r\n            oldPoint = oldPoint || [0, 0];\r\n            if (axis.dim === 'x') {\r\n                ret.pixel = newPoint[0] - oldPoint[0];\r\n                ret.pixelLength = rect.width;\r\n                ret.pixelStart = rect.x;\r\n                ret.signal = axis.inverse ? 1 : -1;\r\n            }\r\n            else {\r\n                ret.pixel = newPoint[1] - oldPoint[1];\r\n                ret.pixelLength = rect.height;\r\n                ret.pixelStart = rect.y;\r\n                ret.signal = axis.inverse ? -1 : 1;\r\n            }\r\n            return ret;\r\n        },\r\n        polar: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\r\n            var axis = axisModel.axis;\r\n            var ret = {};\r\n            var polar = coordSysInfo.model.coordinateSystem;\r\n            var radiusExtent = polar.getRadiusAxis().getExtent();\r\n            var angleExtent = polar.getAngleAxis().getExtent();\r\n            oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\r\n            newPoint = polar.pointToCoord(newPoint);\r\n            if (axisModel.mainType === 'radiusAxis') {\r\n                ret.pixel = newPoint[0] - oldPoint[0];\r\n                ret.pixelLength = radiusExtent[1] - radiusExtent[0];\r\n                ret.pixelStart = radiusExtent[0];\r\n                ret.signal = axis.inverse ? 1 : -1;\r\n            }\r\n            else {\r\n                ret.pixel = newPoint[1] - oldPoint[1];\r\n                ret.pixelLength = angleExtent[1] - angleExtent[0];\r\n                ret.pixelStart = angleExtent[0];\r\n                ret.signal = axis.inverse ? -1 : 1;\r\n            }\r\n            return ret;\r\n        },\r\n        singleAxis: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\r\n            var axis = axisModel.axis;\r\n            var rect = coordSysInfo.model.coordinateSystem.getRect();\r\n            var ret = {};\r\n            oldPoint = oldPoint || [0, 0];\r\n            if (axis.orient === 'horizontal') {\r\n                ret.pixel = newPoint[0] - oldPoint[0];\r\n                ret.pixelLength = rect.width;\r\n                ret.pixelStart = rect.x;\r\n                ret.signal = axis.inverse ? 1 : -1;\r\n            }\r\n            else {\r\n                ret.pixel = newPoint[1] - oldPoint[1];\r\n                ret.pixelLength = rect.height;\r\n                ret.pixelStart = rect.y;\r\n                ret.signal = axis.inverse ? -1 : 1;\r\n            }\r\n            return ret;\r\n        }\r\n    };\r\n    ComponentView.registerClass(InsideZoomView);\n\n    var ToolboxFeature = (function () {\r\n        function ToolboxFeature() {\r\n        }\r\n        return ToolboxFeature;\r\n    }());\r\n    var features = {};\r\n    function registerFeature(name, ctor) {\r\n        features[name] = ctor;\r\n    }\r\n    function getFeature(name) {\r\n        return features[name];\r\n    }\n\n    var ToolboxModel = (function (_super) {\r\n        __extends(ToolboxModel, _super);\r\n        function ToolboxModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = ToolboxModel.type;\r\n            return _this;\r\n        }\r\n        ToolboxModel.prototype.optionUpdated = function () {\r\n            _super.prototype.optionUpdated.apply(this, arguments);\r\n            var ecModel = this.ecModel;\r\n            each(this.option.feature, function (featureOpt, featureName) {\r\n                var Feature = getFeature(featureName);\r\n                if (Feature) {\r\n                    if (Feature.getDefaultOption) {\r\n                        Feature.defaultOption = Feature.getDefaultOption(ecModel);\r\n                    }\r\n                    merge(featureOpt, Feature.defaultOption);\r\n                }\r\n            });\r\n        };\r\n        ToolboxModel.type = 'toolbox';\r\n        ToolboxModel.layoutMode = {\r\n            type: 'box',\r\n            ignoreSize: true\r\n        };\r\n        ToolboxModel.defaultOption = {\r\n            show: true,\r\n            z: 6,\r\n            zlevel: 0,\r\n            orient: 'horizontal',\r\n            left: 'right',\r\n            top: 'top',\r\n            backgroundColor: 'transparent',\r\n            borderColor: '#ccc',\r\n            borderRadius: 0,\r\n            borderWidth: 0,\r\n            padding: 5,\r\n            itemSize: 15,\r\n            itemGap: 8,\r\n            showTitle: true,\r\n            iconStyle: {\r\n                borderColor: '#666',\r\n                color: 'none'\r\n            },\r\n            emphasis: {\r\n                iconStyle: {\r\n                    borderColor: '#3E98C5'\r\n                }\r\n            },\r\n            tooltip: {\r\n                show: false\r\n            }\r\n        };\r\n        return ToolboxModel;\r\n    }(ComponentModel));\r\n    ComponentModel.registerClass(ToolboxModel);\n\n    var ToolboxView = (function (_super) {\r\n        __extends(ToolboxView, _super);\r\n        function ToolboxView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\r\n            var group = this.group;\r\n            group.removeAll();\r\n            if (!toolboxModel.get('show')) {\r\n                return;\r\n            }\r\n            var itemSize = +toolboxModel.get('itemSize');\r\n            var featureOpts = toolboxModel.get('feature') || {};\r\n            var features = this._features || (this._features = {});\r\n            var featureNames = [];\r\n            each(featureOpts, function (opt, name) {\r\n                featureNames.push(name);\r\n            });\r\n            (new DataDiffer(this._featureNames || [], featureNames))\r\n                .add(processFeature)\r\n                .update(processFeature)\r\n                .remove(curry(processFeature, null))\r\n                .execute();\r\n            this._featureNames = featureNames;\r\n            function processFeature(newIndex, oldIndex) {\r\n                var featureName = featureNames[newIndex];\r\n                var oldName = featureNames[oldIndex];\r\n                var featureOpt = featureOpts[featureName];\r\n                var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\r\n                var feature;\r\n                if (payload && payload.newTitle != null && payload.featureName === featureName) {\r\n                    featureOpt.title = payload.newTitle;\r\n                }\r\n                if (featureName && !oldName) {\r\n                    if (isUserFeatureName(featureName)) {\r\n                        feature = {\r\n                            onclick: featureModel.option.onclick,\r\n                            featureName: featureName\r\n                        };\r\n                    }\r\n                    else {\r\n                        var Feature = getFeature(featureName);\r\n                        if (!Feature) {\r\n                            return;\r\n                        }\r\n                        feature = new Feature();\r\n                    }\r\n                    features[featureName] = feature;\r\n                }\r\n                else {\r\n                    feature = features[oldName];\r\n                    if (!feature) {\r\n                        return;\r\n                    }\r\n                }\r\n                feature.uid = getUID('toolbox-feature');\r\n                feature.model = featureModel;\r\n                feature.ecModel = ecModel;\r\n                feature.api = api;\r\n                if (feature instanceof ToolboxFeature) {\r\n                    if (!featureName && oldName) {\r\n                        feature.dispose && feature.dispose(ecModel, api);\r\n                        return;\r\n                    }\r\n                    if (!featureModel.get('show') || feature.unusable) {\r\n                        feature.remove && feature.remove(ecModel, api);\r\n                        return;\r\n                    }\r\n                }\r\n                createIconPaths(featureModel, feature, featureName);\r\n                featureModel.setIconStatus = function (iconName, status) {\r\n                    var option = this.option;\r\n                    var iconPaths = this.iconPaths;\r\n                    option.iconStatus = option.iconStatus || {};\r\n                    option.iconStatus[iconName] = status;\r\n                    if (iconPaths[iconName]) {\r\n                        (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\r\n                    }\r\n                };\r\n                if (feature instanceof ToolboxFeature) {\r\n                    if (feature.render) {\r\n                        feature.render(featureModel, ecModel, api, payload);\r\n                    }\r\n                }\r\n            }\r\n            function createIconPaths(featureModel, feature, featureName) {\r\n                var iconStyleModel = featureModel.getModel('iconStyle');\r\n                var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']);\r\n                var icons = (feature instanceof ToolboxFeature && feature.getIcons)\r\n                    ? feature.getIcons() : featureModel.get('icon');\r\n                var titles = featureModel.get('title') || {};\r\n                var iconsMap;\r\n                var titlesMap;\r\n                if (typeof icons === 'string') {\r\n                    iconsMap = {};\r\n                    iconsMap[featureName] = icons;\r\n                }\r\n                else {\r\n                    iconsMap = icons;\r\n                }\r\n                if (typeof titles === 'string') {\r\n                    titlesMap = {};\r\n                    titlesMap[featureName] = titles;\r\n                }\r\n                else {\r\n                    titlesMap = titles;\r\n                }\r\n                var iconPaths = featureModel.iconPaths = {};\r\n                each(iconsMap, function (iconStr, iconName) {\r\n                    var path = createIcon(iconStr, {}, {\r\n                        x: -itemSize / 2,\r\n                        y: -itemSize / 2,\r\n                        width: itemSize,\r\n                        height: itemSize\r\n                    });\r\n                    path.setStyle(iconStyleModel.getItemStyle());\r\n                    var pathEmphasisState = path.ensureState('emphasis');\r\n                    pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle();\r\n                    var textContent = new ZRText({\r\n                        style: {\r\n                            text: titlesMap[iconName],\r\n                            align: iconStyleEmphasisModel.get('textAlign'),\r\n                            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\r\n                            padding: iconStyleEmphasisModel.get('textPadding'),\r\n                            fill: null\r\n                        },\r\n                        ignore: true\r\n                    });\r\n                    path.setTextContent(textContent);\r\n                    var tooltipModel = toolboxModel.getModel('tooltip');\r\n                    if (tooltipModel && tooltipModel.get('show')) {\r\n                        path.tooltip = extend({\r\n                            content: titlesMap[iconName],\r\n                            formatter: tooltipModel.get('formatter', true)\r\n                                || function () {\r\n                                    return titlesMap[iconName];\r\n                                },\r\n                            formatterParams: {\r\n                                componentType: 'toolbox',\r\n                                name: iconName,\r\n                                title: titlesMap[iconName],\r\n                                $vars: ['name', 'title']\r\n                            },\r\n                            position: tooltipModel.get('position', true) || 'bottom'\r\n                        }, tooltipModel.option);\r\n                    }\r\n                    path.__title = titlesMap[iconName];\r\n                    path.on('mouseover', function () {\r\n                        var hoverStyle = iconStyleEmphasisModel.getItemStyle();\r\n                        var defaultTextPosition = toolboxModel.get('orient') === 'vertical'\r\n                            ? (toolboxModel.get('right') == null ? 'right' : 'left')\r\n                            : (toolboxModel.get('bottom') == null ? 'bottom' : 'top');\r\n                        textContent.setStyle({\r\n                            fill: (iconStyleEmphasisModel.get('textFill')\r\n                                || hoverStyle.fill || hoverStyle.stroke || '#000'),\r\n                            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\r\n                        });\r\n                        path.setTextConfig({\r\n                            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\r\n                        });\r\n                        textContent.ignore = !toolboxModel.get('showTitle');\r\n                        enterEmphasis(this);\r\n                    })\r\n                        .on('mouseout', function () {\r\n                        if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\r\n                            leaveEmphasis(this);\r\n                        }\r\n                        textContent.hide();\r\n                    });\r\n                    (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\r\n                    group.add(path);\r\n                    path.on('click', bind(feature.onclick, feature, ecModel, api, iconName));\r\n                    iconPaths[iconName] = path;\r\n                });\r\n            }\r\n            layout$2(group, toolboxModel, api);\r\n            group.add(makeBackground(group.getBoundingRect(), toolboxModel));\r\n            group.eachChild(function (icon) {\r\n                var titleText = icon.__title;\r\n                var emphasisState = icon.ensureState('emphasis');\r\n                var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\r\n                var textContent = icon.getTextContent();\r\n                var emphasisTextState = textContent && textContent.states.emphasis;\r\n                if (emphasisTextState && !isFunction(emphasisTextState) && titleText) {\r\n                    var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\r\n                    var rect = getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\r\n                    var offsetX = icon.x + group.x;\r\n                    var offsetY = icon.y + group.y + itemSize;\r\n                    var needPutOnTop = false;\r\n                    if (offsetY + rect.height > api.getHeight()) {\r\n                        emphasisTextConfig.position = 'top';\r\n                        needPutOnTop = true;\r\n                    }\r\n                    var topOffset = needPutOnTop ? (-5 - rect.height) : (itemSize + 8);\r\n                    if (offsetX + rect.width / 2 > api.getWidth()) {\r\n                        emphasisTextConfig.position = ['100%', topOffset];\r\n                        emphasisTextStyle.align = 'right';\r\n                    }\r\n                    else if (offsetX - rect.width / 2 < 0) {\r\n                        emphasisTextConfig.position = [0, topOffset];\r\n                        emphasisTextStyle.align = 'left';\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\r\n            each(this._features, function (feature) {\r\n                feature instanceof ToolboxFeature\r\n                    && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\r\n            });\r\n        };\r\n        ToolboxView.prototype.remove = function (ecModel, api) {\r\n            each(this._features, function (feature) {\r\n                feature instanceof ToolboxFeature\r\n                    && feature.remove && feature.remove(ecModel, api);\r\n            });\r\n            this.group.removeAll();\r\n        };\r\n        ToolboxView.prototype.dispose = function (ecModel, api) {\r\n            each(this._features, function (feature) {\r\n                feature instanceof ToolboxFeature\r\n                    && feature.dispose && feature.dispose(ecModel, api);\r\n            });\r\n        };\r\n        ToolboxView.type = 'toolbox';\r\n        return ToolboxView;\r\n    }(ComponentView));\r\n    ComponentView.registerClass(ToolboxView);\r\n    function isUserFeatureName(featureName) {\r\n        return featureName.indexOf('my') === 0;\r\n    }\n\n    var SaveAsImage = (function (_super) {\r\n        __extends(SaveAsImage, _super);\r\n        function SaveAsImage() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        SaveAsImage.prototype.onclick = function (ecModel, api) {\r\n            var model = this.model;\r\n            var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\r\n            var isSvg = api.getZr().painter.getType() === 'svg';\r\n            var type = isSvg ? 'svg' : model.get('type', true) || 'png';\r\n            var url = api.getConnectedDataURL({\r\n                type: type,\r\n                backgroundColor: model.get('backgroundColor', true)\r\n                    || ecModel.get('backgroundColor') || '#fff',\r\n                connectedBackgroundColor: model.get('connectedBackgroundColor'),\r\n                excludeComponents: model.get('excludeComponents'),\r\n                pixelRatio: model.get('pixelRatio')\r\n            });\r\n            if (typeof MouseEvent === 'function' && !env.browser.ie && !env.browser.edge) {\r\n                var $a = document.createElement('a');\r\n                $a.download = title + '.' + type;\r\n                $a.target = '_blank';\r\n                $a.href = url;\r\n                var evt = new MouseEvent('click', {\r\n                    view: window,\r\n                    bubbles: true,\r\n                    cancelable: false\r\n                });\r\n                $a.dispatchEvent(evt);\r\n            }\r\n            else {\r\n                if (window.navigator.msSaveOrOpenBlob) {\r\n                    var bstr = atob(url.split(',')[1]);\r\n                    var n = bstr.length;\r\n                    var u8arr = new Uint8Array(n);\r\n                    while (n--) {\r\n                        u8arr[n] = bstr.charCodeAt(n);\r\n                    }\r\n                    var blob = new Blob([u8arr]);\r\n                    window.navigator.msSaveOrOpenBlob(blob, title + '.' + type);\r\n                }\r\n                else {\r\n                    var lang = model.get('lang');\r\n                    var html = ''\r\n                        + '<body style=\"margin:0;\">'\r\n                        + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + ((lang && lang[0]) || '') + '\" />'\r\n                        + '</body>';\r\n                    var tab = window.open();\r\n                    tab.document.write(html);\r\n                }\r\n            }\r\n        };\r\n        SaveAsImage.getDefaultOption = function (ecModel) {\r\n            var defaultOption = {\r\n                show: true,\r\n                icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\r\n                title: ecModel.getLocale(['toolbox', 'saveAsImage', 'title']),\r\n                type: 'png',\r\n                connectedBackgroundColor: '#fff',\r\n                name: '',\r\n                excludeComponents: ['toolbox'],\r\n                pixelRatio: 1,\r\n                lang: ecModel.getLocale(['toolbox', 'saveAsImage', 'lang'])\r\n            };\r\n            return defaultOption;\r\n        };\r\n        return SaveAsImage;\r\n    }(ToolboxFeature));\r\n    SaveAsImage.prototype.unusable = !env.canvasSupported;\r\n    registerFeature('saveAsImage', SaveAsImage);\n\n    var INNER_STACK_KEYWORD = '__ec_magicType_stack__';\r\n    var radioTypes = [\r\n        ['line', 'bar'],\r\n        ['stack']\r\n    ];\r\n    var MagicType = (function (_super) {\r\n        __extends(MagicType, _super);\r\n        function MagicType() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        MagicType.prototype.getIcons = function () {\r\n            var model = this.model;\r\n            var availableIcons = model.get('icon');\r\n            var icons = {};\r\n            each(model.get('type'), function (type) {\r\n                if (availableIcons[type]) {\r\n                    icons[type] = availableIcons[type];\r\n                }\r\n            });\r\n            return icons;\r\n        };\r\n        MagicType.getDefaultOption = function (ecModel) {\r\n            var defaultOption = {\r\n                show: true,\r\n                type: [],\r\n                icon: {\r\n                    line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\r\n                    bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\r\n                    stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z'\r\n                },\r\n                title: ecModel.getLocale(['toolbox', 'magicType', 'title']),\r\n                option: {},\r\n                seriesIndex: {}\r\n            };\r\n            return defaultOption;\r\n        };\r\n        MagicType.prototype.onclick = function (ecModel, api, type) {\r\n            var model = this.model;\r\n            var seriesIndex = model.get(['seriesIndex', type]);\r\n            if (!seriesOptGenreator[type]) {\r\n                return;\r\n            }\r\n            var newOption = {\r\n                series: []\r\n            };\r\n            var generateNewSeriesTypes = function (seriesModel) {\r\n                var seriesType = seriesModel.subType;\r\n                var seriesId = seriesModel.id;\r\n                var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\r\n                if (newSeriesOpt) {\r\n                    defaults(newSeriesOpt, seriesModel.option);\r\n                    newOption.series.push(newSeriesOpt);\r\n                }\r\n                var coordSys = seriesModel.coordinateSystem;\r\n                if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\r\n                    var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\r\n                    if (categoryAxis) {\r\n                        var axisDim = categoryAxis.dim;\r\n                        var axisType = axisDim + 'Axis';\r\n                        var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\r\n                        var axisIndex = axisModel.componentIndex;\r\n                        newOption[axisType] = newOption[axisType] || [];\r\n                        for (var i = 0; i <= axisIndex; i++) {\r\n                            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\r\n                        }\r\n                        newOption[axisType][axisIndex].boundaryGap = type === 'bar';\r\n                    }\r\n                }\r\n            };\r\n            each(radioTypes, function (radio) {\r\n                if (indexOf(radio, type) >= 0) {\r\n                    each(radio, function (item) {\r\n                        model.setIconStatus(item, 'normal');\r\n                    });\r\n                }\r\n            });\r\n            model.setIconStatus(type, 'emphasis');\r\n            ecModel.eachComponent({\r\n                mainType: 'series',\r\n                query: seriesIndex == null ? null : {\r\n                    seriesIndex: seriesIndex\r\n                }\r\n            }, generateNewSeriesTypes);\r\n            var newTitle;\r\n            if (type === 'stack') {\r\n                var seriesOptions = newOption.series;\r\n                var tiledLang = ecModel.getLocale(['toolbox', 'magicType', 'title', 'tiled']);\r\n                var titleLang = ecModel.getLocale(['toolbox', 'magicType', 'title']);\r\n                var isStack = seriesOptions && seriesOptions[0]\r\n                    && seriesOptions[0].stack === INNER_STACK_KEYWORD;\r\n                newTitle = isStack\r\n                    ? merge({ stack: tiledLang }, titleLang)\r\n                    : clone(titleLang);\r\n            }\r\n            api.dispatchAction({\r\n                type: 'changeMagicType',\r\n                currentType: type,\r\n                newOption: newOption,\r\n                newTitle: newTitle,\r\n                featureName: 'magicType'\r\n            });\r\n        };\r\n        return MagicType;\r\n    }(ToolboxFeature));\r\n    var seriesOptGenreator = {\r\n        'line': function (seriesType, seriesId, seriesModel, model) {\r\n            if (seriesType === 'bar') {\r\n                return merge({\r\n                    id: seriesId,\r\n                    type: 'line',\r\n                    data: seriesModel.get('data'),\r\n                    stack: seriesModel.get('stack'),\r\n                    markPoint: seriesModel.get('markPoint'),\r\n                    markLine: seriesModel.get('markLine')\r\n                }, model.get(['option', 'line']) || {}, true);\r\n            }\r\n        },\r\n        'bar': function (seriesType, seriesId, seriesModel, model) {\r\n            if (seriesType === 'line') {\r\n                return merge({\r\n                    id: seriesId,\r\n                    type: 'bar',\r\n                    data: seriesModel.get('data'),\r\n                    stack: seriesModel.get('stack'),\r\n                    markPoint: seriesModel.get('markPoint'),\r\n                    markLine: seriesModel.get('markLine')\r\n                }, model.get(['option', 'bar']) || {}, true);\r\n            }\r\n        },\r\n        'stack': function (seriesType, seriesId, seriesModel, model) {\r\n            var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\r\n            if (seriesType === 'line' || seriesType === 'bar') {\r\n                model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\r\n                return merge({\r\n                    id: seriesId,\r\n                    stack: isStack ? '' : INNER_STACK_KEYWORD\r\n                }, model.get(['option', 'stack']) || {}, true);\r\n            }\r\n        }\r\n    };\r\n    registerAction({\r\n        type: 'changeMagicType',\r\n        event: 'magicTypeChanged',\r\n        update: 'prepareAndUpdate'\r\n    }, function (payload, ecModel) {\r\n        ecModel.mergeOption(payload.newOption);\r\n    });\r\n    registerFeature('magicType', MagicType);\n\n    var BLOCK_SPLITER = new Array(60).join('-');\r\n    var ITEM_SPLITER = '\\t';\r\n    function groupSeries(ecModel) {\r\n        var seriesGroupByCategoryAxis = {};\r\n        var otherSeries = [];\r\n        var meta = [];\r\n        ecModel.eachRawSeries(function (seriesModel) {\r\n            var coordSys = seriesModel.coordinateSystem;\r\n            if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\r\n                var baseAxis = coordSys.getBaseAxis();\r\n                if (baseAxis.type === 'category') {\r\n                    var key = baseAxis.dim + '_' + baseAxis.index;\r\n                    if (!seriesGroupByCategoryAxis[key]) {\r\n                        seriesGroupByCategoryAxis[key] = {\r\n                            categoryAxis: baseAxis,\r\n                            valueAxis: coordSys.getOtherAxis(baseAxis),\r\n                            series: []\r\n                        };\r\n                        meta.push({\r\n                            axisDim: baseAxis.dim,\r\n                            axisIndex: baseAxis.index\r\n                        });\r\n                    }\r\n                    seriesGroupByCategoryAxis[key].series.push(seriesModel);\r\n                }\r\n                else {\r\n                    otherSeries.push(seriesModel);\r\n                }\r\n            }\r\n            else {\r\n                otherSeries.push(seriesModel);\r\n            }\r\n        });\r\n        return {\r\n            seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\r\n            other: otherSeries,\r\n            meta: meta\r\n        };\r\n    }\r\n    function assembleSeriesWithCategoryAxis(groups) {\r\n        var tables = [];\r\n        each(groups, function (group, key) {\r\n            var categoryAxis = group.categoryAxis;\r\n            var valueAxis = group.valueAxis;\r\n            var valueAxisDim = valueAxis.dim;\r\n            var headers = [' '].concat(map(group.series, function (series) {\r\n                return series.name;\r\n            }));\r\n            var columns = [categoryAxis.model.getCategories()];\r\n            each(group.series, function (series) {\r\n                columns.push(series.getRawData().mapArray(valueAxisDim, function (val) {\r\n                    return val;\r\n                }));\r\n            });\r\n            var lines = [headers.join(ITEM_SPLITER)];\r\n            for (var i = 0; i < columns[0].length; i++) {\r\n                var items = [];\r\n                for (var j = 0; j < columns.length; j++) {\r\n                    items.push(columns[j][i]);\r\n                }\r\n                lines.push(items.join(ITEM_SPLITER));\r\n            }\r\n            tables.push(lines.join('\\n'));\r\n        });\r\n        return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\r\n    }\r\n    function assembleOtherSeries(series) {\r\n        return map(series, function (series) {\r\n            var data = series.getRawData();\r\n            var lines = [series.name];\r\n            var vals = [];\r\n            data.each(data.dimensions, function () {\r\n                var argLen = arguments.length;\r\n                var dataIndex = arguments[argLen - 1];\r\n                var name = data.getName(dataIndex);\r\n                for (var i = 0; i < argLen - 1; i++) {\r\n                    vals[i] = arguments[i];\r\n                }\r\n                lines.push((name ? (name + ITEM_SPLITER) : '') + vals.join(ITEM_SPLITER));\r\n            });\r\n            return lines.join('\\n');\r\n        }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\r\n    }\r\n    function getContentFromModel(ecModel) {\r\n        var result = groupSeries(ecModel);\r\n        return {\r\n            value: filter([\r\n                assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis),\r\n                assembleOtherSeries(result.other)\r\n            ], function (str) {\r\n                return !!str.replace(/[\\n\\t\\s]/g, '');\r\n            }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\r\n            meta: result.meta\r\n        };\r\n    }\r\n    function trim$1(str) {\r\n        return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n    }\r\n    function isTSVFormat(block) {\r\n        var firstLine = block.slice(0, block.indexOf('\\n'));\r\n        if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\r\n            return true;\r\n        }\r\n    }\r\n    var itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\r\n    function parseTSVContents(tsv) {\r\n        var tsvLines = tsv.split(/\\n+/g);\r\n        var headers = trim$1(tsvLines.shift()).split(itemSplitRegex);\r\n        var categories = [];\r\n        var series = map(headers, function (header) {\r\n            return {\r\n                name: header,\r\n                data: []\r\n            };\r\n        });\r\n        for (var i = 0; i < tsvLines.length; i++) {\r\n            var items = trim$1(tsvLines[i]).split(itemSplitRegex);\r\n            categories.push(items.shift());\r\n            for (var j = 0; j < items.length; j++) {\r\n                series[j] && (series[j].data[i] = items[j]);\r\n            }\r\n        }\r\n        return {\r\n            series: series,\r\n            categories: categories\r\n        };\r\n    }\r\n    function parseListContents(str) {\r\n        var lines = str.split(/\\n+/g);\r\n        var seriesName = trim$1(lines.shift());\r\n        var data = [];\r\n        for (var i = 0; i < lines.length; i++) {\r\n            var items = trim$1(lines[i]).split(itemSplitRegex);\r\n            var name_1 = '';\r\n            var value = void 0;\r\n            var hasName = false;\r\n            if (isNaN(items[0])) {\r\n                hasName = true;\r\n                name_1 = items[0];\r\n                items = items.slice(1);\r\n                data[i] = {\r\n                    name: name_1,\r\n                    value: []\r\n                };\r\n                value = data[i].value;\r\n            }\r\n            else {\r\n                value = data[i] = [];\r\n            }\r\n            for (var j = 0; j < items.length; j++) {\r\n                value.push(+items[j]);\r\n            }\r\n            if (value.length === 1) {\r\n                hasName ? (data[i].value = value[0]) : (data[i] = value[0]);\r\n            }\r\n        }\r\n        return {\r\n            name: seriesName,\r\n            data: data\r\n        };\r\n    }\r\n    function parseContents(str, blockMetaList) {\r\n        var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\r\n        var newOption = {\r\n            series: []\r\n        };\r\n        each(blocks, function (block, idx) {\r\n            if (isTSVFormat(block)) {\r\n                var result = parseTSVContents(block);\r\n                var blockMeta = blockMetaList[idx];\r\n                var axisKey = blockMeta.axisDim + 'Axis';\r\n                if (blockMeta) {\r\n                    newOption[axisKey] = newOption[axisKey] || [];\r\n                    newOption[axisKey][blockMeta.axisIndex] = {\r\n                        data: result.categories\r\n                    };\r\n                    newOption.series = newOption.series.concat(result.series);\r\n                }\r\n            }\r\n            else {\r\n                var result = parseListContents(block);\r\n                newOption.series.push(result);\r\n            }\r\n        });\r\n        return newOption;\r\n    }\r\n    var DataView = (function (_super) {\r\n        __extends(DataView, _super);\r\n        function DataView() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        DataView.prototype.onclick = function (ecModel, api) {\r\n            var container = api.getDom();\r\n            var model = this.model;\r\n            if (this._dom) {\r\n                container.removeChild(this._dom);\r\n            }\r\n            var root = document.createElement('div');\r\n            root.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;';\r\n            root.style.backgroundColor = model.get('backgroundColor') || '#fff';\r\n            var header = document.createElement('h4');\r\n            var lang = model.get('lang') || [];\r\n            header.innerHTML = lang[0] || model.get('title');\r\n            header.style.cssText = 'margin: 10px 20px;';\r\n            header.style.color = model.get('textColor');\r\n            var viewMain = document.createElement('div');\r\n            var textarea = document.createElement('textarea');\r\n            viewMain.style.cssText = 'display:block;width:100%;overflow:auto;';\r\n            var optionToContent = model.get('optionToContent');\r\n            var contentToOption = model.get('contentToOption');\r\n            var result = getContentFromModel(ecModel);\r\n            if (typeof optionToContent === 'function') {\r\n                var htmlOrDom = optionToContent(api.getOption());\r\n                if (typeof htmlOrDom === 'string') {\r\n                    viewMain.innerHTML = htmlOrDom;\r\n                }\r\n                else if (isDom(htmlOrDom)) {\r\n                    viewMain.appendChild(htmlOrDom);\r\n                }\r\n            }\r\n            else {\r\n                viewMain.appendChild(textarea);\r\n                textarea.readOnly = model.get('readOnly');\r\n                textarea.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';\r\n                textarea.style.color = model.get('textColor');\r\n                textarea.style.borderColor = model.get('textareaBorderColor');\r\n                textarea.style.backgroundColor = model.get('textareaColor');\r\n                textarea.value = result.value;\r\n            }\r\n            var blockMetaList = result.meta;\r\n            var buttonContainer = document.createElement('div');\r\n            buttonContainer.style.cssText = 'position:absolute;bottom:0;left:0;right:0;';\r\n            var buttonStyle = 'float:right;margin-right:20px;border:none;'\r\n                + 'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\r\n            var closeButton = document.createElement('div');\r\n            var refreshButton = document.createElement('div');\r\n            buttonStyle += ';background-color:' + model.get('buttonColor');\r\n            buttonStyle += ';color:' + model.get('buttonTextColor');\r\n            var self = this;\r\n            function close() {\r\n                container.removeChild(root);\r\n                self._dom = null;\r\n            }\r\n            addEventListener(closeButton, 'click', close);\r\n            addEventListener(refreshButton, 'click', function () {\r\n                var newOption;\r\n                try {\r\n                    if (typeof contentToOption === 'function') {\r\n                        newOption = contentToOption(viewMain, api.getOption());\r\n                    }\r\n                    else {\r\n                        newOption = parseContents(textarea.value, blockMetaList);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    close();\r\n                    throw new Error('Data view format error ' + e);\r\n                }\r\n                if (newOption) {\r\n                    api.dispatchAction({\r\n                        type: 'changeDataView',\r\n                        newOption: newOption\r\n                    });\r\n                }\r\n                close();\r\n            });\r\n            closeButton.innerHTML = lang[1];\r\n            refreshButton.innerHTML = lang[2];\r\n            refreshButton.style.cssText = buttonStyle;\r\n            closeButton.style.cssText = buttonStyle;\r\n            !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\r\n            buttonContainer.appendChild(closeButton);\r\n            root.appendChild(header);\r\n            root.appendChild(viewMain);\r\n            root.appendChild(buttonContainer);\r\n            viewMain.style.height = (container.clientHeight - 80) + 'px';\r\n            container.appendChild(root);\r\n            this._dom = root;\r\n        };\r\n        DataView.prototype.remove = function (ecModel, api) {\r\n            this._dom && api.getDom().removeChild(this._dom);\r\n        };\r\n        DataView.prototype.dispose = function (ecModel, api) {\r\n            this.remove(ecModel, api);\r\n        };\r\n        DataView.getDefaultOption = function (ecModel) {\r\n            var defaultOption = {\r\n                show: true,\r\n                readOnly: false,\r\n                optionToContent: null,\r\n                contentToOption: null,\r\n                icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\r\n                title: ecModel.getLocale(['toolbox', 'dataView', 'title']),\r\n                lang: ecModel.getLocale(['toolbox', 'dataView', 'lang']),\r\n                backgroundColor: '#fff',\r\n                textColor: '#000',\r\n                textareaColor: '#fff',\r\n                textareaBorderColor: '#333',\r\n                buttonColor: '#c23531',\r\n                buttonTextColor: '#fff'\r\n            };\r\n            return defaultOption;\r\n        };\r\n        return DataView;\r\n    }(ToolboxFeature));\r\n    function tryMergeDataOption(newData, originalData) {\r\n        return map(newData, function (newVal, idx) {\r\n            var original = originalData && originalData[idx];\r\n            if (isObject(original) && !isArray(original)) {\r\n                if (isObject(newVal) && !isArray(newVal)) {\r\n                    newVal = newVal.value;\r\n                }\r\n                return defaults({\r\n                    value: newVal\r\n                }, original);\r\n            }\r\n            else {\r\n                return newVal;\r\n            }\r\n        });\r\n    }\r\n    registerFeature('dataView', DataView);\r\n    registerAction({\r\n        type: 'changeDataView',\r\n        event: 'dataViewChanged',\r\n        update: 'prepareAndUpdate'\r\n    }, function (payload, ecModel) {\r\n        var newSeriesOptList = [];\r\n        each(payload.newOption.series, function (seriesOpt) {\r\n            var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\r\n            if (!seriesModel) {\r\n                newSeriesOptList.push(extend({\r\n                    type: 'scatter'\r\n                }, seriesOpt));\r\n            }\r\n            else {\r\n                var originalData = seriesModel.get('data');\r\n                newSeriesOptList.push({\r\n                    name: seriesOpt.name,\r\n                    data: tryMergeDataOption(seriesOpt.data, originalData)\r\n                });\r\n            }\r\n        });\r\n        ecModel.mergeOption(defaults({\r\n            series: newSeriesOptList\r\n        }, payload.newOption));\r\n    });\n\n    var BRUSH_PANEL_GLOBAL = true;\r\n    var mathMin$5 = Math.min;\r\n    var mathMax$5 = Math.max;\r\n    var mathPow$2 = Math.pow;\r\n    var COVER_Z = 10000;\r\n    var UNSELECT_THRESHOLD = 6;\r\n    var MIN_RESIZE_LINE_WIDTH = 6;\r\n    var MUTEX_RESOURCE_KEY = 'globalPan';\r\n    var DIRECTION_MAP = {\r\n        w: [0, 0],\r\n        e: [0, 1],\r\n        n: [1, 0],\r\n        s: [1, 1]\r\n    };\r\n    var CURSOR_MAP = {\r\n        w: 'ew',\r\n        e: 'ew',\r\n        n: 'ns',\r\n        s: 'ns',\r\n        ne: 'nesw',\r\n        sw: 'nesw',\r\n        nw: 'nwse',\r\n        se: 'nwse'\r\n    };\r\n    var DEFAULT_BRUSH_OPT = {\r\n        brushStyle: {\r\n            lineWidth: 2,\r\n            stroke: 'rgba(210,219,238,0.3)',\r\n            fill: '#D2DBEE'\r\n        },\r\n        transformable: true,\r\n        brushMode: 'single',\r\n        removeOnClick: false\r\n    };\r\n    var baseUID = 0;\r\n    var BrushController = (function (_super) {\r\n        __extends(BrushController, _super);\r\n        function BrushController(zr) {\r\n            var _this = _super.call(this) || this;\r\n            _this._track = [];\r\n            _this._covers = [];\r\n            _this._handlers = {};\r\n            if (__DEV__) {\r\n                assert(zr);\r\n            }\r\n            _this._zr = zr;\r\n            _this.group = new Group();\r\n            _this._uid = 'brushController_' + baseUID++;\r\n            each(pointerHandlers, function (handler, eventName) {\r\n                this._handlers[eventName] = bind(handler, this);\r\n            }, _this);\r\n            return _this;\r\n        }\r\n        BrushController.prototype.enableBrush = function (brushOption) {\r\n            if (__DEV__) {\r\n                assert(this._mounted);\r\n            }\r\n            this._brushType && this._doDisableBrush();\r\n            brushOption.brushType && this._doEnableBrush(brushOption);\r\n            return this;\r\n        };\r\n        BrushController.prototype._doEnableBrush = function (brushOption) {\r\n            var zr = this._zr;\r\n            if (!this._enableGlobalPan) {\r\n                take(zr, MUTEX_RESOURCE_KEY, this._uid);\r\n            }\r\n            each(this._handlers, function (handler, eventName) {\r\n                zr.on(eventName, handler);\r\n            });\r\n            this._brushType = brushOption.brushType;\r\n            this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\r\n        };\r\n        BrushController.prototype._doDisableBrush = function () {\r\n            var zr = this._zr;\r\n            release(zr, MUTEX_RESOURCE_KEY, this._uid);\r\n            each(this._handlers, function (handler, eventName) {\r\n                zr.off(eventName, handler);\r\n            });\r\n            this._brushType = this._brushOption = null;\r\n        };\r\n        BrushController.prototype.setPanels = function (panelOpts) {\r\n            if (panelOpts && panelOpts.length) {\r\n                var panels_1 = this._panels = {};\r\n                each(panelOpts, function (panelOpts) {\r\n                    panels_1[panelOpts.panelId] = clone(panelOpts);\r\n                });\r\n            }\r\n            else {\r\n                this._panels = null;\r\n            }\r\n            return this;\r\n        };\r\n        BrushController.prototype.mount = function (opt) {\r\n            opt = opt || {};\r\n            if (__DEV__) {\r\n                this._mounted = true;\r\n            }\r\n            this._enableGlobalPan = opt.enableGlobalPan;\r\n            var thisGroup = this.group;\r\n            this._zr.add(thisGroup);\r\n            thisGroup.attr({\r\n                x: opt.x || 0,\r\n                y: opt.y || 0,\r\n                rotation: opt.rotation || 0,\r\n                scaleX: opt.scaleX || 1,\r\n                scaleY: opt.scaleY || 1\r\n            });\r\n            this._transform = thisGroup.getLocalTransform();\r\n            return this;\r\n        };\r\n        BrushController.prototype.updateCovers = function (coverConfigList) {\r\n            if (__DEV__) {\r\n                assert(this._mounted);\r\n            }\r\n            coverConfigList = map(coverConfigList, function (coverConfig) {\r\n                return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\r\n            });\r\n            var tmpIdPrefix = '\\0-brush-index-';\r\n            var oldCovers = this._covers;\r\n            var newCovers = this._covers = [];\r\n            var controller = this;\r\n            var creatingCover = this._creatingCover;\r\n            (new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey))\r\n                .add(addOrUpdate)\r\n                .update(addOrUpdate)\r\n                .remove(remove)\r\n                .execute();\r\n            return this;\r\n            function getKey(brushOption, index) {\r\n                return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index)\r\n                    + '-' + brushOption.brushType;\r\n            }\r\n            function oldGetKey(cover, index) {\r\n                return getKey(cover.__brushOption, index);\r\n            }\r\n            function addOrUpdate(newIndex, oldIndex) {\r\n                var newBrushInternal = coverConfigList[newIndex];\r\n                if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\r\n                    newCovers[newIndex] = oldCovers[oldIndex];\r\n                }\r\n                else {\r\n                    var cover = newCovers[newIndex] = oldIndex != null\r\n                        ? (oldCovers[oldIndex].__brushOption = newBrushInternal,\r\n                            oldCovers[oldIndex])\r\n                        : endCreating(controller, createCover(controller, newBrushInternal));\r\n                    updateCoverAfterCreation(controller, cover);\r\n                }\r\n            }\r\n            function remove(oldIndex) {\r\n                if (oldCovers[oldIndex] !== creatingCover) {\r\n                    controller.group.remove(oldCovers[oldIndex]);\r\n                }\r\n            }\r\n        };\r\n        BrushController.prototype.unmount = function () {\r\n            if (__DEV__) {\r\n                if (!this._mounted) {\r\n                    return;\r\n                }\r\n            }\r\n            this.enableBrush(false);\r\n            clearCovers(this);\r\n            this._zr.remove(this.group);\r\n            if (__DEV__) {\r\n                this._mounted = false;\r\n            }\r\n            return this;\r\n        };\r\n        BrushController.prototype.dispose = function () {\r\n            this.unmount();\r\n            this.off();\r\n        };\r\n        return BrushController;\r\n    }(Eventful));\r\n    function createCover(controller, brushOption) {\r\n        var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\r\n        cover.__brushOption = brushOption;\r\n        updateZ(cover, brushOption);\r\n        controller.group.add(cover);\r\n        return cover;\r\n    }\r\n    function endCreating(controller, creatingCover) {\r\n        var coverRenderer = getCoverRenderer(creatingCover);\r\n        if (coverRenderer.endCreating) {\r\n            coverRenderer.endCreating(controller, creatingCover);\r\n            updateZ(creatingCover, creatingCover.__brushOption);\r\n        }\r\n        return creatingCover;\r\n    }\r\n    function updateCoverShape(controller, cover) {\r\n        var brushOption = cover.__brushOption;\r\n        getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\r\n    }\r\n    function updateZ(cover, brushOption) {\r\n        var z = brushOption.z;\r\n        z == null && (z = COVER_Z);\r\n        cover.traverse(function (el) {\r\n            el.z = z;\r\n            el.z2 = z;\r\n        });\r\n    }\r\n    function updateCoverAfterCreation(controller, cover) {\r\n        getCoverRenderer(cover).updateCommon(controller, cover);\r\n        updateCoverShape(controller, cover);\r\n    }\r\n    function getCoverRenderer(cover) {\r\n        return coverRenderers[cover.__brushOption.brushType];\r\n    }\r\n    function getPanelByPoint(controller, e, localCursorPoint) {\r\n        var panels = controller._panels;\r\n        if (!panels) {\r\n            return BRUSH_PANEL_GLOBAL;\r\n        }\r\n        var panel;\r\n        var transform = controller._transform;\r\n        each(panels, function (pn) {\r\n            pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\r\n        });\r\n        return panel;\r\n    }\r\n    function getPanelByCover(controller, cover) {\r\n        var panels = controller._panels;\r\n        if (!panels) {\r\n            return BRUSH_PANEL_GLOBAL;\r\n        }\r\n        var panelId = cover.__brushOption.panelId;\r\n        return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\r\n    }\r\n    function clearCovers(controller) {\r\n        var covers = controller._covers;\r\n        var originalLength = covers.length;\r\n        each(covers, function (cover) {\r\n            controller.group.remove(cover);\r\n        }, controller);\r\n        covers.length = 0;\r\n        return !!originalLength;\r\n    }\r\n    function trigger$1(controller, opt) {\r\n        var areas = map(controller._covers, function (cover) {\r\n            var brushOption = cover.__brushOption;\r\n            var range = clone(brushOption.range);\r\n            return {\r\n                brushType: brushOption.brushType,\r\n                panelId: brushOption.panelId,\r\n                range: range\r\n            };\r\n        });\r\n        controller.trigger('brush', {\r\n            areas: areas,\r\n            isEnd: !!opt.isEnd,\r\n            removeOnClick: !!opt.removeOnClick\r\n        });\r\n    }\r\n    function shouldShowCover(controller) {\r\n        var track = controller._track;\r\n        if (!track.length) {\r\n            return false;\r\n        }\r\n        var p2 = track[track.length - 1];\r\n        var p1 = track[0];\r\n        var dx = p2[0] - p1[0];\r\n        var dy = p2[1] - p1[1];\r\n        var dist = mathPow$2(dx * dx + dy * dy, 0.5);\r\n        return dist > UNSELECT_THRESHOLD;\r\n    }\r\n    function getTrackEnds(track) {\r\n        var tail = track.length - 1;\r\n        tail < 0 && (tail = 0);\r\n        return [track[0], track[tail]];\r\n    }\r\n    function createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\r\n        var cover = new Group();\r\n        cover.add(new Rect({\r\n            name: 'main',\r\n            style: makeStyle(brushOption),\r\n            silent: true,\r\n            draggable: true,\r\n            cursor: 'move',\r\n            drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\r\n            ondragend: curry(trigger$1, controller, { isEnd: true })\r\n        }));\r\n        each(edgeNameSequences, function (nameSequence) {\r\n            cover.add(new Rect({\r\n                name: nameSequence.join(''),\r\n                style: { opacity: 0 },\r\n                draggable: true,\r\n                silent: true,\r\n                invisible: true,\r\n                drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\r\n                ondragend: curry(trigger$1, controller, { isEnd: true })\r\n            }));\r\n        });\r\n        return cover;\r\n    }\r\n    function updateBaseRect(controller, cover, localRange, brushOption) {\r\n        var lineWidth = brushOption.brushStyle.lineWidth || 0;\r\n        var handleSize = mathMax$5(lineWidth, MIN_RESIZE_LINE_WIDTH);\r\n        var x = localRange[0][0];\r\n        var y = localRange[1][0];\r\n        var xa = x - lineWidth / 2;\r\n        var ya = y - lineWidth / 2;\r\n        var x2 = localRange[0][1];\r\n        var y2 = localRange[1][1];\r\n        var x2a = x2 - handleSize + lineWidth / 2;\r\n        var y2a = y2 - handleSize + lineWidth / 2;\r\n        var width = x2 - x;\r\n        var height = y2 - y;\r\n        var widtha = width + lineWidth;\r\n        var heighta = height + lineWidth;\r\n        updateRectShape(controller, cover, 'main', x, y, width, height);\r\n        if (brushOption.transformable) {\r\n            updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\r\n            updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\r\n            updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\r\n            updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\r\n            updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\r\n            updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\r\n            updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\r\n            updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\r\n        }\r\n    }\r\n    function updateCommon(controller, cover) {\r\n        var brushOption = cover.__brushOption;\r\n        var transformable = brushOption.transformable;\r\n        var mainEl = cover.childAt(0);\r\n        mainEl.useStyle(makeStyle(brushOption));\r\n        mainEl.attr({\r\n            silent: !transformable,\r\n            cursor: transformable ? 'move' : 'default'\r\n        });\r\n        each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\r\n            var el = cover.childOfName(nameSequence.join(''));\r\n            var globalDir = nameSequence.length === 1\r\n                ? getGlobalDirection1(controller, nameSequence[0])\r\n                : getGlobalDirection2(controller, nameSequence);\r\n            el && el.attr({\r\n                silent: !transformable,\r\n                invisible: !transformable,\r\n                cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\r\n            });\r\n        });\r\n    }\r\n    function updateRectShape(controller, cover, name, x, y, w, h) {\r\n        var el = cover.childOfName(name);\r\n        el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\r\n    }\r\n    function makeStyle(brushOption) {\r\n        return defaults({ strokeNoScale: true }, brushOption.brushStyle);\r\n    }\r\n    function formatRectRange(x, y, x2, y2) {\r\n        var min = [mathMin$5(x, x2), mathMin$5(y, y2)];\r\n        var max = [mathMax$5(x, x2), mathMax$5(y, y2)];\r\n        return [\r\n            [min[0], max[0]],\r\n            [min[1], max[1]]\r\n        ];\r\n    }\r\n    function getTransform$1(controller) {\r\n        return getTransform(controller.group);\r\n    }\r\n    function getGlobalDirection1(controller, localDirName) {\r\n        var map = { w: 'left', e: 'right', n: 'top', s: 'bottom' };\r\n        var inverseMap = { left: 'w', right: 'e', top: 'n', bottom: 's' };\r\n        var dir = transformDirection(map[localDirName], getTransform$1(controller));\r\n        return inverseMap[dir];\r\n    }\r\n    function getGlobalDirection2(controller, localDirNameSeq) {\r\n        var globalDir = [\r\n            getGlobalDirection1(controller, localDirNameSeq[0]),\r\n            getGlobalDirection1(controller, localDirNameSeq[1])\r\n        ];\r\n        (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\r\n        return globalDir.join('');\r\n    }\r\n    function driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\r\n        var brushOption = cover.__brushOption;\r\n        var rectRange = rectRangeConverter.toRectRange(brushOption.range);\r\n        var localDelta = toLocalDelta(controller, dx, dy);\r\n        each(dirNameSequence, function (dirName) {\r\n            var ind = DIRECTION_MAP[dirName];\r\n            rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\r\n        });\r\n        brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\r\n        updateCoverAfterCreation(controller, cover);\r\n        trigger$1(controller, { isEnd: false });\r\n    }\r\n    function driftPolygon(controller, cover, dx, dy) {\r\n        var range = cover.__brushOption.range;\r\n        var localDelta = toLocalDelta(controller, dx, dy);\r\n        each(range, function (point) {\r\n            point[0] += localDelta[0];\r\n            point[1] += localDelta[1];\r\n        });\r\n        updateCoverAfterCreation(controller, cover);\r\n        trigger$1(controller, { isEnd: false });\r\n    }\r\n    function toLocalDelta(controller, dx, dy) {\r\n        var thisGroup = controller.group;\r\n        var localD = thisGroup.transformCoordToLocal(dx, dy);\r\n        var localZero = thisGroup.transformCoordToLocal(0, 0);\r\n        return [localD[0] - localZero[0], localD[1] - localZero[1]];\r\n    }\r\n    function clipByPanel(controller, cover, data) {\r\n        var panel = getPanelByCover(controller, cover);\r\n        return (panel && panel !== BRUSH_PANEL_GLOBAL)\r\n            ? panel.clipPath(data, controller._transform)\r\n            : clone(data);\r\n    }\r\n    function pointsToRect(points) {\r\n        var xmin = mathMin$5(points[0][0], points[1][0]);\r\n        var ymin = mathMin$5(points[0][1], points[1][1]);\r\n        var xmax = mathMax$5(points[0][0], points[1][0]);\r\n        var ymax = mathMax$5(points[0][1], points[1][1]);\r\n        return {\r\n            x: xmin,\r\n            y: ymin,\r\n            width: xmax - xmin,\r\n            height: ymax - ymin\r\n        };\r\n    }\r\n    function resetCursor(controller, e, localCursorPoint) {\r\n        if (!controller._brushType\r\n            || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\r\n            return;\r\n        }\r\n        var zr = controller._zr;\r\n        var covers = controller._covers;\r\n        var currPanel = getPanelByPoint(controller, e, localCursorPoint);\r\n        if (!controller._dragging) {\r\n            for (var i = 0; i < covers.length; i++) {\r\n                var brushOption = covers[i].__brushOption;\r\n                if (currPanel\r\n                    && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId)\r\n                    && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        currPanel && zr.setCursorStyle('crosshair');\r\n    }\r\n    function preventDefault(e) {\r\n        var rawE = e.event;\r\n        rawE.preventDefault && rawE.preventDefault();\r\n    }\r\n    function mainShapeContain(cover, x, y) {\r\n        return cover.childOfName('main').contain(x, y);\r\n    }\r\n    function updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\r\n        var creatingCover = controller._creatingCover;\r\n        var panel = controller._creatingPanel;\r\n        var thisBrushOption = controller._brushOption;\r\n        var eventParams;\r\n        controller._track.push(localCursorPoint.slice());\r\n        if (shouldShowCover(controller) || creatingCover) {\r\n            if (panel && !creatingCover) {\r\n                thisBrushOption.brushMode === 'single' && clearCovers(controller);\r\n                var brushOption = clone(thisBrushOption);\r\n                brushOption.brushType = determineBrushType(brushOption.brushType, panel);\r\n                brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\r\n                creatingCover = controller._creatingCover = createCover(controller, brushOption);\r\n                controller._covers.push(creatingCover);\r\n            }\r\n            if (creatingCover) {\r\n                var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\r\n                var coverBrushOption = creatingCover.__brushOption;\r\n                coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\r\n                if (isEnd) {\r\n                    endCreating(controller, creatingCover);\r\n                    coverRenderer.updateCommon(controller, creatingCover);\r\n                }\r\n                updateCoverShape(controller, creatingCover);\r\n                eventParams = { isEnd: isEnd };\r\n            }\r\n        }\r\n        else if (isEnd\r\n            && thisBrushOption.brushMode === 'single'\r\n            && thisBrushOption.removeOnClick) {\r\n            if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\r\n                eventParams = { isEnd: isEnd, removeOnClick: true };\r\n            }\r\n        }\r\n        return eventParams;\r\n    }\r\n    function determineBrushType(brushType, panel) {\r\n        if (brushType === 'auto') {\r\n            if (__DEV__) {\r\n                assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\r\n            }\r\n            return panel.defaultBrushType;\r\n        }\r\n        return brushType;\r\n    }\r\n    var pointerHandlers = {\r\n        mousedown: function (e) {\r\n            if (this._dragging) {\r\n                handleDragEnd(this, e);\r\n            }\r\n            else if (!e.target || !e.target.draggable) {\r\n                preventDefault(e);\r\n                var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\r\n                this._creatingCover = null;\r\n                var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\r\n                if (panel) {\r\n                    this._dragging = true;\r\n                    this._track = [localCursorPoint.slice()];\r\n                }\r\n            }\r\n        },\r\n        mousemove: function (e) {\r\n            var x = e.offsetX;\r\n            var y = e.offsetY;\r\n            var localCursorPoint = this.group.transformCoordToLocal(x, y);\r\n            resetCursor(this, e, localCursorPoint);\r\n            if (this._dragging) {\r\n                preventDefault(e);\r\n                var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\r\n                eventParams && trigger$1(this, eventParams);\r\n            }\r\n        },\r\n        mouseup: function (e) {\r\n            handleDragEnd(this, e);\r\n        }\r\n    };\r\n    function handleDragEnd(controller, e) {\r\n        if (controller._dragging) {\r\n            preventDefault(e);\r\n            var x = e.offsetX;\r\n            var y = e.offsetY;\r\n            var localCursorPoint = controller.group.transformCoordToLocal(x, y);\r\n            var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\r\n            controller._dragging = false;\r\n            controller._track = [];\r\n            controller._creatingCover = null;\r\n            eventParams && trigger$1(controller, eventParams);\r\n        }\r\n    }\r\n    function isOutsideZrArea(controller, x, y) {\r\n        var zr = controller._zr;\r\n        return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\r\n    }\r\n    var coverRenderers = {\r\n        lineX: getLineRenderer(0),\r\n        lineY: getLineRenderer(1),\r\n        rect: {\r\n            createCover: function (controller, brushOption) {\r\n                function returnInput(range) {\r\n                    return range;\r\n                }\r\n                return createBaseRectCover({\r\n                    toRectRange: returnInput,\r\n                    fromRectRange: returnInput\r\n                }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\r\n            },\r\n            getCreatingRange: function (localTrack) {\r\n                var ends = getTrackEnds(localTrack);\r\n                return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\r\n            },\r\n            updateCoverShape: function (controller, cover, localRange, brushOption) {\r\n                updateBaseRect(controller, cover, localRange, brushOption);\r\n            },\r\n            updateCommon: updateCommon,\r\n            contain: mainShapeContain\r\n        },\r\n        polygon: {\r\n            createCover: function (controller, brushOption) {\r\n                var cover = new Group();\r\n                cover.add(new Polyline({\r\n                    name: 'main',\r\n                    style: makeStyle(brushOption),\r\n                    silent: true\r\n                }));\r\n                return cover;\r\n            },\r\n            getCreatingRange: function (localTrack) {\r\n                return localTrack;\r\n            },\r\n            endCreating: function (controller, cover) {\r\n                cover.remove(cover.childAt(0));\r\n                cover.add(new Polygon({\r\n                    name: 'main',\r\n                    draggable: true,\r\n                    drift: curry(driftPolygon, controller, cover),\r\n                    ondragend: curry(trigger$1, controller, { isEnd: true })\r\n                }));\r\n            },\r\n            updateCoverShape: function (controller, cover, localRange, brushOption) {\r\n                cover.childAt(0).setShape({\r\n                    points: clipByPanel(controller, cover, localRange)\r\n                });\r\n            },\r\n            updateCommon: updateCommon,\r\n            contain: mainShapeContain\r\n        }\r\n    };\r\n    function getLineRenderer(xyIndex) {\r\n        return {\r\n            createCover: function (controller, brushOption) {\r\n                return createBaseRectCover({\r\n                    toRectRange: function (range) {\r\n                        var rectRange = [range, [0, 100]];\r\n                        xyIndex && rectRange.reverse();\r\n                        return rectRange;\r\n                    },\r\n                    fromRectRange: function (rectRange) {\r\n                        return rectRange[xyIndex];\r\n                    }\r\n                }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\r\n            },\r\n            getCreatingRange: function (localTrack) {\r\n                var ends = getTrackEnds(localTrack);\r\n                var min = mathMin$5(ends[0][xyIndex], ends[1][xyIndex]);\r\n                var max = mathMax$5(ends[0][xyIndex], ends[1][xyIndex]);\r\n                return [min, max];\r\n            },\r\n            updateCoverShape: function (controller, cover, localRange, brushOption) {\r\n                var otherExtent;\r\n                var panel = getPanelByCover(controller, cover);\r\n                if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\r\n                    otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\r\n                }\r\n                else {\r\n                    var zr = controller._zr;\r\n                    otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\r\n                }\r\n                var rectRange = [localRange, otherExtent];\r\n                xyIndex && rectRange.reverse();\r\n                updateBaseRect(controller, cover, rectRange, brushOption);\r\n            },\r\n            updateCommon: updateCommon,\r\n            contain: mainShapeContain\r\n        };\r\n    }\n\n    var IRRELEVANT_EXCLUDES = { 'axisPointer': 1, 'tooltip': 1, 'brush': 1 };\r\n    function onIrrelevantElement(e, api, targetCoordSysModel) {\r\n        var model = api.getComponentByElement(e.topTarget);\r\n        var coordSys = model && model.coordinateSystem;\r\n        return model\r\n            && model !== targetCoordSysModel\r\n            && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType)\r\n            && (coordSys && coordSys.model !== targetCoordSysModel);\r\n    }\n\n    function makeRectPanelClipPath(rect) {\r\n        rect = normalizeRect(rect);\r\n        return function (localPoints) {\r\n            return clipPointsByRect(localPoints, rect);\r\n        };\r\n    }\r\n    function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\r\n        rect = normalizeRect(rect);\r\n        return function (xyIndex) {\r\n            var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\r\n            var brushWidth = idx ? rect.width : rect.height;\r\n            var base = idx ? rect.x : rect.y;\r\n            return [base, base + (brushWidth || 0)];\r\n        };\r\n    }\r\n    function makeRectIsTargetByCursor(rect, api, targetModel) {\r\n        var boundingRect = normalizeRect(rect);\r\n        return function (e, localCursorPoint) {\r\n            return boundingRect.contain(localCursorPoint[0], localCursorPoint[1])\r\n                && !onIrrelevantElement(e, api, targetModel);\r\n        };\r\n    }\r\n    function normalizeRect(rect) {\r\n        return BoundingRect.create(rect);\r\n    }\n\n    var COORD_CONVERTS = ['dataToPoint', 'pointToData'];\r\n    var INCLUDE_FINDER_MAIN_TYPES = [\r\n        'grid', 'xAxis', 'yAxis', 'geo', 'graph',\r\n        'polar', 'radiusAxis', 'angleAxis', 'bmap'\r\n    ];\r\n    var BrushTargetManager = (function () {\r\n        function BrushTargetManager(finder, ecModel, opt) {\r\n            var _this = this;\r\n            this._targetInfoList = [];\r\n            var foundCpts = parseFinder$1(ecModel, finder);\r\n            each(targetInfoBuilders, function (builder, type) {\r\n                if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\r\n                    builder(foundCpts, _this._targetInfoList);\r\n                }\r\n            });\r\n        }\r\n        BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\r\n            this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\r\n                (area.coordRanges || (area.coordRanges = [])).push(coordRange);\r\n                if (!area.coordRange) {\r\n                    area.coordRange = coordRange;\r\n                    var result = coordConvert[area.brushType](0, coordSys, coordRange);\r\n                    area.__rangeOffset = {\r\n                        offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\r\n                        xyMinMax: result.xyMinMax\r\n                    };\r\n                }\r\n            });\r\n            return areas;\r\n        };\r\n        BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\r\n            each(areas, function (area) {\r\n                var targetInfo = this.findTargetInfo(area, ecModel);\r\n                if (targetInfo && targetInfo !== true) {\r\n                    each(targetInfo.coordSyses, function (coordSys) {\r\n                        var result = coordConvert[area.brushType](1, coordSys, area.range);\r\n                        cb(area, result.values, coordSys, ecModel);\r\n                    });\r\n                }\r\n            }, this);\r\n        };\r\n        BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\r\n            each(areas, function (area) {\r\n                var targetInfo = this.findTargetInfo(area, ecModel);\r\n                if (__DEV__) {\r\n                    assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\r\n                    assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\r\n                }\r\n                area.range = area.range || [];\r\n                if (targetInfo && targetInfo !== true) {\r\n                    area.panelId = targetInfo.panelId;\r\n                    var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\r\n                    var rangeOffset = area.__rangeOffset;\r\n                    area.range = rangeOffset\r\n                        ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax))\r\n                        : result.values;\r\n                }\r\n            }, this);\r\n        };\r\n        BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\r\n            return map(this._targetInfoList, function (targetInfo) {\r\n                var rect = targetInfo.getPanelRect();\r\n                return {\r\n                    panelId: targetInfo.panelId,\r\n                    defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\r\n                    clipPath: makeRectPanelClipPath(rect),\r\n                    isTargetByCursor: makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\r\n                    getLinearBrushOtherExtent: makeLinearBrushOtherExtent(rect)\r\n                };\r\n            });\r\n        };\r\n        BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\r\n            var targetInfo = this.findTargetInfo(area, ecModel);\r\n            return targetInfo === true || (targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0);\r\n        };\r\n        BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\r\n            var targetInfoList = this._targetInfoList;\r\n            var foundCpts = parseFinder$1(ecModel, area);\r\n            for (var i = 0; i < targetInfoList.length; i++) {\r\n                var targetInfo = targetInfoList[i];\r\n                var areaPanelId = area.panelId;\r\n                if (areaPanelId) {\r\n                    if (targetInfo.panelId === areaPanelId) {\r\n                        return targetInfo;\r\n                    }\r\n                }\r\n                else {\r\n                    for (var j = 0; j < targetInfoMatchers.length; j++) {\r\n                        if (targetInfoMatchers[j](foundCpts, targetInfo)) {\r\n                            return targetInfo;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n        return BrushTargetManager;\r\n    }());\r\n    function formatMinMax(minMax) {\r\n        minMax[0] > minMax[1] && minMax.reverse();\r\n        return minMax;\r\n    }\r\n    function parseFinder$1(ecModel, finder) {\r\n        return parseFinder(ecModel, finder, { includeMainTypes: INCLUDE_FINDER_MAIN_TYPES });\r\n    }\r\n    var targetInfoBuilders = {\r\n        grid: function (foundCpts, targetInfoList) {\r\n            var xAxisModels = foundCpts.xAxisModels;\r\n            var yAxisModels = foundCpts.yAxisModels;\r\n            var gridModels = foundCpts.gridModels;\r\n            var gridModelMap = createHashMap();\r\n            var xAxesHas = {};\r\n            var yAxesHas = {};\r\n            if (!xAxisModels && !yAxisModels && !gridModels) {\r\n                return;\r\n            }\r\n            each(xAxisModels, function (axisModel) {\r\n                var gridModel = axisModel.axis.grid.model;\r\n                gridModelMap.set(gridModel.id, gridModel);\r\n                xAxesHas[gridModel.id] = true;\r\n            });\r\n            each(yAxisModels, function (axisModel) {\r\n                var gridModel = axisModel.axis.grid.model;\r\n                gridModelMap.set(gridModel.id, gridModel);\r\n                yAxesHas[gridModel.id] = true;\r\n            });\r\n            each(gridModels, function (gridModel) {\r\n                gridModelMap.set(gridModel.id, gridModel);\r\n                xAxesHas[gridModel.id] = true;\r\n                yAxesHas[gridModel.id] = true;\r\n            });\r\n            gridModelMap.each(function (gridModel) {\r\n                var grid = gridModel.coordinateSystem;\r\n                var cartesians = [];\r\n                each(grid.getCartesians(), function (cartesian, index) {\r\n                    if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0\r\n                        || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\r\n                        cartesians.push(cartesian);\r\n                    }\r\n                });\r\n                targetInfoList.push({\r\n                    panelId: 'grid--' + gridModel.id,\r\n                    gridModel: gridModel,\r\n                    coordSysModel: gridModel,\r\n                    coordSys: cartesians[0],\r\n                    coordSyses: cartesians,\r\n                    getPanelRect: panelRectBuilders.grid,\r\n                    xAxisDeclared: xAxesHas[gridModel.id],\r\n                    yAxisDeclared: yAxesHas[gridModel.id]\r\n                });\r\n            });\r\n        },\r\n        geo: function (foundCpts, targetInfoList) {\r\n            each(foundCpts.geoModels, function (geoModel) {\r\n                var coordSys = geoModel.coordinateSystem;\r\n                targetInfoList.push({\r\n                    panelId: 'geo--' + geoModel.id,\r\n                    geoModel: geoModel,\r\n                    coordSysModel: geoModel,\r\n                    coordSys: coordSys,\r\n                    coordSyses: [coordSys],\r\n                    getPanelRect: panelRectBuilders.geo\r\n                });\r\n            });\r\n        }\r\n    };\r\n    var targetInfoMatchers = [\r\n        function (foundCpts, targetInfo) {\r\n            var xAxisModel = foundCpts.xAxisModel;\r\n            var yAxisModel = foundCpts.yAxisModel;\r\n            var gridModel = foundCpts.gridModel;\r\n            !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\r\n            !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\r\n            return gridModel && gridModel === targetInfo.gridModel;\r\n        },\r\n        function (foundCpts, targetInfo) {\r\n            var geoModel = foundCpts.geoModel;\r\n            return geoModel && geoModel === targetInfo.geoModel;\r\n        }\r\n    ];\r\n    var panelRectBuilders = {\r\n        grid: function () {\r\n            return this.coordSys.master.getRect().clone();\r\n        },\r\n        geo: function () {\r\n            var coordSys = this.coordSys;\r\n            var rect = coordSys.getBoundingRect().clone();\r\n            rect.applyTransform(getTransform(coordSys));\r\n            return rect;\r\n        }\r\n    };\r\n    var coordConvert = {\r\n        lineX: curry(axisConvert, 0),\r\n        lineY: curry(axisConvert, 1),\r\n        rect: function (to, coordSys, rangeOrCoordRange) {\r\n            var xminymin = coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]]);\r\n            var xmaxymax = coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]]);\r\n            var values = [\r\n                formatMinMax([xminymin[0], xmaxymax[0]]),\r\n                formatMinMax([xminymin[1], xmaxymax[1]])\r\n            ];\r\n            return { values: values, xyMinMax: values };\r\n        },\r\n        polygon: function (to, coordSys, rangeOrCoordRange) {\r\n            var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\r\n            var values = map(rangeOrCoordRange, function (item) {\r\n                var p = coordSys[COORD_CONVERTS[to]](item);\r\n                xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\r\n                xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\r\n                xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\r\n                xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\r\n                return p;\r\n            });\r\n            return { values: values, xyMinMax: xyMinMax };\r\n        }\r\n    };\r\n    function axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\r\n        if (__DEV__) {\r\n            assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\r\n        }\r\n        var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\r\n        var values = formatMinMax(map([0, 1], function (i) {\r\n            return to\r\n                ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]))\r\n                : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\r\n        }));\r\n        var xyMinMax = [];\r\n        xyMinMax[axisNameIndex] = values;\r\n        xyMinMax[1 - axisNameIndex] = [NaN, NaN];\r\n        return { values: values, xyMinMax: xyMinMax };\r\n    }\r\n    var diffProcessor = {\r\n        lineX: curry(axisDiffProcessor, 0),\r\n        lineY: curry(axisDiffProcessor, 1),\r\n        rect: function (values, refer, scales) {\r\n            return [\r\n                [values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]],\r\n                [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]\r\n            ];\r\n        },\r\n        polygon: function (values, refer, scales) {\r\n            return map(values, function (item, idx) {\r\n                return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\r\n            });\r\n        }\r\n    };\r\n    function axisDiffProcessor(axisNameIndex, values, refer, scales) {\r\n        return [\r\n            values[0] - scales[axisNameIndex] * refer[0],\r\n            values[1] - scales[axisNameIndex] * refer[1]\r\n        ];\r\n    }\r\n    function getScales(xyMinMaxCurr, xyMinMaxOrigin) {\r\n        var sizeCurr = getSize(xyMinMaxCurr);\r\n        var sizeOrigin = getSize(xyMinMaxOrigin);\r\n        var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\r\n        isNaN(scales[0]) && (scales[0] = 1);\r\n        isNaN(scales[1]) && (scales[1] = 1);\r\n        return scales;\r\n    }\r\n    function getSize(xyMinMax) {\r\n        return xyMinMax\r\n            ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]]\r\n            : [NaN, NaN];\r\n    }\n\n    var each$9 = each;\r\n    var inner$f = makeInner();\r\n    function push(ecModel, newSnapshot) {\r\n        var storedSnapshots = getStoreSnapshots(ecModel);\r\n        each$9(newSnapshot, function (batchItem, dataZoomId) {\r\n            var i = storedSnapshots.length - 1;\r\n            for (; i >= 0; i--) {\r\n                var snapshot = storedSnapshots[i];\r\n                if (snapshot[dataZoomId]) {\r\n                    break;\r\n                }\r\n            }\r\n            if (i < 0) {\r\n                var dataZoomModel = ecModel.queryComponents({ mainType: 'dataZoom', subType: 'select', id: dataZoomId })[0];\r\n                if (dataZoomModel) {\r\n                    var percentRange = dataZoomModel.getPercentRange();\r\n                    storedSnapshots[0][dataZoomId] = {\r\n                        dataZoomId: dataZoomId,\r\n                        start: percentRange[0],\r\n                        end: percentRange[1]\r\n                    };\r\n                }\r\n            }\r\n        });\r\n        storedSnapshots.push(newSnapshot);\r\n    }\r\n    function pop(ecModel) {\r\n        var storedSnapshots = getStoreSnapshots(ecModel);\r\n        var head = storedSnapshots[storedSnapshots.length - 1];\r\n        storedSnapshots.length > 1 && storedSnapshots.pop();\r\n        var snapshot = {};\r\n        each$9(head, function (batchItem, dataZoomId) {\r\n            for (var i = storedSnapshots.length - 1; i >= 0; i--) {\r\n                batchItem = storedSnapshots[i][dataZoomId];\r\n                if (batchItem) {\r\n                    snapshot[dataZoomId] = batchItem;\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        return snapshot;\r\n    }\r\n    function clear$1(ecModel) {\r\n        inner$f(ecModel).snapshots = null;\r\n    }\r\n    function count(ecModel) {\r\n        return getStoreSnapshots(ecModel).length;\r\n    }\r\n    function getStoreSnapshots(ecModel) {\r\n        var store = inner$f(ecModel);\r\n        if (!store.snapshots) {\r\n            store.snapshots = [{}];\r\n        }\r\n        return store.snapshots;\r\n    }\n\n    var SelectDataZoomModel = (function (_super) {\r\n        __extends(SelectDataZoomModel, _super);\r\n        function SelectDataZoomModel() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = SelectDataZoomModel.type;\r\n            return _this;\r\n        }\r\n        SelectDataZoomModel.type = 'dataZoom.select';\r\n        return SelectDataZoomModel;\r\n    }(DataZoomModel));\r\n    ComponentModel.registerClass(SelectDataZoomModel);\n\n    var SelectDataZoomView = (function (_super) {\r\n        __extends(SelectDataZoomView, _super);\r\n        function SelectDataZoomView() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.type = SelectDataZoomView.type;\r\n            return _this;\r\n        }\r\n        SelectDataZoomView.type = 'dataZoom.select';\r\n        return SelectDataZoomView;\r\n    }(DataZoomView));\r\n    ComponentView.registerClass(SelectDataZoomView);\n\n    var each$a = each;\r\n    var DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\r\n    var DataZoomFeature = (function (_super) {\r\n        __extends(DataZoomFeature, _super);\r\n        function DataZoomFeature() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\r\n            if (!this.brushController) {\r\n                this.brushController = new BrushController(api.getZr());\r\n                this.brushController.on('brush', bind(this._onBrush, this))\r\n                    .mount();\r\n            }\r\n            updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\r\n            updateBackBtnStatus(featureModel, ecModel);\r\n        };\r\n        DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\r\n            handlers[type].call(this);\r\n        };\r\n        DataZoomFeature.prototype.remove = function (ecModel, api) {\r\n            this.brushController.unmount();\r\n        };\r\n        DataZoomFeature.prototype.dispose = function (ecModel, api) {\r\n            this.brushController.dispose();\r\n        };\r\n        DataZoomFeature.prototype._onBrush = function (eventParam) {\r\n            var areas = eventParam.areas;\r\n            if (!eventParam.isEnd || !areas.length) {\r\n                return;\r\n            }\r\n            var snapshot = {};\r\n            var ecModel = this.ecModel;\r\n            this.brushController.updateCovers([]);\r\n            var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, { include: ['grid'] });\r\n            brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\r\n                if (coordSys.type !== 'cartesian2d') {\r\n                    return;\r\n                }\r\n                var brushType = area.brushType;\r\n                if (brushType === 'rect') {\r\n                    setBatch('x', coordSys, coordRange[0]);\r\n                    setBatch('y', coordSys, coordRange[1]);\r\n                }\r\n                else {\r\n                    setBatch({ lineX: 'x', lineY: 'y' }[brushType], coordSys, coordRange);\r\n                }\r\n            });\r\n            push(ecModel, snapshot);\r\n            this._dispatchZoomAction(snapshot);\r\n            function setBatch(dimName, coordSys, minMax) {\r\n                var axis = coordSys.getAxis(dimName);\r\n                var axisModel = axis.model;\r\n                var dataZoomModel = findDataZoom(dimName, axisModel, ecModel);\r\n                var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\r\n                if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\r\n                    minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\r\n                }\r\n                dataZoomModel && (snapshot[dataZoomModel.id] = {\r\n                    dataZoomId: dataZoomModel.id,\r\n                    startValue: minMax[0],\r\n                    endValue: minMax[1]\r\n                });\r\n            }\r\n            function findDataZoom(dimName, axisModel, ecModel) {\r\n                var found;\r\n                ecModel.eachComponent({ mainType: 'dataZoom', subType: 'select' }, function (dzModel) {\r\n                    var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\r\n                    has && (found = dzModel);\r\n                });\r\n                return found;\r\n            }\r\n        };\r\n        DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\r\n            var batch = [];\r\n            each$a(snapshot, function (batchItem, dataZoomId) {\r\n                batch.push(clone(batchItem));\r\n            });\r\n            batch.length && this.api.dispatchAction({\r\n                type: 'dataZoom',\r\n                from: this.uid,\r\n                batch: batch\r\n            });\r\n        };\r\n        DataZoomFeature.getDefaultOption = function (ecModel) {\r\n            var defaultOption = {\r\n                show: true,\r\n                filterMode: 'filter',\r\n                icon: {\r\n                    zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\r\n                    back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\r\n                },\r\n                title: ecModel.getLocale(['toolbox', 'dataZoom', 'title'])\r\n            };\r\n            return defaultOption;\r\n        };\r\n        return DataZoomFeature;\r\n    }(ToolboxFeature));\r\n    var handlers = {\r\n        zoom: function () {\r\n            var nextActive = !this.isZoomActive;\r\n            this.api.dispatchAction({\r\n                type: 'takeGlobalCursor',\r\n                key: 'dataZoomSelect',\r\n                dataZoomSelectActive: nextActive\r\n            });\r\n        },\r\n        back: function () {\r\n            this._dispatchZoomAction(pop(this.ecModel));\r\n        }\r\n    };\r\n    function makeAxisFinder(dzFeatureModel) {\r\n        var setting = {\r\n            xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\r\n            yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\r\n            xAxisId: dzFeatureModel.get('xAxisId', true),\r\n            yAxisId: dzFeatureModel.get('yAxisId', true)\r\n        };\r\n        if (setting.xAxisIndex == null && setting.xAxisId == null) {\r\n            setting.xAxisIndex = 'all';\r\n        }\r\n        if (setting.yAxisIndex == null && setting.yAxisId == null) {\r\n            setting.yAxisIndex = 'all';\r\n        }\r\n        return setting;\r\n    }\r\n    function updateBackBtnStatus(featureModel, ecModel) {\r\n        featureModel.setIconStatus('back', count(ecModel) > 1 ? 'emphasis' : 'normal');\r\n    }\r\n    function updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\r\n        var zoomActive = view.isZoomActive;\r\n        if (payload && payload.type === 'takeGlobalCursor') {\r\n            zoomActive = payload.key === 'dataZoomSelect'\r\n                ? payload.dataZoomSelectActive : false;\r\n        }\r\n        view.isZoomActive = zoomActive;\r\n        featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\r\n        var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, { include: ['grid'] });\r\n        var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\r\n            return (targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared)\r\n                ? 'lineX'\r\n                : (!targetInfo.xAxisDeclared && targetInfo.yAxisDeclared)\r\n                    ? 'lineY'\r\n                    : 'rect';\r\n        });\r\n        view.brushController\r\n            .setPanels(panels)\r\n            .enableBrush((zoomActive && panels.length)\r\n            ? {\r\n                brushType: 'auto',\r\n                brushStyle: {\r\n                    lineWidth: 0,\r\n                    fill: 'rgba(210,219,238,0.2)'\r\n                }\r\n            }\r\n            : false);\r\n    }\r\n    registerFeature('dataZoom', DataZoomFeature);\r\n    registerInternalOptionCreator('dataZoom', function (ecModel) {\r\n        var toolboxModel = ecModel.getComponent('toolbox', 0);\r\n        if (!toolboxModel) {\r\n            return;\r\n        }\r\n        var dzFeatureModel = toolboxModel.getModel(['feature', 'dataZoom']);\r\n        var dzOptions = [];\r\n        var finder = makeAxisFinder(dzFeatureModel);\r\n        var finderResult = parseFinder(ecModel, finder);\r\n        each$a(finderResult.xAxisModels, function (axisModel) { return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex'); });\r\n        each$a(finderResult.yAxisModels, function (axisModel) { return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex'); });\r\n        function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\r\n            var axisIndex = axisModel.componentIndex;\r\n            var newOpt = {\r\n                type: 'select',\r\n                $fromToolbox: true,\r\n                filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\r\n                id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\r\n            };\r\n            newOpt[axisIndexPropName] = axisIndex;\r\n            dzOptions.push(newOpt);\r\n        }\r\n        return dzOptions;\r\n    });\n\n    var RestoreOption = (function (_super) {\r\n        __extends(RestoreOption, _super);\r\n        function RestoreOption() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        RestoreOption.prototype.onclick = function (ecModel, api) {\r\n            clear$1(ecModel);\r\n            api.dispatchAction({\r\n                type: 'restore',\r\n                from: this.uid\r\n            });\r\n        };\r\n        RestoreOption.getDefaultOption = function (ecModel) {\r\n            var defaultOption = {\r\n                show: true,\r\n                icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\r\n                title: ecModel.getLocale(['toolbox', 'restore', 'title'])\r\n            };\r\n            return defaultOption;\r\n        };\r\n        return RestoreOption;\r\n    }(ToolboxFeature));\r\n    registerFeature('restore', RestoreOption);\r\n    registerAction({ type: 'restore', event: 'restore', update: 'prepareAndUpdate' }, function (payload, ecModel) {\r\n        ecModel.resetOption('recreate');\r\n    });\n\n    function createElement(name) {\r\n        return document.createElementNS('http://www.w3.org/2000/svg', name);\r\n    }\n\n    var CMD$4 = PathProxy.CMD;\r\n    var NONE = 'none';\r\n    var mathRound = Math.round;\r\n    var mathSin$3 = Math.sin;\r\n    var mathCos$3 = Math.cos;\r\n    var PI$6 = Math.PI;\r\n    var PI2$7 = Math.PI * 2;\r\n    var degree = 180 / PI$6;\r\n    var EPSILON$4 = 1e-4;\r\n    function round4(val) {\r\n        return mathRound(val * 1e4) / 1e4;\r\n    }\r\n    function isAroundZero$1(val) {\r\n        return val < EPSILON$4 && val > -EPSILON$4;\r\n    }\r\n    function pathHasFill(style) {\r\n        var fill = style.fill;\r\n        return fill != null && fill !== NONE;\r\n    }\r\n    function pathHasStroke(style) {\r\n        var stroke = style.stroke;\r\n        return stroke != null && stroke !== NONE;\r\n    }\r\n    function reduceNumberString(n, precision) {\r\n        return n > 1 ? +n.toFixed(precision) : +n.toPrecision(precision);\r\n    }\r\n    function setTransform(svgEl, m) {\r\n        if (m) {\r\n            attr(svgEl, 'transform', 'matrix('\r\n                + reduceNumberString(m[0], 3) + ','\r\n                + reduceNumberString(m[1], 3) + ','\r\n                + reduceNumberString(m[2], 3) + ','\r\n                + reduceNumberString(m[3], 3) + ','\r\n                + reduceNumberString(m[4], 4) + ','\r\n                + reduceNumberString(m[5], 4)\r\n                + ')');\r\n        }\r\n    }\r\n    function attr(el, key, val) {\r\n        if (!val || val.type !== 'linear' && val.type !== 'radial') {\r\n            el.setAttribute(key, val);\r\n        }\r\n    }\r\n    function attrXLink(el, key, val) {\r\n        el.setAttributeNS('http://www.w3.org/1999/xlink', key, val);\r\n    }\r\n    function bindStyle(svgEl, style, el) {\r\n        var opacity = style.opacity == null ? 1 : style.opacity;\r\n        if (pathHasFill(style)) {\r\n            var fill = style.fill;\r\n            fill = fill === 'transparent' ? NONE : fill;\r\n            attr(svgEl, 'fill', fill);\r\n            attr(svgEl, 'fill-opacity', (style.fillOpacity != null ? style.fillOpacity * opacity : opacity) + '');\r\n        }\r\n        else {\r\n            attr(svgEl, 'fill', NONE);\r\n        }\r\n        if (pathHasStroke(style)) {\r\n            var stroke = style.stroke;\r\n            stroke = stroke === 'transparent' ? NONE : stroke;\r\n            attr(svgEl, 'stroke', stroke);\r\n            var strokeWidth = style.lineWidth;\r\n            var strokeScale_1 = style.strokeNoScale\r\n                ? el.getLineScale()\r\n                : 1;\r\n            attr(svgEl, 'stroke-width', (strokeScale_1 ? strokeWidth / strokeScale_1 : 0) + '');\r\n            attr(svgEl, 'paint-order', style.strokeFirst ? 'stroke' : 'fill');\r\n            attr(svgEl, 'stroke-opacity', (style.strokeOpacity != null ? style.strokeOpacity * opacity : opacity) + '');\r\n            var lineDash = style.lineDash;\r\n            if (lineDash) {\r\n                var lineDashOffset = style.lineDashOffset;\r\n                if (strokeScale_1 && strokeScale_1 !== 1) {\r\n                    lineDash = map(lineDash, function (rawVal) {\r\n                        return rawVal / strokeScale_1;\r\n                    });\r\n                    if (lineDashOffset) {\r\n                        lineDashOffset /= strokeScale_1;\r\n                        lineDashOffset = mathRound(lineDashOffset);\r\n                    }\r\n                }\r\n                attr(svgEl, 'stroke-dasharray', lineDash.join(','));\r\n                attr(svgEl, 'stroke-dashoffset', (lineDashOffset || 0) + '');\r\n            }\r\n            else {\r\n                attr(svgEl, 'stroke-dasharray', '');\r\n            }\r\n            style.lineCap && attr(svgEl, 'stroke-linecap', style.lineCap);\r\n            style.lineJoin && attr(svgEl, 'stroke-linejoin', style.lineJoin);\r\n            style.miterLimit && attr(svgEl, 'stroke-miterlimit', style.miterLimit + '');\r\n        }\r\n        else {\r\n            attr(svgEl, 'stroke', NONE);\r\n        }\r\n    }\r\n    function pathDataToString(path) {\r\n        if (!path) {\r\n            return '';\r\n        }\r\n        var str = [];\r\n        var data = path.data;\r\n        var dataLength = path.len();\r\n        var x;\r\n        var y;\r\n        for (var i = 0; i < dataLength;) {\r\n            var cmd = data[i++];\r\n            var cmdStr = '';\r\n            var nData = 0;\r\n            switch (cmd) {\r\n                case CMD$4.M:\r\n                    cmdStr = 'M';\r\n                    nData = 2;\r\n                    break;\r\n                case CMD$4.L:\r\n                    cmdStr = 'L';\r\n                    nData = 2;\r\n                    break;\r\n                case CMD$4.Q:\r\n                    cmdStr = 'Q';\r\n                    nData = 4;\r\n                    break;\r\n                case CMD$4.C:\r\n                    cmdStr = 'C';\r\n                    nData = 6;\r\n                    break;\r\n                case CMD$4.A:\r\n                    var cx = data[i++];\r\n                    var cy = data[i++];\r\n                    var rx = data[i++];\r\n                    var ry = data[i++];\r\n                    var theta = data[i++];\r\n                    var dTheta = data[i++];\r\n                    var psi = data[i++];\r\n                    var clockwise = data[i++];\r\n                    var dThetaPositive = Math.abs(dTheta);\r\n                    var isCircle = isAroundZero$1(dThetaPositive - PI2$7)\r\n                        || (clockwise ? dTheta >= PI2$7 : -dTheta >= PI2$7);\r\n                    var unifiedTheta = dTheta > 0 ? dTheta % PI2$7 : (dTheta % PI2$7 + PI2$7);\r\n                    var large = false;\r\n                    if (isCircle) {\r\n                        large = true;\r\n                    }\r\n                    else if (isAroundZero$1(dThetaPositive)) {\r\n                        large = false;\r\n                    }\r\n                    else {\r\n                        large = (unifiedTheta >= PI$6) === !!clockwise;\r\n                    }\r\n                    var x0 = round4(cx + rx * mathCos$3(theta));\r\n                    var y0 = round4(cy + ry * mathSin$3(theta));\r\n                    if (isCircle) {\r\n                        if (clockwise) {\r\n                            dTheta = PI2$7 - 1e-4;\r\n                        }\r\n                        else {\r\n                            dTheta = -PI2$7 + 1e-4;\r\n                        }\r\n                        large = true;\r\n                        if (i === 9) {\r\n                            str.push('M', x0, y0);\r\n                        }\r\n                    }\r\n                    x = round4(cx + rx * mathCos$3(theta + dTheta));\r\n                    y = round4(cy + ry * mathSin$3(theta + dTheta));\r\n                    if (isNaN(x0) || isNaN(y0) || isNaN(rx) || isNaN(ry) || isNaN(psi) || isNaN(degree) || isNaN(x) || isNaN(y)) {\r\n                        return '';\r\n                    }\r\n                    str.push('A', round4(rx), round4(ry), mathRound(psi * degree), +large, +clockwise, x, y);\r\n                    break;\r\n                case CMD$4.Z:\r\n                    cmdStr = 'Z';\r\n                    break;\r\n                case CMD$4.R:\r\n                    x = round4(data[i++]);\r\n                    y = round4(data[i++]);\r\n                    var w = round4(data[i++]);\r\n                    var h = round4(data[i++]);\r\n                    if (isNaN(x) || isNaN(y) || isNaN(w) || isNaN(h)) {\r\n                        return '';\r\n                    }\r\n                    str.push('M', x, y, 'L', x + w, y, 'L', x + w, y + h, 'L', x, y + h, 'L', x, y);\r\n                    break;\r\n            }\r\n            cmdStr && str.push(cmdStr);\r\n            for (var j = 0; j < nData; j++) {\r\n                var val = round4(data[i++]);\r\n                if (isNaN(val)) {\r\n                    return '';\r\n                }\r\n                str.push(val);\r\n            }\r\n        }\r\n        return str.join(' ');\r\n    }\r\n    function wrapSVGBuildPath(el) {\r\n        if (!el.__svgBuildPath) {\r\n            var oldBuildPath_1 = el.buildPath;\r\n            el.__svgBuildPath = el.buildPath = function (path, shape, inBundle) {\r\n                oldBuildPath_1.call(this, el.path, shape, inBundle);\r\n                el.__svgPathStr = pathDataToString(el.path);\r\n            };\r\n            if (!el.shapeChanged()) {\r\n                el.__svgPathStr = pathDataToString(el.path);\r\n            }\r\n        }\r\n    }\r\n    var svgPath = {\r\n        brush: function (el) {\r\n            var style = el.style;\r\n            var svgEl = el.__svgEl;\r\n            if (!svgEl) {\r\n                svgEl = createElement('path');\r\n                el.__svgEl = svgEl;\r\n            }\r\n            if (!el.path) {\r\n                el.createPathProxy();\r\n            }\r\n            var path = el.path;\r\n            wrapSVGBuildPath(el);\r\n            if (el.shapeChanged()) {\r\n                path.beginPath();\r\n                el.buildPath(path, el.shape);\r\n                el.pathUpdated();\r\n            }\r\n            attr(svgEl, 'd', el.__svgPathStr);\r\n            bindStyle(svgEl, style, el);\r\n            setTransform(svgEl, el.transform);\r\n        }\r\n    };\r\n    var svgImage = {\r\n        brush: function (el) {\r\n            var style = el.style;\r\n            var image = style.image;\r\n            if (image instanceof HTMLImageElement) {\r\n                var src = image.src;\r\n                image = src;\r\n            }\r\n            if (!image) {\r\n                return;\r\n            }\r\n            var x = style.x || 0;\r\n            var y = style.y || 0;\r\n            var dw = style.width;\r\n            var dh = style.height;\r\n            var svgEl = el.__svgEl;\r\n            if (!svgEl) {\r\n                svgEl = createElement('image');\r\n                el.__svgEl = svgEl;\r\n            }\r\n            if (image !== el.__imageSrc) {\r\n                attrXLink(svgEl, 'href', image);\r\n                el.__imageSrc = image;\r\n            }\r\n            attr(svgEl, 'width', dw + '');\r\n            attr(svgEl, 'height', dh + '');\r\n            attr(svgEl, 'x', x + '');\r\n            attr(svgEl, 'y', y + '');\r\n            setTransform(svgEl, el.transform);\r\n        }\r\n    };\r\n    var TEXT_ALIGN_TO_ANCHOR = {\r\n        left: 'start',\r\n        right: 'end',\r\n        center: 'middle',\r\n        middle: 'middle'\r\n    };\r\n    function adjustTextY$1(y, lineHeight, textBaseline) {\r\n        if (textBaseline === 'top') {\r\n            y += lineHeight / 2;\r\n        }\r\n        else if (textBaseline === 'bottom') {\r\n            y -= lineHeight / 2;\r\n        }\r\n        return y;\r\n    }\r\n    var svgText = {\r\n        brush: function (el) {\r\n            var style = el.style;\r\n            var text = style.text;\r\n            text != null && (text += '');\r\n            if (!text) {\r\n                return;\r\n            }\r\n            var textSvgEl = el.__svgEl;\r\n            if (!textSvgEl) {\r\n                textSvgEl = createElement('text');\r\n                el.__svgEl = textSvgEl;\r\n            }\r\n            var font = style.font || DEFAULT_FONT;\r\n            var textSvgElStyle = textSvgEl.style;\r\n            textSvgElStyle.font = font;\r\n            textSvgEl.textContent = text;\r\n            bindStyle(textSvgEl, style, el);\r\n            setTransform(textSvgEl, el.transform);\r\n            var x = style.x || 0;\r\n            var y = adjustTextY$1(style.y || 0, getLineHeight(font), style.textBaseline);\r\n            var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign]\r\n                || style.textAlign;\r\n            attr(textSvgEl, 'dominant-baseline', 'middle');\r\n            attr(textSvgEl, 'text-anchor', textAlign);\r\n            attr(textSvgEl, 'x', x + '');\r\n            attr(textSvgEl, 'y', y + '');\r\n        }\r\n    };\n\n    function diff(oldArr, newArr, equals) {\r\n        if (!equals) {\r\n            equals = function (a, b) {\r\n                return a === b;\r\n            };\r\n        }\r\n        oldArr = oldArr.slice();\r\n        newArr = newArr.slice();\r\n        var newLen = newArr.length;\r\n        var oldLen = oldArr.length;\r\n        var editLength = 1;\r\n        var maxEditLength = newLen + oldLen;\r\n        var bestPath = [{ newPos: -1, components: [] }];\r\n        var oldPos = extractCommon(bestPath[0], newArr, oldArr, 0, equals);\r\n        if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\r\n            var indices = [];\r\n            for (var i = 0; i < newArr.length; i++) {\r\n                indices.push(i);\r\n            }\r\n            return [{\r\n                    indices: indices,\r\n                    count: newArr.length,\r\n                    added: false,\r\n                    removed: false\r\n                }];\r\n        }\r\n        function execEditLength() {\r\n            for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\r\n                var basePath;\r\n                var addPath = bestPath[diagonalPath - 1];\r\n                var removePath = bestPath[diagonalPath + 1];\r\n                var oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\r\n                if (addPath) {\r\n                    bestPath[diagonalPath - 1] = undefined;\r\n                }\r\n                var canAdd = addPath && addPath.newPos + 1 < newLen;\r\n                var canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\r\n                if (!canAdd && !canRemove) {\r\n                    bestPath[diagonalPath] = undefined;\r\n                    continue;\r\n                }\r\n                if (!canAdd || (canRemove && addPath.newPos < removePath.newPos)) {\r\n                    basePath = clonePath(removePath);\r\n                    pushComponent(basePath.components, false, true);\r\n                }\r\n                else {\r\n                    basePath = addPath;\r\n                    basePath.newPos++;\r\n                    pushComponent(basePath.components, true, false);\r\n                }\r\n                oldPos = extractCommon(basePath, newArr, oldArr, diagonalPath, equals);\r\n                if (basePath.newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\r\n                    return buildValues(basePath.components);\r\n                }\r\n                else {\r\n                    bestPath[diagonalPath] = basePath;\r\n                }\r\n            }\r\n            editLength++;\r\n        }\r\n        while (editLength <= maxEditLength) {\r\n            var ret = execEditLength();\r\n            if (ret) {\r\n                return ret;\r\n            }\r\n        }\r\n    }\r\n    function extractCommon(basePath, newArr, oldArr, diagonalPath, equals) {\r\n        var newLen = newArr.length;\r\n        var oldLen = oldArr.length;\r\n        var newPos = basePath.newPos;\r\n        var oldPos = newPos - diagonalPath;\r\n        var commonCount = 0;\r\n        while (newPos + 1 < newLen && oldPos + 1 < oldLen && equals(newArr[newPos + 1], oldArr[oldPos + 1])) {\r\n            newPos++;\r\n            oldPos++;\r\n            commonCount++;\r\n        }\r\n        if (commonCount) {\r\n            basePath.components.push({\r\n                count: commonCount,\r\n                added: false,\r\n                removed: false,\r\n                indices: []\r\n            });\r\n        }\r\n        basePath.newPos = newPos;\r\n        return oldPos;\r\n    }\r\n    function pushComponent(components, added, removed) {\r\n        var last = components[components.length - 1];\r\n        if (last && last.added === added && last.removed === removed) {\r\n            components[components.length - 1] = {\r\n                count: last.count + 1,\r\n                added: added,\r\n                removed: removed,\r\n                indices: []\r\n            };\r\n        }\r\n        else {\r\n            components.push({\r\n                count: 1,\r\n                added: added,\r\n                removed: removed,\r\n                indices: []\r\n            });\r\n        }\r\n    }\r\n    function buildValues(components) {\r\n        var componentPos = 0;\r\n        var componentLen = components.length;\r\n        var newPos = 0;\r\n        var oldPos = 0;\r\n        for (; componentPos < componentLen; componentPos++) {\r\n            var component = components[componentPos];\r\n            if (!component.removed) {\r\n                var indices = [];\r\n                for (var i = newPos; i < newPos + component.count; i++) {\r\n                    indices.push(i);\r\n                }\r\n                component.indices = indices;\r\n                newPos += component.count;\r\n                if (!component.added) {\r\n                    oldPos += component.count;\r\n                }\r\n            }\r\n            else {\r\n                for (var i = oldPos; i < oldPos + component.count; i++) {\r\n                    component.indices.push(i);\r\n                }\r\n                oldPos += component.count;\r\n            }\r\n        }\r\n        return components;\r\n    }\r\n    function clonePath(path) {\r\n        return { newPos: path.newPos, components: path.components.slice(0) };\r\n    }\r\n    function arrayDiff (oldArr, newArr, equal) {\r\n        return diff(oldArr, newArr, equal);\r\n    }\n\n    var MARK_UNUSED = '0';\r\n    var MARK_USED = '1';\r\n    var Definable = (function () {\r\n        function Definable(zrId, svgRoot, tagNames, markLabel, domName) {\r\n            this.nextId = 0;\r\n            this._domName = '_dom';\r\n            this.createElement = createElement;\r\n            this._zrId = zrId;\r\n            this._svgRoot = svgRoot;\r\n            this._tagNames = typeof tagNames === 'string' ? [tagNames] : tagNames;\r\n            this._markLabel = markLabel;\r\n            if (domName) {\r\n                this._domName = domName;\r\n            }\r\n        }\r\n        Definable.prototype.getDefs = function (isForceCreating) {\r\n            var svgRoot = this._svgRoot;\r\n            var defs = this._svgRoot.getElementsByTagName('defs');\r\n            if (defs.length === 0) {\r\n                if (isForceCreating) {\r\n                    var defs_1 = svgRoot.insertBefore(this.createElement('defs'), svgRoot.firstChild);\r\n                    if (!defs_1.contains) {\r\n                        defs_1.contains = function (el) {\r\n                            var children = defs_1.children;\r\n                            if (!children) {\r\n                                return false;\r\n                            }\r\n                            for (var i = children.length - 1; i >= 0; --i) {\r\n                                if (children[i] === el) {\r\n                                    return true;\r\n                                }\r\n                            }\r\n                            return false;\r\n                        };\r\n                    }\r\n                    return defs_1;\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }\r\n            else {\r\n                return defs[0];\r\n            }\r\n        };\r\n        Definable.prototype.doUpdate = function (target, onUpdate) {\r\n            if (!target) {\r\n                return;\r\n            }\r\n            var defs = this.getDefs(false);\r\n            if (target[this._domName] && defs.contains(target[this._domName])) {\r\n                if (typeof onUpdate === 'function') {\r\n                    onUpdate(target);\r\n                }\r\n            }\r\n            else {\r\n                var dom = this.add(target);\r\n                if (dom) {\r\n                    target[this._domName] = dom;\r\n                }\r\n            }\r\n        };\r\n        Definable.prototype.add = function (target) {\r\n            return null;\r\n        };\r\n        Definable.prototype.addDom = function (dom) {\r\n            var defs = this.getDefs(true);\r\n            defs.appendChild(dom);\r\n        };\r\n        Definable.prototype.removeDom = function (target) {\r\n            var defs = this.getDefs(false);\r\n            if (defs && target[this._domName]) {\r\n                defs.removeChild(target[this._domName]);\r\n                target[this._domName] = null;\r\n            }\r\n        };\r\n        Definable.prototype.getDoms = function () {\r\n            var defs = this.getDefs(false);\r\n            if (!defs) {\r\n                return [];\r\n            }\r\n            var doms = [];\r\n            each(this._tagNames, function (tagName) {\r\n                var tags = defs.getElementsByTagName(tagName);\r\n                doms = doms.concat([].slice.call(tags));\r\n            });\r\n            return doms;\r\n        };\r\n        Definable.prototype.markAllUnused = function () {\r\n            var doms = this.getDoms();\r\n            var that = this;\r\n            each(doms, function (dom) {\r\n                dom[that._markLabel] = MARK_UNUSED;\r\n            });\r\n        };\r\n        Definable.prototype.markDomUsed = function (dom) {\r\n            if (dom) {\r\n                dom[this._markLabel] = MARK_USED;\r\n            }\r\n        };\r\n        Definable.prototype.removeUnused = function () {\r\n            var defs = this.getDefs(false);\r\n            if (!defs) {\r\n                return;\r\n            }\r\n            var doms = this.getDoms();\r\n            var that = this;\r\n            each(doms, function (dom) {\r\n                if (dom[that._markLabel] !== MARK_USED) {\r\n                    defs.removeChild(dom);\r\n                }\r\n            });\r\n        };\r\n        Definable.prototype.getSvgProxy = function (displayable) {\r\n            if (displayable instanceof Path) {\r\n                return svgPath;\r\n            }\r\n            else if (displayable instanceof ZRImage) {\r\n                return svgImage;\r\n            }\r\n            else if (displayable instanceof TSpan) {\r\n                return svgText;\r\n            }\r\n            else {\r\n                return svgPath;\r\n            }\r\n        };\r\n        Definable.prototype.getSvgElement = function (displayable) {\r\n            return displayable.__svgEl;\r\n        };\r\n        return Definable;\r\n    }());\n\n    function isLinearGradient(value) {\r\n        return value.type === 'linear';\r\n    }\r\n    function isRadialGradient(value) {\r\n        return value.type === 'radial';\r\n    }\r\n    var GradientManager = (function (_super) {\r\n        __extends(GradientManager, _super);\r\n        function GradientManager(zrId, svgRoot) {\r\n            return _super.call(this, zrId, svgRoot, ['linearGradient', 'radialGradient'], '__gradient_in_use__') || this;\r\n        }\r\n        GradientManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\r\n            if (displayable && displayable.style) {\r\n                var that_1 = this;\r\n                each(['fill', 'stroke'], function (fillOrStroke) {\r\n                    var value = displayable.style[fillOrStroke];\r\n                    if (value\r\n                        && (value.type === 'linear'\r\n                            || value.type === 'radial')) {\r\n                        var gradient = value;\r\n                        var defs = that_1.getDefs(true);\r\n                        var dom = void 0;\r\n                        if (gradient.__dom) {\r\n                            dom = gradient.__dom;\r\n                            if (!defs.contains(gradient.__dom)) {\r\n                                that_1.addDom(dom);\r\n                            }\r\n                        }\r\n                        else {\r\n                            dom = that_1.add(gradient);\r\n                        }\r\n                        that_1.markUsed(displayable);\r\n                        var id = dom.getAttribute('id');\r\n                        svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        GradientManager.prototype.add = function (gradient) {\r\n            var dom;\r\n            if (isLinearGradient(gradient)) {\r\n                dom = this.createElement('linearGradient');\r\n            }\r\n            else if (isRadialGradient(gradient)) {\r\n                dom = this.createElement('radialGradient');\r\n            }\r\n            else {\r\n                logError('Illegal gradient type.');\r\n                return null;\r\n            }\r\n            gradient.id = gradient.id || this.nextId++;\r\n            dom.setAttribute('id', 'zr' + this._zrId\r\n                + '-gradient-' + gradient.id);\r\n            this.updateDom(gradient, dom);\r\n            this.addDom(dom);\r\n            return dom;\r\n        };\r\n        GradientManager.prototype.update = function (gradient) {\r\n            var that = this;\r\n            this.doUpdate(gradient, function () {\r\n                var type = gradient.type;\r\n                var tagName = gradient.__dom.tagName;\r\n                if (type === 'linear' && tagName === 'linearGradient'\r\n                    || type === 'radial' && tagName === 'radialGradient') {\r\n                    that.updateDom(gradient, gradient.__dom);\r\n                }\r\n                else {\r\n                    that.removeDom(gradient);\r\n                    that.add(gradient);\r\n                }\r\n            });\r\n        };\r\n        GradientManager.prototype.updateDom = function (gradient, dom) {\r\n            if (isLinearGradient(gradient)) {\r\n                dom.setAttribute('x1', gradient.x + '');\r\n                dom.setAttribute('y1', gradient.y + '');\r\n                dom.setAttribute('x2', gradient.x2 + '');\r\n                dom.setAttribute('y2', gradient.y2 + '');\r\n            }\r\n            else if (isRadialGradient(gradient)) {\r\n                dom.setAttribute('cx', gradient.x + '');\r\n                dom.setAttribute('cy', gradient.y + '');\r\n                dom.setAttribute('r', gradient.r + '');\r\n            }\r\n            else {\r\n                logError('Illegal gradient type.');\r\n                return;\r\n            }\r\n            if (gradient.global) {\r\n                dom.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n            }\r\n            else {\r\n                dom.setAttribute('gradientUnits', 'objectBoundingBox');\r\n            }\r\n            dom.innerHTML = '';\r\n            var colors = gradient.colorStops;\r\n            for (var i = 0, len = colors.length; i < len; ++i) {\r\n                var stop_1 = this.createElement('stop');\r\n                stop_1.setAttribute('offset', colors[i].offset * 100 + '%');\r\n                var color$1 = colors[i].color;\r\n                if (color$1.indexOf('rgba') > -1) {\r\n                    var opacity = parse(color$1)[3];\r\n                    var hex = toHex(color$1);\r\n                    stop_1.setAttribute('stop-color', '#' + hex);\r\n                    stop_1.setAttribute('stop-opacity', opacity + '');\r\n                }\r\n                else {\r\n                    stop_1.setAttribute('stop-color', colors[i].color);\r\n                }\r\n                dom.appendChild(stop_1);\r\n            }\r\n            gradient.__dom = dom;\r\n        };\r\n        GradientManager.prototype.markUsed = function (displayable) {\r\n            if (displayable.style) {\r\n                var gradient = displayable.style.fill;\r\n                if (gradient && gradient.__dom) {\r\n                    _super.prototype.markDomUsed.call(this, gradient.__dom);\r\n                }\r\n                gradient = displayable.style.stroke;\r\n                if (gradient && gradient.__dom) {\r\n                    _super.prototype.markDomUsed.call(this, gradient.__dom);\r\n                }\r\n            }\r\n        };\r\n        return GradientManager;\r\n    }(Definable));\n\n    var ClippathManager = (function (_super) {\r\n        __extends(ClippathManager, _super);\r\n        function ClippathManager(zrId, svgRoot) {\r\n            return _super.call(this, zrId, svgRoot, 'clipPath', '__clippath_in_use__') || this;\r\n        }\r\n        ClippathManager.prototype.update = function (displayable) {\r\n            var svgEl = this.getSvgElement(displayable);\r\n            if (svgEl) {\r\n                this.updateDom(svgEl, displayable.__clipPaths, false);\r\n            }\r\n            this.markUsed(displayable);\r\n        };\r\n        ClippathManager.prototype.updateDom = function (parentEl, clipPaths, isText) {\r\n            if (clipPaths && clipPaths.length > 0) {\r\n                var defs = this.getDefs(true);\r\n                var clipPath = clipPaths[0];\r\n                var clipPathEl = void 0;\r\n                var id = void 0;\r\n                var domKey = isText ? '_textDom' : '_dom';\r\n                if (clipPath[domKey]) {\r\n                    id = clipPath[domKey].getAttribute('id');\r\n                    clipPathEl = clipPath[domKey];\r\n                    if (!defs.contains(clipPathEl)) {\r\n                        defs.appendChild(clipPathEl);\r\n                    }\r\n                }\r\n                else {\r\n                    id = 'zr' + this._zrId + '-clip-' + this.nextId;\r\n                    ++this.nextId;\r\n                    clipPathEl = this.createElement('clipPath');\r\n                    clipPathEl.setAttribute('id', id);\r\n                    defs.appendChild(clipPathEl);\r\n                    clipPath[domKey] = clipPathEl;\r\n                }\r\n                var svgProxy = this.getSvgProxy(clipPath);\r\n                if (clipPath.transform\r\n                    && clipPath.parent.invTransform\r\n                    && !isText) {\r\n                    var transform = Array.prototype.slice.call(clipPath.transform);\r\n                    mul$1(clipPath.transform, clipPath.parent.invTransform, clipPath.transform);\r\n                    svgProxy.brush(clipPath);\r\n                    clipPath.transform = transform;\r\n                }\r\n                else {\r\n                    svgProxy.brush(clipPath);\r\n                }\r\n                var pathEl = this.getSvgElement(clipPath);\r\n                clipPathEl.innerHTML = '';\r\n                clipPathEl.appendChild(pathEl.cloneNode());\r\n                parentEl.setAttribute('clip-path', 'url(#' + id + ')');\r\n                if (clipPaths.length > 1) {\r\n                    this.updateDom(clipPathEl, clipPaths.slice(1), isText);\r\n                }\r\n            }\r\n            else {\r\n                if (parentEl) {\r\n                    parentEl.setAttribute('clip-path', 'none');\r\n                }\r\n            }\r\n        };\r\n        ClippathManager.prototype.markUsed = function (displayable) {\r\n            var _this = this;\r\n            if (displayable.__clipPaths) {\r\n                each(displayable.__clipPaths, function (clipPath) {\r\n                    if (clipPath._dom) {\r\n                        _super.prototype.markDomUsed.call(_this, clipPath._dom);\r\n                    }\r\n                    if (clipPath._textDom) {\r\n                        _super.prototype.markDomUsed.call(_this, clipPath._textDom);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        return ClippathManager;\r\n    }(Definable));\n\n    var ShadowManager = (function (_super) {\r\n        __extends(ShadowManager, _super);\r\n        function ShadowManager(zrId, svgRoot) {\r\n            return _super.call(this, zrId, svgRoot, ['filter'], '__filter_in_use__', '_shadowDom') || this;\r\n        }\r\n        ShadowManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\r\n            if (displayable && hasShadow(displayable.style)) {\r\n                var dom = void 0;\r\n                if (displayable._shadowDom) {\r\n                    dom = displayable._shadowDom;\r\n                    var defs = this.getDefs(true);\r\n                    if (!defs.contains(displayable._shadowDom)) {\r\n                        this.addDom(dom);\r\n                    }\r\n                }\r\n                else {\r\n                    dom = this.add(displayable);\r\n                }\r\n                this.markUsed(displayable);\r\n                var id = dom.getAttribute('id');\r\n                svgElement.style.filter = 'url(#' + id + ')';\r\n            }\r\n        };\r\n        ShadowManager.prototype.add = function (displayable) {\r\n            var dom = this.createElement('filter');\r\n            displayable._shadowDomId = displayable._shadowDomId || this.nextId++;\r\n            dom.setAttribute('id', 'zr' + this._zrId\r\n                + '-shadow-' + displayable._shadowDomId);\r\n            this.updateDom(displayable, dom);\r\n            this.addDom(dom);\r\n            return dom;\r\n        };\r\n        ShadowManager.prototype.update = function (svgElement, displayable) {\r\n            var style = displayable.style;\r\n            if (hasShadow(style)) {\r\n                var that_1 = this;\r\n                _super.prototype.doUpdate.call(this, displayable, function () {\r\n                    that_1.updateDom(displayable, displayable._shadowDom);\r\n                });\r\n            }\r\n            else {\r\n                this.remove(svgElement, displayable);\r\n            }\r\n        };\r\n        ShadowManager.prototype.remove = function (svgElement, displayable) {\r\n            if (displayable._shadowDomId != null) {\r\n                this.removeDom(svgElement);\r\n                svgElement.style.filter = '';\r\n            }\r\n        };\r\n        ShadowManager.prototype.updateDom = function (displayable, dom) {\r\n            var domChildArr = dom.getElementsByTagName('feDropShadow');\r\n            var domChild = domChildArr.length\r\n                ? domChildArr[0]\r\n                : this.createElement('feDropShadow');\r\n            var style = displayable.style;\r\n            var scaleX = displayable.scaleX || 1;\r\n            var scaleY = displayable.scaleY || 1;\r\n            var offsetX;\r\n            var offsetY;\r\n            var blur;\r\n            var color;\r\n            if (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY) {\r\n                offsetX = style.shadowOffsetX || 0;\r\n                offsetY = style.shadowOffsetY || 0;\r\n                blur = style.shadowBlur;\r\n                color = style.shadowColor;\r\n            }\r\n            else if (style.textShadowBlur) {\r\n                offsetX = style.textShadowOffsetX || 0;\r\n                offsetY = style.textShadowOffsetY || 0;\r\n                blur = style.textShadowBlur;\r\n                color = style.textShadowColor;\r\n            }\r\n            else {\r\n                this.removeDom(dom);\r\n                return;\r\n            }\r\n            domChild.setAttribute('dx', offsetX / scaleX + '');\r\n            domChild.setAttribute('dy', offsetY / scaleY + '');\r\n            domChild.setAttribute('flood-color', color);\r\n            var stdDx = blur / 2 / scaleX;\r\n            var stdDy = blur / 2 / scaleY;\r\n            var stdDeviation = stdDx + ' ' + stdDy;\r\n            domChild.setAttribute('stdDeviation', stdDeviation);\r\n            dom.setAttribute('x', '-100%');\r\n            dom.setAttribute('y', '-100%');\r\n            dom.setAttribute('width', Math.ceil(blur / 2 * 200) + '%');\r\n            dom.setAttribute('height', Math.ceil(blur / 2 * 200) + '%');\r\n            dom.appendChild(domChild);\r\n            displayable._shadowDom = dom;\r\n        };\r\n        ShadowManager.prototype.markUsed = function (displayable) {\r\n            if (displayable._shadowDom) {\r\n                _super.prototype.markDomUsed.call(this, displayable._shadowDom);\r\n            }\r\n        };\r\n        return ShadowManager;\r\n    }(Definable));\r\n    function hasShadow(style) {\r\n        return style\r\n            && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\r\n    }\n\n    function parseInt10$1(val) {\r\n        return parseInt(val, 10);\r\n    }\r\n    function getSvgProxy(el) {\r\n        if (el instanceof Path) {\r\n            return svgPath;\r\n        }\r\n        else if (el instanceof ZRImage) {\r\n            return svgImage;\r\n        }\r\n        else if (el instanceof TSpan) {\r\n            return svgText;\r\n        }\r\n        else {\r\n            return svgPath;\r\n        }\r\n    }\r\n    function checkParentAvailable(parent, child) {\r\n        return child && parent && child.parentNode !== parent;\r\n    }\r\n    function insertAfter(parent, child, prevSibling) {\r\n        if (checkParentAvailable(parent, child) && prevSibling) {\r\n            var nextSibling = prevSibling.nextSibling;\r\n            nextSibling ? parent.insertBefore(child, nextSibling)\r\n                : parent.appendChild(child);\r\n        }\r\n    }\r\n    function prepend(parent, child) {\r\n        if (checkParentAvailable(parent, child)) {\r\n            var firstChild = parent.firstChild;\r\n            firstChild ? parent.insertBefore(child, firstChild)\r\n                : parent.appendChild(child);\r\n        }\r\n    }\r\n    function remove(parent, child) {\r\n        if (child && parent && child.parentNode === parent) {\r\n            parent.removeChild(child);\r\n        }\r\n    }\r\n    function getSvgElement(displayable) {\r\n        return displayable.__svgEl;\r\n    }\r\n    var SVGPainter = (function () {\r\n        function SVGPainter(root, storage, opts, zrId) {\r\n            this.type = 'svg';\r\n            this.refreshHover = createMethodNotSupport('refreshHover');\r\n            this.pathToImage = createMethodNotSupport('pathToImage');\r\n            this.configLayer = createMethodNotSupport('configLayer');\r\n            this.root = root;\r\n            this.storage = storage;\r\n            this._opts = opts = extend({}, opts || {});\r\n            var svgDom = createElement('svg');\r\n            svgDom.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\r\n            svgDom.setAttribute('version', '1.1');\r\n            svgDom.setAttribute('baseProfile', 'full');\r\n            svgDom.style.cssText = 'user-select:none;position:absolute;left:0;top:0;';\r\n            var bgRoot = createElement('g');\r\n            svgDom.appendChild(bgRoot);\r\n            var svgRoot = createElement('g');\r\n            svgDom.appendChild(svgRoot);\r\n            this._gradientManager = new GradientManager(zrId, svgRoot);\r\n            this._clipPathManager = new ClippathManager(zrId, svgRoot);\r\n            this._shadowManager = new ShadowManager(zrId, svgRoot);\r\n            var viewport = document.createElement('div');\r\n            viewport.style.cssText = 'overflow:hidden;position:relative';\r\n            this._svgDom = svgDom;\r\n            this._svgRoot = svgRoot;\r\n            this._backgroundRoot = bgRoot;\r\n            this._viewport = viewport;\r\n            root.appendChild(viewport);\r\n            viewport.appendChild(svgDom);\r\n            this.resize(opts.width, opts.height);\r\n            this._visibleList = [];\r\n        }\r\n        SVGPainter.prototype.getType = function () {\r\n            return 'svg';\r\n        };\r\n        SVGPainter.prototype.getViewportRoot = function () {\r\n            return this._viewport;\r\n        };\r\n        SVGPainter.prototype.getSvgDom = function () {\r\n            return this._svgDom;\r\n        };\r\n        SVGPainter.prototype.getSvgRoot = function () {\r\n            return this._svgRoot;\r\n        };\r\n        SVGPainter.prototype.getViewportRootOffset = function () {\r\n            var viewportRoot = this.getViewportRoot();\r\n            if (viewportRoot) {\r\n                return {\r\n                    offsetLeft: viewportRoot.offsetLeft || 0,\r\n                    offsetTop: viewportRoot.offsetTop || 0\r\n                };\r\n            }\r\n        };\r\n        SVGPainter.prototype.refresh = function () {\r\n            var list = this.storage.getDisplayList(true);\r\n            this._paintList(list);\r\n        };\r\n        SVGPainter.prototype.setBackgroundColor = function (backgroundColor) {\r\n            if (this._backgroundRoot && this._backgroundNode) {\r\n                this._backgroundRoot.removeChild(this._backgroundNode);\r\n            }\r\n            var bgNode = createElement('rect');\r\n            bgNode.setAttribute('width', this.getWidth());\r\n            bgNode.setAttribute('height', this.getHeight());\r\n            bgNode.setAttribute('x', 0);\r\n            bgNode.setAttribute('y', 0);\r\n            bgNode.setAttribute('id', 0);\r\n            bgNode.style.fill = backgroundColor;\r\n            this._backgroundRoot.appendChild(bgNode);\r\n            this._backgroundNode = bgNode;\r\n        };\r\n        SVGPainter.prototype._paintList = function (list) {\r\n            this._gradientManager.markAllUnused();\r\n            this._clipPathManager.markAllUnused();\r\n            this._shadowManager.markAllUnused();\r\n            var svgRoot = this._svgRoot;\r\n            var visibleList = this._visibleList;\r\n            var listLen = list.length;\r\n            var newVisibleList = [];\r\n            for (var i = 0; i < listLen; i++) {\r\n                var displayable = list[i];\r\n                var svgProxy = getSvgProxy(displayable);\r\n                var svgElement = getSvgElement(displayable);\r\n                if (!displayable.invisible) {\r\n                    if (displayable.__dirty || !svgElement) {\r\n                        svgProxy && svgProxy.brush(displayable);\r\n                        this._clipPathManager.update(displayable);\r\n                        if (displayable.style) {\r\n                            this._gradientManager\r\n                                .update(displayable.style.fill);\r\n                            this._gradientManager\r\n                                .update(displayable.style.stroke);\r\n                            this._shadowManager\r\n                                .update(svgElement, displayable);\r\n                        }\r\n                        displayable.__dirty = 0;\r\n                    }\r\n                    if (getSvgElement(displayable)) {\r\n                        newVisibleList.push(displayable);\r\n                    }\r\n                }\r\n            }\r\n            var diff = arrayDiff(visibleList, newVisibleList);\r\n            var prevSvgElement;\r\n            for (var i = 0; i < diff.length; i++) {\r\n                var item = diff[i];\r\n                if (item.removed) {\r\n                    for (var k = 0; k < item.count; k++) {\r\n                        var displayable = visibleList[item.indices[k]];\r\n                        var svgElement = getSvgElement(displayable);\r\n                        remove(svgRoot, svgElement);\r\n                    }\r\n                }\r\n            }\r\n            for (var i = 0; i < diff.length; i++) {\r\n                var item = diff[i];\r\n                if (item.added) {\r\n                    for (var k = 0; k < item.count; k++) {\r\n                        var displayable = newVisibleList[item.indices[k]];\r\n                        var svgElement = getSvgElement(displayable);\r\n                        prevSvgElement\r\n                            ? insertAfter(svgRoot, svgElement, prevSvgElement)\r\n                            : prepend(svgRoot, svgElement);\r\n                        prevSvgElement = svgElement || prevSvgElement;\r\n                        this._gradientManager\r\n                            .addWithoutUpdate(svgElement, displayable);\r\n                        this._shadowManager\r\n                            .addWithoutUpdate(svgElement, displayable);\r\n                        this._clipPathManager.markUsed(displayable);\r\n                    }\r\n                }\r\n                else if (!item.removed) {\r\n                    for (var k = 0; k < item.count; k++) {\r\n                        var displayable = newVisibleList[item.indices[k]];\r\n                        var svgElement = getSvgElement(displayable);\r\n                        this._gradientManager.markUsed(displayable);\r\n                        this._gradientManager\r\n                            .addWithoutUpdate(svgElement, displayable);\r\n                        this._shadowManager.markUsed(displayable);\r\n                        this._shadowManager\r\n                            .addWithoutUpdate(svgElement, displayable);\r\n                        this._clipPathManager.markUsed(displayable);\r\n                        prevSvgElement = svgElement\r\n                            || prevSvgElement;\r\n                    }\r\n                }\r\n            }\r\n            this._gradientManager.removeUnused();\r\n            this._clipPathManager.removeUnused();\r\n            this._shadowManager.removeUnused();\r\n            this._visibleList = newVisibleList;\r\n        };\r\n        SVGPainter.prototype._getDefs = function (isForceCreating) {\r\n            var svgRoot = this._svgDom;\r\n            var defs = svgRoot.getElementsByTagName('defs');\r\n            if (defs.length === 0) {\r\n                if (isForceCreating) {\r\n                    var defs_1 = svgRoot.insertBefore(createElement('defs'), svgRoot.firstChild);\r\n                    if (!defs_1.contains) {\r\n                        defs_1.contains = function (el) {\r\n                            var children = defs_1.children;\r\n                            if (!children) {\r\n                                return false;\r\n                            }\r\n                            for (var i = children.length - 1; i >= 0; --i) {\r\n                                if (children[i] === el) {\r\n                                    return true;\r\n                                }\r\n                            }\r\n                            return false;\r\n                        };\r\n                    }\r\n                    return defs_1;\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }\r\n            else {\r\n                return defs[0];\r\n            }\r\n        };\r\n        SVGPainter.prototype.resize = function (width, height) {\r\n            var viewport = this._viewport;\r\n            viewport.style.display = 'none';\r\n            var opts = this._opts;\r\n            width != null && (opts.width = width);\r\n            height != null && (opts.height = height);\r\n            width = this._getSize(0);\r\n            height = this._getSize(1);\r\n            viewport.style.display = '';\r\n            if (this._width !== width || this._height !== height) {\r\n                this._width = width;\r\n                this._height = height;\r\n                var viewportStyle = viewport.style;\r\n                viewportStyle.width = width + 'px';\r\n                viewportStyle.height = height + 'px';\r\n                var svgRoot = this._svgDom;\r\n                svgRoot.setAttribute('width', width + '');\r\n                svgRoot.setAttribute('height', height + '');\r\n            }\r\n            if (this._backgroundNode) {\r\n                this._backgroundNode.setAttribute('width', width);\r\n                this._backgroundNode.setAttribute('height', height);\r\n            }\r\n        };\r\n        SVGPainter.prototype.getWidth = function () {\r\n            return this._width;\r\n        };\r\n        SVGPainter.prototype.getHeight = function () {\r\n            return this._height;\r\n        };\r\n        SVGPainter.prototype._getSize = function (whIdx) {\r\n            var opts = this._opts;\r\n            var wh = ['width', 'height'][whIdx];\r\n            var cwh = ['clientWidth', 'clientHeight'][whIdx];\r\n            var plt = ['paddingLeft', 'paddingTop'][whIdx];\r\n            var prb = ['paddingRight', 'paddingBottom'][whIdx];\r\n            if (opts[wh] != null && opts[wh] !== 'auto') {\r\n                return parseFloat(opts[wh]);\r\n            }\r\n            var root = this.root;\r\n            var stl = document.defaultView.getComputedStyle(root);\r\n            return ((root[cwh] || parseInt10$1(stl[wh]) || parseInt10$1(root.style[wh]))\r\n                - (parseInt10$1(stl[plt]) || 0)\r\n                - (parseInt10$1(stl[prb]) || 0)) | 0;\r\n        };\r\n        SVGPainter.prototype.dispose = function () {\r\n            this.root.innerHTML = '';\r\n            this._svgRoot\r\n                = this._backgroundRoot\r\n                    = this._svgDom\r\n                        = this._backgroundNode\r\n                            = this._viewport\r\n                                = this.storage\r\n                                    = null;\r\n        };\r\n        SVGPainter.prototype.clear = function () {\r\n            if (this._viewport) {\r\n                this.root.removeChild(this._viewport);\r\n            }\r\n        };\r\n        SVGPainter.prototype.toDataURL = function () {\r\n            this.refresh();\r\n            var html = encodeURIComponent(this._svgDom.outerHTML.replace(/></g, '>\\n\\r<'));\r\n            return 'data:image/svg+xml;charset=UTF-8,' + html;\r\n        };\r\n        return SVGPainter;\r\n    }());\r\n    function createMethodNotSupport(method) {\r\n        return function () {\r\n            logError('In SVG mode painter not support method \"' + method + '\"');\r\n        };\r\n    }\n\n    registerPainter('svg', SVGPainter);\n\n    exports.Axis = Axis;\n    exports.List = List;\n    exports.Model = Model;\n    exports.PRIORITY = PRIORITY;\n    exports.color = color;\n    exports.connect = connect;\n    exports.dataTool = dataTool;\n    exports.dependencies = dependencies;\n    exports.disConnect = disConnect;\n    exports.disconnect = disconnect;\n    exports.dispose = dispose$1;\n    exports.env = env;\n    exports.extendChartView = extendChartView;\n    exports.extendComponentModel = extendComponentModel;\n    exports.extendComponentView = extendComponentView;\n    exports.extendSeriesModel = extendSeriesModel;\n    exports.format = format$1;\n    exports.getCoordinateSystemDimensions = getCoordinateSystemDimensions;\n    exports.getInstanceByDom = getInstanceByDom;\n    exports.getInstanceById = getInstanceById;\n    exports.getMap = getMap;\n    exports.graphic = graphic$1;\n    exports.helper = helper;\n    exports.init = init$1;\n    exports.matrix = matrix;\n    exports.number = number;\n    exports.parseGeoJSON = parseGeoJSON;\n    exports.parseGeoJson = parseGeoJson;\n    exports.registerAction = registerAction;\n    exports.registerCoordinateSystem = registerCoordinateSystem;\n    exports.registerLayout = registerLayout;\n    exports.registerLoading = registerLoading;\n    exports.registerLocale = registerLocale;\n    exports.registerMap = registerMap;\n    exports.registerPostUpdate = registerPostUpdate;\n    exports.registerPreprocessor = registerPreprocessor;\n    exports.registerProcessor = registerProcessor;\n    exports.registerTheme = registerTheme;\n    exports.registerTransform = registerTransform;\n    exports.registerVisual = registerVisual;\n    exports.setCanvasCreator = setCanvasCreator;\n    exports.throttle = throttle;\n    exports.time = time;\n    exports.util = ecUtil;\n    exports.vector = vector;\n    exports.version = version$1;\n    exports.zrender = zrender;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n"]}